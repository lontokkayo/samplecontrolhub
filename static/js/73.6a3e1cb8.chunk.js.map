{"version":3,"file":"static/js/73.6a3e1cb8.chunk.js","mappings":"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","sources":["assets/chat_step|sync|/^/chat_step_.*_off/.png$","assets/chat_step|sync|/^/chat_step_.*_on/.png$","components/DevAdminComponents/ChatMessages.js"],"sourcesContent":["var map = {\n\t\"./chat_step_1_off.png\": 29413,\n\t\"./chat_step_2_off.png\": 35290,\n\t\"./chat_step_3_off.png\": 38715,\n\t\"./chat_step_4_off.png\": 65256,\n\t\"./chat_step_5_off.png\": 58038,\n\t\"./chat_step_6_off.png\": 49232,\n\t\"./chat_step_7_off.png\": 88618\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 66516;","var map = {\n\t\"./chat_step_1_on.png\": 40027,\n\t\"./chat_step_2_on.png\": 22558,\n\t\"./chat_step_3_on.png\": 80851,\n\t\"./chat_step_4_on.png\": 14740,\n\t\"./chat_step_5_on.png\": 80904,\n\t\"./chat_step_6_on.png\": 81151,\n\t\"./chat_step_7_on.png\": 30443\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 82049;","import {\r\n    Box,\r\n    Button,\r\n    Center,\r\n    Flex,\r\n    HStack,\r\n    Icon,\r\n    Image as NativeImage,\r\n    Input,\r\n    Modal,\r\n    NativeBaseProvider,\r\n    Popover,\r\n    Spinner,\r\n    Stack,\r\n    Text,\r\n    VStack,\r\n    useBreakpointValue,\r\n    TextArea,\r\n    InputRightAddon,\r\n    InputGroup,\r\n    InputLeftAddon,\r\n    Select,\r\n    CheckIcon,\r\n    PresenceTransition,\r\n    CloseIcon,\r\n    ScrollView as ScrollViewNative,\r\n    Divider,\r\n    useDisclosure,\r\n    useDisclose,\r\n    FormControl,\r\n    Checkbox,\r\n    useToast,\r\n    Tooltip,\r\n    Progress,\r\n    Alert\r\n} from 'native-base';\r\nimport React, { useEffect, useRef, useState, useMemo, useCallback, useReducer } from 'react';\r\nimport {\r\n    Dimensions,\r\n    ImageBackground,\r\n    TouchableOpacity,\r\n    TouchableWithoutFeedback,\r\n    StyleSheet,\r\n    View,\r\n    PanResponder,\r\n    Animated,\r\n    InputAccessoryView,\r\n    FlatList,\r\n    ScrollView,\r\n    TouchableHighlight,\r\n    TextInput,\r\n    Image as RNImage,\r\n    Pressable,\r\n    Linking,\r\n    Modal as RNModal,\r\n    Platform,\r\n    SafeAreaView,\r\n} from 'react-native';\r\nimport 'react-native-gesture-handler';\r\nimport {\r\n    AntDesign,\r\n    FontAwesome,\r\n    Ionicons,\r\n    MaterialCommunityIcons,\r\n    MaterialIcons,\r\n    Entypo,\r\n    FontAwesome5,\r\n    EvilIcons\r\n} from 'react-native-vector-icons';\r\n// import { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport axios from 'axios';\r\nimport { createUserWithEmailAndPassword, fetchSignInMethodsForEmail, signOut } from 'firebase/auth';\r\nimport { addDoc, collection, doc, getDoc, getFirestore, onSnapshot, setDoc, arrayUnion, updateDoc, query, getDocs, orderBy, startAfter, limit, where, endBefore, endAt, limitToLast, collectionGroup, increment } from 'firebase/firestore';\r\nimport moment from 'moment';\r\nimport { authForCreateUser } from '../../firebasecontrolCreateUser';\r\nimport './../style.css';\r\nimport { projectControlFirestore, projectControlAuth, projectExtensionFirestore, projectExtensionAuth, projectControlFirebase, projectExtensionFirebase } from \"../../crossFirebase\";\r\nimport { launchImageLibrary } from 'react-native-image-picker';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL, listAll, deleteObject } from 'firebase/storage';\r\nimport FastImage from 'react-native-fast-image-web-support';\r\nimport MobileViewDrawer from './SideDrawer/MobileViewDrawer';\r\nimport SideDrawer from './SideDrawer/SideDrawer';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport DraggableFlatList from \"react-native-draggable-flatlist\";\r\nimport { Calendar, LocaleConfig } from 'react-native-calendars';\r\nimport { DragSortableView } from 'react-native-drag-sort';\r\nimport {\r\n    setVehicleListData,\r\n    setSupplyChainsCostsData,\r\n    setSelectedPaidTo,\r\n    setSelectedExpenseName,\r\n    setSupplyChainsCostsModalVisible,\r\n    setVehicleListSupplyChainsCostsData,\r\n    setDeleteImageVisible,\r\n    setSelectedImages,\r\n    setAddAnotherImages,\r\n    setIsAddPhotoVisible,\r\n    setUploadImagesModalVisible,\r\n    setUploadImagesButtonLoading,\r\n    setViewImagesModalVisible,\r\n    setViewImagesData,\r\n    setLoadingModalVisible,\r\n    setAddVehicleListData,\r\n    setEditVehicleModalVisible,\r\n    setFobPriceHistoryModalVisible,\r\n    setChatListData,\r\n    setChatListImageUrl,\r\n    setChatListLastVisible,\r\n    setLoadMoreLoading,\r\n    setNoMoreData,\r\n    setActiveChatId,\r\n    setChatListSearchText,\r\n    setChatMessagesData,\r\n    setChatMessageBoxLoading,\r\n    setSelectedChatData,\r\n    setReadByListModalVisible,\r\n    setLoadMoreMessagesLoading,\r\n    setNoMoreMessagesData,\r\n    setDeleteMessageTemplateVisible,\r\n    setInvoiceData,\r\n    setTransactionModalVisible,\r\n    setPreviewInvoiceVisible,\r\n    setSelectedCustomerData,\r\n    setPdfViewerModalVisible,\r\n    setSelectedFileUrl,\r\n    setIsLoading,\r\n    setLoginName,\r\n} from './redux/store';\r\n// import { TextInput } from 'react-native-gesture-handler';\r\nimport { nanoid } from 'nanoid';\r\nimport { cloneDeep } from 'lodash';\r\nimport StickyHeader from './Header/StickyHeader';\r\nimport { UsePagination } from './VehicleListComponent/UsePagination';\r\nimport Hyperlink from 'react-native-hyperlink';\r\nimport { HmacSHA256, enc } from 'crypto-js';\r\nimport { CRYPTO_KEY } from '@env';\r\nimport { captureRef } from 'react-native-view-shot';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport QRCode from 'react-native-qrcode-svg';\r\nimport { useRoute } from '@react-navigation/native';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// import { CollectionGroup } from 'firebase-admin/firestore';\r\nconst { width } = Dimensions.get('window');\r\nlet selectedScreen = 'CHAT MESSAGES'\r\nlet globalLastVisible;\r\nlet globalMessagesLastVisible;\r\nlet globalSearchText = '';\r\nlet globalCustomerId = '';\r\nlet globalChatId = '';\r\nlet globalImageUrl = '';\r\nlet globalCustomerCarName = '';\r\nlet globalCustomerFirstName = '';\r\nlet globalCustomerLastName = '';\r\n\r\nlet globalAdditionalNameArray = [];\r\n\r\nlet globalAdditionalPriceArray = [];\r\n\r\nlet globalMessageTemplateSelectedTitle = '';\r\n\r\nlet userEmail = projectControlAuth.currentUser.email;\r\n\r\nlet formattedIssuingDate = ''; // Initialize the variable outside the conditional rendering block\r\nlet formattedDueDate = '';\r\n\r\nlet transactionModalTitle = '';\r\n\r\nlet transactionModalContentValue = 0;\r\n\r\nlet ip = '';\r\nlet ipCountry = '';\r\n\r\nlet globalInvoiceVariable = {\r\n    carData: {\r\n\r\n    },\r\n    cfs: '',\r\n    placeOfDelivery: '',\r\n    departureCountry: '',\r\n    departurePort: '',\r\n    salesPerson: '',\r\n\r\n    discharge: {\r\n        port: '',\r\n        country: '',\r\n    },\r\n\r\n    consignee: {\r\n        sameAsBuyer: null,\r\n        name: '',\r\n        address: '',\r\n        contactNumber: '',\r\n        fax: '',\r\n        email: '',\r\n    },\r\n\r\n    notifyParty: {\r\n        sameAsConsignee: null,\r\n        name: '',\r\n        address: '',\r\n        contactNumber: '',\r\n        fax: '',\r\n        email: '',\r\n    },\r\n\r\n    paymentDetails: {\r\n        incoterms: '',\r\n        inspectionIsChecked: null,\r\n        inspectionName: '',\r\n        warrantyIsCheck: null,\r\n        warrantyAmount: 0,\r\n        fobPrice: 0,\r\n        freightPrice: 0,\r\n        insurancePrice: 0,\r\n        inspectionPrice: 0,\r\n        totalAmount: 0,\r\n        additionalName: [],\r\n        additionalPrice: [],\r\n    },\r\n\r\n    bankInformations: {\r\n        dueDate: '',\r\n        issuingDate: '',\r\n        bankAccount: {\r\n\r\n        },\r\n        paymentTerms: '',\r\n        salesAgreement: '',\r\n    },\r\n\r\n}\r\n\r\nlet globalSelectedPDFUrl = '';\r\nlet globalSelectedFileType = '';\r\n\r\n\r\nconst firestore = getFirestore();\r\n\r\nconst getEmailOfCurrentUser = () => {\r\n\r\n    const user = projectControlAuth.currentUser;\r\n    if (user) {\r\n        const email = user.email;\r\n        return email;\r\n    } else {\r\n        // console.log('No user is currently authenticated');\r\n        return null;\r\n    }\r\n};\r\n\r\n\r\n\r\nconst TimelineStatus = ({ data }) => {\r\n\r\n    const selectedChatData = useSelector(state => state.selectedChatData);\r\n\r\n    const changeIndex = data.findIndex(item => selectedChatData.stepIndicator.value < item.value);\r\n\r\n\r\n    return (\r\n        <View style={{ flexDirection: 'row', alignItems: 'center', paddingTop: 3, }}>\r\n            {/* Dots and individual line segments */}\r\n            {data.map((item, index) => (\r\n                <View key={index} style={{ flexDirection: 'row', alignItems: 'center' }}>\r\n                    {/* Dot */}\r\n                    <Tooltip label={item.title} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33' }}>\r\n                        <View style={{\r\n                            width: 20,\r\n                            height: 20,\r\n                            borderRadius: 10,\r\n                            backgroundColor: selectedChatData.stepIndicator.value < item.value ? '#C1C1C1' : '#abf7c7',\r\n                            justifyContent: 'center',\r\n                        }}>\r\n\r\n                            {selectedChatData.stepIndicator.value < item.value ? (\r\n                                <FastImage\r\n                                    source={{\r\n                                        uri: require(`../../assets/chat_step/chat_step_${item.value}_off.png`),\r\n                                        priority: FastImage.priority.normal,\r\n                                    }}\r\n                                    style={{\r\n                                        tintColor: 'rgba(128, 128, 128, 1)',\r\n                                        width: 15,\r\n                                        height: 15,\r\n                                        alignSelf: 'center',\r\n                                    }}\r\n                                    resizeMode={FastImage.resizeMode.stretch}\r\n                                />\r\n                            ) : (\r\n                                <FastImage\r\n                                    source={{\r\n                                        uri: require(`../../assets/chat_step/chat_step_${item.value}_on.png`),\r\n                                        priority: FastImage.priority.normal\r\n                                    }}\r\n                                    style={{\r\n                                        tintColor: 'rgba(128, 128, 128, 1)',\r\n                                        width: 15,\r\n                                        height: 15,\r\n                                        alignSelf: 'center',\r\n                                    }}\r\n                                    resizeMode={FastImage.resizeMode.stretch}\r\n                                />\r\n                            )}\r\n\r\n                        </View>\r\n                    </Tooltip>\r\n                    {/* Line Segment (except for the last dot) */}\r\n                    {index < data.length - 1 && (\r\n                        <View style={{\r\n                            height: 3,\r\n                            width: 20, // Adjust the width to match the space between the dots\r\n                            backgroundColor: selectedChatData.stepIndicator.value <= item.value ? '#C1C1C1' : '#abf7c7',\r\n                        }} />\r\n                    )}\r\n                </View>\r\n            ))}\r\n        </View>\r\n    );\r\n};\r\n\r\n\r\nconst statusData = [\r\n    { title: 'Negotiation', value: 1 },\r\n    { title: 'Issued Proforma Invoice', value: 2 },\r\n    { title: 'Order Item', value: 3 },\r\n    { title: 'Payment Confirmed', value: 4 },\r\n    { title: 'Shipping Schedule', value: 5 },\r\n    { title: 'Documents', value: 6 },\r\n    { title: 'Vehicle Received', value: 7 },\r\n    // Add more events as needed\r\n];\r\n\r\nconst LoadingModal = () => {\r\n    const loadingModalVisible = useSelector((state) => state.loadingModalVisible);\r\n\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                bottom: 0,\r\n                left: 0,\r\n                right: 0,\r\n                backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n                flex: 1,\r\n                display: loadingModalVisible ? 'flex' : 'none',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n            }}\r\n        >\r\n            {/* Content within the modal */}\r\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n                <Spinner size=\"lg\" color=\"white\" />\r\n                <Text style={{ color: 'white' }}>Loading, please wait!</Text>\r\n            </View>\r\n        </View>\r\n\r\n    );\r\n\r\n}\r\n\r\n// const SkeletonChatListLayout = () => {\r\n//     return (\r\n//         <SkeletonPlaceholder>\r\n//             <SkeletonPlaceholder.Item flexDirection=\"row\" alignItems=\"center\" padding={12}>\r\n//                 {/* Placeholder for Image */}\r\n//                 <SkeletonPlaceholder.Item width={60} height={60} borderRadius={30} />\r\n\r\n//                 {/* Placeholder for Texts */}\r\n//                 <SkeletonPlaceholder.Item flex={1} marginLeft={20}>\r\n//                     {/* Date */}\r\n//                     <SkeletonPlaceholder.Item width={80} height={12} marginBottom={6} />\r\n//                     {/* Car Name */}\r\n//                     <SkeletonPlaceholder.Item width={120} height={14} marginBottom={6} />\r\n//                     {/* Text First and Last */}\r\n//                     <SkeletonPlaceholder.Item width={140} height={14} marginBottom={6} />\r\n//                     {/* Last Message */}\r\n//                     <SkeletonPlaceholder.Item width={160} height={12} marginBottom={6} />\r\n//                 </SkeletonPlaceholder.Item>\r\n//             </SkeletonPlaceholder.Item>\r\n//         </SkeletonPlaceholder>\r\n//     );\r\n// };\r\n\r\nconst HeaderButton = ({ title, onPress, isActive, headerCount }) => {\r\n    const activeStyle = isActive ? { backgroundColor: '#E1EDF7' } : {};\r\n    const screenWidth = Dimensions.get('window').width;\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n    return (\r\n        <Pressable\r\n            onHoverIn={hoverIn}\r\n            onHoverOut={hoverOut}\r\n            focusable={false}\r\n            onPress={onPress}\r\n            style={{ backgroundColor: isHovered ? '#f2f2f2' : 'transparent', padding: 12, marginVertical: screenWidth > 1818 ? 10 : 2, borderWidth: 5, borderColor: 'transparent', marginLeft: 8, width: 195, flexDirection: 'row', alignItems: 'center', justifyContent: 'center', borderRadius: 5, ...activeStyle }}\r\n        >\r\n            <Text color={isActive ? '#0A78BE' : '#1C2B33'} fontSize={14} style={{ fontWeight: isActive ? 700 : 400, alignSelf: 'center', textAlign: 'center', }}>{title}</Text>\r\n            {headerCount}\r\n\r\n        </Pressable>\r\n    );\r\n};\r\n\r\nconst FilterButton = ({ title, onPress, isActive, iconActive, iconNotActive }) => {\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n    return (\r\n        <Pressable\r\n            focusable={false}\r\n            variant='ghost'\r\n            onPress={onPress}\r\n            onHoverIn={hoverIn}\r\n            onHoverOut={hoverOut}\r\n            style={{\r\n                padding: 5,\r\n                width: 100,\r\n                margin: 5,\r\n                flexDirection: 'row', // Align items in a row\r\n                alignItems: 'center', // Center items vertically\r\n                justifyContent: 'center',\r\n                borderRadius: 5,\r\n                backgroundColor: isActive ? '#E1EDF7' : (isHovered ? '#d7d7d9' : '#ECEDF0'),\r\n            }}\r\n        >\r\n            {isActive ? iconActive : iconNotActive}\r\n            <Text color={isActive ? '#0A78BE' : '#1C2B33'} fontSize={14} style={{ fontWeight: isActive ? 700 : 400, marginLeft: 5, }}>{title}</Text>\r\n\r\n\r\n        </Pressable>\r\n    );\r\n};\r\n\r\nconst formatDate = (timestamp) => {\r\n    const currentDate = new Date();\r\n    const formattedTimestamp = timestamp.replace(' at ', 'T').replace(/\\//g, '-');\r\n    const givenDate = new Date(formattedTimestamp);\r\n\r\n    // Resetting the time part to compare dates only\r\n    const currentFormattedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\r\n    const givenFormattedDate = new Date(givenDate.getFullYear(), givenDate.getMonth(), givenDate.getDate());\r\n\r\n    // Check if the dates are the same\r\n    if (givenFormattedDate.getTime() === currentFormattedDate.getTime()) {\r\n        return \"This day\";\r\n    }\r\n\r\n    const oneDay = 24 * 60 * 60 * 1000;\r\n    const startOfWeek = new Date();\r\n    startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay() + (startOfWeek.getDay() === 0 ? -6 : 1));\r\n    startOfWeek.setHours(0, 0, 0, 0);\r\n\r\n    // Check if the date is within this week\r\n    if (givenDate >= startOfWeek && givenDate < currentFormattedDate) {\r\n        return givenDate.toLocaleDateString('en-US', { weekday: 'short' });\r\n    }\r\n\r\n    // Check if the date is within this year\r\n    const startOfYear = new Date(new Date().getFullYear(), 0, 1);\r\n    if (givenDate >= startOfYear) {\r\n        return givenDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    }\r\n\r\n    // If the date is not within this year\r\n    return givenDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\r\n};\r\n\r\nconst SkeletonChatListLayout = () => {\r\n\r\n    return (\r\n        <>\r\n            <View // Add a unique key here\r\n                style={{\r\n                    padding: 12,\r\n                    alignItems: 'flex-start',\r\n                    flexDirection: 'row',\r\n                    backgroundColor: 'white',\r\n                }}\r\n            >\r\n                {/* Skeleton for the image */}\r\n                <View\r\n                    style={{\r\n                        width: 60,\r\n                        height: 60,\r\n                        borderRadius: 30,\r\n                        backgroundColor: '#e0e0e0',\r\n                        marginRight: 12,\r\n                    }}\r\n                />\r\n                {/* Skeleton for the text */}\r\n                <View style={{ flex: 1 }}>\r\n                    {Array.from({ length: 3 }).map((_, subIndex) => (\r\n                        <View\r\n                            key={`text-${subIndex}`}  // Add a unique key here for each text line\r\n                            style={{\r\n                                height: 10,\r\n                                backgroundColor: '#e0e0e0',\r\n                                marginBottom: 6,\r\n                                width: '80%',\r\n                                borderRadius: 4,\r\n                            }}\r\n                        />\r\n                    ))}\r\n                    <View style={{\r\n                        position: 'absolute',\r\n                        right: 10, height: 10,\r\n                        backgroundColor: '#e0e0e0',\r\n                        marginBottom: 6,\r\n                        width: '5%',\r\n                        borderRadius: 4,\r\n                    }} />\r\n                </View>\r\n            </View>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\n\r\n\r\nconst DeleteMessageTemplateYesNo = ({ handleDeleteMessageTemplateClose }) => {\r\n\r\n    const deleteMessageTemplateVisible = useSelector((state) => state.deleteMessageTemplateVisible);\r\n    const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n    const selectedTitle = globalMessageTemplateSelectedTitle;\r\n    const [isDeleteLoading, setIsDeleteLoading] = useState(false);\r\n    const handleClose = () => {\r\n        handleDeleteMessageTemplateClose();\r\n\r\n    }\r\n\r\n\r\n    const deleteMessageTemplate = async (titleToDelete) => {\r\n        const documentRef = doc(projectControlFirestore, 'MessageTemplate', email);\r\n        setIsDeleteLoading(true);\r\n        try {\r\n            // Fetch current data\r\n            const docSnap = await getDoc(documentRef);\r\n\r\n            if (docSnap.exists()) {\r\n                let messageTemplates = docSnap.data().messageTemplate || [];\r\n\r\n                // Filter out the item with the specified title\r\n                const updatedTemplates = messageTemplates.filter(template => template.title !== titleToDelete);\r\n\r\n                // Update the document with the new array\r\n                await updateDoc(documentRef, { messageTemplate: updatedTemplates });\r\n\r\n                console.log('Item successfully deleted');\r\n                setIsDeleteLoading(false);\r\n                handleClose();\r\n            } else {\r\n                console.log('Document does not exist');\r\n                setIsDeleteLoading(false);\r\n\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting item: ', error);\r\n            setIsDeleteLoading(false);\r\n\r\n        }\r\n    };\r\n\r\n    return (\r\n\r\n        <Modal\r\n            isOpen={deleteMessageTemplateVisible}\r\n            onClose={handleClose}\r\n        >\r\n            <Modal.Content>\r\n                <Modal.CloseButton />\r\n                <Modal.Header >Delete Message Template?</Modal.Header>\r\n                <Modal.Body>\r\n                    <View style={{ flex: 1, }}>\r\n                        <Text style={{ fontWeight: 400, }}>Are you sure you want to delete the selected message template?</Text>\r\n                    </View>\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer >\r\n                    <Button.Group variant=\"ghost\" space=\"2\">\r\n                        <Button style={{ width: 80, height: 36, }} onPress={handleClose} variant={'solid'} colorScheme={'warmGray'}>Cancel</Button>\r\n                        <Button isLoading={isDeleteLoading ? true : false} onPress={() => deleteMessageTemplate(selectedTitle)} style={{ padding: 16, height: 36, }} variant={'solid'} colorScheme={'error'}>Delete</Button>\r\n                    </Button.Group>\r\n                </Modal.Footer>\r\n            </Modal.Content>\r\n        </Modal>\r\n\r\n\r\n    );\r\n};\r\n\r\nconst MessageTemplateItem = ({ setOriginalTitle, addVisible, titleInputRef, valueInputRef, setAddVisible, item, textInputRef, setPopoverOpen }) => {\r\n    const [isTemplateItemHovered, setIsTemplateItemHovered] = useState(false);\r\n    const [isTemplateMenuHovered, setIsTemplateMenuHovered] = useState(false);\r\n    const [isTemplateEditHovered, setIsTemplateEditHovered] = useState(false);\r\n    const [isTemplateDeleteHovered, setIsTemplateDeleteHovered] = useState(false);\r\n    const [templateMenuOpen, setTemplateMenuOpen] = useState(false);\r\n    const [currentItem, setCurrentItem] = useState(null);\r\n    const [addIsVisible, setIsAddVisible] = useState(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const onPress = (item) => {\r\n        textInputRef.current.value = item.value;\r\n        setPopoverOpen(false);\r\n    };\r\n\r\n    const onEditPress = (item) => {\r\n\r\n        setAddVisible(true);\r\n        // setCurrentItem(item);\r\n        setIsAddVisible(true);\r\n        setTemplateMenuOpen(false);\r\n        titleInputRef.current.value = item.title;\r\n        valueInputRef.current.value = item.value;\r\n        setOriginalTitle(item.title);\r\n\r\n    };\r\n\r\n    // useEffect(() => {\r\n\r\n\r\n    //     if (addIsVisible == true) {\r\n    //         console.log(addIsVisible);\r\n    //         titleInputRef.current.value = currentItem.title;\r\n    //         valueInputRef.current.value = currentItem.value;\r\n    //     }\r\n    //     if (titleInputRef.current && valueInputRef.current) {\r\n    //         titleInputRef.current.value = currentItem.title;\r\n    //         valueInputRef.current.value = currentItem.value;\r\n    //     }\r\n    // }, [currentItem]);\r\n\r\n    const handleDeletePress = (title) => {\r\n\r\n        dispatch(setDeleteMessageTemplateVisible(true));\r\n        globalMessageTemplateSelectedTitle = title;\r\n    }\r\n\r\n\r\n    return (\r\n        <Pressable\r\n            onPress={() => onPress(item)}\r\n            onHoverIn={() => setIsTemplateItemHovered(true)}\r\n            onHoverOut={() => setIsTemplateItemHovered(false)}\r\n            style={{\r\n                padding: 10,\r\n                backgroundColor: isTemplateItemHovered ? '#f2f2f2' : 'transparent',\r\n                flex: 1,\r\n                borderRadius: 5,\r\n            }}>\r\n            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                <Text style={{ fontWeight: '700', flex: 1, }} numberOfLines={1} ellipsizeMode='tail'>{item.title}</Text>\r\n                <Popover\r\n                    isOpen={templateMenuOpen}\r\n                    onClose={() => setTemplateMenuOpen(false)}\r\n                    trigger={(triggerProps) => {\r\n                        return <Pressable\r\n                            {...triggerProps}\r\n                            onPress={() => setTemplateMenuOpen(true)}\r\n                            onHoverIn={() => setIsTemplateMenuHovered(true)}\r\n                            onHoverOut={() => setIsTemplateMenuHovered(false)}\r\n                            style={{ backgroundColor: isTemplateMenuHovered ? '#dedede' : 'transparent', padding: 5, justifyContent: 'center', borderRadius: 5, }}>\r\n                            <Entypo size={16} name='dots-three-horizontal' color='#171717' />\r\n                        </Pressable>\r\n                    }}\r\n\r\n                >\r\n                    <Popover.Content>\r\n\r\n                        <Pressable\r\n                            onPress={() => onEditPress(item)}\r\n                            onHoverIn={() => setIsTemplateEditHovered(true)}\r\n                            onHoverOut={() => setIsTemplateEditHovered(false)} style={{ flex: 1, width: 50, backgroundColor: isTemplateEditHovered ? '#dedede' : 'white', padding: 5, }} focusable={false}>\r\n                            <Text>Edit</Text>\r\n                        </Pressable>\r\n\r\n                        <Pressable\r\n                            onPress={() => handleDeletePress(item.title)}\r\n                            onHoverIn={() => setIsTemplateDeleteHovered(true)}\r\n                            onHoverOut={() => setIsTemplateDeleteHovered(false)} style={{ flex: 1, width: 50, backgroundColor: isTemplateDeleteHovered ? '#dedede' : 'white', padding: 5, }} focusable={false}>\r\n                            <Text>Delete</Text>\r\n                        </Pressable>\r\n\r\n                    </Popover.Content>\r\n                </Popover>\r\n            </View>\r\n            <Text style={{ fontWeight: '400', fontSize: 12, }} numberOfLines={1} ellipsizeMode='tail'>{item.value}</Text>\r\n        </Pressable>\r\n\r\n\r\n    );\r\n}\r\n\r\nconst MessageTemplate = ({ textInputRef }) => {\r\n    const dispatch = useDispatch();\r\n    const [isTemplateHovered, setIsTemplateHovered] = useState(false);\r\n    const [isAddHovered, setIsAddHovered] = useState(false);\r\n    const [popoverOpen, setPopoverOpen] = useState(false);\r\n    const [searchText, setSearchText] = useState('');\r\n    const [filteredData, setFilteredData] = useState([]);\r\n    const [addVisible, setAddVisible] = useState(false);\r\n\r\n    const [isCancelHovered, setIsCancelHovered] = useState(false);\r\n    const [isSaveHovered, setIsSaveHovered] = useState(false);\r\n    const [originalTitle, setOriginalTitle] = useState('');\r\n\r\n\r\n    const [saveLoading, setSaveLoading] = useState(false);\r\n\r\n    const [templateData, setTemplateData] = useState([]);\r\n\r\n    const searchInputRef = useRef(null);\r\n    const titleInputRef = useRef(null);\r\n    const valueInputRef = useRef(null);\r\n\r\n    const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n    const data = [\r\n        { title: 'Message 1', value: 'Sample Message 1' },\r\n        { title: 'Message 2', value: 'Sample Message 2' },\r\n        { title: 'Message 3', value: 'Sample Message 3' },\r\n    ];\r\n\r\n\r\n\r\n    const saveMessageTemplate = async () => {\r\n        setSaveLoading(true);\r\n        const documentRef = doc(projectControlFirestore, 'MessageTemplate', email);\r\n\r\n        try {\r\n            // Fetch current data\r\n            const docSnap = await getDoc(documentRef);\r\n\r\n            let messageTemplates = [];\r\n            const newTitle = titleInputRef.current?.value;\r\n            const newValue = valueInputRef.current?.value;\r\n\r\n            if (newTitle && newValue) {\r\n                if (docSnap.exists()) {\r\n                    // Document exists, get the current templates\r\n                    messageTemplates = docSnap.data().messageTemplate || [];\r\n\r\n                    // Find index based on the original title\r\n                    const index = messageTemplates.findIndex(template => template.title === originalTitle);\r\n\r\n                    if (index !== -1) {\r\n                        // Update existing template\r\n                        messageTemplates[index] = { title: newTitle, value: newValue };\r\n                    } else {\r\n                        // Add new template if original title does not exist\r\n                        messageTemplates.push({ title: newTitle, value: newValue });\r\n                    }\r\n                } else {\r\n                    // Document does not exist, create a new array with the new template\r\n                    console.log('Creating a new document');\r\n                    messageTemplates = [{ title: newTitle, value: newValue }];\r\n                }\r\n\r\n                // Update or set the document\r\n                await setDoc(documentRef, { messageTemplate: messageTemplates }, { merge: true });\r\n\r\n                console.log('Document successfully updated or created');\r\n            } else {\r\n                console.log('Title or value is empty');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating or creating document: ', error);\r\n        } finally {\r\n            setSaveLoading(false);\r\n            handleCancelPressed();\r\n        }\r\n    };\r\n\r\n\r\n    const handleSearch = (text) => {\r\n        setSearchText(text);\r\n        const filtered = templateData.filter(item =>\r\n            item.title.toLowerCase().includes(text.toLowerCase()) ||\r\n            item.value.toLowerCase().includes(text.toLowerCase())\r\n        );\r\n        setFilteredData(filtered);\r\n    };\r\n\r\n    const handlePopoverClose = () => {\r\n        setPopoverOpen(false);\r\n        setAddVisible(false);\r\n        setIsAddHovered(false);\r\n    };\r\n\r\n    const handleCancelPressed = () => {\r\n        setIsAddHovered(false);\r\n        setAddVisible(false);\r\n        setIsCancelHovered(false)\r\n        setIsSaveHovered(false)\r\n        titleInputRef.current.clear();\r\n        valueInputRef.current.clear();\r\n\r\n    };\r\n\r\n    const renderItem = ({ item }) => {\r\n        return <MessageTemplateItem setOriginalTitle={setOriginalTitle} addVisible={addVisible} titleInputRef={titleInputRef} valueInputRef={valueInputRef} setAddVisible={setAddVisible} item={item} textInputRef={textInputRef} setPopoverOpen={setPopoverOpen} />;\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const docRef = doc(projectControlFirestore, \"MessageTemplate\", email);\r\n\r\n        const unsubscribe = onSnapshot(docRef, (docSnap) => {\r\n            if (docSnap.exists()) {\r\n                let arrayFieldData = docSnap.data().messageTemplate;\r\n\r\n                // Sort the array by title\r\n                arrayFieldData.sort((a, b) => {\r\n                    let titleA = a.title.toUpperCase(); // ignore upper and lowercase\r\n                    let titleB = b.title.toUpperCase(); // ignore upper and lowercase\r\n                    if (titleA < titleB) {\r\n                        return -1;\r\n                    }\r\n                    if (titleA > titleB) {\r\n                        return 1;\r\n                    }\r\n                    // titles must be equal\r\n                    return 0;\r\n                });\r\n\r\n                setTemplateData(arrayFieldData);\r\n            } else {\r\n                console.log(\"No such document!\");\r\n            }\r\n        }, (error) => {\r\n            console.error(\"Error fetching document:\", error);\r\n        });\r\n\r\n        // Cleanup subscription on unmount\r\n        return () => unsubscribe();\r\n    }, [popoverOpen]);\r\n\r\n    const handleDeleteMessageTemplateClose = () => {\r\n\r\n        dispatch(setDeleteMessageTemplateVisible(false));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <DeleteMessageTemplateYesNo handleDeleteMessageTemplateClose={handleDeleteMessageTemplateClose} />\r\n            <Popover\r\n                isOpen={popoverOpen}\r\n                onClose={handlePopoverClose}\r\n                initialFocusRef={searchInputRef}\r\n                finalFocusRef={textInputRef}\r\n                placement={'top'}\r\n                trigger={(triggerProps) => {\r\n                    return <Pressable\r\n                        focusable={false}\r\n                        {...triggerProps}\r\n                        onPress={() => setPopoverOpen(true)}\r\n                        onHoverIn={() => setIsTemplateHovered(true)}\r\n                        onHoverOut={() => setIsTemplateHovered(false)}\r\n                        style={({ pressed }) => [\r\n                            {\r\n                                bottom: 0,\r\n                                right: 100,\r\n                                position: 'absolute',\r\n                                borderRadius: 20,\r\n                                opacity: pressed ? 0.5 : 1\r\n                            }\r\n                        ]}\r\n\r\n                    >\r\n                        <Ionicons name=\"chatbox-ellipses-outline\" size={24} color={isTemplateHovered ? \"#0A78BE\" : \"#C1C1C1\"} />\r\n                    </Pressable>\r\n                }} >\r\n                <Popover.Content w={400} marginRight={10} >\r\n                    <Popover.Arrow />\r\n                    <View style={{ display: addVisible ? 'flex' : 'none', }}><Popover.Header backgroundColor={'white'}>\r\n                        <View style={{ flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={{ fontWeight: 700, fontSize: 16, flex: 1 }}>Create a message template</Text>\r\n                        </View>\r\n                    </Popover.Header>\r\n                        <Popover.Body backgroundColor={'white'} height={250}>\r\n                            <Text style={{ fontWeight: 700, }}>Title</Text>\r\n                            <TextInput\r\n                                ref={titleInputRef}\r\n                                placeholder='Input Title'\r\n                                placeholderTextColor='#9B9E9F'\r\n                                underlineColorAndroid=\"transparent\"\r\n                                style={{ height: 40, padding: 10, outlineStyle: 'none', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5 }} />\r\n                            <br />\r\n                            <Text style={{ fontWeight: 700, }}>Message</Text>\r\n                            <TextInput\r\n                                multiline\r\n                                ref={valueInputRef}\r\n                                placeholder='Input Message'\r\n                                placeholderTextColor='#9B9E9F'\r\n                                underlineColorAndroid=\"transparent\"\r\n                                style={{ height: 100, padding: 10, outlineStyle: 'none', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5 }} />\r\n\r\n                        </Popover.Body>\r\n                        <Popover.Footer backgroundColor={'white'}>\r\n                            <View style={{ height: 30, flexDirection: 'row', justifyContent: 'center', }}>\r\n                                <Pressable\r\n                                    onHoverIn={() => setIsCancelHovered(true)}\r\n                                    onHoverOut={() => setIsCancelHovered(false)}\r\n                                    onPress={handleCancelPressed}\r\n                                    style={{ backgroundColor: isCancelHovered ? '#DADADA' : 'white', width: 60, borderRadius: 5, padding: 5, borderWidth: 1, borderColor: '#DADDE1', marginHorizontal: 5, }}>\r\n                                    <Text style={{ textAlign: 'center', fontWeight: 500, }}>Cancel</Text>\r\n                                </Pressable>\r\n\r\n                                <Pressable\r\n                                    onPress={saveMessageTemplate}\r\n                                    onHoverIn={() => setIsSaveHovered(true)}\r\n                                    onHoverOut={() => setIsSaveHovered(false)}\r\n                                    style={{ backgroundColor: isSaveHovered ? '#107a37' : '#16A34A', width: 60, borderRadius: 5, padding: 5, borderWidth: 1, borderColor: '#DADDE1', marginHorizontal: 5, }}>\r\n                                    {saveLoading ?\r\n                                        (<Spinner\r\n                                            animating\r\n                                            size=\"sm\"\r\n                                            color={'white'}\r\n                                        />) :\r\n                                        (\r\n                                            <Text style={{ textAlign: 'center', color: 'white', fontWeight: 500, }}>Save</Text>\r\n                                        )}\r\n                                </Pressable>\r\n                            </View>\r\n                        </Popover.Footer>\r\n                    </View><View style={{ display: !addVisible ? 'flex' : 'none', }}><Popover.Header backgroundColor={'white'}>\r\n                        <View style={{ flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={{ fontWeight: 700, fontSize: 16, flex: 1 }}>Message Template</Text>\r\n                            <Pressable focusable={false} onPress={() => setAddVisible(true)} onHoverIn={() => setIsAddHovered(true)} onHoverOut={() => setIsAddHovered(false)}>\r\n                                <Text style={{ fontWeight: 400, fontSize: 16, color: '#1B81C2', textDecorationLine: isAddHovered ? 'underline' : 'none' }}>+ ADD</Text>\r\n                            </Pressable>\r\n                        </View>\r\n                    </Popover.Header>\r\n                        <Popover.Body backgroundColor={'white'} height={300}>\r\n                            <TextInput\r\n                                ref={searchInputRef}\r\n                                placeholder='Search'\r\n                                placeholderTextColor='#9B9E9F'\r\n                                underlineColorAndroid=\"transparent\"\r\n                                style={{ height: 40, padding: 10, outlineStyle: 'none', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5, marginBottom: 5, }}\r\n                                keyboardType='search'\r\n                                onChangeText={handleSearch}\r\n                                value={searchText} />\r\n                            {templateData.length > 0 || filteredData.length > 0 ? (\r\n                                <FlatList\r\n                                    style={{ height: 100, borderBottomLeftRadius: 5 }}\r\n                                    renderItem={renderItem}\r\n                                    keyExtractor={item => item.title.toString()}\r\n                                    data={searchText ? filteredData : templateData} />\r\n                            ) : (\r\n                                <Text style={{ fontWeight: 700, alignSelf: 'center', }}>No message template found</Text>\r\n                            )}\r\n\r\n                        </Popover.Body>\r\n                    </View>\r\n                </Popover.Content>\r\n            </Popover>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\nconst FileDisplay = ({ file, onRemove }) => {\r\n    const iconSize = 24;\r\n    if (!file) return null;  // Define the icon size\r\n\r\n\r\n\r\n\r\n    const getFileIcon = (type) => {\r\n        if (type.includes('pdf')) {\r\n            return <MaterialIcons name={'picture-as-pdf'} size={iconSize} color=\"#FF0000\" />; // Red for PDF\r\n        }\r\n        if (type.includes('msword') || type.includes('wordprocessingml')) {\r\n            return <MaterialCommunityIcons name={'microsoft-word'} size={iconSize} color=\"#2B579A\" />; // Blue for Word\r\n        }\r\n        if (type.includes('vnd.ms-excel') || type.includes('spreadsheetml') || type === 'text/csv') {\r\n            return <MaterialCommunityIcons name={'microsoft-excel'} size={iconSize} color=\"#217346\" />; // Green for Excel and CSV\r\n        }\r\n        if (type.includes('rar') || type.includes('x-rar-compressed') || type.includes('x-compressed')) {\r\n            return <FastImage\r\n                source={{ uri: require('../../assets/rar_icon.png'), priority: FastImage.priority.high }}\r\n                style={{\r\n                    width: 24,\r\n                    height: 24,\r\n                }}\r\n                resizeMode={FastImage.resizeMode.cover}\r\n            />; // Color of your choice for RAR files\r\n        }\r\n\r\n        return <MaterialIcons name=\"insert-drive-file\" size={iconSize} color=\"black\" />; // Default color for others\r\n    };\r\n\r\n    return (\r\n        <View style={{ flexDirection: 'row', alignItems: 'center', margin: 5 }}>\r\n            {getFileIcon(file.type)}\r\n            <Text style={{ marginLeft: 10 }}>{file.name}</Text>\r\n            <Pressable onPress={onRemove}>\r\n                <MaterialIcons name=\"close\" size={20} color=\"black\" />\r\n            </Pressable>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst ChatInputText = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n\r\n    const [isSendHovered, setIsSendHovered] = useState(false);\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [selectedFilePreview, setSelectedFilePreview] = useState(null);\r\n    const [selectedImage, setSelectedImage] = useState(null);\r\n    const [imageUri, setImageUri] = useState(null);\r\n    const [fileUri, setFileUri] = useState(null);\r\n    const [fileName, setFileName] = useState('');\r\n    const [isSendImageHovered, setIsSendImageHovered] = useState(false);\r\n    const [isSendAttachmentHovered, setIsSendAttachmentHovered] = useState(false);\r\n    const [sendIsLoading, setSendIsLoading] = useState(false);\r\n    const textInputRef = useRef(null);\r\n\r\n    const removeImage = () => {\r\n        setImageUri(null);\r\n        setSelectedImage(null);\r\n        setFileName(null);\r\n\r\n    };\r\n\r\n    const removeFile = () => {\r\n        setSelectedFile(null);\r\n        setSelectedFilePreview(null);\r\n        setFileUri(null);\r\n        setFileName(null);\r\n\r\n\r\n    };\r\n\r\n    const selectFile = async () => {\r\n        const maxFileSize = 10 * 1024 * 1024; // 5MB in bytes\r\n\r\n        if (Platform.OS === 'web') {\r\n            return new Promise((resolve, reject) => {\r\n                const input = document.createElement('input');\r\n                input.type = 'file';\r\n                input.accept = '.pdf, .doc, .docx, .xls, .xlsx, .rar'; // Acceptable file types\r\n                input.onchange = () => {\r\n                    const file = input.files[0];\r\n\r\n                    if (file) {\r\n                        if (![\r\n                            'application/pdf',\r\n                            'application/msword',\r\n                            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n                            'application/vnd.ms-excel',\r\n                            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n                            'application/x-rar-compressed',\r\n                            'application/x-compressed',\r\n                            'text/csv'\r\n                        ].includes(file.type)) {\r\n                            alert('File type not allowed');\r\n                            reject('File type not allowed');\r\n                            return;\r\n                        }\r\n\r\n                        if (file.size > maxFileSize) {\r\n                            alert('File size should be less than 10MB');\r\n                            reject('File size should be less than 10MB');\r\n                            return;\r\n                        }\r\n                        removeImage();\r\n                        // Read the file as a Data URL and set it in the state\r\n                        const reader = new FileReader();\r\n                        reader.onload = (e) => {\r\n                            setFileUri(e.target.result);\r\n                            resolve(file);\r\n                            setSelectedFile(file);\r\n                            setSelectedFilePreview({ name: file.name, type: file.type });\r\n                            setFileName(file.name);\r\n                            textInputRef.current.focus();\r\n                        };\r\n                        reader.onerror = (e) => {\r\n                            reject(e);\r\n                        };\r\n                        reader.readAsDataURL(file);\r\n                    }\r\n                };\r\n                input.click();\r\n            });\r\n        } else {\r\n            return new Promise((resolve, reject) => {\r\n                launchImageLibrary({ mediaType: 'photo' }, (response) => {\r\n                    if (response.didCancel) {\r\n                        reject('User cancelled image picker');\r\n                    } else if (response.errorCode) {\r\n                        reject(response.errorMessage);\r\n                    } else {\r\n                        const asset = response.assets[0];\r\n\r\n                        if (!asset.type.startsWith('image/')) {\r\n                            reject('Only image files are allowed');\r\n                            alert('Only image files are allowed');\r\n\r\n                            return;\r\n                        }\r\n\r\n                        if (asset.fileSize > maxFileSize) {\r\n                            reject('File size should be less than 10MB');\r\n                            alert('File size should be less than 10MB');\r\n                            return;\r\n                        }\r\n\r\n                        const selectedImageUri = asset.uri;\r\n                        const fileName = asset.fileName || 'Unknown name';\r\n                        resolve({ uri: selectedImageUri, name: fileName });\r\n                        setImageUri(selectedImageUri); // Set imageUri here\r\n                        console.log(`File name: ${fileName}`);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    const selectImage = async () => {\r\n        const maxFileSize = 10 * 1024 * 1024; // 5MB in bytes\r\n\r\n        if (Platform.OS === 'web') {\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const input = document.createElement('input');\r\n                input.type = 'file';\r\n                input.accept = 'image/*';\r\n                input.onchange = () => {\r\n                    const file = input.files[0];\r\n                    if (file) {\r\n\r\n                        if (!file.type.startsWith('image/')) {\r\n                            reject('Only image files are allowed');\r\n                            alert('Only image files are allowed');\r\n\r\n                            return;\r\n                        }\r\n\r\n                        if (file.size > maxFileSize) {\r\n                            reject('File size should be less than 10MB');\r\n                            alert('File size should be less than 10MB');\r\n\r\n                            return;\r\n                        }\r\n\r\n                        removeFile();\r\n                        const reader = new FileReader();\r\n                        reader.readAsDataURL(file);\r\n                        reader.onload = () => {\r\n                            resolve({ dataUrl: reader.result, name: file.name });\r\n                            setImageUri(reader.result); // Set imageUri here\r\n                            setFileName(file.name);\r\n                            console.log(`File name: ${file.name}`);\r\n                        };\r\n                        setSelectedImage(file);\r\n                        reader.onerror = error => reject(error);\r\n                    }\r\n                };\r\n                input.click();\r\n            });\r\n        } else {\r\n            return new Promise((resolve, reject) => {\r\n                launchImageLibrary({ mediaType: 'photo' }, (response) => {\r\n                    if (response.didCancel) {\r\n                        reject('User cancelled image picker');\r\n                    } else if (response.errorCode) {\r\n                        reject(response.errorMessage);\r\n                    } else {\r\n                        const asset = response.assets[0];\r\n\r\n                        if (!asset.type.startsWith('image/')) {\r\n                            reject('Only image files are allowed');\r\n                            alert('Only image files are allowed');\r\n                            return;\r\n                        }\r\n\r\n                        if (asset.fileSize > maxFileSize) {\r\n                            reject('File size should be less than 10MB');\r\n                            alert('Only image files are allowed');\r\n                            return;\r\n                        }\r\n\r\n                        const selectedImageUri = asset.uri;\r\n                        const fileName = asset.fileName || 'Unknown name';\r\n                        resolve({ uri: selectedImageUri, name: fileName });\r\n                        setImageUri(selectedImageUri); // Set imageUri here\r\n                        console.log(`File name: ${fileName}`);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    const resizeImage = (file) => {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = (event) => {\r\n                const img = new Image();\r\n                img.src = event.target.result;\r\n                img.onload = () => {\r\n                    const canvas = document.createElement('canvas');\r\n                    const ctx = canvas.getContext('2d');\r\n\r\n                    // Set your desired image size here\r\n                    const maxWidth = 800; // Example value\r\n                    const maxHeight = 800; // Example value\r\n                    let width = img.width;\r\n                    let height = img.height;\r\n\r\n                    if (width > height) {\r\n                        if (width > maxWidth) {\r\n                            height *= maxWidth / width;\r\n                            width = maxWidth;\r\n                        }\r\n                    } else {\r\n                        if (height > maxHeight) {\r\n                            width *= maxHeight / height;\r\n                            height = maxHeight;\r\n                        }\r\n                    }\r\n\r\n                    canvas.width = width;\r\n                    canvas.height = height;\r\n                    ctx.drawImage(img, 0, 0, width, height);\r\n                    canvas.toBlob((blob) => {\r\n                        resolve(new File([blob], file.name, {\r\n                            type: 'image/jpeg',\r\n                            lastModified: Date.now()\r\n                        }));\r\n                    }, 'image/jpeg', 0.7); // Adjust the quality (0.7 is a good balance between quality and file size)\r\n                };\r\n                img.onerror = error => reject(error);\r\n            };\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    };\r\n\r\n    const addFileMessage = async () => {\r\n        setSendIsLoading(true);\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const formattedTimeForFile = moment(datetime).format('MMDDYYYYHHmmss.SSS');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        const inputValue = textInputRef.current?.value;\r\n\r\n        textInputRef.current.clear();\r\n        textInputRef.current.focus();\r\n        removeFile();\r\n\r\n        const storage = getStorage(projectExtensionFirebase);\r\n\r\n        if (fileUri) { // Assuming you have a fileUri state for the selected file\r\n\r\n            try {\r\n\r\n                let fileUrl = null;\r\n                if (fileUri) {\r\n                    // Upload file and get URL\r\n                    const fileRef = ref(storage, `ChatFiles/${selectedChatData.id}/C-HUB_${formattedTimeForFile}/${fileName}`);\r\n                    const uploadResult = await uploadBytes(fileRef, selectedFile);\r\n                    fileUrl = await getDownloadURL(uploadResult.ref);\r\n                }\r\n\r\n                // Adding the message to the 'messages' subcollection\r\n                await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                    text: inputValue.trim(),\r\n                    sender: email,\r\n                    timestamp: formattedTime,\r\n                    ip: ip,\r\n                    ipCountry: ipCountry,\r\n                    file: {\r\n                        name: fileName,\r\n                        type: 'attachment', // Set the file type\r\n                        url: fileUrl,\r\n                    } // Include file URL if available\r\n                });\r\n\r\n                // Updating the main chat document with the latest message details\r\n                await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                    lastMessageSender: email,\r\n                    lastMessage: `Sent an attachment`,\r\n                    lastMessageDate: formattedTime,\r\n                    customerRead: false,\r\n                    read: true,\r\n                    readBy: [email],\r\n                });\r\n\r\n                setSendIsLoading(false);\r\n\r\n            } catch (e) {\r\n                console.error('Error adding document: ', e);\r\n            }\r\n        }\r\n        else {\r\n            setSendIsLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    const addImageMessage = async () => {\r\n        setSendIsLoading(true);\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const formattedTimeForFile = moment(datetime).format('MMDDYYYYHHmmss.SSS');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        const inputValue = textInputRef.current?.value;\r\n\r\n\r\n\r\n        const storage = getStorage(projectExtensionFirebase);\r\n\r\n        if (imageUri) { // Assuming imageFile holds the file to be uploaded\r\n\r\n            textInputRef.current.clear();\r\n            textInputRef.current.focus();\r\n            removeImage();\r\n\r\n            try {\r\n                let imageUrl = null;\r\n                if (imageUri) {\r\n                    // Upload image and get URL\r\n                    const resizedImage = await resizeImage(selectedImage);\r\n                    const imageRef = ref(storage, `ChatFiles/${selectedChatData.id}/C-HUB_${formattedTimeForFile}/${fileName}`);\r\n                    const uploadResult = await uploadBytes(imageRef, resizedImage);\r\n                    imageUrl = await getDownloadURL(uploadResult.ref);\r\n                }\r\n\r\n                // Adding the message to the 'messages' subcollection\r\n                await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                    text: inputValue.trim(),\r\n                    sender: email,\r\n                    timestamp: formattedTime,\r\n                    ip: ip,\r\n                    ipCountry: ipCountry,\r\n                    file: {\r\n                        name: fileName,\r\n                        type: 'image',\r\n                        url: imageUrl,\r\n                    } // Include image URL if available\r\n                });\r\n\r\n                // Updating the main chat document with the latest message details\r\n                await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                    lastMessageSender: email,\r\n                    lastMessage: 'Sent an image',\r\n                    lastMessageDate: formattedTime,\r\n                    customerRead: false,\r\n                    read: true,\r\n                    readBy: [email],\r\n                });\r\n\r\n                setSendIsLoading(false);\r\n\r\n            } catch (e) {\r\n                console.error('Error adding document: ', e);\r\n            }\r\n        }\r\n        else {\r\n            setSendIsLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    const addMessage = async () => {\r\n        setSendIsLoading(true);\r\n\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const inputValue = textInputRef.current?.value;\r\n\r\n        textInputRef.current.clear();\r\n        textInputRef.current.focus();\r\n\r\n        if (inputValue !== '') {\r\n            const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n            try {\r\n\r\n                // Adding the message to the 'messages' subcollection\r\n                await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                    text: inputValue.trim(),\r\n                    sender: email,\r\n                    timestamp: formattedTime, // Using the fetched timestamp\r\n                    ip: ip, // IP Address\r\n                    ipCountry: ipCountry // Country of the IP Address\r\n                });\r\n\r\n\r\n                // Updating the main chat document with the latest message details\r\n                await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                    lastMessageSender: email,\r\n                    lastMessage: inputValue,\r\n                    lastMessageDate: formattedTime,\r\n                    customerRead: false,\r\n                    read: true,\r\n                    readBy: [email],\r\n                });\r\n                setSendIsLoading(false);\r\n\r\n            } catch (e) {\r\n                console.error('Error adding document: ', e);\r\n            }\r\n        }\r\n        else {\r\n            setSendIsLoading(false);\r\n        }\r\n\r\n    };\r\n\r\n    const screenWidth = Dimensions.get('window').width;\r\n\r\n    const handleKeyPress = (e) => {\r\n        // Define a breakpoint for mobile resolution, e.g., 768 pixels\r\n        const mobileBreakpoint = 768;\r\n\r\n        // Check if the screen width is less than or equal to the mobile breakpoint\r\n        if (screenWidth >= mobileBreakpoint) {\r\n            // Check if 'Enter' key is pressed\r\n            if (e.nativeEvent.key === 'Enter' && !e.nativeEvent.shiftKey) {\r\n                e.preventDefault(); // Prevent the default behavior of adding a new line\r\n                handleSendMessage();\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const handleSendMessage = () => {\r\n\r\n        if (imageUri !== null) {\r\n            addImageMessage();\r\n        }\r\n        if (fileUri !== null) {\r\n            addFileMessage();\r\n        }\r\n        else {\r\n            addMessage();\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n\r\n        <View style={{ width: '98%', flexDirection: 'row', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 10, }}>\r\n\r\n            <View style={{ flexDirection: 'column', flex: 1, }}>\r\n\r\n                {fileUri &&\r\n                    (\r\n                        <FileDisplay file={selectedFilePreview} onRemove={removeFile} />\r\n                    )}\r\n\r\n                {imageUri && (\r\n                    <View style={{\r\n                        position: 'relative', // Make sure the parent View is positioned relative\r\n                        width: 70,\r\n                        height: 70,\r\n                        borderRadius: 5,\r\n                        overflow: 'hidden', // This ensures that nothing spills out of the container\r\n                        borderWidth: 1,\r\n                        borderColor: '#DADDE1',\r\n                        margin: 2,\r\n                    }}>\r\n                        <FastImage\r\n                            source={{ uri: imageUri }}\r\n                            style={{ width: '100%', height: '100%', borderRadius: 10 }}\r\n                            resizeMode={FastImage.resizeMode.cover}\r\n                        />\r\n                        <Pressable\r\n                            onPress={removeImage}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                right: 0,\r\n                                backgroundColor: 'rgba(255, 255, 255, 0.6)', // Semi-transparent background for better visibility\r\n                                borderRadius: 12 // Circular shape\r\n                            }}\r\n                        >\r\n                            <MaterialIcons name=\"close\" size={20} color=\"black\" />\r\n                        </Pressable>\r\n                    </View>\r\n\r\n                )}\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <View style={{ marginHorizontal: 5, marginTop: 5, }}>\r\n                        <FastImage\r\n                            source={{ uri: 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FRMJ%20Round.jpg?alt=media&token=90d7f2fe-d9cd-4a6f-9a6b-bc39fe2b33b2', priority: FastImage.priority.high }}\r\n                            style={{\r\n                                width: 30,\r\n                                height: 30,\r\n                                borderRadius: 15,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.cover}\r\n                        />\r\n                    </View>\r\n                    <TextInput\r\n                        ref={textInputRef}\r\n                        multiline\r\n                        placeholder='Send a message...'\r\n                        placeholderTextColor={'#9B9E9F'}\r\n                        onKeyPress={handleKeyPress}\r\n                        style={{ outlineStyle: 'none', width: '100%', height: 80, alignSelf: 'center', padding: 10 }}\r\n                    />\r\n                    <Pressable\r\n                        focusable={false}\r\n                        onPress={() => sendIsLoading ? null : handleSendMessage()}\r\n                        onHoverIn={() => setIsSendHovered(true)}\r\n                        onHoverOut={() => setIsSendHovered(false)}\r\n                        style={({ pressed }) => [\r\n                            {\r\n                                padding: 10,\r\n                                top: 20,\r\n                                right: 10,\r\n                                position: 'absolute',\r\n                                borderRadius: 20,\r\n                                backgroundColor: isSendHovered ? '#e8f4ff' : 'transparent', // Change color on hover\r\n                                opacity: pressed ? 0.5 : 1 // Change opacity when pressed\r\n                            }\r\n                        ]}\r\n                    >\r\n                        {sendIsLoading ? <Spinner\r\n                            animating\r\n                            size=\"sm\"\r\n                            color={\"#95BCF9\"}\r\n                        /> :\r\n                            <MaterialIcons name=\"send\" size={24} color=\"#95BCF9\" />\r\n                        }\r\n                    </Pressable>\r\n                </View>\r\n            </View>\r\n\r\n            <Pressable\r\n                onHoverIn={() => setIsSendImageHovered(true)}\r\n                onHoverOut={() => setIsSendImageHovered(false)}\r\n                style={({ pressed }) => [\r\n                    {\r\n                        padding: 10,\r\n                        bottom: -10,\r\n                        right: 125,\r\n                        position: 'absolute',\r\n                        borderRadius: 20,\r\n                        opacity: pressed ? 0.5 : 1 // Change opacity when pressed\r\n                    }\r\n                ]}\r\n                onPress={selectImage}\r\n            >\r\n                <Ionicons name=\"image-outline\" size={24} color={isSendImageHovered ? \"#0A78BE\" : \"#C1C1C1\"} />\r\n            </Pressable>\r\n\r\n            <Pressable\r\n                onHoverIn={() => setIsSendAttachmentHovered(true)}\r\n                onHoverOut={() => setIsSendAttachmentHovered(false)}\r\n                style={({ pressed }) => [\r\n                    {\r\n                        padding: 10,\r\n                        bottom: -9,\r\n                        right: 155,\r\n                        position: 'absolute',\r\n                        borderRadius: 20,\r\n                        opacity: pressed ? 0.5 : 1 // Change opacity when pressed\r\n                    }\r\n                ]}\r\n                onPress={selectFile}\r\n            >\r\n                <MaterialIcons name=\"attach-file\" size={24} color={isSendAttachmentHovered ? \"#0A78BE\" : \"#C1C1C1\"} />\r\n            </Pressable>\r\n\r\n            <MessageTemplate textInputRef={textInputRef} />\r\n\r\n        </View>\r\n\r\n    );\r\n}\r\n\r\nconst ChatListItem = ({ item, onPress, isActive, messageUnread, formattedDate, chatListData }) => {\r\n    const [imageUrl, setImageUrl] = useState(null);\r\n    const [chatListStepImageUrl, setChatListStepImageUrl] = useState(null);\r\n    const [textFirst, setTextFirst] = useState('');\r\n    const [textLast, setTextLast] = useState('');\r\n    const dispatch = useDispatch();\r\n    const [isUnreadHovered, setIsUnreadHovered] = useState(false);\r\n    const [isUnreadVisible, setIsUnreadVisible] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [customerData, setCustomerData] = useState({});\r\n\r\n    const carName = item.carData && item.carData.carName ? item.carData.carName : (item.vehicle && item.vehicle.carName ? item.vehicle.carName : '');\r\n    const updateChatToUnread = async () => {\r\n        dispatch(setActiveChatId(''));\r\n        dispatch(setChatMessagesData([]));\r\n        dispatch(setSelectedChatData([]));\r\n        const docRef = doc(projectExtensionFirestore, \"chats\", item.id);\r\n        try {\r\n            await updateDoc(docRef, {\r\n                read: false,\r\n            });\r\n\r\n        } catch (error) {\r\n            console.error(\"Error updating document: \", error);\r\n        }\r\n    };\r\n\r\n    const hoverIn = () => {\r\n        setIsHovered(true)\r\n    };\r\n\r\n    const hoverOut = () => {\r\n        setIsHovered(false);\r\n    };\r\n\r\n    const hoverUnreadIn = () => {\r\n        setIsHovered(true)\r\n        setIsUnreadHovered(true)\r\n    };\r\n\r\n    const hoverUnreadOut = () => {\r\n        setIsUnreadHovered(false)\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        // getChatListStepImageUrl();\r\n        const folderName = item.carData && item.carData.stockID ? item.carData.stockID : (item.vehicle && item.vehicle.carId ? item.vehicle.carId : '');\r\n        const storage = getStorage(projectExtensionFirebase);\r\n        const imageRef = ref(storage, `${folderName}/0`); // Ensure this path is correct\r\n\r\n        getDownloadURL(imageRef)\r\n            .then((url) => {\r\n                setImageUrl(url);\r\n            })\r\n            .catch((error) => {\r\n                if (error.code === 'storage/object-not-found') {\r\n                    // Handle the 'object not found' error.\r\n                    setImageUrl('https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FNo%20Car%20Image%20Found.png?alt=media&token=de86488c-73a6-4c04-811c-bc508a11123a');\r\n                } else {\r\n                    // Handle other errors differently\r\n\r\n                    setImageUrl('https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FNo%20Car%20Image%20Found.png?alt=media&token=de86488c-73a6-4c04-811c-bc508a11123a');\r\n\r\n                }\r\n            });\r\n\r\n        const collectionPath = 'accounts';\r\n        const docId = item.participants.customer; // Ensure this is a valid document ID\r\n\r\n        const docRef = doc(projectExtensionFirestore, collectionPath, docId);\r\n\r\n        const unsubscribe = onSnapshot(docRef, (doc) => {\r\n            if (doc.exists()) {\r\n                const data = doc.data();\r\n                setCustomerData(data ? data : {});\r\n                setTextFirst(data.textFirst ? data.textFirst : '');\r\n                setTextLast(data.textLast ? data.textLast : '');\r\n\r\n            } else {\r\n                console.log(\"Document not found\");\r\n            }\r\n        }, (error) => {\r\n            console.error(\"Error fetching document: \", error);\r\n        });\r\n\r\n        // Clean up function to unsubscribe from the listener when the component unmounts\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const loadingCondition = !imageUrl || imageUrl == null || imageUrl == '' || imageUrl == undefined || !item;\r\n\r\n    const chatStepIconOn = require(`../../assets/chat_step/chat_step_${item.stepIndicator.value}_on.png`);\r\n    const chatStepIconOff = require(`../../assets/chat_step/chat_step_${item.stepIndicator.value}_off.png`);\r\n\r\n\r\n    const handlePress = () => {\r\n        onPress()\r\n\r\n        dispatch(setSelectedCustomerData(customerData));\r\n        globalCustomerFirstName = textFirst ? textFirst : '';\r\n        globalCustomerLastName = textLast ? textLast : '';\r\n        globalImageUrl = imageUrl ? imageUrl : '';\r\n        globalCustomerCarName = carName;\r\n        setIsHovered(false);\r\n        setIsUnreadHovered(false)\r\n\r\n\r\n    }\r\n\r\n    if (loadingCondition) {\r\n        return <SkeletonChatListLayout />\r\n    }\r\n    else {\r\n        return (\r\n            <Pressable\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                focusable={false}\r\n                style={{\r\n                    padding: 12,\r\n                    alignItems: 'flex-start', // Align items to the start of the button\r\n                    flexDirection: 'row',\r\n                    backgroundColor: isActive ? '#f2f2f2' : (isHovered ? '#f2f2f2' : 'white'),\r\n                    borderLeftColor: isActive ? '#0A9FDC' : 'transparent',\r\n                    borderRightColor: isActive ? '#0A9FDC' : 'transparent',\r\n                    borderLeftWidth: 2,\r\n                    borderRightWidth: 2,\r\n\r\n                }}\r\n                onPress={handlePress}\r\n            >\r\n                <View style={{ width: '20%', justifyContent: 'center', }}>\r\n                    {imageUrl ? (\r\n                        <FastImage\r\n                            source={{ uri: imageUrl, priority: FastImage.priority.normal }}\r\n                            style={{\r\n                                width: 60,\r\n                                height: 60,\r\n                                borderRadius: 30,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.stretch}\r\n                        />\r\n                    ) : (\r\n                        <View\r\n                            style={{\r\n                                width: 60,\r\n                                height: 60,\r\n                                borderRadius: 30,\r\n                                backgroundColor: '#e0e0e0',\r\n                                marginRight: 12,\r\n                            }}\r\n                        />\r\n                    )}\r\n                </View>\r\n                <View style={{ flex: 1 }}>\r\n                    {!isHovered ? (<Text style={{ fontSize: 12, position: 'absolute', right: 10, color: messageUnread ? '#0A78BE' : '#90949C', fontWeight: messageUnread ? 700 : 400, }}>{formattedDate}</Text>) : (!item.read ? (<Text style={{ fontSize: 12, position: 'absolute', right: 10, color: messageUnread ? '#0A78BE' : '#90949C', fontWeight: messageUnread ? 700 : 400, }}>{formattedDate}</Text>) : null)}\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{ fontSize: 14, width: '70%', overflow: 'hidden', fontWeight: messageUnread ? 700 : 400, color: messageUnread ? '#1C2B33' : '#586369', }}>{carName}</Text>\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{ fontSize: 14, width: '80%', overflow: 'hidden', flex: 1, fontWeight: messageUnread ? 700 : 400, color: messageUnread ? '#1C2B33' : '#586369', }}>{`${textFirst} ${textLast}`}</Text>\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{ fontSize: 12, width: '80%', overflow: 'hidden', flex: 1, fontWeight: messageUnread ? 700 : 400, color: messageUnread ? '#0A78BE' : '#90949c', }}>{item.lastMessageSender == item.participants.customer ? (item.lastMessage ? item.lastMessage : 'No message found') : (item.lastMessage ? `Sales: ${item.lastMessage}` : `Sales: No message found`)}</Text>\r\n                    {!item.read ? (\r\n                        <FastImage\r\n                            source={{ uri: chatStepIconOn, priority: FastImage.priority.normal }}\r\n                            style={{\r\n                                tintColor: 'rgba(128, 128, 128, 1)',\r\n                                width: 22,\r\n                                height: 20,\r\n                                position: 'absolute',\r\n                                right: 10,\r\n                                bottom: 0,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.stretch}\r\n                        />\r\n                    ) : (\r\n                        <FastImage\r\n                            source={{ uri: chatStepIconOff, priority: FastImage.priority.normal }}\r\n                            style={{\r\n                                tintColor: 'rgba(128, 128, 128, 1)',\r\n                                width: 22,\r\n                                height: 20,\r\n                                position: 'absolute',\r\n                                right: 10,\r\n                                bottom: 0,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.stretch}\r\n                        />\r\n                    )}\r\n\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{\r\n                        position: 'absolute',\r\n                        right: 0,\r\n                        top: 10,\r\n                        padding: 10,\r\n                        alignSelf: 'center',\r\n                        fontSize: 12,\r\n                        overflow: 'hidden',\r\n                        flex: 1,\r\n                        fontWeight: messageUnread ? 700 : 400,\r\n                        color: messageUnread ? '#FF0000' : '#90949c',\r\n                    }}>\r\n                        {item.invoiceNumber && item.stepIndicator.value > 2 ? item.invoiceNumber : ''}\r\n                    </Text>\r\n\r\n                    {isHovered && item.read && (\r\n                        <Tooltip label=\"Mark as unread\" placement='right' openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                            <Pressable\r\n                                focusable={false}\r\n                                onHoverIn={hoverUnreadIn}\r\n                                onHoverOut={hoverUnreadOut}\r\n                                onPress={updateChatToUnread}\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    right: 0,\r\n                                    top: -10,\r\n                                    padding: 10,\r\n                                    alignSelf: 'center',\r\n                                }}\r\n\r\n                            >\r\n                                <MaterialIcons name=\"mark-as-unread\" size={22} color={isUnreadHovered ? \"#1B81C2\" : \"#BABABA\"} />\r\n                            </Pressable>\r\n                        </Tooltip>\r\n                    )}\r\n                </View>\r\n\r\n\r\n\r\n            </Pressable>\r\n        );\r\n    }\r\n\r\n\r\n};\r\n\r\nconst ChatList = ({ unreadButtonValue, activeButtonValue, }) => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const chatListData = useSelector((state) => state.chatListData);\r\n    const chatListLastVisible = useSelector((state) => state.chatListLastVisible);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n    const loadMoreLoading = useSelector((state) => state.loadMoreLoading);\r\n    const noMoreData = useSelector((state) => state.noMoreData);\r\n    const renderFooterRef = useRef(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const route = useRoute();\r\n    const chatId = route.params?.chatId;\r\n    const navigate = useNavigate();\r\n\r\n    const updateChatToRead = async () => {\r\n        const docRef = doc(projectExtensionFirestore, \"chats\", activeChatId);\r\n        const user = projectControlAuth.currentUser\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        if (email !== '') {\r\n\r\n            try {\r\n                await updateDoc(docRef, {\r\n                    read: true,\r\n                    readBy: arrayUnion(email),\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error updating document: \", error);\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n\r\n    const fetchChatMessages = () => {\r\n        if (!activeChatId) {\r\n            // Handle the case where there's no active chat ID\r\n        }\r\n        else {\r\n            dispatch(setChatMessagesData([]));\r\n            dispatch(setChatMessageBoxLoading(true));\r\n            updateChatToRead();\r\n\r\n            try {\r\n                // References to the document and its 'messages' subcollection\r\n                let activeInvoiceNumer;\r\n                const docRef = doc(projectExtensionFirestore, 'chats', activeChatId);\r\n\r\n                const messagesRef = collection(docRef, 'messages');\r\n\r\n                // Query for the 'messages' subcollection\r\n                const messagesQuery = query(messagesRef, orderBy('timestamp', 'desc'), limit(10));\r\n\r\n                // Listen to the document\r\n                const unsubscribeDoc = onSnapshot(docRef, (docSnapshot) => {\r\n                    if (docSnapshot.exists()) {\r\n                        const data = docSnapshot.data();\r\n                        // Add the document ID to the data\r\n                        const dataWithId = {\r\n                            ...data,\r\n                            id: docSnapshot.id\r\n                        };\r\n                        // Dispatch any action you need with the document data\r\n                        dispatch(setSelectedChatData(dataWithId));\r\n\r\n                        // Define and listen to the invoice document only after the chat document is confirmed to exist\r\n                        if (dataWithId.invoiceNumber || dataWithId.invoiceNumber == '') {\r\n                            const invoiceDocRef = doc(projectExtensionFirestore, 'IssuedInvoice', dataWithId.invoiceNumber);\r\n                            const unsubscribeInvoice = onSnapshot(invoiceDocRef, (invoiceDocSnapshot) => {\r\n                                if (invoiceDocSnapshot.exists()) {\r\n                                    const invoiceData = invoiceDocSnapshot.data();\r\n                                    // Add the document ID to the data\r\n                                    const invoiceDataWithId = {\r\n                                        ...invoiceData,\r\n                                        id: invoiceDocSnapshot.id\r\n                                    };\r\n                                    // Dispatch any action you need with the invoice document data\r\n                                    dispatch(setInvoiceData(invoiceDataWithId ? invoiceDataWithId : {}));\r\n\r\n                                } else {\r\n                                    // Handle the case where the invoice document does not exist\r\n                                    console.log('No Invoice Yet');\r\n                                    dispatch(setInvoiceData({}));\r\n                                }\r\n                            });\r\n\r\n                            // Cleanup function for the invoice listener\r\n                            return () => {\r\n                                unsubscribeInvoice();\r\n\r\n                            };\r\n                        } else {\r\n                            dispatch(setInvoiceData({}));\r\n                            console.log('No Invoice Yet');\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n                const unsubscribeMessages = onSnapshot(messagesQuery, (querySnapshot) => {\r\n                    let messages = [];\r\n                    querySnapshot.forEach((doc) => {\r\n                        const data = doc.data();\r\n                        const timestamp = data.timestamp ? data.timestamp.toString() : null;\r\n                        messages.push({ id: doc.id, ...data, timestamp });\r\n                    });\r\n\r\n                    dispatch(setChatMessagesData(messages));\r\n                    dispatch(setChatMessageBoxLoading(false));\r\n                    globalMessagesLastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\r\n                });\r\n\r\n                // Return a cleanup function\r\n                return () => {\r\n                    unsubscribeDoc();\r\n                    unsubscribeMessages();\r\n                    // if (activeInvoiceNumer && activeInvoiceNumer !== '') {\r\n                    //     unsubscribeInvoice();\r\n                    // }\r\n                };\r\n            } catch (error) {\r\n                console.error(\"Error setting up real-time messages: \", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleLoadMore = () => {\r\n        dispatch(setLoadMoreLoading(true));\r\n\r\n        let nextQuery;\r\n        if (!globalLastVisible) {\r\n            // No more data to load or globalLastVisible is undefined\r\n            console.log(\"No more data to load or globalLastVisible is undefined\");\r\n            setTimeout(() => {\r\n                dispatch(setLoadMoreLoading(false));\r\n                dispatch(setNoMoreData(true));\r\n            }, 0);\r\n            return;\r\n        }\r\n        else {\r\n\r\n            if (chatListData.length >= 10) {\r\n                if (unreadButtonValue == true) {\r\n\r\n                    if (activeButtonValue == 0) {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('read', '==', false),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('read', '==', false),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    else {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('read', '==', false),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n\r\n\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                where('read', '==', false),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    if (activeButtonValue == 0) {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n\r\n\r\n\r\n\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    else {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n\r\n\r\n\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            else {\r\n                dispatch(setNoMoreData(true));\r\n                dispatch(setLoadMoreLoading(false));\r\n            }\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n\r\n        if (chatListData.length < 10) {\r\n            setTimeout(() => {\r\n                dispatch(setLoadMoreLoading(false));\r\n                dispatch(setNoMoreData(true));\r\n            }, 0);\r\n        }\r\n\r\n        else {\r\n            try {\r\n                const unsubscribe = onSnapshot(nextQuery, (snapshot) => {\r\n                    if (snapshot.empty) {\r\n                        // Handle the case when there's no more data\r\n                        console.log(\"No more data to load\");\r\n                        setTimeout(() => {\r\n                            dispatch(setLoadMoreLoading(false));\r\n                            dispatch(setNoMoreData(true));\r\n                            globalLastVisible = null;\r\n                        }, 0);  // Delay setting loading and no more data flags\r\n                        return;\r\n                    }\r\n\r\n                    const chatsData = [];\r\n                    snapshot.forEach((doc) => {\r\n                        chatsData.push({\r\n                            id: doc.id,\r\n                            ...doc.data(),\r\n                        });\r\n                    });\r\n\r\n\r\n                    // Append new data to the existing list\r\n\r\n                    setTimeout(() => {\r\n                        dispatch(setChatListData([...chatListData, ...chatsData]));\r\n                        dispatch(setLoadMoreLoading(false));\r\n                        globalLastVisible = snapshot.docs[snapshot.docs.length - 1];\r\n                    }, 0);\r\n\r\n                });\r\n\r\n                return unsubscribe;\r\n            } catch (error) {\r\n                console.error('Error fetching data from Firebase:', error);\r\n                setTimeout(() => dispatch(setLoadMoreLoading(false)), 0);  // Ensure loading is set to false even if there's an error\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        const unsubscribe = fetchChatMessages();\r\n\r\n\r\n        if (activeChatId && activeChatId !== '' && activeChatId !== 'undefined') {\r\n            const chatData = chatListData.find(chatItem => chatItem.id === chatId);\r\n\r\n            navigate(`/devadmin/ChatMessages/${activeChatId}`);\r\n            // globalCustomerId = chatData.participants.customer; \r\n            globalCustomerId = 'marcvan14@gmail.com';\r\n            globalChatId = activeChatId;\r\n        }\r\n\r\n        return () => {\r\n            if (unsubscribe) {\r\n                unsubscribe(); // Unsubscribe when the component unmounts\r\n            }\r\n        };\r\n\r\n    }, [activeChatId]);\r\n\r\n    const handleChatPress = async (customerId, chatId) => {\r\n\r\n        dispatch(setActiveChatId(chatId));\r\n\r\n        globalCustomerId = customerId;\r\n        globalChatId = chatId;\r\n\r\n    };\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        // Navigate to the ChatMessages route\r\n        navigate(`/devadmin/ChatMessages`);\r\n\r\n        if (chatId && chatId !== 'undefined') {\r\n\r\n            // Set a timeout before dispatching\r\n            const timeoutId = setTimeout(() => {\r\n                dispatch(setActiveChatId(chatId));\r\n\r\n            }, 1000); // 1000 milliseconds = 1 second\r\n\r\n            // Clear the timeout if the component unmounts\r\n            return () => clearTimeout(timeoutId);\r\n        }\r\n    }, [chatId]);\r\n\r\n    useEffect(() => {\r\n        dispatch(setActiveChatId(''));\r\n    }, [unreadButtonValue])\r\n\r\n    const renderFooter = () => {\r\n        return (\r\n            <>\r\n                {!noMoreData && (\r\n                    <View style={{ paddingVertical: 20, borderTopWidth: 1, borderColor: \"#DADDE1\", height: 60, }}>\r\n                        {loadMoreLoading && (\r\n                            <Spinner\r\n                                animating\r\n                                size=\"sm\"\r\n                                color={'#7B9CFF'}\r\n                            />\r\n                        )}\r\n                    </View>\r\n                )}\r\n            </>\r\n\r\n\r\n        );\r\n    };\r\n\r\n    const renderItem = ({ item }) => {\r\n\r\n        const isActive = item.id === activeChatId;\r\n        const messageUnread = !item.read;\r\n        const formattedDate = formatDate(item.lastMessageDate);\r\n\r\n        return (\r\n            <ChatListItem\r\n                chatListData={chatListData}\r\n                item={item}\r\n                onPress={() => handleChatPress(item.participants.customer, item.id)}\r\n                isActive={isActive}\r\n                messageUnread={messageUnread}\r\n                formattedDate={formattedDate}\r\n            />\r\n        );\r\n\r\n    };\r\n\r\n    if (chatListData.length < 1) {\r\n        return (\r\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', }}>\r\n                <Text style={{ fontWeight: 700, alignSelf: 'center', }}>{unreadButtonValue ? 'No unread messages to show' : 'No messages to show'}</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    else {\r\n        return (\r\n            <>\r\n                <FlatList\r\n                    style={{ height: 100, borderBottomLeftRadius: 5, }}\r\n                    renderItem={renderItem}\r\n                    keyExtractor={item => item.id.toString()}\r\n                    data={chatListData}\r\n                    initialNumToRender={1}\r\n                    maxToRenderPerBatch={10}\r\n                    windowSize={21}\r\n                    onEndReachedThreshold={0.05}\r\n                    removeClippedSubviews={true}\r\n                    ListFooterComponent={renderFooter}\r\n                    onEndReached={handleLoadMore}  // Implement this function\r\n                />\r\n\r\n            </>\r\n\r\n        );\r\n    }\r\n\r\n};\r\n\r\n\r\nconst SearchChat = ({ lastVisible, setLastVisible, unreadButtonValue, activeButtonValue }) => {\r\n\r\n    const searchInputRef = useRef(null);\r\n    const [searchText, setSearchText] = useState('');\r\n    const [clearVisible, setClearVisible] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n    const searchData = async ({ }) => {\r\n        let q;\r\n\r\n        const searchValue = searchInputRef.current?.value;\r\n        if (unreadButtonValue == true) {\r\n\r\n            if (activeButtonValue == 0) {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('read', '==', false),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('read', '==', false),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n\r\n            else {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('read', '==', false),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        where('read', '==', false),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        else {\r\n\r\n            if (activeButtonValue == 0) {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n\r\n            else {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n        try {\r\n            const unsubscribe = onSnapshot(q, (snapshot) => {\r\n                const chatsData = [];\r\n                snapshot.forEach((doc) => {\r\n                    chatsData.push({\r\n                        id: doc.id,\r\n                        ...doc.data(),\r\n                    });\r\n                });\r\n                dispatch(setChatListData(chatsData));\r\n                globalLastVisible = snapshot.docs[snapshot.docs.length - 1]\r\n\r\n\r\n            });\r\n\r\n            // Return the unsubscribe function to stop listening when necessary\r\n            return () => {\r\n                if (unsubscribe) {\r\n                    unsubscribe();\r\n                }\r\n            };\r\n        } catch (error) {\r\n            // Handle errors here\r\n            console.error('Error fetching data from Firebase:', error);\r\n        }\r\n\r\n    };\r\n\r\n    // useEffect(() => {\r\n\r\n    //     searchData();\r\n\r\n    // }, [searchText])\r\n\r\n    useEffect(() => {\r\n        setSearchText('');\r\n        dispatch(setChatListSearchText(''));\r\n        globalSearchText = '';\r\n        searchInputRef.current.value = '';\r\n        setClearVisible(false);\r\n\r\n    }, [activeButtonValue, unreadButtonValue])\r\n\r\n    const handleSearchEnter = () => {\r\n        // setSortField('dateAdded');\r\n        // setIsSortActive(false)\r\n        if (searchInputRef.current?.value !== '') {\r\n            dispatch(setChatListSearchText(searchInputRef.current.value.trim()));\r\n            setSearchText(searchInputRef.current.value.trim());\r\n            globalSearchText = searchInputRef.current.value.trim();\r\n        }\r\n        else {\r\n            setSearchText('');\r\n            globalSearchText = '';\r\n            if (searchText == '') {\r\n                dispatch(setChatListSearchText(''));\r\n                searchData();\r\n\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const handleClearText = () => {\r\n        searchInputRef.current.clear();\r\n        setClearVisible(false);\r\n        if (searchText !== '') {\r\n            setSearchText(''); // Clear the text\r\n            dispatch(setChatListSearchText(''));\r\n            dispatch(setActiveChatId(''));\r\n            globalSearchText = '';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <View style={{ flexDirection: 'row', alignItems: 'center', width: '100%', alignSelf: 'center', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5, margin: 10 }}>\r\n            <TextInput\r\n                ref={searchInputRef}\r\n                onSubmitEditing={handleSearchEnter}\r\n                placeholder='Search'\r\n                placeholderTextColor='#9B9E9F'\r\n                underlineColorAndroid=\"transparent\"\r\n                style={{ flex: 1, height: 40, padding: 10, outlineStyle: 'none' }}\r\n                onChangeText={() => setClearVisible(true)}\r\n                keyboardType='search'\r\n            />\r\n            {clearVisible ? (\r\n                <Pressable\r\n                    focusable={false}\r\n                    onPress={handleClearText}\r\n                    style={({ pressed, hovered }) => [\r\n                        {\r\n                            borderRadius: 10,\r\n                            marginRight: 10,\r\n                            opacity: pressed ? 0.5 : 1, // Change opacity when pressed\r\n                            // Add hover effect\r\n                            backgroundColor: hovered ? '#ddd' : 'transparent',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <MaterialIcons name=\"close\" size={20} color=\"#000\" />\r\n                </Pressable>\r\n            ) : null}\r\n        </View>);\r\n}\r\n\r\nconst timelineData = [\r\n    { key: '1', title: 'Event 1', description: 'Description 1' },\r\n    { key: '2', title: 'Event 2', description: 'Description 2' },\r\n    // ... more events\r\n];\r\n\r\n// const TimelineItem = ({ title, description }) => (\r\n//     <View style={{ alignItems: 'center', marginRight: 20 }}>\r\n//         <View style={{ width: 10, height: 10, borderRadius: 5, backgroundColor: 'blue', marginBottom: 5 }} />\r\n//         <Text style={{ fontWeight: 'bold' }}>{title}</Text>\r\n//         <Text style={{ textAlign: 'center' }}>{description}</Text>\r\n//     </View>\r\n// );\r\n\r\n// const HorizontalTimeline = () => (\r\n//     <FlatList\r\n//         data={timelineData}\r\n//         renderItem={({ item }) => <TimelineItem title={item.title} description={item.description} />}\r\n//         horizontal\r\n//         showsHorizontalScrollIndicator={false}\r\n//         style={{ flexDirection: 'row', padding: 10 }}\r\n//     />\r\n// );\r\n\r\nconst ModalAddBank = () => {\r\n    const [modalAddBankVisible, setModalAddBankVisible] = useState(false);\r\n    const [isCancelHovered, setCancelHovered] = useState(false);\r\n    const [isAddHovered, setAddHovered] = useState(false);\r\n\r\n\r\n\r\n\r\n    const handleModalAddBankOpen = () => {\r\n        setModalAddBankVisible(true);\r\n    };\r\n\r\n    const handleModalAddBankClose = () => {\r\n        setModalAddBankVisible(false);\r\n    };\r\n\r\n    const bankNameRef = useRef(null);\r\n    const branchNameRef = useRef(null);\r\n    const swiftcodeRef = useRef(null);\r\n    const addressRef = useRef(null);\r\n    const accountHolderRef = useRef(null);\r\n    const accountNumberRef = useRef(null);\r\n\r\n\r\n\r\n    const addBankAccount = async () => {\r\n        const docRef = doc(projectExtensionFirestore, 'DataForInvoice', 'BankAccounts');\r\n\r\n        const bankNameValue = bankNameRef.current?.value;\r\n        const branchNameValue = branchNameRef.current?.value;\r\n        const swiftcodeValue = swiftcodeRef.current?.value;\r\n        const addressValue = addressRef.current?.value;\r\n        const accountHolderValue = accountHolderRef.current?.value;\r\n        const accountNumberValue = accountNumberRef.current?.value;\r\n\r\n        const elementToAdd = {\r\n            bankName: bankNameValue,\r\n            branchName: branchNameValue,\r\n            swiftCode: swiftcodeValue,\r\n            address: addressValue,\r\n            accountHolder: accountHolderValue,\r\n            accountNumberValue: accountNumberValue,\r\n        }\r\n\r\n        try {\r\n            await updateDoc(docRef, {\r\n                [bankNameValue]: elementToAdd,\r\n            });\r\n            console.log(\"Element added to the array field\");\r\n            handleModalAddBankClose();\r\n        } catch (error) {\r\n            console.error(\"Error adding element to the array\", error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Pressable onPress={handleModalAddBankOpen} style={{ alignSelf: 'center', marginHorizontal: 5, marginTop: 3, }}>\r\n                <FontAwesome name={'plus-circle'} size={25} color='#16A34A' />\r\n            </Pressable>\r\n\r\n            <Modal isOpen={modalAddBankVisible} onClose={handleModalAddBankClose} useRNModal>\r\n                <Modal.Content>\r\n                    <Modal.Header>Add Bank Account</Modal.Header>\r\n                    <Modal.Body>\r\n                        <View style={{ height: '100%', flex: 1, }}>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Bank Name:</Text>\r\n                                <TextInput\r\n                                    ref={bankNameRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Bank Name'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Branch Name:</Text>\r\n                                <TextInput\r\n                                    ref={branchNameRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Branch Name'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>SWIFTCODE:</Text>\r\n                                <TextInput\r\n                                    ref={swiftcodeRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='SWIFTCODE'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Address:</Text>\r\n                                <TextInput\r\n                                    ref={addressRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Address'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Account Holder:</Text>\r\n                                <TextInput\r\n                                    ref={accountHolderRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Account Holder'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Account Number:</Text>\r\n                                <TextInput\r\n                                    ref={accountNumberRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Account Number'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n                    </Modal.Body>\r\n\r\n                    <Modal.Footer>\r\n                        <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', }}>\r\n                            <Pressable\r\n                                style={{ width: 100, padding: 5, borderRadius: 3, backgroundColor: isCancelHovered ? '#686868' : '#525252' }}\r\n                                onHoverIn={() => setCancelHovered(true)}\r\n                                onHoverOut={() => setCancelHovered(false)}\r\n                                onPress={handleModalAddBankClose}\r\n                            >\r\n                                <Text style={{ fontWeight: 500, textAlign: 'center', color: 'white', }}>Cancel</Text>\r\n                            </Pressable>\r\n\r\n                            <Pressable\r\n                                onPress={addBankAccount}\r\n                                style={{ width: 100, padding: 5, borderRadius: 3, backgroundColor: isAddHovered ? '#1B8B5A' : '#16A34A' }}\r\n                                onHoverIn={() => setAddHovered(true)}\r\n                                onHoverOut={() => setAddHovered(false)}\r\n                            >\r\n                                <Text style={{ fontWeight: 500, textAlign: 'center', color: 'white', }}>Add</Text>\r\n                            </Pressable>\r\n                        </View>\r\n                    </Modal.Footer>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n    );\r\n\r\n\r\n}\r\n\r\nconst BankInformation = () => {\r\n\r\n    let invoiceSelectedDueDate = '';\r\n    const currentDate = useSelector((state) => state.currentDate);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [selectedDueDate, setSelectedDueDate] = useState('');\r\n    const [bankAccountsData, setBankAccountsData] = useState({});\r\n    const [selectedBank, setSelectedBank] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.bankAccount.bankName ? invoiceData.bankInformations.bankAccount.bankName : \"SUMITOMO MITSUI BANKING CORPORATION\");\r\n    let selectedBankData = {};\r\n\r\n    const paymentTermsRef = useRef(null);\r\n    const salesAgreementRef = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        const subscribeToBankAccounts = () => {\r\n            const docRef = doc(projectExtensionFirestore, 'DataForInvoice', 'BankAccounts');\r\n\r\n            const unsubscribe = onSnapshot(docRef, (docSnap) => {\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    const bankAccounts = {};\r\n\r\n                    // Assuming each entry in your document is a bank account\r\n                    Object.entries(data).forEach(([key, value]) => {\r\n                        if (value.bankName) {\r\n                            bankAccounts[value.bankName] = value;\r\n                        }\r\n                    });\r\n\r\n                    console.log(bankAccounts);\r\n                    setBankAccountsData(bankAccounts);\r\n                    globalInvoiceVariable.bankInformations.bankAccount = bankAccounts[\"SUMITOMO MITSUI BANKING CORPORATION\"];\r\n                    // Use state or context to store selected bank data if needed\r\n                    // setSelectedBank(bankAccounts[\"SUMITOMO MITSUI BANKING CORPORATION\"]);\r\n                    console.log(bankAccounts[\"SUMITOMO MITSUI BANKING CORPORATION\"]);\r\n                } else {\r\n                    console.log(\"No such document!\");\r\n                }\r\n            }, (error) => {\r\n                console.error(\"Error fetching document\", error);\r\n            });\r\n\r\n            return unsubscribe; // Return the unsubscribe function to call it later to stop listening\r\n        };\r\n\r\n\r\n        if (currentDate) {\r\n            const date = new Date(currentDate);\r\n\r\n            // Check the day of the week\r\n            const dayOfWeek = date.getDay();\r\n\r\n            if (dayOfWeek === 5) { // Friday\r\n                date.setDate(date.getDate() + 3); // Add 3 days to reach Monday\r\n            } else if (dayOfWeek === 6) { // Saturday\r\n                date.setDate(date.getDate() + 2); // Add 2 days to reach Monday\r\n            } else {\r\n                date.setDate(date.getDate() + 1); // Sunday to Thursday, add 1 day\r\n            }\r\n\r\n            // Format the date back to string\r\n            const adjustedDate = date.toISOString().split('T')[0];\r\n            setSelectedDueDate(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.dueDate ? invoiceData.bankInformations.dueDate : adjustedDate);\r\n            globalInvoiceVariable.bankInformations.dueDate = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.dueDate ? invoiceData.bankInformations.dueDate : adjustedDate;\r\n            globalInvoiceVariable.bankInformations.paymentTerms = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.paymentTerms ? invoiceData.bankInformations.paymentTerms : paymentTermsRef.current?.value;\r\n            // globalInvoiceVariable.bankInformations.salesAgreement = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.salesAgreement ? invoiceData.bankInformations.salesAgreement : salesAgreementRef.current?.value;\r\n            globalInvoiceVariable.bankInformations.issuingDate = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.issuingDate ? invoiceData.bankInformations.issuingDate : currentDate;\r\n\r\n\r\n        }\r\n\r\n        const unsubscribe = subscribeToBankAccounts();\r\n    }, [currentDate]);\r\n\r\n\r\n\r\n    const ModalCalendar = ({ selectedDate, setSelectedDate, currentDate }) => {\r\n\r\n        const [modalCalendarVisible, setModalCalendarVisible] = useState(false);\r\n\r\n\r\n        const handleModalCalendarOpen = () => {\r\n            setModalCalendarVisible(true);\r\n        };\r\n\r\n        const handleModalCalendarClose = () => {\r\n            setModalCalendarVisible(false);\r\n        };\r\n\r\n\r\n\r\n        return (\r\n\r\n            <>\r\n                <Pressable style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onPress={handleModalCalendarOpen}>\r\n                    <TextInput value={selectedDate} onFocus={handleModalCalendarOpen} />\r\n                </Pressable>\r\n\r\n                <Modal isOpen={modalCalendarVisible} onClose={handleModalCalendarClose} useRNModal>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Content>\r\n                        <View style={{ height: '100%', flex: 1 }}>\r\n                            <Calendar\r\n                                onDayPress={useCallback(day => {\r\n                                    setSelectedDate(day.dateString);\r\n                                    invoiceSelectedDueDate = day.dateString;\r\n                                    globalInvoiceVariable.bankInformations.dueDate = day.dateString;\r\n                                    handleModalCalendarClose();\r\n                                }, [])}\r\n                                markedDates={{\r\n                                    [selectedDate]: { selected: true, disableTouchEvent: true, selectedDotColor: '#7b9cff' }\r\n                                }}\r\n                                renderArrow={(direction) => (\r\n                                    direction === 'left' ? <MaterialIcons name='arrow-back-ios' color='#7b9cff' /> : <MaterialIcons name='arrow-forward-ios' color='#7b9cff' />\r\n                                )}\r\n                                enableSwipeMonths={true}\r\n                                initialDate={selectedDate}\r\n                                // minDate={currentDate}\r\n                                showSixWeeks />\r\n\r\n                        </View>\r\n\r\n                    </Modal.Content>\r\n\r\n                </Modal>\r\n            </>\r\n\r\n        );\r\n\r\n    }\r\n\r\n\r\n    const handleValueChange = (selectedBankName) => {\r\n        const selectedBankObj = bankAccountsData[selectedBankName];\r\n        setSelectedBank(selectedBankName);\r\n        globalInvoiceVariable.bankInformations.bankAccount = selectedBankObj;\r\n        // console.log(selectedBankObj);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Due Date:</Text>\r\n                <ModalCalendar currentDate={currentDate} selectedDate={selectedDueDate} setSelectedDate={setSelectedDueDate} />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, marginVertical: 10, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Bank Account: </Text>\r\n                <Select\r\n                    selectedValue={selectedBank}\r\n                    onValueChange={handleValueChange}\r\n                    bgColor={'#FAFAFA'}\r\n                    accessibilityLabel=\"Choose Country\"\r\n                    placeholder=\"---\"\r\n                    _selectedItem={{\r\n                        bg: \"teal.600\",\r\n                        endIcon: <CheckIcon />,\r\n                    }}\r\n                    height={9}\r\n                    width={300}\r\n                    style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1, }}\r\n                >\r\n                    {Object.keys(bankAccountsData).map((bankName) => (\r\n                        <Select.Item key={bankName} label={bankName} value={bankName} />\r\n                    ))}\r\n                </Select>\r\n\r\n                <ModalAddBank />\r\n\r\n            </View>\r\n\r\n            <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Payment Terms:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.bankInformations.paymentTerms = value;\r\n                }} ref={paymentTermsRef} multiline defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.paymentTerms ? invoiceData.bankInformations.paymentTerms : \"Full payment via Telegraphic Transfer (T/T) required before the due date.\"} placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                    style={{ width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n\r\n            {/* <View style={{ flex: 4, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Sales Agreement:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.bankInformations.salesAgreement = value;\r\n                }} ref={salesAgreementRef} multiline defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.salesAgreement ? invoiceData.bankInformations.salesAgreement : `Payment Information:\r\nThe customer is responsible for the bank charges incurred when the T/T (Telegraphic Transfer) is paid.\r\nNo warranty service is provided on used vehicles.\r\n\r\nConditions for order cancellation:\r\n(1) Order Cancellation Penalty: If the order is canceled after payment, a penalty of USD 220 will apply.\r\n(2) Non-refund: Payment for vehicles purchased through pre-delivery inspection is non-refundable.\r\n\r\nIntermediary Banking Information:\r\nBank Name: SUMITOMO MITSUI BANKING CORPORATION (THE NEW YORK AUTHORITY).\r\nSwift code: SMBCUS33\r\nAddress: 277 Park Avenue\r\nCity: New York, NY\r\nPostal Code: 10172\r\nCountry: United States\r\n`}\r\n                    placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                    style={{ width: '60%', height: 100, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View> */}\r\n        </>\r\n    );\r\n}\r\n\r\nconst PaymentDetails = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const fobPriceInput = useRef(null);\r\n    const freightInput = useRef(null);\r\n    const inspectionInput = useRef(null);\r\n    const insuranceInput = useRef(null);\r\n\r\n\r\n    const [totalAmountCalculated, setTotalAmountCalculated] = useState('0');\r\n    const [selectedIncoterms, setSelectedIncoterms] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.incoterms ? invoiceData.paymentDetails.incoterms :\r\n        selectedChatData.insurance ? 'CIF' : 'C&F');\r\n\r\n    const [inspectionIsChecked, setInspectionIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionIsChecked ? invoiceData.paymentDetails.inspectionIsChecked : selectedChatData.inspection);\r\n    const [inspectionName, setInspectionName] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionName ? invoiceData.paymentDetails.inspectionName : selectedChatData.inspectionName);\r\n\r\n    const [warrantyIsChecked, setWarrantyIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyIsCheck ? invoiceData.paymentDetails.warrantyIsCheck : selectedChatData.warranty);\r\n\r\n    const warrantyPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyPrice && invoiceData.paymentDetails.warrantyPrice ? invoiceData.paymentDetails.warrantyPrice : 150;\r\n    const insurancePrice = 50;\r\n\r\n\r\n    const additionalNameRef = useRef(null);\r\n    const additionalPriceRef = useRef(null);\r\n\r\n    const safelyParseNumber = (value) => {\r\n        const number = Number(value.replace(/,/g, ''));\r\n        return isNaN(number) ? 0 : number;\r\n    };\r\n\r\n    const calculateTotalAmount = () => {\r\n        const fobPrice = safelyParseNumber(fobPriceInput.current?.value);\r\n        const freight = safelyParseNumber(freightInput.current?.value);\r\n        const inspection = safelyParseNumber(inspectionInput.current?.value);\r\n        const insurance = safelyParseNumber(insuranceInput.current?.value);\r\n\r\n        const additionalPricesTotal = globalAdditionalPriceArray.reduce((sum, value) => sum + safelyParseNumber(value), 0);\r\n\r\n        // const total = Math.round(fobPrice + freight + inspection + (warrantyIsChecked ? warrantyPrice : 0) + insurance + additionalPricesTotal).toLocaleString();\r\n        const total = Math.round(fobPrice + freight + inspection + insurance + additionalPricesTotal).toLocaleString();\r\n        setTotalAmountCalculated(total);\r\n        globalInvoiceVariable.paymentDetails.totalAmount = total;\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        additionalNameRef.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalName ? invoiceData.paymentDetails.additionalName.join('\\n') : '';\r\n        additionalPriceRef.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalPrice ? invoiceData.paymentDetails.additionalPrice.join('\\n') : '';\r\n\r\n        globalInvoiceVariable.paymentDetails.incoterms = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.incoterms ? invoiceData.paymentDetails.incoterms : selectedIncoterms;\r\n        globalInvoiceVariable.paymentDetails.inspectionIsChecked = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionIsChecked ? invoiceData.paymentDetails.inspectionIsChecked : inspectionIsChecked;\r\n        globalInvoiceVariable.paymentDetails.inspectionName = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionName ? invoiceData.paymentDetails.inspectionName : inspectionName;\r\n        globalInvoiceVariable.paymentDetails.inspectionPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionPrice ? invoiceData.paymentDetails.inspectionPrice : inspectionIsChecked ? 300 : 0;\r\n        globalInvoiceVariable.paymentDetails.warrantyIsCheck = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyIsCheck ? invoiceData.paymentDetails.warrantyIsCheck : warrantyIsChecked;\r\n        // globalInvoiceVariable.paymentDetails.warrantyPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyPrice ? invoiceData.paymentDetails.warrantyPrice : warrantyIsChecked ? warrantyPrice : 0;\r\n        globalInvoiceVariable.paymentDetails.fobPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.fobPrice ? invoiceData.paymentDetails.fobPrice : fobPriceInput.current?.value;\r\n        globalInvoiceVariable.paymentDetails.freightPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.freightPrice ? invoiceData.paymentDetails.freightPrice : freightInput.current?.value;\r\n        globalInvoiceVariable.paymentDetails.insurancePrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.insurancePrice ? invoiceData.paymentDetails.insurancePrice : selectedIncoterms == 'CIF' ? insuranceInput.current?.value : 0;\r\n        globalInvoiceVariable.paymentDetails.additionalPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalPrice ? invoiceData.paymentDetails.additionalPrice : [];\r\n        globalInvoiceVariable.paymentDetails.additionalName = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalName ? invoiceData.paymentDetails.additionalName : [];\r\n        globalAdditionalPriceArray = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalPrice ? invoiceData.paymentDetails.additionalPrice : [];\r\n\r\n        calculateTotalAmount();\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        inspectionInput.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionPrice && invoiceData.paymentDetails.inspectionPrice == true ? invoiceData.paymentDetails.inspectionPrice : inspectionIsChecked ? 300 : 0;\r\n        calculateTotalAmount();\r\n\r\n    }, [inspectionIsChecked]);\r\n\r\n    useEffect(() => {\r\n\r\n        insuranceInput.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.insurancePrice && invoiceData.paymentDetails.incoterms == 'CIF' ? invoiceData.paymentDetails.insurancePrice : selectedIncoterms == 'CIF' ? 50 : 0;\r\n        freightInput.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.freightPrice ? invoiceData.paymentDetails.freightPrice : selectedIncoterms == 'FOB' ? 0 : freightCalculation;\r\n\r\n        calculateTotalAmount();\r\n\r\n    }, [selectedIncoterms]);\r\n\r\n    useEffect(() => {\r\n        calculateTotalAmount();\r\n\r\n    }, [warrantyIsChecked]);\r\n\r\n    const freightCalculation = (\r\n        (selectedChatData.m3 ? selectedChatData.m3 :\r\n            (selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ?\r\n                selectedChatData.carData.dimensionCubicMeters : 0)) *\r\n        Number(selectedChatData.freightPrice)\r\n    ).toFixed(2);\r\n\r\n    const totalPriceCalculation = (\r\n        (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n            (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n                selectedChatData.carData.fobPrice : 0) *\r\n            (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n                (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                    selectedChatData.currency.jpyToUsd : 0))) +\r\n        parseFloat(freightCalculation)\r\n    ).toFixed(2);\r\n\r\n    const fobPriceDollars = (\r\n        (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n            (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n                selectedChatData.carData.fobPrice : 0) *\r\n            (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n                (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                    selectedChatData.currency.jpyToUsd : 0))\r\n        ).toFixed(2));\r\n\r\n\r\n    const handleAdditionalPriceTextChange = (text) => {\r\n        // Process and filter each line\r\n        const filteredLines = text.split('\\n').map(line => {\r\n            let filteredLine = line.replace(/[^0-9.]/g, '');\r\n            const parts = filteredLine.split('.');\r\n            if (parts.length > 2) {\r\n                filteredLine = parts[0] + '.' + parts[1];\r\n            }\r\n            return filteredLine;\r\n        });\r\n\r\n        // Update the ref and the state\r\n        additionalPriceRef.current.value = filteredLines.join('\\n');\r\n        // setAdditionalPriceArray(filteredLines);\r\n        globalAdditionalPriceArray = filteredLines;\r\n        globalInvoiceVariable.paymentDetails.additionalPrice = filteredLines;\r\n        calculateTotalAmount();\r\n\r\n    };\r\n\r\n    const handleAdditionalNameTextChange = (text) => {\r\n        // Update the ref\r\n        additionalNameRef.current.value = text;\r\n\r\n        // Split the text into lines and update the state\r\n        const lines = text.split('\\n');\r\n        // setAdditionalNameArray(lines);\r\n        globalInvoiceVariable.paymentDetails.additionalName = lines;\r\n    };\r\n\r\n\r\n    const handleFobPriceInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        fobPriceInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.fobPrice = filteredText;\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    const handleFreightInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        freightInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.freightPrice = filteredText;\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    const handleInspectionInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        inspectionInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.inspectionPrice = filteredText;\r\n\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    const handleInsuranceInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        insuranceInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.insurancePrice = filteredText;\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignSelf: 'center', }}>\r\n                <Text style={{ fontWeight: 700, fontSize: 16, margin: 3, color: '#16A34A', }}>Payment Details</Text>\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Incoterms:</Text>\r\n                <Select\r\n                    selectedValue={selectedIncoterms}\r\n                    onValueChange={(value) => setSelectedIncoterms(value)}\r\n                    bgColor={'#FAFAFA'}\r\n                    accessibilityLabel=\"Choose Country\"\r\n                    placeholder=\"---\"\r\n                    _selectedItem={{\r\n                        bg: \"teal.600\",\r\n                        endIcon: <CheckIcon />,\r\n                    }}\r\n                    height={9}\r\n                    style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1, }}\r\n                >\r\n                    <Select.Item key={'C&F'} label={'C&F'} value={'C&F'} />\r\n                    <Select.Item key={'CIF'} label={'CIF'} value={'CIF'} />\r\n                    <Select.Item key={'FOB'} label={'FOB'} value={'FOB'} />\r\n                </Select>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Rate: </Text>\r\n                <Text style={{ fontWeight: 700, margin: 3, color: '#16A34A', }}>\r\n                    {selectedChatData.currency && selectedChatData.currency.usdToJpy\r\n                        ? Number(selectedChatData.currency.usdToJpy).toFixed(2) : '0.00'}\r\n                </Text>\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, marginTop: 10, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Inspection:</Text>\r\n                <Checkbox\r\n                    isChecked={inspectionIsChecked}\r\n                    onChange={value => {\r\n                        setInspectionIsChecked(value)\r\n                        globalInvoiceVariable.paymentDetails.inspectionIsChecked = value;\r\n                    }}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                />\r\n            </View>\r\n\r\n            {/* <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Warranty:</Text>\r\n                <Checkbox\r\n                    isChecked={warrantyIsChecked}\r\n                    onChange={value => setWarrantyIsChecked(value)}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                />\r\n                <Text style={{ fontWeight: 700, margin: 3, color: '#16A34A', }}>${warrantyPrice}</Text>\r\n            </View> */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2 }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3 }}>FOB Price:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1 }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleFobPriceInputChangeText}\r\n                    ref={fobPriceInput}\r\n                    defaultValue={invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.paymentDetails.fobPrice : selectedIncoterms == 'FOB' ? 0 : fobPriceDollars}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder='FOB Price'\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2 }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3 }}>Freight:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1 }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleFreightInputChangeText}\r\n                    ref={freightInput}\r\n                    defaultValue={freightCalculation}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder='Freight'\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, display: selectedIncoterms == 'CIF' ? 'flex' : 'none' }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Insurance:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1, }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleInsuranceInputChangeText}\r\n                    ref={insuranceInput}\r\n                    defaultValue={50}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder={`Insurance`}\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, display: inspectionIsChecked ? 'flex' : 'none' }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Inspection:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1, }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleInspectionInputChangeText}\r\n                    ref={inspectionInput}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder={`Inspection [${selectedChatData.inspectionName}]`}\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n                <Text style={{ fontWeight: 700, margin: 3, color: '#16A34A', }}>{`[${selectedChatData.inspectionName}]`}</Text>\r\n            </View>\r\n\r\n\r\n            <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Additional:</Text>\r\n                <TextInput ref={additionalNameRef} onChangeText={handleAdditionalNameTextChange} multiline placeholderTextColor='#9B9E9F' placeholder='Name'\r\n                    style={{ width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                <TextInput ref={additionalPriceRef} onChangeText={handleAdditionalPriceTextChange} multiline placeholderTextColor='#9B9E9F' placeholder='Price'\r\n                    style={{ width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignItems: 'center', }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Total Amount:</Text>\r\n                <Text style={{ fontWeight: 700, fontSize: 18, margin: 3, color: '#FF0000', }}>{`$${totalAmountCalculated}`}</Text>\r\n            </View>\r\n        </>\r\n    );\r\n\r\n\r\n}\r\n\r\nconst SelectPortOfDischarge = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [countriesDischarge, setCountriesDischarge] = useState([]);\r\n    const [portsData, setPortsData] = useState({});\r\n    const [nearestPorts, setNearestPorts] = useState([]);\r\n    const [selectedPortCountry, setSelectedPortCountry] = useState('');\r\n    const [selectedCountry, setSelectedCountry] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.discharge.country : selectedChatData.country);\r\n    const [selectedPort, setSelectedPort] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.discharge.port : selectedChatData.port);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.discharge.port : selectedChatData.port);\r\n\r\n        const fetchPorts = async () => {\r\n            const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    const sortedPorts = Object.keys(data)\r\n                        .map(portName => ({\r\n                            name: portName.replace(/_/g, '.'), // Replace '_' with '.'\r\n                            ...data[portName]\r\n                        }))\r\n                        .sort((a, b) => a.sortOrder - b.sortOrder);\r\n                    setNearestPorts(sortedPorts);\r\n                } else {\r\n                    console.log('No such document!');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        };\r\n\r\n        const fetchPortsData = async () => {\r\n            const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    setPortsData(data);\r\n                } else {\r\n                    console.log('No such document!');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        };\r\n\r\n        fetchPorts();\r\n        fetchPortsData();\r\n        // fetchCountries();\r\n\r\n        globalInvoiceVariable.discharge.port = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.discharge.port ? invoiceData.discharge.port : selectedPort;\r\n        globalInvoiceVariable.discharge.country = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.discharge.country ? invoiceData.discharge.country : selectedPortCountry;\r\n\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        // When selectedCountry changes, update nearestPorts\r\n        const selectedCountryData = countriesDischarge.find(country => country.name === selectedCountry);\r\n        if (selectedCountryData && selectedCountryData.nearestPorts) {\r\n            setNearestPorts(selectedCountryData.nearestPorts);\r\n        } else {\r\n            setNearestPorts([]); // Reset to empty if no ports or country not found\r\n        }\r\n    }, [selectedCountry, countriesDischarge]);\r\n\r\n    useEffect(() => {\r\n        const portData = portsData[selectedPort];\r\n        if (portData && portData.country) {\r\n            setSelectedPortCountry(portData.country);\r\n            // console.log('Nagoya Price ', portData.nagoyaPrice);\r\n            globalInvoiceVariable.discharge.country = portData.country;\r\n        } else {\r\n            setSelectedPortCountry(''); // Reset selected country if port not found or has no country\r\n            console.log('Not found');\r\n        }\r\n    }, [selectedPort, portsData]);\r\n\r\n    return (\r\n        <>\r\n            {/* <Select\r\n                selectedValue={selectedCountry}\r\n                onValueChange={(value) => {\r\n                    setSelectedCountry(value)\r\n                    globalInvoiceVariable.discharge.country = value;\r\n\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                flex={1}\r\n                accessibilityLabel=\"Choose Country\"\r\n                placeholder=\"---\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />,\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}\r\n            >\r\n                {countriesDischarge.map((country) => (\r\n                    <Select.Item key={country.name} label={country.name} value={country.name} />\r\n                ))}\r\n            </Select> */}\r\n            <Select\r\n                selectedValue={selectedPort}\r\n                onValueChange={(value) => {\r\n                    setSelectedPort(value)\r\n                    globalInvoiceVariable.discharge.port = value;\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                accessibilityLabel=\"Choose Port\"\r\n                placeholder=\"Select port\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />,\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}\r\n            >\r\n                {nearestPorts.map((port, index) => (\r\n                    <Select.Item key={index} label={port.name} value={port.name} />\r\n                ))}\r\n            </Select>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nconst SelectSalesPerson = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [selectedSales, setSelectedSales] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.salesPerson : (selectedChatData.carData && selectedChatData.carData.sales ? selectedChatData.carData.sales : ''));\r\n    const salesData = useSelector((state) => state.salesData);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        globalInvoiceVariable.salesPerson = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.salesPerson ? invoiceData.salesPerson : (selectedChatData.carData && selectedChatData.carData.sales ? selectedChatData.carData.sales : '');\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <Select\r\n            selectedValue={selectedSales}\r\n            onValueChange={(value) => {\r\n                setSelectedSales(value);\r\n                globalInvoiceVariable.salesPerson = value;\r\n            }}\r\n            bgColor={'#FAFAFA'}\r\n            accessibilityLabel=\"---\"\r\n            placeholder=\"---\"\r\n            _selectedItem={{\r\n                bg: \"teal.600\",\r\n                endIcon: <CheckIcon />\r\n            }}\r\n            style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}>\r\n            {salesData.map((item) => (\r\n                <Select.Item key={item.id} label={item.name} value={item.name} />\r\n            ))}\r\n        </Select>\r\n    );\r\n}\r\n\r\nconst SelectPortOfDeparture = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const portData = useSelector((state) => state.portData);\r\n    const salesData = useSelector((state) => state.salesData);\r\n    const [selectedPort, setSelectedPort] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.departurePort : (selectedChatData.carData && selectedChatData.carData.port ? selectedChatData.carData.port : ''));\r\n\r\n\r\n    useEffect(() => {\r\n        // console.log(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.departurePort : (selectedChatData.carData && selectedChatData.carData.port ? selectedChatData.carData.port : ''));\r\n\r\n        globalInvoiceVariable.departurePort = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.departurePort ? invoiceData.departurePort : (selectedChatData.carData && selectedChatData.carData.port ? selectedChatData.carData.port : '');\r\n        globalInvoiceVariable.departureCountry = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.departureCountry ? invoiceData.departureCountry : 'Japan';\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Select\r\n                selectedValue='Japan'\r\n                onValueChange={(value) => {\r\n                    globalInvoiceVariable.departureCountry = value;\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                flex={1}\r\n                accessibilityLabel=\"---\"\r\n                placeholder=\"---\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}>\r\n                <Select.Item key={'Japan'} label={'Japan'} value={'Japan'} />\r\n            </Select>\r\n\r\n            <Select\r\n                selectedValue={selectedPort}\r\n                onValueChange={(value) => {\r\n                    setSelectedPort(value);\r\n                    globalInvoiceVariable.departurePort = value;\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                flex={1}\r\n                accessibilityLabel=\"---\"\r\n                placeholder=\"---\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}>\r\n                {portData.map((item) => (\r\n                    <Select.Item key={item.id} label={item.name} value={item.name} />\r\n                ))}\r\n            </Select>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nconst NotifyPartyInput = ({ accountData, setAccountData }) => {\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const [isChecked, setIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.notifyParty.sameAsConsignee : true);\r\n\r\n    const notifyPartyName = useRef(null);\r\n    const notifyPartyAddress = useRef(null);\r\n    const notifyPartyCity = useRef(null);\r\n    const notifyPartyCountry = useRef(null);\r\n    const notifyPartyContactNumber = useRef(null);\r\n    const notifyPartyFax = useRef(null);\r\n    const notifyPartyEmail = useRef(null);\r\n\r\n    useEffect(() => {\r\n\r\n        notifyPartyName.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.name ? invoiceData.notifyParty.name : '';\r\n        notifyPartyAddress.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.address ? invoiceData.notifyParty.address : '';\r\n        notifyPartyCity.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.city ? invoiceData.notifyParty.city : '';\r\n        notifyPartyCountry.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.country ? invoiceData.notifyParty.country : '';\r\n        notifyPartyContactNumber.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.contactNumber ? invoiceData.notifyParty.contactNumber : '';\r\n        notifyPartyFax.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.fax ? invoiceData.notifyParty.fax : '';\r\n        notifyPartyEmail.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.email ? invoiceData.notifyParty.email : '';\r\n\r\n        globalInvoiceVariable.notifyParty.name = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.name ? invoiceData.notifyParty.name : notifyPartyName.current?.value;\r\n        globalInvoiceVariable.notifyParty.address = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.address ? invoiceData.notifyParty.address : notifyPartyAddress.current?.value;\r\n        globalInvoiceVariable.notifyParty.city = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.city ? invoiceData.notifyParty.city : notifyPartyCity.current?.value;\r\n        globalInvoiceVariable.notifyParty.country = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.country ? invoiceData.notifyParty.country : notifyPartyCountry.current?.value;\r\n        globalInvoiceVariable.notifyParty.contactNumber = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.contactNumber ? invoiceData.notifyParty.contactNumber : notifyPartyContactNumber.current?.value;\r\n        globalInvoiceVariable.notifyParty.fax = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.fax ? invoiceData.notifyParty.fax : notifyPartyFax.current?.value;\r\n        globalInvoiceVariable.notifyParty.email = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.email ? invoiceData.notifyParty.email : notifyPartyEmail.current?.value;\r\n        globalInvoiceVariable.notifyParty.sameAsConsignee = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.sameAsConsignee ? invoiceData.notifyParty.sameAsConsignee : isChecked;\r\n\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignSelf: 'center', }}>\r\n                <Text style={{ fontWeight: 700, fontSize: 16, margin: 3, color: '#FF0000', }}>Notify Party</Text>\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, }}>\r\n                <Checkbox\r\n                    isChecked={isChecked}\r\n                    onChange={value => {\r\n                        setIsChecked(value)\r\n                        globalInvoiceVariable.consignee.sameAsBuyer = value;\r\n                    }}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                >\r\n                    Same as consignee\r\n                </Checkbox>\r\n            </View>\r\n\r\n            <View style={{ display: isChecked ? 'none' : 'flex', }}>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Name:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.name = value;\r\n                    }}\r\n                        ref={notifyPartyName} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Name'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Address:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.address = value;\r\n                    }} ref={notifyPartyAddress} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Address'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>City:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.city = value;\r\n                    }} ref={notifyPartyCity} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='City'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Country:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.country = value;\r\n                    }} ref={notifyPartyCountry} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Country'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Contact Number:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.contactNumber = value;\r\n                    }} ref={notifyPartyContactNumber} disabled={isChecked} multiline placeholderTextColor='#9B9E9F' placeholder='Contact Number'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>FAX:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.fax = value;\r\n                    }} ref={notifyPartyFax} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='FAX'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Email:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.email = value;\r\n                    }} ref={notifyPartyEmail} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n            </View>\r\n\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />{/* Horizontal Line */}\r\n        </>\r\n    )\r\n}\r\n\r\nconst ConsigneeInput = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [isChecked, setIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.consignee.sameAsBuyer : true);\r\n    const [accountData, setAccountData] = useState({});\r\n\r\n    const consigneeName = useRef(null);\r\n    const consigneeAddress = useRef(null);\r\n    const consigneeCity = useRef(null);\r\n    const consigneeCountry = useRef(null);\r\n    const consigneeContactNumber = useRef(null);\r\n    const consigneeFax = useRef(null);\r\n    const consigneeEmail = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchAccountData = async () => {\r\n            if (!selectedChatData.participants && selectedChatData.participants.customer) return; // Make sure there's a selected email\r\n            const docRef = doc(projectExtensionFirestore, 'accounts', selectedChatData.participants.customer);\r\n\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    setAccountData(docSnap.data());\r\n                    // console.log(docSnap.data());\r\n                    consigneeName.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.name ? invoiceData.consignee.name : `${data.textFirst ? data.textFirst : ''} ${data.textLast ? data.textLast : ''}`;\r\n                    consigneeAddress.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.address ? invoiceData.consignee.address : `${data.textStreet ? data.textStreet : ''} ${data.textZip ? data.textZip : ''}`;\r\n                    consigneeCity.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.city ? invoiceData.consignee.city : `${data.city ? data.city : ''}`;\r\n                    consigneeCountry.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.country ? invoiceData.consignee.country : `${data.country ? data.country : ''}`;\r\n                    consigneeContactNumber.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.contactNumber ? invoiceData.consignee.contactNumber : `${data.textPhoneNumber ? data.textPhoneNumber : ''}`;\r\n                    consigneeFax.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.fax ? invoiceData.consignee.fax : `${data.fax ? data.fax : ''}`;\r\n                    consigneeEmail.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.email ? invoiceData.consignee.email : `${data.textEmail ? data.textEmail : ''}`;\r\n\r\n\r\n                    globalInvoiceVariable.consignee.name = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.name ? invoiceData.consignee.name : `${data.textFirst ? data.textFirst : ''} ${data.textLast ? data.textLast : ''}`;\r\n                    globalInvoiceVariable.consignee.address = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.address ? invoiceData.consignee.address : `${data.textStreet ? data.textStreet : ''} ${data.textZip ? data.textZip : ''}`;\r\n                    globalInvoiceVariable.consignee.city = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.city ? invoiceData.consignee.city : `${data.city ? data.city : ''}`;\r\n                    globalInvoiceVariable.consignee.country = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.country ? invoiceData.consignee.country : `${data.country ? data.country : ''}`;\r\n                    globalInvoiceVariable.consignee.contactNumber = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.contactNumber ? invoiceData.consignee.contactNumber : `${data.textPhoneNumber ? data.textPhoneNumber : ''}`;\r\n                    globalInvoiceVariable.consignee.fax = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.fax ? invoiceData.consignee.fax : `${data.fax ? data.fax : ''}`;\r\n                    globalInvoiceVariable.consignee.email = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.email ? invoiceData.consignee.email : `${data.textEmail ? data.textEmail : ''}`;\r\n                    globalInvoiceVariable.consignee.sameAsBuyer = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.sameAsBuyer ? invoiceData.consignee.sameAsBuyer : isChecked;\r\n\r\n                    // console.log(accountData.length);\r\n                } else {\r\n                    console.log('No such document!');\r\n                    setAccountData(null);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        };\r\n        fetchAccountData();\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        if (isChecked) {\r\n            consigneeName.current.value = `${accountData.textFirst ? accountData.textFirst : ''} ${accountData.textLast ? accountData.textLast : ''}`;\r\n            consigneeAddress.current.value = `${accountData.textStreet ? accountData.textStreet : ''} ${accountData.textZip ? accountData.textZip : ''}`;\r\n            consigneeCity.current.value = `${accountData.city ? accountData.city : ''}`;\r\n            consigneeCountry.current.value = `${accountData.country ? accountData.country : ''}`;\r\n            consigneeContactNumber.current.value = `${accountData.textPhoneNumber ? accountData.textPhoneNumber : ''}`;\r\n            consigneeFax.current.value = `${accountData.fax ? accountData.fax : ''}`;\r\n            consigneeEmail.current.value = `${accountData.textEmail ? accountData.textEmail : ''}`;\r\n        }\r\n\r\n        // console.log(globalInvoiceVariable);\r\n\r\n\r\n    }, [isChecked])\r\n\r\n\r\n    return (\r\n        <>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignSelf: 'center', }}>\r\n                <Text style={{ fontWeight: 700, fontSize: 16, margin: 3, color: '#0A78BE', }}>Consignee</Text>\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, }}>\r\n                <Checkbox\r\n                    isChecked={isChecked}\r\n                    onChange={value => {\r\n                        globalInvoiceVariable.consignee.sameAsBuyer = value;\r\n                        setIsChecked(value)\r\n                    }}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                >\r\n                    Same as buyer\r\n                </Checkbox>\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Name:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.name = value;\r\n                }} ref={consigneeName} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Name'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Address:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.address = value;\r\n                }} ref={consigneeAddress} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Address'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>City:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.city = value;\r\n                }} ref={consigneeCity} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='City'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Country:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.country = value;\r\n                }} ref={consigneeCountry} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Country'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Contact Number:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.contactNumber = value;\r\n                }} ref={consigneeContactNumber} disabled={isChecked} multiline placeholderTextColor='#9B9E9F' placeholder='Contact Number'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>FAX:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.fax = value;\r\n                }} ref={consigneeFax} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='FAX'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Email:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.email = value;\r\n                }} ref={consigneeEmail} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n\r\n            <NotifyPartyInput accountData={accountData} setAccountData={setAccountData} />\r\n        </>\r\n    );\r\n}\r\n\r\nconst InvoiceFeatures = ({ widthScaleFactor, heightScaleFactor }) => {\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    return (\r\n        <View style={{ flexDirection: 'row', flexWrap: 'wrap', width: 495 * widthScaleFactor, }}>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemAnBrSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Anti-Lock Braking System (ABS)</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemDrAi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Driver Airbag</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemPaAi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Passenger Airbag</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemSiAi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Side Airbag</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAiCoFr ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Air Conditioner (Front)</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAiCoRe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Air Conditioner (Rear)</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAMFMRa ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>AM/FM Radio</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAMFMSt ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>AM/FM Stereo</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortCDPl ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>CD Player</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortCDCh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>CD Changer</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortCrSpCo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Cruis Speed Control</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortDiSp ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}> Digital Speedometer</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortDVDPl ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>DVD Player</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortHDD ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Hard Disk Drive</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortNaSyGPS ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Navigation System (GPS)</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortPoSt ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Steering</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortPrAuSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Premium Audio System</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortReKeSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Remote Keyless System</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortTiStWh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Tilt Steering Wheel</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorLeSe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Leather Seats</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoDoLo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Door Locks</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoMi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Mirrors</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoSe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Seats</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoWi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Windows</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorReWiDe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Rear Window Defroster</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorReWiWi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Rear Window Wiper</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorThRoSe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Third Row Seats</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorTiGl ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Tinted Glasses</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ExteriorAlWh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Alloy Wheels</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ExteriorPoSlDo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Sliding Door</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ExteriorSuRo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Sunroof</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsCuWh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Customized Wheels</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsFuLo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Fully Loaded</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsMaHiAv ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Maintenance History Available</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsBrNeTi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Brand New Tires</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsNoAcHi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>No Accident History</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsNoSmPrOw ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Non-Smoking Previous Owner</Text>\r\n            </View>\r\n\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsOnOwHi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>One Owner History</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsPeRaTi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Performance-rated Tires</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsReBo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Repainted Body</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsTuEn ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Turbo Engine</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsUpAuSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Upgraded Audio System</Text>\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst createHmacSha256Hash = (data, secretKey) => {\r\n    const hash = HmacSHA256(data, secretKey);\r\n    return enc.Hex.stringify(hash);\r\n};\r\n\r\n\r\nconst ConfirmPaymentModalContent = () => {\r\n    const dispatch = useDispatch();\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const selectedCustomerData = useSelector((state) => state.selectedCustomerData);\r\n\r\n\r\n    const [historyModalVisible, setHistoryModalVisible] = useState(false);\r\n\r\n    const [isConfirmLoading, setIsConfirmLoading] = useState(false);\r\n\r\n    const totalAmountString = invoiceData.paymentDetails.totalAmount;\r\n    const totalAmountNumber = parseFloat(totalAmountString.replace(/,/g, ''));\r\n\r\n    const inputAmountRef = useRef(null);\r\n\r\n    const handleHistoryModalOpen = () => {\r\n        setHistoryModalVisible(true);\r\n\r\n        // console.log(selectedChatData.payments);\r\n    }\r\n\r\n    const handleHistoryModalClose = () => {\r\n        setHistoryModalVisible(false);\r\n\r\n    }\r\n\r\n    const handleInputAmountChangeText = (text) => {\r\n        // Remove characters that are not digits, dot, or minus, and ensure minus is only at the start\r\n        const filteredText = text\r\n            .replace(/[^0-9.-]/g, '')  // Remove characters that are not digits, dot, or minus\r\n            .replace(/(.)\\-/g, '$1')   // Remove minus if not at the start\r\n            .replace(/^-(?=\\-)/, '')   // Remove extra minus at the start\r\n            .replace(/(\\..*)\\./g, '$1'); // Allow only one dot\r\n\r\n        // Update the input field\r\n        inputAmountRef.current.value = filteredText;\r\n    };\r\n\r\n\r\n\r\n    const handleCompletePaymentPress = () => {\r\n        const filteredText = invoiceData.paymentDetails.totalAmount.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1') - totalValue;\r\n        inputAmountRef.current.value = filteredText;\r\n    }\r\n\r\n\r\n    const fullPaymentMessage = async () => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `Full Payment Received\r\n\r\nDear Customer,\r\n\r\nI hope this message finds you well. \r\n\r\nWe are writing to confirm that we have received your full payment. \r\n\r\nThank you for settling your account promptly.\r\n\r\nShould you have any further questions or require assistance, please feel free to contact us.\r\n                \r\nBest regards,\r\nReal Motor Japan`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'InputPayment',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `Full Payment Received\r\n\r\nDear Customer,\r\n\r\nI hope this message finds you well. \r\n\r\nWe are writing to confirm that we have received your full payment. \r\n                \r\nThank you for settling your account promptly.\r\n                \r\nShould you have any further questions or require assistance, please feel free to contact us.\r\n                                \r\nBest regards,\r\nReal Motor Japan`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n\r\n    const overBalanceMessage = async (amount) => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `Dear Customer,\r\n\r\nGood day! \r\n\r\nWe're writing to inform you about your account with us at Real Motor Japan.\r\n                \r\nYou have an extra overbalance in your account.\r\n\r\nAmount: $${amount}\r\n                \r\nFeel free to contact us if you have any questions. We're here to help.\r\n                \r\nBest regards,\r\nReal Motor Japan`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'InputPayment',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `Dear Customer,\r\n\r\nGood day! \r\n                \r\nWe're writing to inform you about your account with us at Real Motor Japan.\r\n                                \r\nYou have an extra overbalance in your account.\r\n                \r\nAmount: $${amount}\r\n                                \r\nFeel free to contact us if you have any questions. We're here to help.\r\n                                \r\nBest regards,\r\nReal Motor Japan`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n    const paymentMessage = async (amount, transactionDate) => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `🌟 Payment Confirmation Alert 🌟\r\n\r\nDear Customer! 👋\r\n\r\nWe're thrilled to inform you that your recent payment has been successfully reflected in our bank account.\r\n\r\nYour prompt and efficient transaction is greatly appreciated! 🎉\r\n\r\n🔍 Payment Details:\r\n\r\nAmount: $${amount}\r\nTransaction Date: ${transactionDate}\r\n\r\nYour account and services are now fully up-to-date. If you have any further questions or require assistance, feel free to reach out.\r\n\r\nThank you for your continued trust in us.\r\nLooking forward to serving you more in the future! 😊\r\n\r\nBest regards,\r\nReal Motor Japan`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'InputPayment',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `🌟 Payment Confirmation Alert 🌟\r\n\r\nDear Customer! 👋\r\n\r\nWe're thrilled to inform you that your recent payment has been successfully reflected in our bank account.\r\n\r\nYour prompt and efficient transaction is greatly appreciated! 🎉\r\n\r\n🔍 Payment Details:\r\n\r\nAmount: $${amount}\r\nTransaction Date: ${transactionDate}\r\n\r\nYour account and services are now fully up-to-date. If you have any further questions or require assistance, feel free to reach out.\r\n\r\nThank you for your continued trust in us.\r\nLooking forward to serving you more in the future! 😊\r\n\r\nBest regards,\r\nReal Motor Japan`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n    const confirmPayment = async () => {\r\n        setIsConfirmLoading(true);\r\n\r\n        const amountNeeded = invoiceData.paymentDetails.totalAmount ? invoiceData.paymentDetails.totalAmount.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1') - totalValue : '';\r\n        const docRef = doc(projectExtensionFirestore, 'chats', selectedChatData.id);\r\n        const docRefCustomer = doc(projectExtensionFirestore, 'accounts', selectedChatData.participants.customer);\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n\r\n        const newPayments = [\r\n            { value: inputAmountRef.current.value, date: formattedTime },\r\n        ];\r\n\r\n        const newPaymentsAccount = [\r\n            { value: inputAmountRef.current.value, date: formattedTime, vehicleRef: selectedChatData.carData.referenceNumber, vehicleName: selectedChatData.carData.carName, },\r\n        ];\r\n\r\n        const inputAmount = inputAmountRef.current.value;\r\n        const numericInputAmount = Number(inputAmount);\r\n        const formattedInputAmount = numericInputAmount.toLocaleString();\r\n        const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n        if (inputAmount === '' || inputAmount === '0') {\r\n            setIsConfirmLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            if (!inputAmount.startsWith('-')) {\r\n                // First, execute paymentMessage\r\n                await paymentMessage(formattedInputAmount, formattedTime);\r\n                await delay(10); //10ms delay\r\n\r\n                if (numericInputAmount >= amountNeeded) {\r\n                    // Once paymentMessage is successful, execute fullPaymentMessage\r\n                    await fullPaymentMessage();\r\n                    await delay(10); //10ms delay\r\n\r\n                    if (numericInputAmount > amountNeeded) {\r\n                        // Calculate overbalance and execute overBalanceMessage\r\n                        const overBalance = numericInputAmount - amountNeeded;\r\n\r\n                        if (overBalance > 0) {\r\n                            await overBalanceMessage(selectedCustomerData.overBalance ? selectedCustomerData.overBalance + overBalance : '');\r\n                            await delay(10); //10ms delay\r\n                            await updateDoc(docRefCustomer, {\r\n                                overBalance: increment(overBalance),\r\n                            });\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    // Update step indicator for successful payment\r\n                    await updateDoc(docRef, {\r\n                        'stepIndicator.value': 4,\r\n                        'stepIndicator.status': 'Payment Confirmed',\r\n                    });\r\n\r\n                } else {\r\n                    // Handle the case where the payment is less than the amount needed\r\n                    console.log('Partial payment received');\r\n                }\r\n\r\n                // Update payments and payments history\r\n\r\n                await updateDoc(docRef, {\r\n                    payments: arrayUnion(...newPayments)\r\n                });\r\n\r\n                await updateDoc(docRefCustomer, {\r\n                    paymentsHistory: arrayUnion(...newPaymentsAccount)\r\n                });\r\n\r\n            } else {\r\n                console.error('Negative value entered');\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error processing payment: ', error);\r\n        } finally {\r\n            setIsConfirmLoading(false);\r\n            dispatch(setTransactionModalVisible(false));\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    function formatDate(dateString) {\r\n        // Remove ' at ' from the date string\r\n        const cleanedDateString = dateString.replace(' at ', ' ');\r\n        const date = new Date(cleanedDateString);\r\n\r\n        if (isNaN(date.getTime())) {\r\n            // Date is not valid\r\n            console.error(\"Invalid Date:\", dateString);\r\n            return \"Invalid Date\";\r\n        }\r\n\r\n        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n        const year = date.getFullYear();\r\n        const month = months[date.getMonth()];\r\n        const day = date.getDate().toString().padStart(2, '0');\r\n\r\n        let hours = date.getHours();\r\n        const minutes = date.getMinutes().toString().padStart(2, '0');\r\n        const ampm = hours >= 12 ? 'pm' : 'am';\r\n\r\n        hours = hours % 12;\r\n        hours = hours ? hours : 12; // the hour '0' should be '12'\r\n\r\n        return `${year} ${month} ${day} at ${hours}:${minutes}${ampm}`;\r\n    }\r\n\r\n    const PaymentHistoryModal = ({ historyModalVisible, handleHistoryModalClose, payments }) => {\r\n        // Create a copy of payments and sort it by date in descending order\r\n        const sortedPayments = [...payments].sort((a, b) => {\r\n            const dateA = a.date;\r\n            const dateB = b.date;\r\n            return dateB - dateA; // Sorts in descending order\r\n        });\r\n\r\n        // console.log(sortedPayments);\r\n\r\n        return (\r\n            <Modal isOpen={historyModalVisible} onClose={handleHistoryModalClose} useRNModal>\r\n                <Modal.Content style={{ backgroundColor: 'white', borderRadius: 10 }}>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Header style={{ textAlign: 'center', fontSize: 18, fontWeight: 'bold', color: '#333' }}>\r\n                        Payment History\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <ScrollView style={{ flex: 1, paddingHorizontal: 15, maxHeight: 500, }}>\r\n                            {\r\n                                sortedPayments.length > 0 ?\r\n                                    sortedPayments.map((payment, index) => (\r\n                                        <View key={index} style={{\r\n                                            marginBottom: 15,\r\n                                            backgroundColor: '#F8F9FF', // Card background color\r\n                                            borderRadius: 10, // Rounded corners for the card\r\n                                            shadowColor: '#000', // Shadow color\r\n                                            shadowOffset: { width: 0, height: 2 },\r\n                                            shadowOpacity: 0.1,\r\n                                            shadowRadius: 2,\r\n                                            elevation: 3, // Elevation for Android\r\n                                            padding: 15, // Padding inside the card\r\n                                            borderBottomWidth: 1,\r\n                                            borderBottomColor: '#eee',\r\n                                        }}>\r\n\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black', marginBottom: 5 }}>\r\n                                                <Text style={{ fontWeight: 'bold', color: '#0A78BE', }}>Date: </Text>\r\n                                                <Text style={{ color: '#333' }}>\r\n                                                    {formatDate(sortedPayments[sortedPayments.length - 1 - index].date)}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black', marginBottom: 5 }}>\r\n                                                <Text style={{ fontWeight: 'bold', color: '#0A78BE', }}>Value: </Text>\r\n                                                <Text style={{ color: Number(sortedPayments[sortedPayments.length - 1 - index].value).toLocaleString().startsWith('-') ? '#FF0000' : '#16A34A' }}>\r\n                                                    ${Number(sortedPayments[sortedPayments.length - 1 - index].value).toLocaleString()}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                        </View>\r\n                                    )) :\r\n                                    <Text style={{ fontWeight: 'bold', alignSelf: 'center', }} italic>No history to show</Text>\r\n                            }\r\n                        </ScrollView>\r\n\r\n                    </Modal.Body>\r\n                </Modal.Content>\r\n            </Modal>\r\n        );\r\n    };\r\n\r\n    const totalValue = selectedChatData.payments\r\n        ? selectedChatData.payments.reduce((sum, payment) => {\r\n            const value = Number(payment.value);\r\n            return sum + (isNaN(value) ? 0 : value);\r\n        }, 0)\r\n        : 0;\r\n\r\n    const isTotalValueGreater = Number(totalValue) < Number(invoiceData.paymentDetails.totalAmount.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1'));\r\n    const displayedAmount = isTotalValueGreater ? Number(totalValue).toLocaleString() : invoiceData.paymentDetails.totalAmount;\r\n\r\n    return (\r\n\r\n        <View style={{ flex: 1, }}>\r\n\r\n            <View style={{ marginLeft: 5, }}>\r\n\r\n                <Text style={{ fontWefight: 700, fontSize: 14, }}>Total Paid:</Text>\r\n\r\n                <Progress w=\"300\" shadow={2} value={Number(totalValue)} max={totalAmountNumber} _filledTrack={{\r\n                    bg: \"lime.500\"\r\n                }} />\r\n\r\n                <Text style={{ fontWeight: 700, fontSize: 14, color: '#FF0000', }}>${displayedAmount}\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#8D7777', }}> out of </Text>\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#16A34A', }}>{`$${invoiceData.paymentDetails.totalAmount}`}</Text>\r\n                </Text>\r\n\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ marginLeft: 5, }}>\r\n\r\n                <Pressable\r\n                    onPress={handleHistoryModalOpen}\r\n                    style={{ width: 'fit-content', }}>\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#0A78BE', }} underline selectable={false}>Payments History</Text>\r\n                </Pressable>\r\n\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ marginLeft: 5, marginTop: 5, }}>\r\n\r\n                <Text style={{ fontWeight: 700, fontSize: 14, }}>Input Amount:</Text>\r\n\r\n                <View style={{ flexDirection: 'row', alignItems: 'center', }}>\r\n\r\n                    <Text style={{ fontWeight: 700, fontSize: 18, }}>$</Text>\r\n\r\n                    <TextInput\r\n                        ref={inputAmountRef}\r\n                        placeholderTextColor='#9B9E9F' placeholder='Input Amount'\r\n                        style={{ height: 35, width: 300, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                        onChangeText={handleInputAmountChangeText}\r\n                    />\r\n\r\n                </View>\r\n\r\n                <Pressable\r\n                    onPress={handleCompletePaymentPress}\r\n                    style={{ width: 'fit-content', }}>\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#16A34A', }} underline selectable={false}>Complete Payment</Text>\r\n                </Pressable>\r\n\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', margin: 5, }}>\r\n                <View\r\n                    style={{\r\n                        flex: 1,\r\n                        backgroundColor: '#16A34A', // Change color on hover\r\n                        borderRadius: 5,\r\n                        padding: 5,\r\n                    }}\r\n                >\r\n                    {!isConfirmLoading ? (\r\n                        <Pressable\r\n                            onPress={() => confirmPayment()}\r\n                        >\r\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>\r\n                                Confirm\r\n                            </Text>\r\n                        </Pressable>\r\n                    ) : (\r\n                        <Spinner size={'sm'} color={'white'} />)}\r\n\r\n                </View>\r\n            </View>\r\n\r\n            <PaymentHistoryModal\r\n                historyModalVisible={historyModalVisible}\r\n                handleHistoryModalClose={handleHistoryModalClose}\r\n                payments={selectedChatData.payments ? selectedChatData.payments : []} />\r\n\r\n        </View>\r\n\r\n    );\r\n\r\n}\r\n\r\nconst IssueProformaInvoiceModalContent = () => {\r\n    const dispatch = useDispatch();\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const currentDate = useSelector((state) => state.currentDate);\r\n    const [isConfirmHovered, setIsConfirmHovered] = useState(false);\r\n    const [isConfirmLoading, setIsConfirmLoading] = useState(false);\r\n\r\n    const cfsInputRef = useRef(null);\r\n    const placeOfDeliveryInputRef = useRef(null);\r\n    const secretKey = CRYPTO_KEY.toString();\r\n\r\n\r\n\r\n    const invoiceMessage = async () => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: 'Issued Invoice',\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'IssuedInvoice',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: 'Issued Invoice',\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const confirmInvoice = async () => {\r\n        setIsConfirmLoading(true);\r\n        const year = currentDate.split('-')[0]; // Split the date and get the year\r\n        const yearSuffix = year.slice(-2); // Get last 2 digits of the year\r\n        const collectionRef = collection(projectExtensionFirestore, \"IssuedInvoice\");\r\n\r\n        try {\r\n            // Retrieve all documents for the current yearF\r\n            const querySnapshot = await getDocs(collectionRef);\r\n            let maxNumber = 0;\r\n\r\n            querySnapshot.forEach((doc) => {\r\n                const docName = doc.id;\r\n                if (docName.startsWith(yearSuffix)) {\r\n                    const number = parseInt(docName.substring(2), 10);\r\n                    if (number > maxNumber) {\r\n                        maxNumber = number;\r\n                    }\r\n                }\r\n            });\r\n\r\n            const nextNumber = maxNumber + 1;\r\n            const docName = `${yearSuffix}${nextNumber}`;\r\n            const docRef = doc(projectExtensionFirestore, \"IssuedInvoice\", docName);\r\n            const docRefChatId = doc(projectExtensionFirestore, \"chats\", selectedChatData.id);\r\n\r\n            const hashedData = createHmacSha256Hash(docName, secretKey);\r\n\r\n            // Create a new document with the globalInvoiceVariable object\r\n            if (selectedChatData.invoiceNumber) {\r\n                const updateDocRef = doc(projectExtensionFirestore, \"IssuedInvoice\", selectedChatData.invoiceNumber);\r\n\r\n                await setDoc(updateDocRef, {\r\n                    ...globalInvoiceVariable,\r\n                    carData: selectedChatData.carData,\r\n                }, { merge: true });\r\n\r\n                if (selectedChatData.stepIndicator.value == 1) {\r\n                    await updateDoc(docRefChatId, {\r\n                        'stepIndicator.status': 'Issue Proforma Invoice',\r\n                        'stepIndicator.value': 2,\r\n                        // finalPrice: globalInvoiceVariable.paymentDetails.totalAmount.replace(/,/g, ''),\r\n                    });\r\n                }\r\n\r\n                invoiceMessage();\r\n                setIsConfirmLoading(false);\r\n                dispatch(setTransactionModalVisible(false));\r\n            }\r\n\r\n            else {\r\n\r\n                await setDoc(docRef, {\r\n                    ...globalInvoiceVariable,\r\n                    cryptoNumber: hashedData,\r\n                    carData: selectedChatData.carData,\r\n                });\r\n\r\n                await updateDoc(docRefChatId, {\r\n                    keywords: arrayUnion(docName),\r\n                    invoiceNumber: docName,\r\n                    'stepIndicator.status': 'Issue Proforma Invoice',\r\n                    'stepIndicator.value': 2,\r\n                    // finalPrice: globalInvoiceVariable.paymentDetails.totalAmount.replace(/,/g, ''),\r\n                });\r\n\r\n                invoiceMessage();\r\n                setIsConfirmLoading(false);\r\n                dispatch(setTransactionModalVisible(false));\r\n\r\n\r\n            }\r\n\r\n\r\n        } catch (error) {\r\n            console.error(\"Error creating document: \", error);\r\n        }\r\n    };\r\n\r\n    // useEffect(() => {\r\n    //     calculateTotalAmount();\r\n    // }, [additionalPriceArray]);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        globalInvoiceVariable.cfs = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.cfs ? invoiceData.cfs : cfsInputRef.current?.value;\r\n        globalInvoiceVariable.placeOfDelivery = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.placeOfDelivery ? invoiceData.placeOfDelivery : placeOfDeliveryInputRef.current?.value;\r\n\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <ScrollView style={{ flex: 1, maxHeight: 500, }}>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>CFS:</Text>\r\n                <TextInput\r\n                    defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.cfs ? invoiceData.cfs : ''}\r\n                    ref={cfsInputRef} placeholderTextColor='#9B9E9F' placeholder='Input CFS (Optional)'\r\n                    style={{ height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onChangeText={(value) => globalInvoiceVariable.cfs = value} />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Place of Delivery:</Text>\r\n                <TextInput\r\n                    defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.placeOfDelivery ? invoiceData.placeOfDelivery : ''}\r\n                    ref={placeOfDeliveryInputRef} placeholderTextColor='#9B9E9F' placeholder='Place of Delivery (Optional)'\r\n                    style={{ height: 25, width: 200, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onChangeText={(value) => globalInvoiceVariable.placeOfDelivery = value} />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, alignItems: 'center' }}>\r\n                <Text style={{ fontWeight: 700, margin: 3 }}>Port of Departure:</Text>\r\n                <SelectPortOfDeparture />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Sales Person:</Text>\r\n                <SelectSalesPerson />\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 5, }} />\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Port of Discharge:</Text>\r\n                {/*Select Discharge*/}\r\n                <SelectPortOfDischarge />\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 5, }} />\r\n\r\n            <ConsigneeInput />\r\n\r\n            <PaymentDetails />\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />\r\n\r\n            <BankInformation />\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', margin: 5, }}>\r\n                <View\r\n\r\n                    // onTouchEnd={() => confirmInvoice()}\r\n                    style={{\r\n                        flex: 1,\r\n                        backgroundColor: isConfirmHovered ? '#145A32' : '#16A34A', // Change color on hover\r\n                        borderRadius: 5,\r\n                        padding: 5,\r\n                    }}\r\n\r\n                // onMouseEnter={() => setIsConfirmHovered(true)}\r\n                // onMouseLeave={() => setIsConfirmHovered(false)}\r\n                >\r\n                    {!isConfirmLoading ? (\r\n                        <Pressable onPress={() => confirmInvoice()}>\r\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>\r\n                                Confirm\r\n                            </Text>\r\n                        </Pressable>\r\n\r\n                    ) : (\r\n                        <Spinner size={'sm'} color={'white'} />)}\r\n\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\n\r\nconst ProfitCalculator = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const [totalSCCAmount, setTotalSCCAmount] = useState(0);\r\n    const [formattedTotalSCCAmount, setFormattedTotalSCCAmount] = useState(0);\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [totalProfitAmountDollars, setTotalProfitAmountDollars] = useState(0);\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n\r\n    const inputPriceRef = useRef(null);\r\n\r\n\r\n    const [portsData, setPortsData] = useState({});\r\n    const [origFreight, setOrigFreight] = useState(0);\r\n    const [lastFetchedPort, setLastFetchedPort] = useState('');\r\n\r\n\r\n    // Function to fetch ports data from Firestore\r\n    const fetchPortsData = async () => {\r\n        const currentPort = invoiceData.discharge.port;\r\n        const freightOrigPrice = selectedChatData.freightOrigPrice;\r\n\r\n        // Fetch data if the current port is different from the last fetched port\r\n        // and if freightOrigPrice is valid (exists, not an empty string, and not 0)\r\n        if (currentPort !== lastFetchedPort && !freightOrigPrice) {\r\n\r\n            const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    if (data[currentPort]?.kobePrice !== undefined) {\r\n\r\n                        if (invoiceData.departurePort == \"Nagoya\") {\r\n\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].nagoyaPrice,\r\n                            });\r\n                            // console.log(\"Nagoya Price \", data[currentPort].nagoyaPrice);\r\n\r\n                        }\r\n                        else if (invoiceData.departurePort == \"Yokohama\") {\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].yokohamaPrice,\r\n                            });\r\n                            // console.log(\"Yokohama Price \", data[currentPort].yokohamaPrice);\r\n\r\n                        }\r\n                        else if (invoiceData.departurePort == \"Kyushu\") {\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].kyushuPrice,\r\n                            });\r\n                            // console.log(\"Kyushu Price \", data[currentPort].kyushuPrice);\r\n\r\n                        }\r\n                        else if (invoiceData.departurePort == \"Kobe\") {\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].kobePrice,\r\n                            });\r\n                            // console.log(\"Kobe Price \", data[currentPort].kobePrice);\r\n\r\n                        }\r\n\r\n                        setLastFetchedPort(currentPort); // Update last fetched port\r\n                    } else {\r\n                        console.log('Port data not found for the given port');\r\n                    }\r\n                } else {\r\n                    console.log('No such document!');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        } else {\r\n            console.log('No need to fetch new data');\r\n        }\r\n    };\r\n\r\n\r\n    // useEffect for fetching ports data\r\n    // useEffect(() => {\r\n    //     // Fetch ports data\r\n    //     const fetchPortsData = async () => {\r\n    //         const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n\r\n    //         try {\r\n    //             const docSnap = await getDoc(docRef);\r\n\r\n    //             if (docSnap.exists()) {\r\n    //                 const data = docSnap.data();\r\n    //                 setPortsData(data[invoiceData.discharge.port].kobePrice);\r\n    //                 console.log(data[invoiceData.discharge.port].kobePrice);\r\n    //             } else {\r\n    //                 console.log('No such document!');\r\n    //             }\r\n    //         } catch (error) {\r\n    //             console.error('Error fetching document:', error);\r\n    //         }\r\n    //     };\r\n\r\n    //     fetchPortsData();\r\n\r\n    // }, [invoiceData]);\r\n\r\n\r\n    const handleModalOpen = () => {\r\n        setModalVisible(true);\r\n        inputPriceRef.current.value = defaultInputPrice;\r\n        calculateTotalAmount();\r\n\r\n    };\r\n\r\n    const handleModalClose = () => {\r\n        setModalVisible(false);\r\n\r\n    };\r\n\r\n\r\n    const fee = {\r\n        auction: 10000,\r\n        transport: 10000,\r\n        shippingAgent: 15000,\r\n    };\r\n\r\n    const purchasedPrice = Number(selectedChatData.carData && selectedChatData.carData.purchasedPrice ? selectedChatData.carData.purchasedPrice : 0);\r\n    const formattedPurchasedPrice = Number(purchasedPrice).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const auctionFee = Number(fee.auction);\r\n    const formattedAuctionFee = Number(auctionFee).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const transportFee = Number(fee.transport);\r\n    const formattedTransportFee = Number(transportFee).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const shippingAgentFee = Number(fee.shippingAgent);\r\n    const formattedShippingAgentFee = Number(shippingAgentFee).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const cubicMeter = Number(selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ? selectedChatData.carData.dimensionCubicMeters : 0).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n\r\n    const costPerCubicMeter = Number(selectedChatData && selectedChatData.freightOrigPrice ? selectedChatData.freightOrigPrice : 0);\r\n    const formattedCostPerCubicMeter = Number(costPerCubicMeter).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const totalCubicMeterCostDollars = Number(costPerCubicMeter * cubicMeter);\r\n    const formattedTotalCubicMeterCostDollars = Number(costPerCubicMeter * cubicMeter).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const totalCubicMeterCostYen = Number(totalCubicMeterCostDollars * selectedChatData.currency.usdToJpy);\r\n    const formattedTotalCubicMeterCostYen = Number(totalCubicMeterCostYen).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const realTotalPriceYen = (purchasedPrice + auctionFee + transportFee + shippingAgentFee + totalSCCAmount + totalCubicMeterCostYen)\r\n    const formattedRealTotalPriceYen = Number(realTotalPriceYen).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const realTotalPriceDollars = realTotalPriceYen * selectedChatData.currency.jpyToUsd;\r\n    const formattedRealTotalPriceDollars = realTotalPriceDollars.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n\r\n    const freightCalculation = ((selectedChatData.m3 ? selectedChatData.m3 :\r\n        (selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ?\r\n            selectedChatData.carData.dimensionCubicMeters : 0)) *\r\n        Number(selectedChatData.freightPrice));\r\n\r\n\r\n    const totalPriceCalculation = (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n        (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n            selectedChatData.carData.fobPrice : 0) *\r\n        (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n            (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                selectedChatData.currency.jpyToUsd : 0))) + freightCalculation;\r\n\r\n    const defaultInputPrice = Math.round(\r\n        invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount\r\n            ? Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, ''))\r\n            : totalPriceCalculation\r\n    );\r\n\r\n\r\n\r\n\r\n    const safelyParseNumber = (value) => {\r\n        const number = Number(value.replace(/,/g, ''));\r\n        return isNaN(number) ? 0 : number;\r\n    };\r\n\r\n    const calculateTotalAmount = () => {\r\n\r\n        const inputPrice = safelyParseNumber(inputPriceRef.current?.value);\r\n\r\n        const totalAmountDollars = Math.round(inputPrice - realTotalPriceDollars);\r\n        setTotalProfitAmountDollars(totalAmountDollars);\r\n        // const total = Math.round(fobPrice + freight + inspection + insurance + additionalPricesTotal).toLocaleString();\r\n        // setTotalAmountCalculated(total);\r\n        // globalInvoiceVariable.paymentDetails.totalAmount = total;\r\n    };\r\n\r\n    const handleInputPriceChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9]/g, '');\r\n        inputPriceRef.current.value = filteredText;\r\n\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        if (selectedChatData.carData && selectedChatData.carData.supplyChainsCostsData) {\r\n\r\n            const amounts = selectedChatData.carData.supplyChainsCostsData.map((item) => {\r\n                const expenseName = Object.keys(item)[0];\r\n                const expenseData = item[expenseName];\r\n                return parseFloat(expenseData.amount.replace(',', '')) || 0;\r\n            });\r\n\r\n            // Use reduce to add up all the amounts\r\n            const totalAmount = amounts.reduce((accumulator, currentValue) => accumulator + currentValue, 0);\r\n            const formattedTotalAmount = totalAmount.toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n            setTotalSCCAmount(totalAmount);\r\n            setFormattedTotalSCCAmount(formattedTotalAmount);\r\n\r\n\r\n            // console.log(defaultInputPrice);\r\n            // console.log(realTotalPriceDollars);\r\n            // console.log(formattedRealTotalPriceDollars);\r\n            // console.log(realTotalPriceYen);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const freightOrigPrice = selectedChatData.freightOrigPrice;\r\n\r\n        if (modalVisible && !freightOrigPrice) {\r\n            fetchPortsData();\r\n        }\r\n\r\n\r\n    }, [modalVisible]);\r\n\r\n    useEffect(() => {\r\n\r\n        if (totalSCCAmount !== 0 || totalSCCAmount !== '') {\r\n            const totalAmountDollars = Math.round(defaultInputPrice - realTotalPriceDollars);\r\n            setTotalProfitAmountDollars(totalAmountDollars);\r\n        }\r\n\r\n\r\n    }, [totalSCCAmount]);\r\n\r\n    return (\r\n\r\n        <>\r\n            <Pressable\r\n                onPress={handleModalOpen}\r\n                focusable={false}\r\n                variant='ghost'\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                style={{\r\n                    marginTop: 3,\r\n                    paddingVertical: 3,\r\n                    paddingHorizontal: 5,\r\n                    flexDirection: 'row', // Align items in a row\r\n                    alignItems: 'center', // Center items vertically\r\n                    justifyContent: 'center',\r\n                    borderRadius: 5,\r\n                    backgroundColor: isHovered ? '#4c555c' : '#6e7a83',\r\n                }}>\r\n                <Ionicons size={15} color={'white'} name='calculator' />\r\n                <Text style={{ textAlign: 'center', color: 'white', fontWeight: 'bold', }} >Profit Calculator</Text>\r\n            </Pressable>\r\n\r\n            <Modal\r\n                isOpen={modalVisible}\r\n                onClose={() => {\r\n                    handleModalClose()\r\n                }}\r\n                initialFocusRef={inputPriceRef}\r\n                size={'lg'}\r\n            >\r\n                <Modal.Content>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Header>Profit Calculator</Modal.Header>\r\n                    <Modal.Body style={{ flexDirection: 'row', backgroundColor: '#fafafa', }}>\r\n\r\n                        <View style={{ flex: 1, borderRightWidth: 1, borderRightColor: '#DADDE1', }}>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Profit (Yen):</Text>\r\n                                <Text selectable style={{\r\n                                    fontWeight: '700', fontSize: 18,\r\n                                    color: Number(totalProfitAmountDollars * selectedChatData.currency.usdToJpy) < 0 ? '#FF0000' : '#8D7777',\r\n                                }}>\r\n                                    {`${Number(totalProfitAmountDollars * selectedChatData.currency.usdToJpy).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Profit (US Dollars):</Text>\r\n                                <Text selectable style={{\r\n                                    fontWeight: '700', fontSize: 18,\r\n                                    color: Number(totalProfitAmountDollars) < 0 ? '#FF0000' : '#16A34A',\r\n                                }}>\r\n                                    {`${Number(totalProfitAmountDollars).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Profit (Percentage):</Text>\r\n                                <Text selectable style={{\r\n                                    fontWeight: '700', fontSize: 18,\r\n                                    color: Number(((totalProfitAmountDollars * selectedChatData.currency.usdToJpy) / purchasedPrice) * 100) <= 10.5 ? '#FF0000' : '#336699',\r\n                                }}>\r\n                                    {`${Number(((totalProfitAmountDollars * selectedChatData.currency.usdToJpy) / purchasedPrice) * 100).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}%`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: '#6E7A83', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, color: 'white', }}>Price to calculate:</Text>\r\n                                <TextInput\r\n                                    onChangeText={handleInputPriceChangeText}\r\n                                    defaultValue={defaultInputPrice}\r\n                                    ref={inputPriceRef}\r\n                                    placeholderTextColor='#9B9E9F' placeholder='Input Price'\r\n                                    style={{\r\n                                        backgroundColor: 'white',\r\n                                        height: 25,\r\n                                        margin: 2,\r\n                                        padding: 1,\r\n                                        borderRadius: 4,\r\n                                        borderWidth: 1,\r\n                                        borderColor: 'white',\r\n                                        outlineStyle: 'none',\r\n                                        fontSize: 18,\r\n                                        fontWeight: '700',\r\n                                    }}\r\n                                />\r\n                            </View>\r\n\r\n                        </View>\r\n\r\n\r\n                        <View style={{ flex: 1, marginLeft: 3 }}>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Purchased Price:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedPurchasedPrice}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Auction Fee:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedAuctionFee}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Transport Fee:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedTransportFee}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Shipping Agent Fee:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedShippingAgentFee}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Supply Chains Costs:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedTotalSCCAmount}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Cubic Meter:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${cubicMeter}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Cost per Cubic Meter:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedCostPerCubicMeter} x ${cubicMeter}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 14, lineHeight: 14, color: '#16A34A', }}>\r\n                                    {`${formattedTotalCubicMeterCostDollars}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 14, lineHeight: 14, color: '#8D7777', }}>\r\n                                    {`${formattedTotalCubicMeterCostYen}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Total:</Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 18, color: '#8D7777', }}>\r\n                                    {`${formattedRealTotalPriceYen}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 18, color: '#16A34A', }}>\r\n                                    {`${formattedRealTotalPriceDollars}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                        </View>\r\n\r\n\r\n\r\n                    </Modal.Body>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nconst PreviewInvoice = () => {\r\n\r\n    // npm install html2canvas jspdf\r\n    // import jsPDF from 'jspdf';\r\n    // import html2canvas from 'html2canvas';\r\n    const dispatch = useDispatch();\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const previewInvoiceVisible = useSelector((state) => state.previewInvoiceVisible);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [isPreviewHovered, setIsPreviewHovered] = useState(false);\r\n    const screenWidth = Dimensions.get('window').width;\r\n    const invoiceRef = useRef(null);\r\n    const [invoiceImageUri, setInvoiceImageUri] = useState('');\r\n    const hoverPreviewIn = () => setIsPreviewHovered(true);\r\n    const hoverPreviewOut = () => setIsPreviewHovered(false);\r\n    const [capturedImageUri, setCapturedImageUri] = useState('');\r\n    const [vehicleImageUri, setVehicleImageUri] = useState(globalImageUrl);\r\n    const [featuresTrueCount, setFeaturesTrueCount] = useState(0);\r\n    const [rerenderState, setRerenderState] = useState(0);\r\n\r\n    const handlePreviewInvoiceModalOpen = () => {\r\n        dispatch(setPreviewInvoiceVisible(true));\r\n    };\r\n\r\n    const handlePreviewInvoiceModalClose = () => {\r\n        dispatch(setPreviewInvoiceVisible(false));\r\n        setCapturedImageUri('');\r\n    }\r\n\r\n    function countTrueValuesInCarData(invoiceData) {\r\n        let count = 0;\r\n\r\n        // Check if carData exists in invoiceData\r\n        if (invoiceData.carData) {\r\n            // List of fields to check within carData\r\n            const fields = ['interior', 'exterior', 'safetySystem', 'comfort', 'sellingPoints'];\r\n\r\n            fields.forEach(field => {\r\n                if (invoiceData.carData[field]) {\r\n                    // Count true values in each field of carData\r\n                    count += Object.values(invoiceData.carData[field]).filter(value => value === true).length;\r\n                }\r\n            });\r\n        }\r\n\r\n        return count;\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        if (previewInvoiceVisible) {\r\n            setRerenderState(rerenderState + 1);\r\n        }\r\n    }, [previewInvoiceVisible])\r\n\r\n\r\n    useEffect(() => {\r\n        const captureImageAsync = async () => {\r\n            try {\r\n                if (invoiceRef.current) {\r\n                    // Adjust the scale to control the captured image resolution\r\n                    const scale = 0.85; // Experiment with different scale values\r\n                    const width = 2480 * scale;\r\n                    const height = 3508 * scale;\r\n\r\n                    const imageUri = await captureRef(invoiceRef, {\r\n                        format: 'jpg',\r\n                        quality: 1, // Adjust quality if needed\r\n                        result: 'base64',\r\n                        width: width,\r\n                        height: height,\r\n                    });\r\n                    setCapturedImageUri(`data:image/jpeg;base64,${imageUri}`);\r\n                    const trueCount = countTrueValuesInCarData(invoiceData);\r\n                    setFeaturesTrueCount(trueCount);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error capturing view:\", error);\r\n            }\r\n        };\r\n\r\n        const convertImageToBase64 = async (url) => {\r\n            try {\r\n                const response = await fetch(url);\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const blob = await response.blob();\r\n                return new Promise((resolve, reject) => {\r\n                    const reader = new FileReader();\r\n                    reader.onloadend = () => resolve(reader.result);\r\n                    reader.onerror = reject;\r\n                    reader.readAsDataURL(blob);\r\n                });\r\n            } catch (error) {\r\n                console.error('Fetch error:', error.message);\r\n                return null;\r\n            }\r\n        };\r\n        convertImageToBase64(globalImageUrl)\r\n            .then(base64String => {\r\n                setVehicleImageUri(base64String);\r\n            });\r\n        // Trigger image capture when invoiceRef changes\r\n        captureImageAsync();\r\n\r\n        if (screenWidth < 960) {\r\n            const captureImageAsync = async () => {\r\n                try {\r\n                    if (invoiceRef.current) {\r\n                        // Adjust the scale to control the captured image resolution\r\n                        const scale = 0.85; // Experiment with different scale values\r\n                        const width = 2480 * scale;\r\n                        const height = 3508 * scale;\r\n\r\n                        const imageUri = await captureRef(invoiceRef, {\r\n                            format: 'jpg',\r\n                            quality: 1, // Adjust quality if needed\r\n                            result: 'base64',\r\n                            width: width,\r\n                            height: height,\r\n                        });\r\n                        setCapturedImageUri(`data:image/jpeg;base64,${imageUri}`);\r\n                        const trueCount = countTrueValuesInCarData(invoiceData);\r\n                        setFeaturesTrueCount(trueCount);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Error capturing view:\", error);\r\n                }\r\n            };\r\n\r\n            const convertImageToBase64 = async (url) => {\r\n                try {\r\n                    const response = await fetch(url);\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP error! status: ${response.status}`);\r\n                    }\r\n                    const blob = await response.blob();\r\n                    return new Promise((resolve, reject) => {\r\n                        const reader = new FileReader();\r\n                        reader.onloadend = () => resolve(reader.result);\r\n                        reader.onerror = reject;\r\n                        reader.readAsDataURL(blob);\r\n                    });\r\n                } catch (error) {\r\n                    console.error('Fetch error:', error.message);\r\n                    return null;\r\n                }\r\n            };\r\n            convertImageToBase64(globalImageUrl)\r\n                .then(base64String => {\r\n                    setVehicleImageUri(base64String);\r\n                });\r\n            // Trigger image capture when invoiceRef changes\r\n            captureImageAsync();\r\n        }\r\n\r\n    }, [invoiceRef.current, vehicleImageUri]);\r\n\r\n    const captureImage = async () => {\r\n        try {\r\n            // Adjust the scale to control the captured image resolution\r\n            const scale = 0.9; // Experiment with different scale values\r\n            const width = 2480 * scale;\r\n            const height = 3508 * scale;\r\n\r\n            const imageUri = await captureRef(invoiceRef, {\r\n                format: 'jpg',\r\n                quality: 1, // Adjust quality if needed\r\n                result: 'base64',\r\n                width: width,\r\n                height: height,\r\n            });\r\n            return `data:image/jpeg;base64,${imageUri}`;\r\n        } catch (error) {\r\n            console.error(\"Error capturing view:\", error);\r\n        }\r\n    };\r\n\r\n    const createPDF = async () => {\r\n        const element = invoiceRef.current;\r\n        if (element) {\r\n            // Reduce the scale slightly for smaller file size\r\n            const scale = 1; // Fine-tune this value for balance\r\n\r\n            const canvas = await html2canvas(element, {\r\n                scale: scale,\r\n            });\r\n\r\n            // Experiment with JPEG quality for a balance between quality and file size\r\n            const imageData = canvas.toDataURL('image/jpeg', 0.9);\r\n\r\n            // A4 size dimensions in mm\r\n            const pdfWidth = 210;\r\n            const pdfHeight = 297;\r\n\r\n            const pdf = new jsPDF({\r\n                orientation: 'portrait',\r\n                unit: 'mm',\r\n                format: 'a4'\r\n            });\r\n\r\n            // Adjust PDF compression settings\r\n            const options = {\r\n                imageCompression: 'JPEG',\r\n                imageQuality: 1, // Fine-tune this value as well\r\n            };\r\n\r\n            const imgProps = pdf.getImageProperties(imageData);\r\n            const pdfWidthFit = pdfWidth;\r\n            const pdfHeightFit = (imgProps.height * pdfWidthFit) / imgProps.width;\r\n\r\n            pdf.addImage(imageData, 'JPEG', 0, 0, pdfWidthFit, pdfHeightFit, undefined, 'FAST', 0, options);\r\n\r\n            // Filename logic\r\n            selectedChatData.stepIndicator.value < 3 ?\r\n                pdf.save(`Proforma Invoice (${invoiceData.carData.carName} [${invoiceData.carData.referenceNumber}]) (A4 Paper Size).pdf`) :\r\n                pdf.save(`Invoice No. ${invoiceData.id} (A4 Paper Size).pdf`);\r\n        } else {\r\n            console.error(\"No element to capture\");\r\n        }\r\n    };\r\n\r\n\r\n    const handleCaptureAndCreatePDF = async () => {\r\n        const capturedImageUri = await captureImage();\r\n        if (capturedImageUri) {\r\n            await createPDF(capturedImageUri);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    if (invoiceData && Object.keys(invoiceData).length > 0) {\r\n        const issuingDateString = invoiceData.bankInformations.issuingDate;\r\n        const dueDateString = invoiceData.bankInformations.dueDate;\r\n        const issuingDateObject = new Date(issuingDateString);\r\n        const dueDateObject = new Date(dueDateString);\r\n\r\n\r\n        const options = {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n        };\r\n\r\n        formattedIssuingDate = issuingDateObject.toLocaleDateString(undefined, options);\r\n        formattedDueDate = dueDateObject.toLocaleDateString(undefined, options);\r\n\r\n    }\r\n\r\n    const originalWidth = 794;\r\n    const originalHeight = 1123;\r\n\r\n    const newWidth = 2480;\r\n    const newHeight = 3508;\r\n\r\n    const widthScaleFactor = newWidth / originalWidth;\r\n    const heightScaleFactor = newHeight / originalHeight;\r\n\r\n    const openImage = () => {\r\n        if (Platform.OS === 'web') {\r\n            const imageWindow = window.open();\r\n            imageWindow.document.write(`\r\n                <style>\r\n                    body {\r\n                        margin: 0;\r\n                        display: flex;\r\n                        justify-content: center;\r\n                        align-items: center;\r\n                        height: 100vh;\r\n                        overflow: hidden;\r\n                    }\r\n                    img {\r\n                        width: 595px;\r\n                        height: 842px;\r\n                        object-fit: contain;\r\n                        transition: transform 0.25s ease;\r\n                        cursor: zoom-in; /* Set cursor to magnifying glass */\r\n                    }\r\n                    .zoomed {\r\n                        transform: scale(3);\r\n                        transform-origin: center;\r\n                        cursor: zoom-out; /* Change cursor to indicate zooming out */\r\n                    }\r\n                </style>\r\n                <img id=\"zoomableImage\" src=\"${capturedImageUri}\" alt=\"Base64 Image\" draggable=\"false\" />\r\n                <script>\r\n                    const image = document.getElementById('zoomableImage');\r\n    \r\n                    image.addEventListener('mousedown', function(e) {\r\n                        const rect = this.getBoundingClientRect();\r\n                        const x = e.clientX - rect.left;\r\n                        const y = e.clientY - rect.top;\r\n    \r\n                        // Set the transform origin to the mouse position\r\n                        this.style.transformOrigin = \\`\\${x}px \\${y}px\\`;\r\n                        this.classList.add('zoomed');\r\n                    });\r\n    \r\n                    document.addEventListener('mouseup', function() {\r\n                        image.classList.remove('zoomed');\r\n                    });\r\n                </script>\r\n            `);\r\n        } else {\r\n            console.log('This feature is only available in a web environment');\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <> {invoiceData && Object.keys(invoiceData).length > 0 &&\r\n\r\n            <>\r\n                <Pressable\r\n                    onPress={handlePreviewInvoiceModalOpen}\r\n                    focusable={false}\r\n                    variant='ghost'\r\n                    onHoverIn={hoverPreviewIn}\r\n                    onHoverOut={hoverPreviewOut}\r\n                    style={{\r\n                        marginTop: 3,\r\n                        paddingVertical: 3,\r\n                        paddingHorizontal: 5,\r\n                        flexDirection: 'row', // Align items in a row\r\n                        alignItems: 'center', // Center items vertically\r\n                        justifyContent: 'center',\r\n                        borderRadius: 5,\r\n                        backgroundColor: isPreviewHovered ? '#0772ad' : '#0A8DD5',\r\n                    }}>\r\n\r\n                    {selectedChatData.invoiceNumber && selectedChatData.stepIndicator.value > 2 ?\r\n                        <Text style={{ fontWeight: 700, color: 'white', }}>\r\n                            {`Preview Invoice No. ${selectedChatData.invoiceNumber}`}\r\n                        </Text>\r\n                        :\r\n                        <Text style={{ fontWeight: 700, color: 'white', }}>\r\n                            {`Preview Invoice`}\r\n                        </Text>}\r\n\r\n                </Pressable>\r\n\r\n                <Modal\r\n                    isOpen={previewInvoiceVisible}\r\n                    onClose={() => {\r\n                        handlePreviewInvoiceModalClose();\r\n                    }}\r\n                    size={'full'}\r\n                    useRNModal\r\n                >\r\n                    <View style={{ flexDirection: 'row', margin: 2, }}>\r\n                        <Pressable onPress={() => {\r\n                            capturedImageUri && vehicleImageUri ? handleCaptureAndCreatePDF() : null;\r\n                        }}\r\n                            style={{ justifyContent: 'center', flexDirection: 'row', padding: 5, borderRadius: 5, backgroundColor: '#16A34A', }}>\r\n                            <MaterialCommunityIcons size={20} name='download' color='white' />\r\n                            <Text style={{ color: 'white', }}>Download as PDF</Text>\r\n                        </Pressable>\r\n\r\n                        <Pressable\r\n                            onPress={() => {\r\n                                capturedImageUri && vehicleImageUri ? openImage() : null;\r\n                            }}\r\n                            style={{ position: 'absolute', top: -2, right: -380, flexDirection: 'row', padding: 5, borderRadius: 5, backgroundColor: '#0A8DD5', }}>\r\n                            <Entypo size={20} name='images' color='white' />\r\n                            <Text style={{ color: 'white', }}>View Image</Text>\r\n                        </Pressable>\r\n                    </View>\r\n                    <Modal.CloseButton />\r\n                    {previewInvoiceVisible &&\r\n                        <ScrollView\r\n                            style={{ maxHeight: screenWidth < 960 ? 480 : 720, maxWidth: screenWidth < 960 ? 320 : 900 }}\r\n                        >\r\n                            <View style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                bottom: 0,\r\n                                right: 0,\r\n                                left: 0,\r\n                                backgroundColor: 'white',\r\n                                zIndex: 999,\r\n                                flex: 1,\r\n                                alignItems: 'center', // Center horizontally\r\n                            }}>\r\n                                {capturedImageUri && vehicleImageUri ? (\r\n                                    <NativeImage\r\n                                        source={{ uri: capturedImageUri }}\r\n                                        style={{\r\n                                            marginTop: 5,\r\n                                            width: screenWidth < 960 ? 320 : 595,\r\n                                            height: screenWidth < 960 ? 480 : 842,\r\n                                            resizeMode: 'stretch',\r\n                                            borderWidth: 1,\r\n                                            borderColor: '#DADDE1',\r\n                                        }}\r\n                                    />\r\n                                ) : (<Spinner size={'lg'} color={'#0A9FDC'} style={{ alignSelf: 'center', paddingTop: 80 * heightScaleFactor, }} />)}\r\n                            </View>\r\n\r\n                            {/* Main content with invoice details */}\r\n                            {vehicleImageUri !== '' &&\r\n                                <View ref={invoiceRef} style={{ width: 2480, height: 3508, backgroundColor: 'white', zIndex: 1 }}>\r\n\r\n                                    <View style={{ position: 'absolute', left: 38 * widthScaleFactor, top: 38 * heightScaleFactor }}>\r\n                                        <NativeImage\r\n                                            source={require('../../assets/RMJ logo for invoice.png')}\r\n                                            style={{\r\n                                                width: 95 * widthScaleFactor,\r\n                                                height: 85 * heightScaleFactor,\r\n                                                resizeMode: 'stretch',\r\n                                            }}\r\n                                        />\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', alignSelf: 'center', top: 80 * heightScaleFactor }}>\r\n                                        {/* Title */}\r\n                                        {selectedChatData.stepIndicator.value < 3 ?\r\n                                            <Text style={{ fontWeight: 700, fontSize: 25 * widthScaleFactor }}>{`PROFORMA INVOICE`}</Text> :\r\n                                            <Text style={{ fontWeight: 700, fontSize: 25 * widthScaleFactor }}>{`INVOICE`}</Text>\r\n                                        }\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 38 * heightScaleFactor }}>\r\n                                        {/* QR CODE */}\r\n                                        {selectedChatData.stepIndicator.value < 3 ?\r\n                                            null :\r\n                                            <QRCode\r\n                                                value={invoiceData.cryptoNumber}\r\n                                                size={80 * widthScaleFactor}\r\n                                                color=\"black\"\r\n                                                backgroundColor=\"white\"\r\n                                            />\r\n                                        }\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', right: 121 * widthScaleFactor, top: 34 * heightScaleFactor }}>\r\n                                        {/* Invoice Number */}\r\n                                        {selectedChatData.stepIndicator.value < 3 ?\r\n                                            null :\r\n                                            <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor }}>{`Invoice No. RMJ-${invoiceData.id}`}</Text>\r\n                                        }\r\n                                    </View>\r\n\r\n                                    {selectedChatData.stepIndicator.value < 3 ?\r\n                                        <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 34 * heightScaleFactor, }}>\r\n                                            {/* Issuing Date */}\r\n                                            <View style={{ flexDirection: 'row', alignSelf: 'flex-end', }}>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor }}>{`Issuing Date: `}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor }}>{`${formattedIssuingDate}`}</Text>\r\n                                            </View>\r\n                                            <View style={{ flexDirection: 'row', alignSelf: 'flex-end', }}>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor, color: '#F00A0A', }}>{`Valid Until: `}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor }}>{`${formattedDueDate}`}</Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n                                        :\r\n                                        <View style={{ position: 'absolute', right: 121 * widthScaleFactor, top: 49 * heightScaleFactor, flexDirection: 'row' }}>\r\n                                            {/* Issuing Date */}\r\n                                            <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor }}>{`Issuing Date: `}</Text>\r\n                                            <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor }}>{`${formattedIssuingDate}`}</Text>\r\n                                        </View>\r\n                                    }\r\n\r\n                                    <View style={{\r\n                                        position: 'absolute',\r\n                                        left: 40 * widthScaleFactor,\r\n                                        top: 134 * heightScaleFactor,\r\n                                        maxWidth: 300 * widthScaleFactor,\r\n                                    }}>\r\n                                        {/* Shipper */}\r\n                                        <Text style={{\r\n                                            fontWeight: 750,\r\n                                            fontSize: 16 * widthScaleFactor,\r\n                                            borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                            width: 'fit-content', // Make the underline cover the text width\r\n                                            marginBottom: 5, // Add some space between text and underline\r\n                                        }}>\r\n                                            {`Shipper`}\r\n                                        </Text>\r\n                                        <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`Real Motor Japan (YANAGISAWA HD CO.,LTD)`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`26-2 Takara Tsutsumi-cho Toyota City, Aichi Prefecture, Japan, 473-0932`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`FAX: +81565850606`}</Text>\r\n\r\n                                        <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`Shipped From:`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.departurePort}, ${invoiceData.departureCountry}`}</Text>\r\n\r\n                                        <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`Shipped To:`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.discharge.port}, ${invoiceData.discharge.country}`}</Text>\r\n                                        {invoiceData.placeOfDelivery && invoiceData.placeOfDelivery !== '' ?\r\n                                            <>\r\n                                                <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`Place of Delivery:`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.placeOfDelivery}`}</Text>\r\n                                            </>\r\n                                            : null}\r\n                                        {invoiceData.cfs && invoiceData.cfs !== '' ?\r\n                                            <>\r\n                                                <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`CFS:`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.cfs}`}</Text>\r\n                                            </>\r\n                                            : null}\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', width: 715 * widthScaleFactor, }}>\r\n\r\n                                            <View style={{\r\n                                                flex: 1, width: 280 * widthScaleFactor,\r\n                                            }}>\r\n                                                {/* Buyer Information */}\r\n                                                <Text style={{\r\n                                                    fontWeight: 750,\r\n                                                    fontSize: 18 * widthScaleFactor,\r\n                                                    borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                    borderBottomColor: '#0A78BE',\r\n                                                    width: 'fit-content', // Make the underline cover the text width\r\n                                                    marginBottom: 5, // Add some space between text and underline\r\n                                                    color: '#0A78BE',\r\n                                                    marginTop: 25 * heightScaleFactor,\r\n\r\n                                                }}>\r\n                                                    {`Buyer Information`}\r\n                                                </Text>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 16 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.name}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.address}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.email}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.contactNumber}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`FAX: ${invoiceData.consignee.fax == '' ? 'N/A' : invoiceData.consignee.fax}`}</Text>\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, paddingLeft: 20 * widthScaleFactor, width: 280 * widthScaleFactor, }}>\r\n                                                {/* Notify Party */}\r\n                                                <Text style={{\r\n                                                    fontWeight: 750,\r\n                                                    fontSize: 18 * widthScaleFactor,\r\n                                                    borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                    borderBottomColor: '#FF0000',\r\n                                                    width: 'fit-content', // Make the underline cover the text width\r\n                                                    marginBottom: 5, // Add some space between text and underline\r\n                                                    color: '#FF0000',\r\n                                                    marginTop: 25 * heightScaleFactor,\r\n                                                }}>\r\n                                                    {`Notify Party`}\r\n                                                </Text>\r\n                                                {invoiceData.notifyParty.sameAsConsignee == true ? (\r\n                                                    <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, }}>{`Same as consignee / buyer`}</Text>) :\r\n                                                    (<>\r\n                                                        <Text style={{ fontWeight: 750, fontSize: 16 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.name}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.address}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.email}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.contactNumber}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`FAX: ${invoiceData.notifyParty.fax == '' ? 'N/A' : invoiceData.notifyParty.fax}`}</Text>\r\n                                                    </>)}\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n\r\n                                    </View>\r\n                                    {selectedChatData.stepIndicator.value < 3 ?\r\n\r\n                                        <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 130 * heightScaleFactor, borderWidth: 3, width: 430 * widthScaleFactor, borderColor: '#FF5C00', height: 194 * heightScaleFactor, }}>\r\n                                            <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center', flexDirection: 'row', }}>\r\n                                                <Entypo size={50 * widthScaleFactor} name='warning' color={'#FF0000'} />\r\n                                                <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, color: '#FF0000', marginLeft: 20 * widthScaleFactor, }}>{`Bank Information will be provided after placing an order.`}</Text>\r\n                                            </View>\r\n                                        </View>\r\n                                        :\r\n                                        <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 130 * heightScaleFactor, borderWidth: 3, width: 430 * widthScaleFactor, borderColor: '#1ABA3D', }}>\r\n\r\n                                            <View style={{ flex: 1, alignItems: 'center', }}>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor, color: '#114B33', }}>{`Bank Information`}</Text>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, flexDirection: 'row', marginHorizontal: 5 * widthScaleFactor, marginBottom: 5 * heightScaleFactor, }}>\r\n                                                <View style={{ flex: 1, marginRight: 50 * widthScaleFactor, }}>\r\n                                                    <Text style={{\r\n                                                        fontWeight: 750,\r\n                                                        fontSize: 14 * widthScaleFactor,\r\n                                                        borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                        width: 'fit-content', // Make the underline cover the text width\r\n                                                        marginBottom: 2, // Add some space between text and underline\r\n                                                    }}>\r\n                                                        {`Bank Account`}\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Bank Name: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.bankName}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Branch Name: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.branchName}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`SWIFTCODE: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.swiftCode}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Address: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.address}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Name of Account Holder: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.accountHolder}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Account Number: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.accountNumberValue}`}</Text>\r\n                                                    </Text>\r\n                                                </View>\r\n\r\n                                                <View style={{ flex: 1 }}>\r\n\r\n                                                    <Text style={{\r\n                                                        fontWeight: 750,\r\n                                                        fontSize: 14 * widthScaleFactor,\r\n                                                        borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                        width: 'fit-content', // Make the underline cover the text width\r\n                                                        marginBottom: 2, // Add some space between text and underline\r\n                                                    }}>\r\n                                                        {`Payment Terms`}\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`Terms: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.paymentTerms}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <View style={{ paddingTop: 30 * heightScaleFactor, }}>\r\n\r\n                                                        <Text style={{\r\n                                                            fontWeight: 750,\r\n                                                            fontSize: 14 * widthScaleFactor,\r\n                                                            borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                            width: 'fit-content', // Make the underline cover the text width\r\n                                                            marginBottom: 2, // Add some space between text and underline\r\n                                                            color: '#F00A0A',\r\n                                                            borderBottomColor: '#F00A0A',\r\n                                                        }}>\r\n                                                            {`Payment Due`}\r\n                                                        </Text>\r\n\r\n                                                        <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, color: '#F00A0A', lineHeight: 14 * widthScaleFactor }}>{`Due Date: `}\r\n                                                            <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, color: 'black', lineHeight: 14 * widthScaleFactor }}>{`${formattedDueDate}`}</Text>\r\n                                                        </Text>\r\n\r\n                                                    </View>\r\n\r\n                                                </View>\r\n\r\n                                            </View>\r\n\r\n                                        </View>}\r\n\r\n\r\n\r\n                                    {/* <View style={{ position: 'absolute', left: 260 * widthScaleFactor, top: 335 * heightScaleFactor }}>\r\n\r\n                                        <View style={{ flexDirection: 'row' }}>\r\n                                            {vehicleImageUri ? (\r\n                                                <NativeImage\r\n                                                    source={{ uri: vehicleImageUri }}\r\n                                                    style={{\r\n                                                        width: 99 * widthScaleFactor,\r\n                                                        height: 70 * heightScaleFactor,\r\n                                                        resizeMode: 'stretch',\r\n                                                    }}\r\n                                                />\r\n                                            ) : (\r\n                                                <View\r\n                                                    style={{\r\n                                                        width: 99 * widthScaleFactor,\r\n                                                        height: 70 * heightScaleFactor,\r\n                                                        backgroundColor: '#e0e0e0',\r\n                                                        marginRight: 12,\r\n                                                    }}\r\n                                                />\r\n                                            )}\r\n                                            <View style={{ flex: 1, top: -2 * heightScaleFactor, marginLeft: 5 * widthScaleFactor, height: 59 * heightScaleFactor }}>\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 14 * widthScaleFactor, lineHeight: 16 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.carName}`}\r\n                                                </Text>\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Reference No.: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${invoiceData.carData.referenceNumber}`}\r\n                                                    </Text>\r\n                                                </Text>\r\n\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Year/Month: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${invoiceData.carData.regYear}/${invoiceData.carData.regMonth}`}\r\n                                                    </Text>\r\n                                                </Text>\r\n\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Mileage: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${Number(invoiceData.carData.mileage).toLocaleString('en-US')} km`}\r\n                                                    </Text>\r\n                                                </Text>\r\n\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Chassis No.: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${invoiceData.carData.chassisNumber}`}\r\n                                                    </Text>\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', left: 260 * widthScaleFactor, top: 410 * heightScaleFactor, flexDirection: 'row', width: 495 * widthScaleFactor, }}>\r\n                                        <View style={{ flex: 1 }}>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Model Code: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.modelCode}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Fuel: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.fuel}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Transmission: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.transmission}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Steering: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.steering}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Displacement: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${Number(invoiceData.carData.engineDisplacement).toLocaleString('en-US')} cc`}\r\n                                                </Text>\r\n                                            </Text>\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1 }}>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Doors: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.doors ? invoiceData.carData.doors : 'N/A'}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Drive Type: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.driveType ? invoiceData.carData.driveType : 'N/A'}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Exterior Color: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.exteriorColor}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Number of Seats: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.numberOfSeats ? invoiceData.carData.numberOfSeats : 'N/A'}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Body Type: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.bodyType}`}\r\n                                                </Text>\r\n                                            </Text>\r\n                                        </View>\r\n\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', left: 260 * widthScaleFactor, top: 484 * heightScaleFactor, width: 495 * widthScaleFactor, }}>\r\n                                        <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginBottom: 3 * heightScaleFactor, }}>\r\n                                            {`Features: `}\r\n                                        </Text>\r\n\r\n                                        <InvoiceFeatures widthScaleFactor={widthScaleFactor} heightScaleFactor={heightScaleFactor} />\r\n\r\n                                    </View> */}\r\n\r\n                                    <View style={{\r\n                                        position: 'absolute',\r\n                                        left: 38 * widthScaleFactor,\r\n                                        top: (invoiceData.placeOfDelivery && invoiceData.cfs) || (invoiceData.placeOfDelivery !== '' && invoiceData.cfs !== '') ? 577 * heightScaleFactor : 537 * heightScaleFactor,\r\n                                        width: 718 * widthScaleFactor,\r\n                                        borderWidth: 1 * widthScaleFactor,\r\n                                        borderColor: '#C2E2F4',\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{ flex: 2, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Description`}\r\n                                                </Text>\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 2, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Notes`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Quantity`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 2, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Amount`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {`FOB`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {`$${Math.round(Number(invoiceData.paymentDetails.fobPrice)).toLocaleString('en-US', { useGrouping: true })}`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {`Freight`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {`$${Math.round(Number(invoiceData.paymentDetails.freightPrice)).toLocaleString('en-US', { useGrouping: true })}`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                                flexDirection: 'row',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && (invoiceData.paymentDetails.incoterms == \"C&F\" || invoiceData.paymentDetails.incoterms == \"FOB\") && <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.inspectionIsChecked ? `Inspection [${invoiceData.paymentDetails.inspectionName}]` : ' '}\r\n                                                </Text>}\r\n\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <>\r\n                                                        <Text\r\n                                                            style={{\r\n                                                                fontWeight: 400,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                                marginLeft: 2 * widthScaleFactor,\r\n                                                            }}>\r\n                                                            {invoiceData.paymentDetails.inspectionIsChecked ? `Inspection [${invoiceData.paymentDetails.inspectionName}]` : ' '}\r\n                                                        </Text>\r\n                                                        <Text\r\n                                                            style={{\r\n                                                                fontWeight: 400,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                                marginLeft: 2 * widthScaleFactor,\r\n                                                            }}>\r\n                                                            {invoiceData.paymentDetails.incoterms == \"CIF\" ? ` + Insurance` : ' '}\r\n                                                        </Text>\r\n                                                    </>\r\n                                                }\r\n\r\n                                                {!invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            marginLeft: 2 * widthScaleFactor,\r\n                                                        }}>\r\n                                                        {invoiceData.paymentDetails.incoterms == \"CIF\" ? `Insurance` : ' '}\r\n                                                    </Text>\r\n                                                }\r\n\r\n                                                {!invoiceData.paymentDetails.inspectionIsChecked && (invoiceData.paymentDetails.incoterms == \"C&F\" || invoiceData.paymentDetails.incoterms == \"FOB\") &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                        }}>\r\n                                                        {' '}\r\n                                                    </Text>\r\n                                                }\r\n\r\n\r\n                                            </View>\r\n\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && (invoiceData.paymentDetails.incoterms == \"C&F\" || invoiceData.paymentDetails.incoterms == \"FOB\") && <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.inspectionIsChecked ? `$${Number(invoiceData.paymentDetails.inspectionPrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                </Text>}\r\n\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                        {invoiceData.paymentDetails.inspectionIsChecked ? `$${Number(invoiceData.paymentDetails.inspectionPrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                        <Text\r\n                                                            style={{\r\n                                                                fontWeight: 400,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                            }}>\r\n                                                            {invoiceData.paymentDetails.incoterms === \"CIF\" ? ` + $${Number(invoiceData.paymentDetails.insurancePrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                        </Text>\r\n                                                    </Text>\r\n\r\n                                                }\r\n\r\n                                                {!invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n\r\n                                                        }}>\r\n                                                        {invoiceData.paymentDetails.incoterms == \"CIF\" ? `$${Number(invoiceData.paymentDetails.insurancePrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                    </Text>\r\n                                                }\r\n\r\n                                            </View>\r\n\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                                flexDirection: 'row',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails.additionalName && (invoiceData.paymentDetails.additionalName).length > 0 && <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.additionalName && (invoiceData.paymentDetails.additionalName).length > 0 ? `${invoiceData.paymentDetails.additionalName.join(' + ')}` : ' '}\r\n                                                </Text>}\r\n\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.additionalPrice && invoiceData.paymentDetails.additionalPrice.length > 0\r\n                                                        ? invoiceData.paymentDetails.additionalPrice.map(price =>\r\n                                                            `$${parseFloat(price).toLocaleString('en-US', {\r\n                                                                style: 'currency',\r\n                                                                currency: 'USD',\r\n                                                                minimumFractionDigits: 0,\r\n                                                                maximumFractionDigits: 0\r\n                                                            }).slice(1)}`\r\n                                                        ).join(' + ')\r\n                                                        : ' '}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                                flexDirection: 'row',\r\n                                                paddingVertical: 2 * heightScaleFactor,\r\n\r\n                                            }}>\r\n                                                {invoiceData.carData && invoiceData.carData.carName ? (\r\n                                                    <Text style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                        {\"Used Vehicle\\n\"}\r\n                                                        <Text style={{\r\n                                                            fontWeight: 700,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.carName}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.chassisNumber}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.exteriorColor}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${Number(invoiceData.carData.engineDisplacement).toLocaleString('en-US')} cc\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${Number(invoiceData.carData.mileage).toLocaleString('en-US')} km\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.fuel}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.transmission}\\n`}\r\n                                                        </Text>\r\n                                                    </Text>\r\n\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                                flexDirection: 'row',\r\n                                                justifyContent: 'center',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails && invoiceData.paymentDetails.incoterms && invoiceData.discharge.port && invoiceData.discharge ? (\r\n                                                    <Text style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                        {`${invoiceData.paymentDetails.incoterms} ${invoiceData.discharge.port}`}\r\n                                                    </Text>\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 1,\r\n                                                flexDirection: 'row',\r\n                                                justifyContent: 'center',\r\n                                            }}>\r\n                                                {invoiceData.carData && invoiceData.carData.carName ? (\r\n                                                    <Text style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                        {'1'}\r\n                                                    </Text>\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                                justifyContent: 'center',\r\n                                                flexDirection: 'row',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount ? (\r\n                                                    <>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 700,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            color: '#008AC6',\r\n                                                            marginRight: 10 * widthScaleFactor,\r\n                                                            top: 51 * heightScaleFactor,\r\n                                                            left: 50 * widthScaleFactor,\r\n                                                            position: 'absolute',\r\n                                                        }}>\r\n                                                            {\"Total\"}\r\n                                                            <Text style={{\r\n                                                                fontWeight: 700,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                                alignSelf: 'center',\r\n                                                                color: '#00720B',\r\n                                                                marginLeft: 5 * widthScaleFactor,\r\n                                                            }}>\r\n                                                                {`$${invoiceData.paymentDetails.totalAmount}`}\r\n                                                            </Text>\r\n                                                        </Text>\r\n\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', left: 38 * widthScaleFactor, top: 825 * heightScaleFactor, width: 350 * widthScaleFactor, }}>\r\n                                        <Text style={{\r\n                                            fontWeight: 700,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Payment Information:'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'The customer is responsible for the bank charges incurred when the T/T (Telegraphic Transfer) is paid.'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                            marginBottom: 5 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'No warranty service is provided on used vehicles.'}\r\n                                        </Text>\r\n\r\n                                        <Text style={{\r\n                                            fontWeight: 700,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Conditions for order cancellation:'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'(1) Order Cancellation Penalty: If the order is canceled after payment, a penalty of USD 220 will apply.'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                            marginBottom: 5 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'(2) Non-refund: Payment for vehicles purchased through pre-delivery inspection is non-refundable.'}\r\n                                        </Text>\r\n\r\n                                        <Text style={{\r\n                                            fontWeight: 700,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Intermediary Banking Information:'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Bank Name: SUMITOMO MITSUI BANKING CORPORATION (NEW YORK BRANCH).'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'Swift code: SMBCUS33'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Address: 277 Park Avenue'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'City: New York, NY'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'Postal Code: 10172'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                            marginBottom: 5 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'Country: United States'}\r\n                                        </Text>\r\n                                    </View>\r\n\r\n                                    {selectedChatData.stepIndicator.value < 3 ? null :\r\n                                        <View style={{ position: 'absolute', right: 39 * widthScaleFactor, top: 835 * heightScaleFactor, width: 300 * widthScaleFactor, }}>\r\n                                            <View style={{\r\n                                                width: 300 * widthScaleFactor,\r\n                                                alignItems: 'center',\r\n                                                paddingBottom: 80 * heightScaleFactor, // Adjust this value to control space between image and line\r\n                                            }}>\r\n                                                <NativeImage\r\n                                                    source={require('../../assets/RMJ Invoice Signature with Hanko.png')}\r\n                                                    style={{\r\n                                                        width: 276 * widthScaleFactor,\r\n                                                        height: 81 * heightScaleFactor,\r\n                                                        resizeMode: 'contain',\r\n                                                        alignSelf: 'center',\r\n                                                        marginBottom: 0, // Minimize margin to keep the line close\r\n                                                    }}\r\n                                                />\r\n                                                <View style={{\r\n                                                    borderBottomWidth: 1 * heightScaleFactor,\r\n                                                    borderColor: 'black', // Change the color as needed\r\n                                                    width: '100%', // Line width as per your requirement\r\n                                                }} />\r\n                                                <Text italic style={{\r\n                                                    fontWeight: 700,\r\n                                                    fontSize: 16 * widthScaleFactor,\r\n                                                }}>\r\n                                                    {'Real Motor Japan'}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                width: 300 * widthScaleFactor,\r\n                                                alignItems: 'center',\r\n                                                paddingBottom: 5 * heightScaleFactor, // Adjust this value to control space between image and line\r\n                                            }}>\r\n\r\n                                                <View style={{\r\n                                                    borderBottomWidth: 1 * heightScaleFactor,\r\n                                                    borderColor: 'black', // Change the color as needed\r\n                                                    width: '100%', // Line width as per your requirement\r\n                                                }} />\r\n                                                <Text italic style={{\r\n                                                    fontWeight: 700,\r\n                                                    fontSize: 16 * widthScaleFactor,\r\n                                                }}>\r\n                                                    {'Your Signature'}\r\n                                                </Text>\r\n                                            </View>\r\n                                        </View>}\r\n\r\n\r\n                                </View>}\r\n\r\n\r\n                        </ScrollView>\r\n\r\n                    }\r\n\r\n                </Modal>\r\n            </>\r\n        }\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nconst ExtendDueDateButton = () => {\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [isConfirmHovered, setIsConfirmHovered] = useState(false);\r\n    const [isCancelHovered, setIsCancelHovered] = useState(false);\r\n    const [selectedDueDate, setSelectedDueDate] = useState('');\r\n    const [isConfirmLoading, setIsConfirmLoading] = useState(false);\r\n\r\n    let invoiceSelectedDueDate = '';\r\n\r\n    const currentDate = useSelector((state) => state.currentDate);\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n\r\n\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n\r\n\r\n    const confirmHoverIn = () => setIsConfirmHovered(true);\r\n    const confirmHoverOut = () => setIsConfirmHovered(false);\r\n\r\n    const cancelHoverIn = () => setIsCancelHovered(true);\r\n    const cancelHoverOut = () => setIsCancelHovered(false);\r\n\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleModalOpen = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const handleModalClose = () => {\r\n        setModalVisible(false);\r\n    }\r\n\r\n    const handleConfirm = async () => {\r\n\r\n        try {\r\n            await confirmExtendDueDate();\r\n            handleModalClose();\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    const extendDueDateMessage = async () => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `The due date has been changed to ${selectedDueDate\r\n                    ? new Date(selectedDueDate).toLocaleDateString(undefined, {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: 'numeric',\r\n                    })\r\n                    : 'Invalid Date'\r\n                    }`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `The due date has been changed to ${selectedDueDate\r\n                    ? new Date(selectedDueDate).toLocaleDateString(undefined, {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: 'numeric',\r\n                    })\r\n                    : 'Invalid Date'\r\n                    }`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n    const confirmExtendDueDate = async () => {\r\n        const docRef = doc(projectExtensionFirestore, \"IssuedInvoice\", selectedChatData.invoiceNumber);\r\n        setIsConfirmLoading(true);\r\n        try {\r\n            await updateDoc(docRef, {\r\n                'bankInformations.dueDate': selectedDueDate // Update the specific field\r\n            });\r\n            await extendDueDateMessage();\r\n            setIsConfirmLoading(false);\r\n            console.log(\"Document successfully updated\");\r\n        } catch (error) {\r\n            console.error(\"Error updating document: \", error);\r\n        }\r\n    };\r\n\r\n    const ModalCalendar = ({ selectedDate, setSelectedDate, currentDate }) => {\r\n\r\n        const [modalCalendarVisible, setModalCalendarVisible] = useState(false);\r\n\r\n        const handleModalCalendarOpen = () => {\r\n            setModalCalendarVisible(true);\r\n        };\r\n\r\n        const handleModalCalendarClose = () => {\r\n            setModalCalendarVisible(false);\r\n        };\r\n\r\n\r\n        return (\r\n\r\n            <>\r\n                <Pressable style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onPress={handleModalCalendarOpen}>\r\n                    <Text style={{ flex: 1, }} >{selectedDate}</Text>\r\n                </Pressable>\r\n\r\n                <Modal isOpen={modalCalendarVisible} onClose={handleModalCalendarClose} useRNModal>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Content>\r\n                        <View style={{ height: '100%', flex: 1 }}>\r\n                            <Calendar\r\n                                onDayPress={useCallback(day => {\r\n                                    setSelectedDate(day.dateString);\r\n                                    invoiceSelectedDueDate = day.dateString;\r\n                                    globalInvoiceVariable.bankInformations.dueDate = day.dateString;\r\n                                    handleModalCalendarClose();\r\n                                }, [])}\r\n                                markedDates={{\r\n                                    [selectedDate]: { selected: true, disableTouchEvent: true, selectedDotColor: '#7b9cff' }\r\n                                }}\r\n                                renderArrow={(direction) => (\r\n                                    direction === 'left' ? <MaterialIcons name='arrow-back-ios' color='#7b9cff' /> : <MaterialIcons name='arrow-forward-ios' color='#7b9cff' />\r\n                                )}\r\n                                enableSwipeMonths={true}\r\n                                initialDate={selectedDate}\r\n                                // minDate={currentDate}\r\n                                showSixWeeks />\r\n\r\n                        </View>\r\n\r\n                    </Modal.Content>\r\n\r\n                </Modal>\r\n            </>\r\n\r\n        );\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        if (currentDate) {\r\n            const date = new Date(currentDate);\r\n\r\n            // Check the day of the week\r\n            const dayOfWeek = date.getDay();\r\n\r\n            if (dayOfWeek === 5) { // Friday\r\n                date.setDate(date.getDate() + 3); // Add 3 days to reach Monday\r\n            } else if (dayOfWeek === 6) { // Saturday\r\n                date.setDate(date.getDate() + 2); // Add 2 days to reach Monday\r\n            } else {\r\n                date.setDate(date.getDate() + 1); // Sunday to Thursday, add 1 day\r\n            }\r\n\r\n            // Format the date back to string\r\n            const adjustedDate = date.toISOString().split('T')[0];\r\n            setSelectedDueDate(adjustedDate);\r\n        }\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Pressable\r\n                focusable={false}\r\n                variant='ghost'\r\n                onPress={handleModalOpen}\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                style={{\r\n                    marginTop: 3,\r\n                    paddingVertical: 3,\r\n                    paddingHorizontal: 5,\r\n                    flexDirection: 'row', // Align items in a row\r\n                    alignItems: 'center', // Center items vertically\r\n                    justifyContent: 'center',\r\n                    borderRadius: 5,\r\n                    backgroundColor: isHovered ? '#a8720a' : '#D38F0D',\r\n                }}\r\n            >\r\n                <FontAwesome name='calendar-plus-o' size={15} color={'white'} />\r\n                <Text color={'white'} style={{ fontWeight: 700, marginLeft: 5, }}>{`Extend Due Date`}</Text>\r\n            </Pressable>\r\n\r\n            <Modal\r\n                isOpen={modalVisible}\r\n                onClose={handleModalClose}\r\n                useRNModal\r\n            >\r\n                <Modal.Content>\r\n                    <Modal.Header >Extend Due Date</Modal.Header>\r\n                    <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                        <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Due Date:</Text>\r\n                        <ModalCalendar currentDate={currentDate} selectedDate={selectedDueDate} setSelectedDate={setSelectedDueDate} />\r\n                    </View>\r\n                    <Modal.Footer>\r\n                        <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', }}>\r\n                            <Pressable\r\n                                focusable={false}\r\n                                variant='ghost'\r\n                                onPress={handleModalClose}\r\n                                onHoverIn={cancelHoverIn}\r\n                                onHoverOut={cancelHoverOut}\r\n                                style={{\r\n                                    marginTop: 3,\r\n                                    paddingVertical: 3,\r\n                                    alignItems: 'center', // Center items vertically\r\n                                    justifyContent: 'center',\r\n                                    borderRadius: 5,\r\n                                    backgroundColor: isCancelHovered ? '#3F3F46' : '#52525B',\r\n                                    flex: 1,\r\n                                }}\r\n                            >\r\n                                <Text color={'white'} style={{ fontWeight: 700, }}>Cancel</Text>\r\n                            </Pressable>\r\n\r\n                            <View style={{ flex: 1 }} />\r\n\r\n                            <Pressable\r\n                                onPress={handleConfirm}\r\n                                focusable={false}\r\n                                variant='ghost'\r\n                                onHoverIn={confirmHoverIn}\r\n                                onHoverOut={confirmHoverOut}\r\n                                disabled={isConfirmLoading}\r\n                                style={{\r\n                                    marginTop: 3,\r\n                                    paddingVertical: 3,\r\n                                    alignItems: 'center', // Center items vertically\r\n                                    justifyContent: 'center',\r\n                                    borderRadius: 5,\r\n                                    backgroundColor: isConfirmHovered ? '#0f7534' : '#16A34A',\r\n                                    flex: 1,\r\n                                }}\r\n                            >\r\n                                {!isConfirmLoading ? <Text color={'white'} style={{ fontWeight: 700, }}>Confirm</Text> : <Spinner size={'sm'} color={'white'} />}\r\n                            </Pressable>\r\n                        </View>\r\n\r\n\r\n                    </Modal.Footer>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nconst TransactionModal = () => {\r\n    const transactionModalVisible = useSelector((state) => state.transactionModalVisible);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const handleTransactionModalClose = () => {\r\n        dispatch(setTransactionModalVisible(false));\r\n    }\r\n    return (\r\n\r\n        <Modal\r\n            isOpen={transactionModalVisible}\r\n            onClose={() => {\r\n                handleTransactionModalClose()\r\n            }}\r\n            size={'lg'}\r\n            useRNModal\r\n        >\r\n            {transactionModalVisible &&\r\n                <Modal.Content>\r\n                    <Modal.CloseButton />\r\n\r\n                    <Modal.Header style={{ borderBottomWidth: 2, borderColor: '#0A9FDC', }} >{transactionModalTitle}</Modal.Header>\r\n\r\n                    {transactionModalContentValue == 1 || transactionModalContentValue == 2 &&\r\n                        <IssueProformaInvoiceModalContent />\r\n                    }\r\n\r\n                    {transactionModalContentValue == 3 &&\r\n                        <ConfirmPaymentModalContent />\r\n                    }\r\n                </Modal.Content>\r\n            }\r\n        </Modal>\r\n    )\r\n}\r\n\r\nconst TransactionButton = ({ title, buttonValue, transactionValue, colorHoverIn, colorHoverOut }) => {\r\n\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const handleTransactionModalOpen = () => {\r\n        dispatch(setTransactionModalVisible(true));\r\n        transactionModalTitle = title;\r\n        transactionModalContentValue = transactionValue;\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Pressable\r\n                focusable={false}\r\n                variant='ghost'\r\n                onPress={handleTransactionModalOpen}\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                style={{\r\n                    marginTop: 3,\r\n                    paddingVertical: 3,\r\n                    paddingHorizontal: 5,\r\n                    flexDirection: 'row', // Align items in a row\r\n                    alignItems: 'center', // Center items vertically\r\n                    justifyContent: 'center',\r\n                    borderRadius: 5,\r\n                    backgroundColor: isHovered ? colorHoverIn : colorHoverOut,\r\n                }}\r\n            >\r\n                <FastImage\r\n                    source={{\r\n                        uri: require(`../../assets/chat_step/chat_step_${buttonValue}_on.png`),\r\n                        priority: FastImage.priority.normal\r\n                    }}\r\n                    style={{\r\n                        tintColor: 'rgba(128, 128, 128, 1)',\r\n                        width: 15,\r\n                        height: 15,\r\n                        alignSelf: 'center',\r\n                    }}\r\n                    resizeMode={FastImage.resizeMode.stretch}\r\n                />\r\n                <Text color={'white'} style={{ fontWeight: 700, marginLeft: 5, }}>{title}</Text>\r\n            </Pressable>\r\n\r\n        </>\r\n\r\n    );\r\n};\r\n\r\n\r\nconst PaymentHistoryModal = () => {\r\n\r\n    const [paymentHistoryVisible, setPaymentHistoryVisible] = useState(false);\r\n    const selectedCustomerData = useSelector((state) => state.selectedCustomerData);\r\n\r\n    const sortedPayments = selectedCustomerData.paymentsHistory\r\n        ? [...selectedCustomerData.paymentsHistory].sort((a, b) => {\r\n            const dateA = new Date(a.date);\r\n            const dateB = new Date(b.date);\r\n            return dateB - dateA; // Sorts in descending order\r\n        })\r\n        : [];\r\n\r\n    const [displayedPayments, setDisplayedPayments] = useState(sortedPayments.slice(0, 5));\r\n    const [loadingMore, setLoadingMore] = useState(false);\r\n\r\n    const loadMorePayments = () => {\r\n        if (loadingMore) return; // Prevent multiple loads\r\n\r\n        setLoadingMore(true);\r\n        const nextItems = sortedPayments.slice(\r\n            displayedPayments.length,\r\n            displayedPayments.length + 5\r\n        );\r\n\r\n        setTimeout(() => { // Simulate network request\r\n            setDisplayedPayments([...displayedPayments, ...nextItems]);\r\n            setLoadingMore(false);\r\n        }, 500); // Adjust the timeout as needed\r\n    };\r\n\r\n    const handlePaymentHistoryModalOpen = () => {\r\n        setDisplayedPayments(sortedPayments.slice(0, 5));\r\n        setPaymentHistoryVisible(true);\r\n\r\n    };\r\n\r\n    const handlePaymentHistoryModalClose = () => {\r\n        setPaymentHistoryVisible(false);\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n    function formatDate(dateString) {\r\n        // Remove ' at ' from the date string\r\n        const cleanedDateString = dateString.replace(' at ', ' ');\r\n        const date = new Date(cleanedDateString);\r\n\r\n        if (isNaN(date.getTime())) {\r\n            // Date is not valid\r\n            console.error(\"Invalid Date:\", dateString);\r\n            return \"Invalid Date\";\r\n        }\r\n\r\n        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n        const year = date.getFullYear();\r\n        const month = months[date.getMonth()];\r\n        const day = date.getDate().toString().padStart(2, '0');\r\n\r\n        let hours = date.getHours();\r\n        const minutes = date.getMinutes().toString().padStart(2, '0');\r\n        const ampm = hours >= 12 ? 'pm' : 'am';\r\n\r\n        hours = hours % 12;\r\n        hours = hours ? hours : 12; // the hour '0' should be '12'\r\n\r\n        return `${year} ${month} ${day} at ${hours}:${minutes}${ampm}`;\r\n    }\r\n\r\n    const isCloseToBottom = ({ layoutMeasurement, contentOffset, contentSize }) => {\r\n        return layoutMeasurement.height + contentOffset.y >= contentSize.height - 20;\r\n    };\r\n\r\n    return (\r\n\r\n        <>\r\n            <Pressable onPress={handlePaymentHistoryModalOpen}>\r\n                <Text style={{ fontSize: 14, color: '#0A78BE', textAlign: 'center', }} underline>\r\n                    {`View Payments History`}\r\n                </Text>\r\n            </Pressable>\r\n\r\n            <Modal isOpen={paymentHistoryVisible} onClose={handlePaymentHistoryModalClose} useRNModal>\r\n                <Modal.Content style={{ backgroundColor: 'white', borderRadius: 10 }}>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Header style={{ backgroundColor: 'white', textAlign: 'center', fontSize: 18, fontWeight: 'bold', color: '#333' }}>\r\n                        Payment History\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <ScrollView\r\n                            style={{ flex: 1, paddingHorizontal: 15, maxHeight: 500 }}\r\n                            onScroll={({ nativeEvent }) => {\r\n                                if (isCloseToBottom(nativeEvent)) {\r\n                                    loadMorePayments();\r\n                                }\r\n                            }}\r\n                            scrollEventThrottle={400} // Adjust as needed\r\n                        >\r\n                            {\r\n                                Array.isArray(sortedPayments) && sortedPayments.length > 0 ?\r\n                                    displayedPayments.map((payment, index) => (\r\n                                        <View key={index} style={{\r\n                                            marginBottom: 15,\r\n                                            backgroundColor: '#F8F9FF', // Card background color\r\n                                            borderRadius: 10, // Rounded corners for the card\r\n                                            shadowColor: '#000', // Shadow color\r\n                                            shadowOffset: { width: 0, height: 2 },\r\n                                            shadowOpacity: 0.1,\r\n                                            shadowRadius: 2,\r\n                                            elevation: 3, // Elevation for Android\r\n                                            padding: 15, // Padding inside the card\r\n                                            borderBottomWidth: 1,\r\n                                            borderBottomColor: '#eee',\r\n                                        }}>\r\n\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black', marginBottom: 5 }}>\r\n                                                <Text style={{ fontWeight: 'bold', color: '#0A78BE', }}>Date: </Text>\r\n                                                <Text style={{ color: '#333' }}>\r\n                                                    {formatDate(sortedPayments[sortedPayments.length - 1 - index].date)}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black', marginBottom: 5 }}>\r\n                                                <Text style={{ fontWeight: 'bold', color: '#0A78BE', }}>Value: </Text>\r\n                                                <Text style={{ color: Number(sortedPayments[sortedPayments.length - 1 - index].value).toLocaleString().startsWith('-') ? '#FF0000' : '#16A34A' }}>\r\n                                                    ${Number(sortedPayments[sortedPayments.length - 1 - index].value).toLocaleString()}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black', marginBottom: 5 }}>\r\n                                                <Text style={{ fontWeight: 'bold', color: '#0A78BE', }}>Vehicle Name: </Text>\r\n                                                <Text style={{ color: '#333' }}>{sortedPayments[sortedPayments.length - 1 - index].vehicleName}</Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black', marginBottom: 5 }}>\r\n                                                <Text style={{ fontWeight: 'bold', color: '#0A78BE', }}>Reference Number: </Text>\r\n                                                <Text style={{ color: '#333' }}>{sortedPayments[sortedPayments.length - 1 - index].vehicleRef}</Text>\r\n                                            </Text>\r\n\r\n                                        </View>\r\n\r\n                                    )) :\r\n                                    <Text style={{ fontWeight: 'bold', alignSelf: 'center', }} italic>No history to show</Text>\r\n                            }\r\n                            <View style={{ height: 20, }}>\r\n                                {loadingMore && <Spinner size='sm' color=\"#7B9CFF\" />}\r\n                            </View>\r\n\r\n                        </ScrollView>\r\n\r\n\r\n\r\n                    </Modal.Body>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nconst CustomerProfileModal = () => {\r\n    const [customerModalVisible, setCustomerModalVisible] = useState(false);\r\n    const selectedCustomerData = useSelector((state) => state.selectedCustomerData);\r\n\r\n\r\n    const handleModalOpen = () => {\r\n        setCustomerModalVisible(true);\r\n    }\r\n\r\n    const handleModalClose = () => {\r\n        setCustomerModalVisible(false);\r\n    }\r\n\r\n    const totalPaymentValue = selectedCustomerData.paymentsHistory\r\n        ? selectedCustomerData.paymentsHistory.reduce((sum, payment) => {\r\n            const value = Number(payment.value);\r\n            return sum + (isNaN(value) ? 0 : value);\r\n        }, 0)\r\n        : 0;\r\n\r\n\r\n    return (\r\n        <>\r\n            <Pressable\r\n                onPress={handleModalOpen}\r\n                style={{ width: 'fit-content', }}\r\n            >\r\n                <Text style={{ fontWeight: 700, }} underline>{`${globalCustomerFirstName} ${globalCustomerLastName}`}</Text>\r\n            </Pressable>\r\n\r\n            <Modal\r\n                isOpen={customerModalVisible}\r\n                onClose={handleModalClose}\r\n                size={'lg'}\r\n\r\n            >\r\n                <Modal.Content background={'white'}>\r\n\r\n                    <Modal.Body>\r\n\r\n                        <View\r\n                            style={{\r\n                                flex: 1,\r\n                                alignItems: 'center',\r\n                            }}>\r\n\r\n                            <View style={{\r\n                                borderRadius: 10,\r\n                                backgroundColor: '#F8F9FF',\r\n                                width: 440,\r\n                                alignItems: 'center',\r\n                                paddingBottom: 15,\r\n\r\n                            }}>\r\n\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 26, color: '#0A78BE', }} selectable>\r\n                                    {`${globalCustomerFirstName} ${globalCustomerLastName}`}\r\n                                </Text>\r\n\r\n                                <Text style={{ fontSize: 14, color: '#6F6F6F', width: '45%', textAlign: 'center', }} selectable>\r\n                                    {`${selectedCustomerData.textZip}, ${selectedCustomerData.textStreet}, ${selectedCustomerData.city}, ${selectedCustomerData.country}`}\r\n                                </Text>\r\n\r\n                                <View\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        flexDirection: 'row',\r\n                                        paddingTop: 20,\r\n                                        justifyContent: 'center',\r\n                                    }}\r\n                                >\r\n\r\n                                    <Text style={{ fontSize: 14, color: '#6F6F6F', textAlign: 'center' }} selectable>\r\n                                        {`${selectedCustomerData.textPhoneNumber}`}\r\n                                    </Text>\r\n\r\n                                    {/* Separator */}\r\n\r\n                                    <View style={{\r\n                                        height: '100%', // Full height of the parent View\r\n                                        width: 2, // Width of the line\r\n                                        backgroundColor: '#DCDCDC', // Line color\r\n                                        marginHorizontal: 10, // Space on the sides of the line\r\n                                    }} />\r\n\r\n                                    <Hyperlink\r\n                                        linkDefault={true}\r\n                                        linkStyle={{ color: '#8A64F6', fontSize: 14 }}\r\n\r\n                                    >\r\n                                        <Text style={{ textAlign: 'center' }} selectable>\r\n                                            {selectedCustomerData.textEmail}\r\n                                        </Text>\r\n                                    </Hyperlink>\r\n\r\n                                </View>\r\n\r\n\r\n                            </View>\r\n\r\n                        </View>\r\n\r\n                        <View\r\n                            style={{\r\n                                width: 440,\r\n                                justifyContent: 'center',\r\n                                alignItems: 'center',\r\n                                marginTop: 50,\r\n                                flexDirection: 'row',\r\n                                alignSelf: 'center',\r\n                            }}>\r\n\r\n                            <View style={{ flex: 1, alignItems: 'center', }}>\r\n\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 24, color: '#009922', textAlign: 'center', }} selectable>\r\n                                    {`$${(totalPaymentValue).toLocaleString('en-US')}`}\r\n                                </Text>\r\n\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 16, color: '#5E4343', textAlign: 'center', }}>\r\n                                    {`Total Payment`}\r\n                                </Text>\r\n\r\n                                <PaymentHistoryModal />\r\n\r\n\r\n                            </View>\r\n\r\n                            <View style={{ flex: 1, alignItems: 'center', }}>\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 24, color: '#990000', textAlign: 'center', }} selectable>\r\n                                    {`$${selectedCustomerData.overBalance ? Number(selectedCustomerData.overBalance).toLocaleString('en-US') : 0}`}\r\n                                </Text>\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 16, color: '#5E4343', textAlign: 'center', }}>\r\n                                    {`Overbalance`}\r\n                                </Text>\r\n\r\n                                <Text style={{ fontSize: 14, color: 'transparent', textAlign: 'center', }} underline>\r\n                                    {`-----`}\r\n                                </Text>\r\n\r\n\r\n                            </View>\r\n\r\n                            <View style={{ flex: 1, alignItems: 'center', }}>\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 24, color: '#0029A3', textAlign: 'center', }} selectable>\r\n                                    {`11`}\r\n                                </Text>\r\n                                <Text style={{ fontWeight: 'bold', fontSize: 16, color: '#5E4343', textAlign: 'center', }}>\r\n                                    {`Transactions`}\r\n                                </Text>\r\n\r\n                                <Pressable>\r\n                                    <Text style={{ fontSize: 14, color: '#0A78BE', textAlign: 'center', }} underline>\r\n                                        {`View Transactions`}\r\n                                    </Text>\r\n                                </Pressable>\r\n\r\n                            </View>\r\n\r\n                        </View>\r\n\r\n                    </Modal.Body>\r\n\r\n\r\n                </Modal.Content>\r\n            </Modal>\r\n\r\n\r\n\r\n\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nconst ChatMessageHeader = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const totalPriceCondition = selectedChatData.fobPrice && selectedChatData.jpyToUsd && selectedChatData.m3 && selectedChatData.freightPrice;\r\n\r\n    const freightCalculation = ((selectedChatData.m3 ? selectedChatData.m3 :\r\n        (selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ?\r\n            selectedChatData.carData.dimensionCubicMeters : 0)) *\r\n        Number(selectedChatData.freightPrice));\r\n\r\n    const totalPriceCalculation = (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n        (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n            selectedChatData.carData.fobPrice : 0) *\r\n        (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n            (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                selectedChatData.currency.jpyToUsd : 0))) + freightCalculation;\r\n\r\n    const fobPriceDollars = (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n        (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n            selectedChatData.carData.fobPrice : 0) *\r\n        (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n            (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                selectedChatData.currency.jpyToUsd : 0)));\r\n\r\n    const carName = selectedChatData.carData && selectedChatData.carData.carName ? selectedChatData.carData.carName : (selectedChatData.vehicle && selectedChatData.vehicle.carName ? selectedChatData.vehicle.carName : '');\r\n\r\n    const freightPriceYen = freightCalculation / selectedChatData.currency.jpyToUsd;\r\n\r\n    return (\r\n\r\n        <View style={{\r\n            flex: 1,\r\n            alignSelf: 'flex-start',\r\n            flexDirection: 'row',\r\n        }}>\r\n\r\n            {globalImageUrl ? (\r\n                <FastImage\r\n                    source={{ uri: globalImageUrl, priority: FastImage.priority.normal }}\r\n                    style={{\r\n                        width: 60,\r\n                        height: 60,\r\n                        borderRadius: 30,\r\n                        alignSelf: 'center',\r\n                        margin: 10,\r\n                    }}\r\n                    resizeMode={FastImage.resizeMode.stretch}\r\n                />\r\n            ) : (\r\n                <View\r\n                    style={{\r\n                        width: 60,\r\n                        height: 60,\r\n                        borderRadius: 30,\r\n                        backgroundColor: '#e0e0e0',\r\n                        marginRight: 12,\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            <View style={{ alignSelf: 'center', paddingRight: 10, }}>\r\n                <Text style={{ fontWeight: 700, color: '#0A78BE', }}>{carName}</Text>\r\n\r\n                <CustomerProfileModal />\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 1, color: '#8D7777', }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.referenceNumber ? selectedChatData.carData.referenceNumber : 'Chassis N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                {/* <Text style={{ fontWeight: 700, color: \"#16A34A\", }}>{`$${selectedChatData.offerPrice ? selectedChatData.offerPrice : 0}`}</Text> */}\r\n                <TimelineStatus data={statusData} />\r\n\r\n            </View>\r\n\r\n            {/* <HorizontalTimeline /> */}\r\n\r\n            <View style={{ alignSelf: 'center', justifyContent: 'center', paddingLeft: 10, }}>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.chassisNumber ? selectedChatData.carData.chassisNumber : 'Chassis N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.modelCode ? selectedChatData.carData.modelCode : 'Model Code N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.mileage\r\n                            ? Number(selectedChatData.carData.mileage).toLocaleString('en-US')\r\n                            : 'Mileage N/A'} km\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.fuel ? selectedChatData.carData.fuel : 'Fuel N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.transmission ? selectedChatData.carData.transmission : 'Transmission N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n            </View>\r\n\r\n            <View style={{ alignSelf: 'center', justifyContent: 'center', paddingLeft: 15, }}>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontSize: 18, }} bold>Total Price: </Text>\r\n                    <Text selectable style={{ fontSize: 18, color: \"#16A34A\", textAlign: 'right', }} bold>\r\n                        {`$${Number(totalPriceCalculation).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                    </Text>\r\n                    <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 4, marginLeft: 2, }}>\r\n                        ({`¥${Number(\r\n                            totalPriceCalculation /\r\n                            ((selectedChatData && selectedChatData.jpyToUsd) ? Number(selectedChatData.jpyToUsd) :\r\n                                (selectedChatData && selectedChatData.currency && selectedChatData.currency.jpyToUsd) ? selectedChatData.currency.jpyToUsd :\r\n                                    0)\r\n                        ).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontWeight: 700, }}>FOB Price: </Text>\r\n                    <Text selectable style={{ fontWeight: 700, color: \"#8D7777\", textAlign: 'right', }}>\r\n                        {`${Number(fobPriceDollars).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                    </Text>\r\n                    <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 2, marginLeft: 2, }}>\r\n                        ({`${(selectedChatData.fobPrice ? selectedChatData.fobPrice : Number(selectedChatData.carData && selectedChatData.carData.fobPrice ? selectedChatData.carData.fobPrice : 0)).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontWeight: 700, }}>Freight Price: </Text>\r\n                    <Text selectable style={{ fontWeight: 700, color: \"#8D7777\", textAlign: 'right', }}>\r\n                        {`${Number(freightCalculation).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                    </Text>\r\n                    <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 2, marginLeft: 2, }}>\r\n                        ({`${(selectedChatData.freightPrice ? freightPriceYen : Number(selectedChatData.carData && selectedChatData.carData.freightPrice ? freightPriceYen : 0)).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, textAlign: 'right', }}>\r\n                        {`${selectedChatData.country && selectedChatData.port ? `${selectedChatData.country} / ${selectedChatData.port}` : 'N/A'}`}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontWeight: 700, color: \"#16A34A\", }}>{selectedChatData.insurance ? 'CIF' : 'C&F'}\r\n                        {selectedChatData.inspection ? ` + Inpection[${selectedChatData.inspectionName}]` : ''}</Text>\r\n                </View>\r\n            </View>\r\n\r\n            <View style={{ paddingLeft: 10, paddingRight: 10, paddingTop: 2, }}>\r\n                {(selectedChatData.stepIndicator.value == 1 || selectedChatData.stepIndicator.value == 2) &&\r\n                    <>\r\n                        <ProfitCalculator />\r\n\r\n                        <TransactionButton\r\n                            key={'Issue Proforma Invoice'}\r\n                            title={selectedChatData.stepIndicator.value == 1 ? 'Issue Proforma Invoice' : selectedChatData.stepIndicator.value == 2 ? 'Update Invoice' : ''}\r\n                            colorHoverIn={'#0f7534'}\r\n                            colorHoverOut={'#16A34A'}\r\n                            transactionValue={2}\r\n                            buttonValue={2}\r\n                            iconActive={<FontAwesome5 name=\"file-invoice-dollar\" color=\"#1C2B33\" size={14} />} />\r\n\r\n                        <PreviewInvoice />\r\n\r\n                        <View style={{ flexDirection: 'row' }}>\r\n                            <Text style={{ fontWeight: 700, fontSize: 18 }}>Final Price: </Text>\r\n                            <Text selectable style={{ fontWeight: 700, fontSize: 18, color: \"#FF0000\", textAlign: 'right' }}>\r\n                                {`$${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount ? Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                            </Text>\r\n                            <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 4, marginLeft: 2 }}>\r\n                                ({`¥${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount && selectedChatData && selectedChatData.currency && selectedChatData.currency.jpyToUsd ? (Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) / Number(selectedChatData.currency.jpyToUsd)) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                            </Text>\r\n                        </View>\r\n                    </>\r\n                }\r\n\r\n                {(selectedChatData.stepIndicator.value == 3) &&\r\n\r\n                    <View style={{ flexDirection: 'row', paddingRight: 10, paddingTop: 2, }}>\r\n\r\n                        <View style={{ paddingLeft: 10, }}>\r\n                            <ProfitCalculator />\r\n\r\n                            <TransactionButton\r\n                                key={'Input Payment'}\r\n                                title={'Input Payment'}\r\n                                colorHoverOut={'#FF0000'}\r\n                                colorHoverIn={'#800101'}\r\n                                transactionValue={3}\r\n                                buttonValue={4}\r\n                                iconActive={<FontAwesome5 name=\"file-invoice-dollar\" color=\"#1C2B33\" size={14} />} />\r\n\r\n\r\n                            <PreviewInvoice />\r\n\r\n                            <View style={{ flexDirection: 'row' }}>\r\n                                <Text style={{ fontWeight: 700, fontSize: 18 }}>Final Price: </Text>\r\n                                <Text selectable style={{ fontWeight: 700, fontSize: 18, color: \"#FF0000\", textAlign: 'right' }}>\r\n                                    {`$${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount ? Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 4, marginLeft: 2 }}>\r\n                                    ({`¥${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount && selectedChatData && selectedChatData.currency && selectedChatData.currency.jpyToUsd ? (Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) / Number(selectedChatData.currency.jpyToUsd)) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                                </Text>\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View style={{ paddingLeft: 10, }}>\r\n\r\n                            <TransactionButton\r\n                                key={'Issue Proforma Invoice'}\r\n                                title={selectedChatData.stepIndicator.value == 1 ? 'Issue Proforma Invoice' : 'Update Invoice'}\r\n                                colorHoverIn={'#0f7534'}\r\n                                colorHoverOut={'#16A34A'}\r\n                                transactionValue={2}\r\n                                buttonValue={2}\r\n                                iconActive={<FontAwesome5 name=\"file-invoice-dollar\" color=\"#1C2B33\" size={14} />} />\r\n\r\n                            <ExtendDueDateButton />\r\n\r\n                            <View style={{ flexDirection: 'row', }}>\r\n                                {invoiceData && invoiceData.bankInformations && invoiceData.bankInformations.dueDate &&\r\n                                    <>\r\n                                        <Text style={{ fontWeight: 700, fontSize: 14, }}>Due Date: </Text>\r\n                                        <Text selectable style={{ fontWeight: 700, fontSize: 14, textAlign: 'right', color: '#FF0000', }}>\r\n                                            {\r\n                                                invoiceData.bankInformations.dueDate\r\n                                                    ? new Date(invoiceData.bankInformations.dueDate).toLocaleDateString(undefined, {\r\n                                                        year: 'numeric',\r\n                                                        month: 'long',\r\n                                                        day: 'numeric',\r\n                                                    })\r\n                                                    : 'Invalid Date'\r\n                                            }\r\n                                        </Text>\r\n                                    </>}\r\n                            </View>\r\n\r\n                        </View>\r\n                    </View>\r\n\r\n                }\r\n\r\n            </View>\r\n            <TransactionModal />\r\n        </View>\r\n\r\n    );\r\n};\r\n\r\n\r\nconst ReadByListModal = ({ userEmail, handleReadByListModalClose }) => {\r\n\r\n    const readByListModalVisible = useSelector((state) => state.readByListModalVisible)\r\n    const selectedChatData = useSelector((state) => state.selectedChatData)\r\n    // const [email, setEmail] = useState(projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '');\r\n\r\n    const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n    return (\r\n\r\n        <Modal\r\n            isOpen={readByListModalVisible}\r\n            onClose={() => handleReadByListModalClose()}\r\n            useRNModal\r\n            size={'xs'}\r\n        >\r\n            <Modal.Content borderRadius={0} style={{ padding: 15, backgroundColor: '#f8f8f8', shadowColor: '#000', shadowOffset: { width: 0, height: 2 }, shadowOpacity: 0.25, shadowRadius: 3.84, elevation: 5 }}>\r\n                <Modal.CloseButton />\r\n\r\n                <Modal.Header style={{ fontSize: 22, fontWeight: '600', textAlign: 'center', color: '#333', }}>Read List</Modal.Header>\r\n\r\n                <Modal.Body>\r\n                    {\r\n                        selectedChatData.readBy.length > 0 ? (\r\n                            <ScrollView style={{ maxHeight: 250, borderRadius: 10 }}>\r\n                                {/* Sort and map over the readBy list */}\r\n                                {\r\n                                    [...selectedChatData.readBy]\r\n                                        .sort((a, b) => a === email ? -1 : b === email ? 1 : 0)\r\n                                        .map(item => (\r\n                                            <View key={item} style={{ flexDirection: 'row', alignItems: 'center', marginVertical: 8, borderBottomWidth: 0.5, borderColor: '#ddd', paddingBottom: 8 }}>\r\n                                                <FontAwesome name=\"user-circle\" size={24} color=\"#4A90E2\" style={{ marginRight: 12 }} />\r\n                                                <Text style={{ flex: 1, color: '#555' }}>{email === item ? 'You' : item}</Text>\r\n                                            </View>\r\n                                        ))\r\n                                }\r\n                            </ScrollView>\r\n                        ) : (\r\n                            <Text style={{ textAlign: 'center', color: 'grey', fontSize: 16 }}>No one has read this message yet.</Text>\r\n                        )\r\n                    }\r\n                </Modal.Body>\r\n            </Modal.Content>\r\n        </Modal>\r\n\r\n    );\r\n}\r\n\r\nconst ImagePreviewModal = ({ isVisible, onClose, imageUrl }) => {\r\n    return (\r\n        <Modal isOpen={isVisible} onClose={onClose} size=\"full\" useRNModal>\r\n            <Modal.Content\r\n                style={{\r\n                    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n                    width: '80%',\r\n                    height: '80%',\r\n                    alignSelf: 'center',\r\n                    justifyContent: 'center',\r\n                }}>\r\n                <Modal.CloseButton />\r\n                <FastImage\r\n                    source={{ uri: imageUrl, priority: FastImage.priority.normal }}\r\n                    style={{ width: '100%', height: '100%', borderRadius: 10 }}\r\n                    resizeMode={FastImage.resizeMode.contain}\r\n                />\r\n            </Modal.Content>\r\n        </Modal>\r\n    );\r\n};\r\n\r\n\r\nconst HoverablePressable = ({ url, printComponent }) => {\r\n    const [isHoveredDownload, setIsHoveredDownload] = useState(false);\r\n    const [isHoveredPrint, setIsHoveredPrint] = useState(false);\r\n    const baseStyle = {\r\n        marginRight: 10,\r\n        borderRadius: 16,\r\n        borderWidth: 1,\r\n        borderColor: 'white',\r\n        width: 26,\r\n        height: 26,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    };\r\n\r\n    const hoverStyle = {\r\n        backgroundColor: '#ddd', // Example hover style\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Tooltip label=\"Download\" openDelay={200} bgColor={'white'} _text={{ color: '#1C2B33', }}>\r\n                <Pressable\r\n                    style={{\r\n                        marginRight: 8,\r\n                        borderRadius: 16,\r\n                        width: 32,\r\n                        height: 32,\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                        backgroundColor: isHoveredDownload ? '#424649' : 'transparent',\r\n                    }}\r\n                    onPress={async () => {\r\n                        await Linking.openURL(url);\r\n                    }}\r\n                    onMouseEnter={() => setIsHoveredDownload(true)}\r\n                    onMouseLeave={() => setIsHoveredDownload(false)}\r\n                >\r\n                    <MaterialCommunityIcons name=\"download\" size={20} color={'#F1F1F1'} />\r\n                </Pressable>\r\n            </Tooltip>\r\n\r\n            {/* <Tooltip label=\"Print\" openDelay={200} bgColor={'white'} _text={{ color: '#1C2B33', }}>\r\n                <Pressable\r\n                    style={{\r\n                        marginRight: 8,\r\n                        borderRadius: 16,\r\n                        width: 32,\r\n                        height: 32,\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                        backgroundColor: isHoveredPrint ? '#424649' : 'transparent',\r\n                    }}\r\n                    onMouseEnter={() => setIsHoveredPrint(true)}\r\n                    onMouseLeave={() => setIsHoveredPrint(false)}\r\n                    onPress={printComponent}\r\n                >\r\n                    <MaterialCommunityIcons name=\"printer\" size={20} color={'#F1F1F1'} />\r\n                </Pressable>\r\n            </Tooltip> */}\r\n        </>\r\n    );\r\n};\r\n\r\nconst DocumentPreviewModal = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const selectedFileUrl = useSelector((state) => state.selectedFileUrl);\r\n    const pdfViewerModalVisible = useSelector((state) => state.pdfViewerModalVisible);\r\n\r\n    const [iframeKey, setIframeKey] = useState(0);\r\n\r\n\r\n    const url = 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/ChatFiles%2Fchat_2023090239_marcvan14%40gmail.com%2FC-HUB_01312024153002.887%2FDAILY%20REPORT%202024-01-29.pdf?alt=media&token=88b7be9b-17ef-48d3-b5b3-6f7f0d317b7c'\r\n    const urlDocx = 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/ChatFiles%2Fchat_2023090239_marcvan14%40gmail.com%2FC-HUB_01312024170117.701%2FDAILY%20REPORT%202024-01-29.docx?alt=media&token=9bf45632-e192-45bf-8b40-9fd5cdb9368e';\r\n    const [isLoading, setLoading] = useState(true); // Loading state\r\n\r\n    // console.log(`https://docs.google.com/viewer?url=${encodeURIComponent(urlDocx)}&embedded=true`);\r\n\r\n\r\n    const handleIframeLoad = () => {\r\n        setLoading(false); // Set loading to false when iframe content is loaded\r\n    };\r\n\r\n    const handleModalClose = () => {\r\n\r\n        dispatch(setPdfViewerModalVisible(false))\r\n        dispatch(setSelectedFileUrl(''))\r\n        setLoading(true);\r\n        globalSelectedFileType = '';\r\n        globalSelectedPDFUrl = '';\r\n    }\r\n\r\n    const printIframe = () => {\r\n        // const iframe = document.getElementById('documentIframe');\r\n        // iframe.contentWindow.print();\r\n        const printWindow = window.open(`https://docs.google.com/viewer?url=${encodeURIComponent(selectedFileUrl)}&embedded=true`, '_blank');\r\n        printWindow.focus();\r\n        printWindow.print();\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        const timeout = setTimeout(() => {\r\n\r\n            if (isLoading) {\r\n                console.log(\"Iframe is taking too long to load. Attempting to reload.\");\r\n                console.log(\"Current URL:\", selectedFileUrl);\r\n                console.log(\"Current Global URL:\", globalSelectedPDFUrl);\r\n\r\n                setIsLoading(false);\r\n                setIframeKey(prevKey => prevKey + 1);\r\n                dispatch(setSelectedFileUrl(globalSelectedPDFUrl));\r\n\r\n            }\r\n\r\n        }, 5000); // Timeout set to 5 seconds\r\n\r\n        return () => clearTimeout(timeout);\r\n\r\n    }, [isLoading,]);\r\n\r\n\r\n\r\n    return (\r\n        <Modal isOpen={pdfViewerModalVisible}\r\n            onClose={() => {\r\n                handleModalClose();\r\n            }\r\n            } size=\"xl\">\r\n            <Modal.Content>\r\n                {globalSelectedFileType !== 'pdf' ?\r\n\r\n                    (<>\r\n                        {isLoading && (\r\n                            <View style={{\r\n                                top: 0,\r\n                                bottom: 0,\r\n                                left: 0,\r\n                                right: 0,\r\n                                position: 'absolute',\r\n                                justifyContent: 'center',\r\n                                alignItems: 'center',\r\n                                height: '700px'  // Same height as the iframe for consistent layout\r\n                            }}>\r\n                                <Spinner\r\n                                    animating\r\n                                    size=\"lg\"\r\n                                    color={'#7B9CFF'}\r\n                                />\r\n                            </View>\r\n                        )}\r\n                        {selectedFileUrl !== '' &&\r\n                            <>\r\n                                {!isLoading &&\r\n                                    <View style={{ flexDirection: 'row', width: '100%', height: 57, borderRadius: 0, backgroundColor: '#323639', justifyContent: 'flex-end', alignItems: 'center', }}>\r\n                                        <HoverablePressable url={globalSelectedPDFUrl} printComponent={printIframe} />\r\n                                    </View>\r\n                                }\r\n\r\n                                <iframe\r\n                                    key={iframeKey}\r\n                                    src={`https://docs.google.com/viewer?url=${encodeURIComponent(selectedFileUrl)}&embedded=true`}\r\n                                    id='documentIframe'\r\n                                    style={{ width: '100%', height: '700px' }}\r\n                                    title=\"Document Viewer\"\r\n                                    onLoad={() => {\r\n                                        handleIframeLoad();\r\n                                    }}\r\n                                />\r\n                            </>\r\n                        }\r\n                    </>\r\n                    )\r\n\r\n                    : (\r\n                        <>\r\n                            {isLoading && (\r\n                                <View style={{\r\n                                    top: 0,\r\n                                    bottom: 0,\r\n                                    left: 0,\r\n                                    right: 0,\r\n                                    position: 'absolute',\r\n                                    justifyContent: 'center',\r\n                                    alignItems: 'center',\r\n                                    height: '700px'  // Same height as the iframe for consistent layout\r\n                                }}>\r\n                                    <Spinner\r\n                                        animating\r\n                                        size=\"lg\"\r\n                                        color={'#7B9CFF'}\r\n                                    />\r\n                                </View>\r\n                            )}\r\n                            {selectedFileUrl !== '' && <iframe\r\n                                src={selectedFileUrl}\r\n                                style={{ width: '100%', height: '700px' }}\r\n                                title=\"PDF Viewer\"\r\n                                onLoad={handleIframeLoad} // Event when iframe has loaded\r\n                            />}\r\n                        </>\r\n                    )\r\n\r\n\r\n                }\r\n\r\n            </Modal.Content>\r\n        </Modal>\r\n    );\r\n\r\n};\r\n\r\nconst ChatMessageBox = ({ activeButtonValue, userEmail }) => {\r\n    const chatListData = useSelector((state) => state.chatListData);\r\n    const chatMessagesData = useSelector((state) => state.chatMessagesData);\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n    const loadMoreMessagesLoading = useSelector((state) => state.loadMoreMessagesLoading);\r\n    const noMoreMessagesData = useSelector((state) => state.noMoreMessagesData);\r\n    const [isEyeHovered, setIsEyeHovered] = useState(false);\r\n    const flatListRef = useRef();\r\n    const [hoveredImageIndex, setHoveredImageIndex] = useState(null);\r\n\r\n    const [selectedImageIndex, setSelectedImageIndex] = useState(null);\r\n    const [isPreviewVisible, setIsPreviewVisible] = useState(false);\r\n\r\n    const openPreview = (index) => {\r\n        setSelectedImageIndex(index);\r\n        setIsPreviewVisible(true);\r\n    };\r\n\r\n    const closePreview = () => {\r\n        setIsPreviewVisible(false);\r\n        setSelectedImageIndex(null);\r\n    };\r\n\r\n\r\n    const handleImageMessageMouseEnter = (index) => {\r\n        setHoveredImageIndex(index);\r\n    };\r\n\r\n    const handleImageMessageMouseLeave = () => {\r\n        setHoveredImageIndex(null);\r\n    };\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [read, setRead] = useState(selectedChatData.read);\r\n\r\n    const handleReadByListModalOpen = () => {\r\n        dispatch(setReadByListModalVisible(true));\r\n    };\r\n\r\n    const handleReadByListModalClose = () => {\r\n        dispatch(setReadByListModalVisible(false));\r\n    };\r\n\r\n    const animatedValue = useRef(new Animated.Value(0)).current;\r\n\r\n    useEffect(() => {\r\n        Animated.loop(\r\n            Animated.sequence([\r\n                Animated.timing(animatedValue, {\r\n                    toValue: 1,\r\n                    duration: 2000,\r\n                    useNativeDriver: false\r\n                }),\r\n                Animated.timing(animatedValue, {\r\n                    toValue: 0,\r\n                    duration: 2000,\r\n                    useNativeDriver: false\r\n                })\r\n            ])\r\n        ).start();\r\n    }, [animatedValue]);\r\n\r\n    const borderColor = animatedValue.interpolate({\r\n        inputRange: [0, 0.25, 0.5, 0.75, 1],\r\n        outputRange: [\r\n            'rgb(255, 100, 100)', // Red\r\n            'rgb(100, 255, 100)', // Green\r\n            'rgb(100, 100, 255)', // Blue\r\n            'rgb(255, 255, 100)', // Yellow\r\n            'rgb(255, 100, 255)'  // Magenta\r\n        ]\r\n    });\r\n\r\n    const renderFooter = () => {\r\n        return (\r\n            <>\r\n                {!noMoreMessagesData && (\r\n                    <View style={{ paddingVertical: 20, height: 60, }}>\r\n                        {loadMoreMessagesLoading && (\r\n                            <Spinner\r\n                                animating\r\n                                size=\"sm\"\r\n                                color={'#7B9CFF'}\r\n                            />\r\n                        )}\r\n                    </View>\r\n                )}\r\n            </>\r\n\r\n\r\n        );\r\n    };\r\n\r\n    const handleLoadMoreMessages = async () => {\r\n        dispatch(setLoadMoreMessagesLoading(true));\r\n        dispatch(setNoMoreMessagesData(false));\r\n\r\n        let nextQuery;\r\n        if (!globalMessagesLastVisible) {\r\n            // No more data to load or globalLastVisible is undefined\r\n            dispatch(setLoadMoreMessagesLoading(false));\r\n            dispatch(setNoMoreMessagesData(true));\r\n        }\r\n\r\n        else {\r\n            dispatch(setLoadMoreMessagesLoading(true));\r\n            dispatch(setNoMoreMessagesData(false));\r\n\r\n            nextQuery = query(\r\n                collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'),\r\n                orderBy('timestamp', 'desc'),\r\n                startAfter(globalMessagesLastVisible),\r\n                limit(10)\r\n            );\r\n            try {\r\n                const unsubscribe = onSnapshot(nextQuery, (snapshot) => {\r\n                    if (snapshot.empty) {\r\n                        // Handle the case when there's no more data\r\n                        console.log(\"No more data to load\");\r\n                        setTimeout(() => {\r\n                            dispatch(setLoadMoreMessagesLoading(false));\r\n                            dispatch(setNoMoreMessagesData(true));\r\n                            globalMessagesLastVisible = null;\r\n                        }, 0);  // Delay setting loading and no more data flags\r\n                        return;\r\n                    }\r\n\r\n                    const chatsData = [];\r\n                    snapshot.forEach((doc) => {\r\n                        chatsData.push({\r\n                            id: doc.id,\r\n                            ...doc.data(),\r\n                        });\r\n                    });\r\n\r\n\r\n                    // Append new data to the existing list\r\n\r\n                    setTimeout(() => {\r\n                        dispatch(setChatMessagesData([...chatMessagesData, ...chatsData]));\r\n                        dispatch(setLoadMoreMessagesLoading(false));\r\n                        globalMessagesLastVisible = snapshot.docs[snapshot.docs.length - 1];\r\n                    }, 0);\r\n\r\n                });\r\n\r\n                return unsubscribe;\r\n            } catch (error) {\r\n                console.error('Error fetching data from Firebase:', error);\r\n                setTimeout(() => dispatch(setLoadMoreMessagesLoading(false)), 0);  // Ensure loading is set to false even if there's an error\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    const updateChatToRead = async () => {\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        const docRef = doc(projectExtensionFirestore, \"chats\", activeChatId);\r\n        if (email !== '') {\r\n            try {\r\n\r\n                await updateDoc(docRef, {\r\n                    read: true,\r\n                    readBy: arrayUnion(email),\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error updating document: \", error);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (activeChatId == selectedChatData.id) {\r\n            if (selectedChatData.stepIndicator.value !== activeButtonValue && activeButtonValue !== 0) {\r\n                dispatch(setChatMessagesData([]));\r\n                dispatch(setActiveChatId(''));\r\n            }\r\n            else {\r\n                updateChatToRead();\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }, [selectedChatData]);\r\n\r\n    const handlePreviewInvoiceModalOpen = () => {\r\n        dispatch(setPreviewInvoiceVisible(true));\r\n    };\r\n\r\n    const formatDate = (timestamp) => {\r\n        // Parse the original timestamp\r\n        // Expected format: \"2024/01/15 at 12:17:50\"\r\n        const parts = timestamp.match(/(\\d{4})\\/(\\d{2})\\/(\\d{2}) at (\\d{2}):(\\d{2}):(\\d{2})/);\r\n        if (!parts) return timestamp; // Return original if parsing fails\r\n\r\n        // Create a new Date object\r\n        const date = new Date(parts[1], parts[2] - 1, parts[3], parts[4], parts[5], parts[6]);\r\n\r\n        // Format month names\r\n        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\n        // Convert to 12-hour format and determine AM or PM\r\n        const hours = date.getHours();\r\n        const isPM = hours >= 12;\r\n        const formattedHours = hours % 12 || 12; // Convert 0 to 12 for 12 AM\r\n        const amPm = isPM ? 'PM' : 'AM';\r\n\r\n        // Construct the new format with year at the beginning\r\n        return `${date.getFullYear().toString().substr(-2)} ${months[date.getMonth()]} ${date.getDate()}, ${formattedHours}:${date.getMinutes().toString().padStart(2, '0')} ${amPm}`;\r\n    };\r\n\r\n    const extractUsernameFromEmail = (email) => {\r\n        const [username] = email.split('@');\r\n        return username;\r\n    };\r\n\r\n\r\n    const breakUrl = (url, maxUrlLength = 30) => {\r\n        let brokenUrl = '';\r\n        while (url.length > 0) {\r\n            brokenUrl += url.substring(0, maxUrlLength);\r\n            if (url.length > maxUrlLength) {\r\n                brokenUrl += '\\u200B'; // Zero-width space\r\n            }\r\n            url = url.substring(maxUrlLength);\r\n        }\r\n        return brokenUrl;\r\n    };\r\n\r\n    const isUrl = (text) => {\r\n        // Simple URL check\r\n        const urlPattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\r\n            '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\r\n            '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\r\n            '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\r\n            '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\r\n            '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\r\n        return !!urlPattern.test(text);\r\n    };\r\n\r\n    const handleLinkPress = (url) => {\r\n        Linking.canOpenURL(url).then(supported => {\r\n            if (supported) {\r\n                Linking.openURL(url);\r\n            } else {\r\n                console.log(\"Don't know how to open URI: \" + url);\r\n            }\r\n        });\r\n    };\r\n\r\n    const cleanUrl = (url) => {\r\n        // Removing Zero Width Space and other potential invisible characters\r\n        return url.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\r\n    };\r\n\r\n\r\n    const renderItemText = (isGlobalCustomerSender, text) => {\r\n        const urlPattern = new RegExp('(https?:\\\\/\\\\/[^\\\\s]+)', 'g');\r\n        let segments = text.split(urlPattern);\r\n\r\n        const insertBreaks = (str, n) => {\r\n            // Inserts a zero-width space every 'n' characters in 'str'\r\n            let result = '';\r\n            while (str.length > 0) {\r\n                result += str.substring(0, n) + '\\u200B';\r\n                str = str.substring(n);\r\n            }\r\n            return result;\r\n        };\r\n\r\n        return segments.map((segment, index) => {\r\n            const segmentWithBreaks = segment.length > 30 && !segment.includes(' ') ? insertBreaks(segment, 30) : segment;\r\n\r\n            if (isUrlForText(segment)) {\r\n                // Apply breaks for long URLs\r\n                return (\r\n                    <Pressable key={index} onPress={() => handleLinkPress(segment)}>\r\n                        <Text\r\n                            selectable\r\n                            style={{\r\n                                fontWeight: '400',\r\n                                color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                fontSize: 16,\r\n                                flexShrink: 1,\r\n                                textDecorationLine: 'underline',\r\n                                flexWrap: 'wrap',\r\n                            }}\r\n                        >\r\n                            {segmentWithBreaks}\r\n                        </Text>\r\n                    </Pressable>\r\n                );\r\n            } else {\r\n                return (\r\n                    <Text\r\n                        selectable\r\n                        key={index}\r\n                        style={{\r\n                            fontWeight: '400',\r\n                            color: isGlobalCustomerSender ? 'black' : 'white',\r\n                            fontSize: 16,\r\n                            flexShrink: 1,\r\n                            flexWrap: 'wrap',\r\n                        }}\r\n                    >\r\n                        {segmentWithBreaks}\r\n                    </Text>\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n\r\n    const getFileIcon = (fileName) => {\r\n        const iconSize = 24;\r\n        const lowerFileName = fileName.toLowerCase();\r\n\r\n        if (lowerFileName.endsWith('.pdf')) {\r\n            return <MaterialIcons name={'picture-as-pdf'} size={iconSize} color=\"white\" />;\r\n        }\r\n        // Add more conditions for other file types as needed\r\n        // Example for .docx files\r\n        if (lowerFileName.endsWith('.docx') || lowerFileName.endsWith('.doc')) {\r\n            return <MaterialCommunityIcons name={'microsoft-word'} size={iconSize} color=\"white\" />;\r\n        }\r\n        if (lowerFileName.endsWith('.xlsx') || lowerFileName.endsWith('.xls') || lowerFileName.endsWith('.csv')) {\r\n            return <MaterialCommunityIcons name={'microsoft-excel'} size={iconSize} color=\"white\" />;\r\n        }\r\n\r\n        if (lowerFileName.endsWith('.rar') || lowerFileName.endsWith('.zip')) {\r\n            return <FastImage\r\n                source={{ uri: require('../../assets/rar_icon.png'), priority: FastImage.priority.high }}\r\n                style={{\r\n                    width: iconSize,\r\n                    height: iconSize,\r\n                }}\r\n                resizeMode={FastImage.resizeMode.cover}\r\n            />;\r\n        }\r\n        // Default icon if no specific type is matched\r\n        return <MaterialIcons name=\"insert-drive-file\" size={iconSize} color=\"black\" />;\r\n    };\r\n\r\n    const isUrlForText = (text) => {\r\n        const urlPattern = new RegExp('^(http://www\\\\.|https://www\\\\.|http://|https://)[a-z0-9]+([\\\\-\\\\.]{1}[a-z0-9]+)*\\\\.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$');\r\n        return urlPattern.test(text);\r\n    }\r\n\r\n    const renderItem = ({ item, index }) => {\r\n        const isGlobalCustomerSender = item.sender === globalCustomerId;\r\n        const isLastMessage = index === 0; // Since the list is inverted, the first item is actually the last message\r\n        const isHovered = hoveredImageIndex === index;\r\n\r\n\r\n        return (\r\n            <View style={{\r\n                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                width: '100%',\r\n                alignSelf: isGlobalCustomerSender ? 'flex-start' : 'flex-end',\r\n                marginVertical: 4,\r\n                maxWidth: '60%', // Max width for long messages\r\n                // borderWidth: 1,\r\n                // borderColor: 'red',\r\n            }}>\r\n                {item.messageType == 'IssuedInvoice' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: 'flex-end', flex: 1 }}>\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <Animated.View style={{\r\n                                padding: 7,\r\n                                flex: 1,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                borderWidth: 3,\r\n                                borderColor: borderColor,\r\n                            }}>\r\n                                <Pressable onPress={handlePreviewInvoiceModalOpen}>\r\n                                    <Text underline selectable style={{\r\n                                        fontWeight: 400,\r\n                                        color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                        fontSize: 16,\r\n                                    }}>\r\n                                        {item.text.trim()}\r\n                                    </Text>\r\n                                </Pressable>\r\n                            </Animated.View>\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp, sender email, IP, and country */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n                    </View>\r\n                }\r\n\r\n\r\n                {item.messageType == 'InputPayment' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: 'flex-end', flex: 1 }}>\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <Animated.View style={{\r\n                                padding: 7,\r\n                                flex: 1,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                borderWidth: 3,\r\n                                borderColor: borderColor,\r\n                            }}>\r\n                                <Text selectable style={{\r\n                                    fontWeight: 400,\r\n                                    color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                    fontSize: 16,\r\n                                }}>\r\n                                    {item.text.trim()}\r\n                                </Text>\r\n                            </Animated.View>\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp, sender email, IP, and country */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n                    </View>\r\n                }\r\n\r\n\r\n                {!item.messageType && item.file && item.file.type == 'attachment' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: isGlobalCustomerSender ? 'flex-start' : 'flex-end', flex: 1 }}>\r\n                        {item.text && item.text !== '' &&\r\n                            <View style={{\r\n                                marginBottom: 5,\r\n                                padding: 10,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                flexShrink: 1,\r\n                            }}>\r\n                                {renderItemText(isGlobalCustomerSender, item.text.trim())}\r\n                            </View>\r\n                        }\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n\r\n                            <View style={{\r\n                                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                                flex: 1,\r\n                            }}>\r\n                                <View style={{\r\n                                    marginBottom: 5,\r\n                                    padding: 10,\r\n                                    borderRadius: 20,\r\n                                    backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                    marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                    flexShrink: 1,\r\n                                }}>\r\n                                    <Pressable\r\n                                        onPress={() => {\r\n                                            if (item.file.name.endsWith('.pdf')) {\r\n                                                globalSelectedFileType = 'pdf'\r\n                                                dispatch(setPdfViewerModalVisible(true));\r\n                                                dispatch(setSelectedFileUrl(item.file.url));\r\n                                                globalSelectedPDFUrl = item.file.url;\r\n\r\n                                            }\r\n                                            else {\r\n                                                globalSelectedFileType = 'not-pdf'\r\n                                                dispatch(setPdfViewerModalVisible(true));\r\n                                                dispatch(setSelectedFileUrl(item.file.url));\r\n                                                globalSelectedPDFUrl = item.file.url;\r\n\r\n\r\n\r\n                                            }\r\n                                            // dispatch(setSelectedFileUrl(item.file.url));\r\n                                            // // globalSelectedPDFUrl = item.file.url\r\n                                            // dispatch(setPdfViewerModalVisible(true));\r\n\r\n                                        }}\r\n                                        style={{ flexDirection: 'row', }}\r\n                                    >\r\n                                        <View style={{ marginRight: 5, }}>\r\n                                            {getFileIcon(item.file.name)}\r\n                                        </View>\r\n\r\n                                        <Text underline selectable style={{\r\n                                            fontWeight: 400,\r\n                                            color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                            fontSize: 16,\r\n                                        }}>\r\n                                            {item.file.name.trim()}\r\n                                        </Text>\r\n                                    </Pressable>\r\n                                </View>\r\n                            </View>\r\n\r\n                            {/* Display read status text outside of the message bubble */}\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp and sender */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n\r\n                    </View>}\r\n\r\n\r\n                {!item.messageType && item.file && item.file.type == 'image' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: isGlobalCustomerSender ? 'flex-start' : 'flex-end', flex: 1 }}>\r\n                        {item.text && item.text !== '' &&\r\n                            <View style={{\r\n                                marginBottom: 5,\r\n                                padding: 10,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                flexShrink: 1,\r\n                            }}>\r\n                                {renderItemText(isGlobalCustomerSender, item.text.trim())}\r\n                            </View>\r\n                        }\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <View style={{\r\n                                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                                flex: 1,\r\n                            }}>\r\n                                <View style={{\r\n                                    padding: 0,\r\n                                    borderRadius: 10,\r\n                                    marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                    flexShrink: 1,\r\n                                }}>\r\n                                    <Pressable\r\n                                        onMouseEnter={() => handleImageMessageMouseEnter(index)}\r\n                                        onMouseLeave={handleImageMessageMouseLeave}\r\n                                        onPress={() => openPreview(index)}\r\n                                        style={{\r\n                                            position: 'relative', // Ensure relative positioning for the overlay\r\n                                            width: 250,\r\n                                            height: 250,\r\n                                            alignSelf: 'center',\r\n                                        }}\r\n                                    >\r\n                                        <FastImage\r\n                                            source={{ uri: item.file.url, priority: FastImage.priority.normal }}\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                height: '100%',\r\n                                                borderRadius: 10,\r\n                                                borderWidth: 1,\r\n                                                borderColor: '#DADDE1',\r\n                                            }}\r\n                                            resizeMode={FastImage.resizeMode.contain}\r\n                                        />\r\n                                        {isHovered && (\r\n                                            <View style={{\r\n                                                ...StyleSheet.absoluteFillObject, // Make overlay cover the entire image\r\n                                                backgroundColor: 'rgba(0, 0, 0, 0.1)', // Semi-transparent black\r\n                                                borderRadius: 10, // Match the border radius of the image\r\n                                            }} />\r\n                                        )}\r\n                                    </Pressable>\r\n                                </View>\r\n                            </View>\r\n\r\n                            {/* Display read status text outside of the message bubble */}\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp and sender */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n\r\n                    </View>}\r\n\r\n                {!item.messageType && !item.file &&\r\n                    <View style={{ flexDirection: 'column', alignItems: isGlobalCustomerSender ? 'flex-start' : 'flex-end', flex: 1 }}>\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <View style={{\r\n                                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                                flex: 1,\r\n                            }}>\r\n                                <View style={{\r\n                                    padding: 10,\r\n                                    borderRadius: 20,\r\n                                    backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                    marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                    flexShrink: 1,\r\n                                }}>\r\n                                    {renderItemText(isGlobalCustomerSender, item.text.trim())}\r\n                                </View>\r\n                            </View>\r\n\r\n                            {/* Display read status text outside of the message bubble */}\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp and sender */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n\r\n                    </View>}\r\n\r\n            </View>\r\n        );\r\n    };\r\n\r\n\r\n    return (\r\n        chatMessagesData.length > 0 ? (\r\n            <>\r\n                <FlatList\r\n                    ref={flatListRef}\r\n                    data={chatMessagesData}\r\n                    renderItem={renderItem}\r\n                    keyExtractor={item => item.id}\r\n                    initialNumToRender={10} // Adjust based on your average message size and performance\r\n                    maxToRenderPerBatch={10}\r\n                    windowSize={500}\r\n                    onEndReachedThreshold={0.05}\r\n                    ListFooterComponent={renderFooter}\r\n                    onEndReached={handleLoadMoreMessages}\r\n                    inverted\r\n                />\r\n                {selectedImageIndex !== null && (\r\n                    <ImagePreviewModal\r\n                        isVisible={isPreviewVisible}\r\n                        onClose={closePreview}\r\n                        imageUrl={chatMessagesData[selectedImageIndex].file.url}\r\n                    />\r\n                )}\r\n                <ReadByListModal userEmail={userEmail} handleReadByListModalClose={handleReadByListModalClose} />\r\n            </>\r\n        ) : null\r\n    );\r\n};\r\n\r\n\r\n\r\nexport default function ChatMessages() {\r\n\r\n    const [email, setEmail] = useState('');\r\n    const navigation = useNavigation();\r\n    const chatListData = useSelector((state) => state.chatListData);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n    const chatMessageBoxLoading = useSelector((state) => state.chatMessageBoxLoading);\r\n    const chatListSearchText = useSelector((state) => state.chatListSearchText);\r\n    const chatMessagesData = useSelector((state) => state.chatMessagesData);\r\n    const loginName = useSelector((state) => state.loginName);\r\n\r\n    const [name, setName] = useState(loginName);\r\n\r\n    const screenWidth = Dimensions.get('window').width;\r\n\r\n    const [activeButton, setActiveButton] = useState('All messages');\r\n    const [activeButtonValue, setActiveButtonValue] = useState(0);\r\n\r\n    const [activeFilterButton, setActiveFilterButton] = useState('');\r\n    const [unreadButtonValue, setUnreadButtonValue] = useState(false);\r\n    const [readButtonValue, setReadButtonValue] = useState(false);\r\n    const [lastVisible, setLastVisible] = useState(null);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchIpAndCountry = async () => {\r\n            try {\r\n                // dispatch(setChatMessageBoxLoading(true));\r\n                // Fetch IP Address\r\n                const ipResponse = await axios.get('https://api.ipify.org?format=json');\r\n                const fetchedIp = ipResponse.data.ip;\r\n                ip = fetchedIp;\r\n\r\n                // Fetch IP Country\r\n                if (fetchedIp) {\r\n                    const countryResponse = await axios.get(`https://ipapi.co/${fetchedIp}/json/`);\r\n                    const fetchedIpCountry = countryResponse.data.country_name;\r\n                    ipCountry = fetchedIpCountry;\r\n                    // dispatch(setChatMessageBoxLoading(false));\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching IP data:', error);\r\n            }\r\n        };\r\n        const collectionRef = collection(projectExtensionFirestore, 'chats'); // Replace with your collection name\r\n        const unrepliedQuery = query(\r\n            collectionRef,\r\n            where('read', '==', false),\r\n            limit(10) // Limit the query to 10 documents\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(unrepliedQuery, (querySnapshot) => {\r\n            setUnreadCount(querySnapshot.size); // Update state with the new count\r\n            fetchIpAndCountry();\r\n\r\n        }, (error) => {\r\n            console.error(\"Error fetching documents: \", error);\r\n        });\r\n\r\n\r\n\r\n        // Clean up function to unsubscribe from the listener when the component unmounts\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const handlePress = (buttonTitle, buttonTitleValue) => {\r\n        if (activeButton == buttonTitle) {\r\n        }\r\n        else {\r\n            setActiveButton(buttonTitle);\r\n            setActiveButtonValue(buttonTitleValue);\r\n            setActiveFilterButton('');\r\n            setUnreadButtonValue(false);\r\n\r\n            dispatch(setActiveChatId(''));\r\n\r\n            dispatch(setLoadMoreLoading(false));\r\n            dispatch(setNoMoreData(false));\r\n        }\r\n    };\r\n\r\n\r\n    const handleUnreadPress = (buttonTitle) => {\r\n\r\n        setActiveFilterButton(prevState => prevState === buttonTitle ? '' : buttonTitle);\r\n        setUnreadButtonValue(prevState => !prevState);\r\n        setReadButtonValue(false);\r\n    };\r\n\r\n    const handleReadPress = (buttonTitle) => {\r\n\r\n        setActiveFilterButton(prevState => prevState === buttonTitle ? '' : buttonTitle);\r\n        setReadButtonValue(prevState => !prevState);\r\n        setUnreadButtonValue(false);\r\n\r\n    };\r\n\r\n\r\n    //Main fetch\r\n    useEffect(() => {\r\n        let queryRef;\r\n\r\n        dispatch(setChatMessagesData([]));\r\n        dispatch(setChatMessageBoxLoading(false));\r\n        dispatch(setActiveChatId(''));\r\n\r\n        // Helper function to build the query\r\n        const buildQuery = () => {\r\n            const searchValue = chatListSearchText.toUpperCase();\r\n\r\n            if (unreadButtonValue) {\r\n                if (activeButtonValue === 0) {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', false), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', false), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                } else {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', false), where('stepIndicator.value', '==', activeButtonValue), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), where('read', '==', false), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                }\r\n            }\r\n            else if (readButtonValue) {\r\n                if (activeButtonValue === 0) {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', true), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', true), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                } else {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', true), where('stepIndicator.value', '==', activeButtonValue), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), where('read', '==', true), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                }\r\n            }\r\n            else {\r\n                if (activeButtonValue === 0) {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                } else {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                }\r\n            }\r\n        };\r\n\r\n        // Build and execute the query\r\n        queryRef = buildQuery();\r\n\r\n        const unsubscribe = onSnapshot(queryRef, (snapshot) => {\r\n            const chatsData = [];\r\n            snapshot.forEach((doc) => {\r\n                chatsData.push({\r\n                    id: doc.id,\r\n                    ...doc.data(),\r\n                });\r\n            });\r\n\r\n            dispatch(setChatListData(chatsData));\r\n            globalLastVisible = snapshot.docs[snapshot.docs.length - 1];\r\n            dispatch(setNoMoreData(false));\r\n            dispatch(setLoadMoreLoading(false));\r\n            dispatch(setLoadingModalVisible(false));\r\n\r\n        }, (error) => {\r\n            console.error('Error fetching data from Firebase:', error);\r\n        });\r\n\r\n        // Cleanup function\r\n        return () => {\r\n            if (unsubscribe) {\r\n                unsubscribe();\r\n            }\r\n        };\r\n    }, [unreadButtonValue, readButtonValue, activeButtonValue, chatListSearchText]);\r\n\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = projectControlAuth.onAuthStateChanged(user => {\r\n            if (!user) {\r\n                navigation.navigate(\"Login\")\r\n            }\r\n\r\n        })\r\n\r\n        return unsubscribe\r\n    }, [])\r\n\r\n\r\n    const handleDocumentChange = (snapshot) => {\r\n        if (snapshot.exists()) {\r\n            const data = snapshot.data();\r\n            const isActive = data.active;\r\n\r\n            if (!isActive) {\r\n                signOut(projectControlAuth)\r\n                    .then(() => {\r\n                        navigation.navigate('Login');\r\n                    })\r\n                    .catch((error) => {\r\n                        console.error('Error signing out:', error);\r\n                    });\r\n            }\r\n        } else {\r\n            signOut(projectControlAuth)\r\n                .then(() => {\r\n                    navigation.navigate('Login');\r\n                })\r\n                .catch((error) => {\r\n                    console.error('Error signing out:', error);\r\n                });\r\n        }\r\n    };\r\n\r\n    const subscribeToFieldChange = () => {\r\n        const userId = projectControlAuth.currentUser?.email;\r\n        if (userId) {\r\n            const userRef = doc(firestore, 'accounts', userId);\r\n            const unsubscribe = onSnapshot(userRef, handleDocumentChange);\r\n            return unsubscribe;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = subscribeToFieldChange();\r\n\r\n        return () => {\r\n            unsubscribe();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const currentUserEmail = getEmailOfCurrentUser();\r\n        if (currentUserEmail) {\r\n            getFieldValueByEmail(currentUserEmail);\r\n            setEmail(currentUserEmail)\r\n            const documentId = currentUserEmail;\r\n            listenForNameChange(documentId);\r\n        }\r\n    }, []);\r\n\r\n\r\n    const listenForNameChange = (documentId) => {\r\n\r\n\r\n        // To stop listening for updates, you can call unsubscribe()\r\n        // unsubscribe();\r\n    };\r\n\r\n    const getFieldValueByEmail = async (email) => {\r\n        try {\r\n            const accountDocRef = doc(firestore, 'accounts', email);\r\n            const accountDocSnapshot = await getDoc(accountDocRef);\r\n\r\n            onSnapshot(accountDocRef, (docSnapshot) => {\r\n                if (docSnapshot.exists()) {\r\n                    const data = docSnapshot.data();\r\n                    const fieldType = data.type;\r\n                    const fieldName = data.name;\r\n                    dispatch(setLoginName(fieldName));\r\n\r\n                } else {\r\n                    // Handle the case where the document does not exist\r\n                }\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching field value:', error);\r\n        }\r\n    };\r\n\r\n\r\n    const handleSignOut = () => {\r\n        // Check if currentUser exists before signing out\r\n        if (projectControlAuth.currentUser) {\r\n            signOut(projectControlAuth).then(() => {\r\n                navigation.navigate('Login');\r\n                setEmail('');\r\n                setName('');\r\n            }).catch(() => {\r\n                // Handle any sign out errors here\r\n            });\r\n        } else {\r\n            // Handle the case where there is no user currently signed in\r\n            console.log('No user signed in to sign out');\r\n            // Optionally navigate to the login screen or show a message\r\n            navigation.navigate('Login');\r\n        }\r\n    }\r\n\r\n    // useEffect(() => {\r\n    //   const handleScreenResize = () => {\r\n    //     const screenWidth = Dimensions.get('window').width;\r\n    //     setIsMobileView(screenWidth < 1200);\r\n    //   };\r\n\r\n    //   // Initial check on component mount\r\n    //   handleScreenResize();\r\n\r\n    //   // Listen for screen dimension changes\r\n    //   Dimensions.addEventListener('change', handleScreenResize);\r\n\r\n    //   // Cleanup event listener on component unmount\r\n    //   return () => {\r\n    //     Dimensions.removeEventListener('change', handleScreenResize);\r\n    //   };\r\n    // }, []);\r\n\r\n    const showDrawerIcon = useBreakpointValue([true, true, true, false]);\r\n\r\n\r\n    const NamePopover = ({ name, handleSignOut }) => {\r\n        const [showNamePopover, setShowNamePopover] = useState(false);\r\n\r\n        const showPopover = () => {\r\n            setShowNamePopover(!showNamePopover);\r\n        };\r\n\r\n        return (\r\n            <Box w={[100, 200, 1020]} h={[10, 10, 10]} flex={1}>\r\n                <Flex direction=\"row-reverse\">\r\n                    <Popover\r\n                        isOpen={showNamePopover}\r\n                        trigger={(triggerProps) => (\r\n                            <Text color=\"white\" marginTop={[2, 2, 2]} fontSize={[17, 18, 20]} marginRight={[1, 3, 5]} {...triggerProps} onPress={showPopover}>\r\n                                <MaterialCommunityIcons name=\"account\" size={[20, 25, 30]} color=\"white\" /> {name} <Ionicons name=\"caret-down\" size={16} color=\"white\" />\r\n                            </Text>\r\n                        )}\r\n                        onClose={() => setShowNamePopover(!showNamePopover)}\r\n                        placement='bottom right'\r\n                        trapFocus={false}\r\n                    >\r\n                        <Popover.Content backgroundColor={'#7B9CFF'}>\r\n                            {/* <Popover.Arrow bgColor={'#7B9CFF'} /> */}\r\n                            <Popover.Body backgroundColor={'#7B9CFF'}>\r\n                                <Button _hover={{ bgColor: 'blueGray.500' }} onPress={handleSignOut} leftIcon={<MaterialCommunityIcons name=\"logout\" size={20} color=\"white\" />} bgColor={'transparent'}>\r\n                                    Logout\r\n                                </Button>\r\n                            </Popover.Body>\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                </Flex>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const styles = StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n        },\r\n        image: {\r\n            flex: 1,\r\n        },\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <NativeBaseProvider>\r\n                <View style={{ backgroundColor: \"#A6BCFE\", height: '100%', width: '100%', flexDirection: 'column', }} bgColor=\"#A6BCFE\" h=\"100vh\" w=\"full\" flexDirection=\"column\">\r\n                    {/* Header */}\r\n                    <Box\r\n                        px=\"3\"\r\n                        bgColor='#7b9cff'\r\n                        height={54}\r\n                        position=\"sticky\"\r\n                        top={0}\r\n                        zIndex={999}\r\n                        flexDirection=\"row\"\r\n                        alignItems=\"center\"\r\n                        borderBottomWidth={2}\r\n                        borderBottomColor={'cyan.500'}\r\n                    >\r\n\r\n                        <SideDrawer\r\n                            selectedScreen={selectedScreen} />\r\n\r\n                        <Box w={screenWidth <= 960 ? 0 : 850} h={[10, 10, 10, 10]} marginBottom={1.5} marginTop={1.5} paddingLeft={5}>\r\n\r\n                            <FastImage\r\n                                source={{\r\n                                    uri: 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FC-HUB%20LOGO%20FULL.png?alt=media&token=79ed34a5-f960-4154-b4e8-897b0f3248d4',\r\n                                    priority: FastImage.priority.high,\r\n                                }}\r\n                                resizeMode={FastImage.resizeMode.stretch}\r\n                                style={styles.image} />\r\n                        </Box>\r\n\r\n                        {/* {screenWidth <= 960 && <MobileViewDrawer\r\n                            selectedScreen={selectedScreen} />} */}\r\n\r\n\r\n                        <Box w={screenWidth <= 960 ? 120 : 0} h={screenWidth <= 960 ? 6 : 10} marginBottom={1.5} marginTop={1.5} marginLeft={[3, 3, 3, 10]}>\r\n\r\n                            <FastImage\r\n                                source={{\r\n                                    uri: 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FC-HUB%20LOGO%20HALF.png?alt=media&token=7ce6aef2-0527-40c7-b1ce-e47079e144df',\r\n                                    priority: FastImage.priority.high,\r\n                                }}\r\n                                resizeMode={FastImage.resizeMode.stretch}\r\n                                style={styles.image} />\r\n                        </Box>\r\n                        <NamePopover name={loginName} handleSignOut={handleSignOut} />\r\n\r\n\r\n                    </Box>\r\n\r\n                    {/* Content */}\r\n                    <View style={{ flex: 1, flexDirection: 'row' }} flex={[1]} flexDirection=\"row\">\r\n                        {/* Sidebar */}\r\n                        {/* <SideDrawer\r\n                            selectedScreen={selectedScreen} /> */}\r\n\r\n                        {/* Main Content */}\r\n                        {/* <Box flex={1} flexGrow={1} minHeight={0}> */}\r\n                        {/* Main Content Content */}\r\n\r\n\r\n                        {/* <Box px=\"3\" bgColor=\"#A6BCFE\" height=\"full\" > */}\r\n                        <View style={{ flex: 1, backgroundColor: \"#A6BCFE\", height: '100%' }}>\r\n                            <View style={{ flex: 1, margin: 10, }}>\r\n\r\n                                <View style={{\r\n                                    borderBottomWidth: 1,\r\n                                    borderColor: '#DADDE1',\r\n                                    width: '100%',\r\n                                    backgroundColor: 'white',\r\n                                    height: 60,\r\n                                    borderTopLeftRadius: 5,\r\n                                    borderTopRightRadius: 5,\r\n                                }}>\r\n                                    {/* Chat Header */}\r\n                                    <View style={{\r\n                                        flex: 1,\r\n                                        flexDirection: 'row',\r\n                                    }}>\r\n                                        <View style={{\r\n                                            flex: 1,\r\n                                            flexDirection: 'row',\r\n                                        }}>\r\n                                            <ScrollView scrollEnabled horizontal>\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'All messages'}\r\n                                                    title={'All messages'}\r\n                                                    onPress={() => handlePress('All messages', 0)}\r\n                                                    isActive={activeButton === 'All messages'}\r\n                                                    headerCount={\r\n                                                        unreadCount > 0 ?\r\n                                                            (<View style={{\r\n                                                                backgroundColor: '#FF0000',\r\n                                                                borderRadius: 100, // Half of width and height\r\n                                                                width: 20,\r\n                                                                height: 20, // Same as width for a perfect circle\r\n                                                                marginLeft: 10,\r\n                                                                justifyContent: 'center', // Center children vertically\r\n                                                                alignItems: 'center', // Center children horizontally\r\n                                                            }}>\r\n                                                                <Text style={{\r\n                                                                    color: 'white',\r\n                                                                    fontWeight: 700,\r\n                                                                    fontSize: 14,\r\n                                                                }}>{unreadCount > 9 ? `9+` : unreadCount}</Text>\r\n                                                            </View>) : (<></>)}\r\n                                                />\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Negotiation'}\r\n                                                    title={'Negotiation'}\r\n                                                    onPress={() => handlePress('Negotiation', 1)}\r\n                                                    isActive={activeButton === 'Negotiation'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Issued Proforma Invoice'}\r\n                                                    title={'Issued Proforma Invoice'}\r\n                                                    onPress={() => handlePress('Issued Proforma Invoice', 2)}\r\n                                                    isActive={activeButton === 'Issued Proforma Invoice'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Order Item'}\r\n                                                    title={'Order Item'}\r\n                                                    onPress={() => handlePress('Order Item', 3)}\r\n                                                    isActive={activeButton === 'Order Item'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Payment Confirmed'}\r\n                                                    title={'Payment Confirmed'}\r\n                                                    onPress={() => handlePress('Payment Confirmed', 4)}\r\n                                                    isActive={activeButton === 'Payment Confirmed'}\r\n                                                />\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Shipping Schedule'}\r\n                                                    title={'Shipping Schedule'}\r\n                                                    onPress={() => handlePress('Shipping Schedule', 5)}\r\n                                                    isActive={activeButton === 'Shipping Schedule'}\r\n                                                />\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Documents'}\r\n                                                    title={'Documents'}\r\n                                                    onPress={() => handlePress('Documents', 6)}\r\n                                                    isActive={activeButton === 'Documents'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Vehicle Received'}\r\n                                                    title={'Vehicle Received'}\r\n                                                    onPress={() => handlePress('Vehicle Received', 7)}\r\n                                                    isActive={activeButton === 'Vehicle Received'}\r\n                                                />\r\n                                            </ScrollView>\r\n                                        </View>\r\n\r\n                                    </View>\r\n                                </View>\r\n\r\n                                <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                    {/* Chat Body */}\r\n\r\n                                    <View>\r\n\r\n                                        <View style={{ flex: 1, maxWidth: 380, minWidth: 380, borderRightWidth: 1, borderColor: '#DADDE1', maxHeight: 100, minHeight: 100, backgroundColor: 'white', }}>\r\n                                            {/* Chat Search */}\r\n                                            <View style={{ flex: 1, paddingHorizontal: 10 }}>\r\n                                                <SearchChat lastVisible={lastVisible} setLastVisible={setLastVisible} unreadButtonValue={unreadButtonValue} activeButtonValue={activeButtonValue} />\r\n                                                {/* <Pressable\r\n                                                variant=\"ghost\"\r\n                                                style={{\r\n                                                    padding: 3,\r\n                                                    width: 100,\r\n                                                    flexDirection: 'row', // Align items in a row\r\n                                                    alignItems: 'center', // Center items vertically\r\n                                                    borderRadius: 5,\r\n                                                }}\r\n                                                backgroundColor='#ECEDF0'\r\n                                                _hover={{ backgroundColor: '#d7d7d9' }}\r\n                                            >\r\n                                                <MaterialIcons name=\"mark-email-unread\" color=\"#1C2B33\" size={20} />\r\n                                                <Text style={{ color: '#1C2B33', marginLeft: 5 }}>Unreplied</Text>\r\n                                            </Pressable> */}\r\n                                                <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                                    <FilterButton\r\n                                                        key={'Unread'}\r\n                                                        title={'Unread '}\r\n                                                        onPress={() => handleUnreadPress('Unread')}\r\n                                                        isActive={activeFilterButton === 'Unread'}\r\n                                                        iconActive={<MaterialIcons name=\"mark-email-unread\" color=\"#0A78BE\" size={16} />}\r\n                                                        iconNotActive={<MaterialIcons name=\"mark-email-unread\" color=\"#1C2B33\" size={16} />}\r\n                                                    />\r\n\r\n                                                    <FilterButton\r\n                                                        key={'Read'}\r\n                                                        title={'Read '}\r\n                                                        onPress={() => handleReadPress('Read')}\r\n                                                        isActive={activeFilterButton === 'Read'}\r\n                                                        iconActive={<MaterialIcons name=\"mark-email-read\" color=\"#0A78BE\" size={16} />}\r\n                                                        iconNotActive={<MaterialIcons name=\"mark-email-read\" color=\"#1C2B33\" size={16} />}\r\n                                                    />\r\n\r\n                                                </View>\r\n\r\n                                            </View>\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, maxWidth: 380, minWidth: 380, borderRightWidth: 1, borderColor: '#DADDE1', backgroundColor: 'white', borderBottomLeftRadius: 5, }}>\r\n                                            {/* Chat List */}\r\n                                            <ChatList unreadButtonValue={unreadButtonValue} activeButtonValue={activeButtonValue} />\r\n                                        </View>\r\n\r\n                                    </View>\r\n\r\n                                    {chatMessageBoxLoading ? (\r\n                                        <View style={{ flex: 1, backgroundColor: 'white', justifyContent: 'center', alignItems: 'center', }}>\r\n                                            <Spinner\r\n                                                animating\r\n                                                size=\"lg\"\r\n                                                color={'#7B9CFF'}\r\n                                            />\r\n                                        </View>) : (\r\n                                        <View style={{ flex: 1, }}>\r\n\r\n                                            <View style={{ flex: 1, minHeight: 90, maxHeight: screenWidth < 1281 ? 130 : 125, borderBottomWidth: 1, borderColor: '#DADDE1', backgroundColor: 'white', justifyContent: 'center', }}>\r\n                                                {/* Chat Message Header */}\r\n                                                <ScrollView scrollEnabled horizontal>\r\n                                                    {chatMessagesData.length < 1 ? null : (<ChatMessageHeader />)}\r\n                                                </ScrollView>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, borderColor: '#DADDE1', backgroundColor: 'white', borderBottomRightRadius: 5, paddingBottom: 5, }}>\r\n\r\n                                                <View style={{ flex: 1 }}>\r\n                                                    {/* Chat Message Box */}\r\n                                                    <ChatMessageBox activeButtonValue={activeButtonValue} userEmail={email} />\r\n                                                    <DocumentPreviewModal />\r\n                                                </View>\r\n\r\n                                                <View style={{ maxHeight: 180, justifyContent: 'flex-end', alignItems: 'center' }}>\r\n                                                    {/* Chat Input Text */}\r\n                                                    {chatMessagesData.length < 1 ? null : (<ChatInputText />)}\r\n                                                </View>\r\n\r\n                                            </View>\r\n\r\n                                        </View>\r\n                                    )}\r\n\r\n\r\n\r\n\r\n                                </View>\r\n\r\n\r\n                            </View>\r\n                            {/* <SuccessModal /> */}\r\n\r\n                        </View>\r\n\r\n\r\n                        {/* </Box> */}\r\n\r\n                        {/* </Box> */}\r\n                    </View>\r\n\r\n                </View>\r\n                <LoadingModal />\r\n            </NativeBaseProvider>\r\n\r\n\r\n        </>\r\n    );\r\n}"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Dimensions","get","width","globalLastVisible","globalMessagesLastVisible","selectedScreen","globalSearchText","globalCustomerId","globalImageUrl","globalCustomerFirstName","globalCustomerLastName","globalAdditionalPriceArray","globalMessageTemplateSelectedTitle","formattedIssuingDate","projectControlAuth","currentUser","email","formattedDueDate","transactionModalTitle","transactionModalContentValue","ip","ipCountry","globalInvoiceVariable","carData","cfs","placeOfDelivery","departureCountry","departurePort","salesPerson","discharge","port","country","consignee","sameAsBuyer","name","address","contactNumber","fax","notifyParty","sameAsConsignee","paymentDetails","incoterms","inspectionIsChecked","inspectionName","warrantyIsCheck","warrantyAmount","fobPrice","freightPrice","insurancePrice","inspectionPrice","totalAmount","additionalName","additionalPrice","bankInformations","dueDate","issuingDate","bankAccount","paymentTerms","salesAgreement","globalSelectedPDFUrl","globalSelectedFileType","firestore","getFirestore","getEmailOfCurrentUser","user","TimelineStatus","_ref","data","selectedChatData","useSelector","state","findIndex","item","stepIndicator","value","_jsx","View","style","flexDirection","alignItems","paddingTop","children","index","_jsxs","Tooltip","label","title","bgColor","_text","color","height","borderRadius","backgroundColor","justifyContent","FastImage","source","uri","require","priority","normal","tintColor","alignSelf","resizeMode","stretch","length","statusData","LoadingModal","loadingModalVisible","position","top","bottom","left","right","flex","display","Spinner","size","Text","HeaderButton","_ref2","onPress","isActive","headerCount","activeStyle","screenWidth","_useState","useState","_useState2","_slicedToArray","isHovered","setIsHovered","Pressable","onHoverIn","onHoverOut","focusable","_objectSpread","padding","marginVertical","borderWidth","borderColor","marginLeft","fontSize","fontWeight","textAlign","FilterButton","_ref3","iconActive","iconNotActive","_useState3","_useState4","variant","margin","SkeletonChatListLayout","_Fragment","marginRight","Array","from","_","subIndex","marginBottom","DeleteMessageTemplateYesNo","_ref4","handleDeleteMessageTemplateClose","deleteMessageTemplateVisible","selectedTitle","_useState5","_useState6","isDeleteLoading","setIsDeleteLoading","handleClose","deleteMessageTemplate","_ref5","_asyncToGenerator","titleToDelete","documentRef","doc","projectControlFirestore","docSnap","getDoc","exists","updatedTemplates","messageTemplate","filter","template","updateDoc","console","log","error","_x","apply","arguments","Modal","isOpen","onClose","Content","CloseButton","Header","Body","Footer","Button","Group","space","colorScheme","isLoading","MessageTemplateItem","_ref6","setOriginalTitle","titleInputRef","addVisible","valueInputRef","setAddVisible","textInputRef","setPopoverOpen","_useState7","_useState8","isTemplateItemHovered","setIsTemplateItemHovered","_useState9","_useState10","isTemplateMenuHovered","setIsTemplateMenuHovered","_useState11","_useState12","isTemplateEditHovered","setIsTemplateEditHovered","_useState13","_useState14","isTemplateDeleteHovered","setIsTemplateDeleteHovered","_useState15","_useState16","templateMenuOpen","setTemplateMenuOpen","_useState17","_useState18","_useState19","_useState20","setIsAddVisible","dispatch","useDispatch","current","numberOfLines","ellipsizeMode","Popover","trigger","triggerProps","Entypo","onEditPress","setDeleteMessageTemplateVisible","MessageTemplate","_ref7","_useState21","_useState22","isTemplateHovered","setIsTemplateHovered","_useState23","_useState24","isAddHovered","setIsAddHovered","_useState25","_useState26","popoverOpen","_useState27","_useState28","searchText","setSearchText","_useState29","_useState30","filteredData","setFilteredData","_useState31","_useState32","_useState33","_useState34","isCancelHovered","setIsCancelHovered","_useState35","_useState36","isSaveHovered","setIsSaveHovered","_useState37","_useState38","originalTitle","_useState39","_useState40","saveLoading","setSaveLoading","_useState41","_useState42","templateData","setTemplateData","searchInputRef","useRef","saveMessageTemplate","_ref8","_titleInputRef$curren","_valueInputRef$curren","messageTemplates","newTitle","newValue","push","setDoc","merge","handleCancelPressed","clear","useEffect","docRef","unsubscribe","onSnapshot","arrayFieldData","sort","a","b","titleA","toUpperCase","titleB","initialFocusRef","finalFocusRef","placement","_ref10","opacity","pressed","Ionicons","w","Arrow","TextInput","ref","placeholder","placeholderTextColor","underlineColorAndroid","outlineStyle","multiline","marginHorizontal","animating","textDecorationLine","keyboardType","onChangeText","text","filtered","toLowerCase","includes","FlatList","borderBottomLeftRadius","renderItem","_ref9","keyExtractor","toString","FileDisplay","_ref11","file","onRemove","type","MaterialIcons","MaterialCommunityIcons","high","cover","ChatInputText","_useState43","activeChatId","_useState44","isSendHovered","setIsSendHovered","_useState45","_useState46","selectedFile","setSelectedFile","_useState47","_useState48","selectedFilePreview","setSelectedFilePreview","_useState49","_useState50","selectedImage","setSelectedImage","_useState51","_useState52","imageUri","setImageUri","_useState53","_useState54","fileUri","setFileUri","_useState55","_useState56","fileName","setFileName","_useState57","_useState58","isSendImageHovered","setIsSendImageHovered","_useState59","_useState60","isSendAttachmentHovered","setIsSendAttachmentHovered","_useState61","_useState62","sendIsLoading","setSendIsLoading","removeImage","removeFile","selectFile","_ref12","maxFileSize","Platform","OS","Promise","reject","input","document","createElement","accept","onchange","files","alert","reader","FileReader","onload","target","result","focus","onerror","readAsDataURL","click","launchImageLibrary","mediaType","response","didCancel","errorCode","errorMessage","asset","assets","startsWith","fileSize","selectedImageUri","selectImage","_ref13","dataUrl","addFileMessage","_ref14","_textInputRef$current","datetime","axios","formattedTime","moment","format","formattedTimeForFile","inputValue","storage","getStorage","projectExtensionFirebase","fileUrl","fileRef","uploadResult","uploadBytes","getDownloadURL","addDoc","collection","projectExtensionFirestore","trim","sender","timestamp","url","lastMessageSender","lastMessage","lastMessageDate","customerRead","read","readBy","addImageMessage","_ref15","_textInputRef$current2","imageUrl","resizedImage","event","img","Image","src","canvas","ctx","getContext","drawImage","toBlob","blob","File","lastModified","Date","now","imageRef","addMessage","_ref16","_textInputRef$current3","handleSendMessage","overflow","marginTop","onKeyPress","nativeEvent","key","shiftKey","preventDefault","_ref17","_ref18","_ref19","ChatListItem","_ref20","messageUnread","formattedDate","_useState63","chatListData","_useState64","setImageUrl","_useState65","_useState66","_useState67","_useState68","textFirst","setTextFirst","_useState69","_useState70","textLast","setTextLast","_useState71","_useState72","isUnreadHovered","setIsUnreadHovered","_useState73","_useState74","_useState75","_useState76","_useState77","_useState78","customerData","setCustomerData","carName","vehicle","updateChatToUnread","_ref21","setActiveChatId","setChatMessagesData","setSelectedChatData","folderName","stockID","carId","then","catch","docId","participants","customer","loadingCondition","undefined","chatStepIconOn","chatStepIconOff","borderLeftColor","borderRightColor","borderLeftWidth","borderRightWidth","setSelectedCustomerData","invoiceNumber","openDelay","ChatList","_ref22","_route$params","unreadButtonValue","activeButtonValue","chatListLastVisible","loadMoreLoading","noMoreData","chatId","useRoute","params","navigate","useNavigate","updateChatToRead","_ref23","arrayUnion","setChatMessageBoxLoading","messagesRef","messagesQuery","query","orderBy","limit","unsubscribeDoc","docSnapshot","dataWithId","invoiceDocRef","unsubscribeInvoice","invoiceDocSnapshot","invoiceDataWithId","setInvoiceData","unsubscribeMessages","querySnapshot","messages","forEach","docs","fetchChatMessages","find","chatItem","handleChatPress","_ref24","customerId","_x2","_x3","timeoutId","setTimeout","clearTimeout","_ref25","currentDate","formattedTimestamp","replace","givenDate","currentFormattedDate","getFullYear","getMonth","getDate","getTime","startOfWeek","setDate","getDay","setHours","toLocaleDateString","weekday","month","day","year","formatDate","initialNumToRender","maxToRenderPerBatch","windowSize","onEndReachedThreshold","removeClippedSubviews","ListFooterComponent","paddingVertical","borderTopWidth","onEndReached","nextQuery","setLoadMoreLoading","setNoMoreData","where","startAfter","snapshot","empty","chatsData","setChatListData","concat","_toConsumableArray","SearchChat","_ref26","lastVisible","setLastVisible","_useState79","_useState80","_useState81","_useState82","clearVisible","setClearVisible","searchData","_ref28","_ref27","_searchInputRef$curre","q","_objectDestructuringEmpty","searchValue","setLoadingModalVisible","_x4","setChatListSearchText","onSubmitEditing","_searchInputRef$curre2","_ref29","hovered","ModalAddBank","_useState83","_useState84","modalAddBankVisible","setModalAddBankVisible","_useState85","_useState86","setCancelHovered","_useState87","_useState88","setAddHovered","handleModalAddBankClose","bankNameRef","branchNameRef","swiftcodeRef","addressRef","accountHolderRef","accountNumberRef","addBankAccount","_ref30","_bankNameRef$current","_branchNameRef$curren","_swiftcodeRef$current","_addressRef$current","_accountHolderRef$cur","_accountNumberRef$cur","bankNameValue","elementToAdd","bankName","branchName","swiftCode","accountHolder","accountNumberValue","_defineProperty","FontAwesome","useRNModal","BankInformation","invoiceData","_useState89","_useState90","selectedDueDate","setSelectedDueDate","_useState91","_useState92","bankAccountsData","setBankAccountsData","_useState93","_useState94","selectedBank","setSelectedBank","paymentTermsRef","_paymentTermsRef$curr","date","dayOfWeek","adjustedDate","toISOString","split","bankAccounts","entries","_ref31","_ref32","subscribeToBankAccounts","_ref33","selectedDate","setSelectedDate","_useState95","_useState96","modalCalendarVisible","setModalCalendarVisible","handleModalCalendarOpen","handleModalCalendarClose","onFocus","Calendar","onDayPress","useCallback","dateString","markedDates","selected","disableTouchEvent","selectedDotColor","renderArrow","direction","enableSwipeMonths","initialDate","showSixWeeks","Select","selectedValue","onValueChange","selectedBankName","selectedBankObj","accessibilityLabel","_selectedItem","bg","endIcon","CheckIcon","paddingLeft","Item","defaultValue","PaymentDetails","fobPriceInput","freightInput","inspectionInput","insuranceInput","_useState97","_useState98","totalAmountCalculated","setTotalAmountCalculated","_useState99","insurance","_useState100","selectedIncoterms","setSelectedIncoterms","_useState101","inspection","_useState102","setInspectionIsChecked","_useState103","_useState104","_useState105","warranty","_useState106","warrantyIsChecked","additionalNameRef","warrantyPrice","additionalPriceRef","safelyParseNumber","number","Number","isNaN","calculateTotalAmount","_fobPriceInput$curren","_freightInput$current","_inspectionInput$curr","_insuranceInput$curre","freight","additionalPricesTotal","reduce","sum","total","Math","round","toLocaleString","_fobPriceInput$curren2","_freightInput$current2","_insuranceInput$curre2","join","freightCalculation","m3","dimensionCubicMeters","toFixed","fobPriceDollars","jpyToUsd","currency","parseFloat","usdToJpy","Checkbox","isChecked","onChange","filteredText","lines","filteredLines","line","filteredLine","parts","borderBottomWidth","SelectPortOfDischarge","_useState107","_useState108","countriesDischarge","_useState109","_useState110","portsData","setPortsData","_useState111","_useState112","nearestPorts","setNearestPorts","_useState113","_useState114","selectedPortCountry","setSelectedPortCountry","_useState115","_useState116","selectedCountry","_useState117","_useState118","selectedPort","setSelectedPort","fetchPorts","_ref35","sortedPorts","portName","sortOrder","fetchPortsData","_ref36","selectedCountryData","portData","SelectSalesPerson","_useState119","sales","_useState120","selectedSales","setSelectedSales","salesData","SelectPortOfDeparture","_useState121","_useState122","NotifyPartyInput","_ref37","accountData","setAccountData","_useState123","_useState124","setIsChecked","notifyPartyName","notifyPartyAddress","notifyPartyCity","notifyPartyCountry","notifyPartyContactNumber","notifyPartyFax","notifyPartyEmail","_notifyPartyName$curr","_notifyPartyAddress$c","_notifyPartyCity$curr","_notifyPartyCountry$c","_notifyPartyContactNu","_notifyPartyFax$curre","_notifyPartyEmail$cur","city","disabled","ConsigneeInput","_useState125","_useState126","_useState127","_useState128","consigneeName","consigneeAddress","consigneeCity","consigneeCountry","consigneeContactNumber","consigneeFax","consigneeEmail","fetchAccountData","_ref38","textStreet","textZip","textPhoneNumber","textEmail","ConfirmPaymentModalContent","selectedCustomerData","_useState129","_useState130","historyModalVisible","setHistoryModalVisible","_useState131","_useState132","isConfirmLoading","setIsConfirmLoading","totalAmountString","totalAmountNumber","inputAmountRef","fullPaymentMessage","_ref40","messageType","overBalanceMessage","_ref41","amount","_x5","paymentMessage","_ref42","transactionDate","_x6","_x7","confirmPayment","_ref43","amountNeeded","totalValue","docRefCustomer","newPayments","newPaymentsAccount","vehicleRef","referenceNumber","vehicleName","inputAmount","numericInputAmount","formattedInputAmount","delay","ms","overBalance","increment","payments","paymentsHistory","setTransactionModalVisible","cleanedDateString","padStart","hours","getHours","ampm","getMinutes","payment","displayedAmount","fontWefight","Progress","shadow","max","_filledTrack","underline","selectable","_ref44","handleHistoryModalClose","sortedPayments","dateA","ScrollView","paddingHorizontal","maxHeight","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","borderBottomColor","italic","IssueProformaInvoiceModalContent","_useState133","_useState134","isConfirmHovered","_useState135","_useState136","cfsInputRef","placeOfDeliveryInputRef","secretKey","invoiceMessage","_ref45","confirmInvoice","_ref46","yearSuffix","slice","collectionRef","getDocs","maxNumber","docName","parseInt","substring","docRefChatId","hashedData","hash","HmacSHA256","enc","Hex","stringify","createHmacSha256Hash","updateDocRef","cryptoNumber","keywords","_cfsInputRef$current","_placeOfDeliveryInput","ProfitCalculator","_useState137","_useState138","totalSCCAmount","setTotalSCCAmount","_useState139","_useState140","formattedTotalSCCAmount","setFormattedTotalSCCAmount","_useState141","_useState142","modalVisible","setModalVisible","_useState143","_useState144","_useState145","_useState146","totalProfitAmountDollars","setTotalProfitAmountDollars","inputPriceRef","_useState147","_useState148","_useState149","_useState150","_useState151","_useState152","lastFetchedPort","setLastFetchedPort","_ref47","currentPort","freightOrigPrice","_data$currentPort","kobePrice","nagoyaPrice","yokohamaPrice","kyushuPrice","fee","purchasedPrice","formattedPurchasedPrice","minimumFractionDigits","maximumFractionDigits","auctionFee","formattedAuctionFee","transportFee","formattedTransportFee","shippingAgentFee","formattedShippingAgentFee","cubicMeter","costPerCubicMeter","formattedCostPerCubicMeter","totalCubicMeterCostDollars","formattedTotalCubicMeterCostDollars","totalCubicMeterCostYen","formattedTotalCubicMeterCostYen","realTotalPriceYen","formattedRealTotalPriceYen","realTotalPriceDollars","formattedRealTotalPriceDollars","totalPriceCalculation","defaultInputPrice","_inputPriceRef$curren","inputPrice","totalAmountDollars","supplyChainsCostsData","expenseData","accumulator","currentValue","formattedTotalAmount","lineHeight","PreviewInvoice","previewInvoiceVisible","_useState153","_useState154","isPreviewHovered","setIsPreviewHovered","invoiceRef","_useState155","_useState156","_useState157","_useState158","capturedImageUri","setCapturedImageUri","_useState159","_useState160","vehicleImageUri","setVehicleImageUri","_useState161","_useState162","setFeaturesTrueCount","_useState163","_useState164","rerenderState","setRerenderState","countTrueValuesInCarData","count","field","values","captureImageAsync","_ref48","captureRef","quality","trueCount","convertImageToBase64","_ref49","fetch","ok","status","onloadend","message","_x8","base64String","_ref50","_ref51","_x9","captureImage","_ref52","createPDF","_ref53","element","imageData","html2canvas","scale","toDataURL","pdf","jsPDF","orientation","unit","imgProps","getImageProperties","pdfHeightFit","addImage","imageCompression","imageQuality","save","handleCaptureAndCreatePDF","_ref54","issuingDateString","dueDateString","issuingDateObject","dueDateObject","options","setPreviewInvoiceVisible","window","open","write","maxWidth","zIndex","NativeImage","QRCode","useGrouping","price","chassisNumber","exteriorColor","engineDisplacement","mileage","fuel","transmission","paddingBottom","ExtendDueDateButton","_useState165","_useState166","_useState167","_useState168","setIsConfirmHovered","_useState169","_useState170","_useState171","_useState172","_useState173","_useState174","_useState175","_useState176","handleModalClose","handleConfirm","_ref55","confirmExtendDueDate","extendDueDateMessage","_ref56","_ref57","_ref58","_useState177","_useState178","TransactionModal","transactionModalVisible","TransactionButton","_ref60","buttonValue","transactionValue","colorHoverIn","colorHoverOut","_useState179","_useState180","PaymentHistoryModal","_useState181","_useState182","paymentHistoryVisible","setPaymentHistoryVisible","_useState183","_useState184","displayedPayments","setDisplayedPayments","_useState185","_useState186","loadingMore","setLoadingMore","onScroll","_ref62","_ref61","layoutMeasurement","contentOffset","contentSize","y","isCloseToBottom","nextItems","loadMorePayments","scrollEventThrottle","isArray","CustomerProfileModal","_useState187","_useState188","customerModalVisible","setCustomerModalVisible","totalPaymentValue","background","Hyperlink","linkDefault","linkStyle","ChatMessageHeader","freightPriceYen","paddingRight","modelCode","bold","FontAwesome5","ReadByListModal","_ref63","userEmail","handleReadByListModalClose","readByListModalVisible","ImagePreviewModal","_ref64","isVisible","contain","HoverablePressable","_ref65","_useState189","printComponent","_useState190","isHoveredDownload","setIsHoveredDownload","_useState191","_useState192","Linking","openURL","onMouseEnter","onMouseLeave","DocumentPreviewModal","selectedFileUrl","pdfViewerModalVisible","_useState193","_useState194","iframeKey","setIframeKey","_useState195","_useState196","setLoading","handleIframeLoad","timeout","setIsLoading","prevKey","setSelectedFileUrl","setPdfViewerModalVisible","printWindow","encodeURIComponent","print","onLoad","ChatMessageBox","_ref67","chatMessagesData","loadMoreMessagesLoading","noMoreMessagesData","_useState197","_useState198","isEyeHovered","setIsEyeHovered","flatListRef","_useState199","_useState200","hoveredImageIndex","setHoveredImageIndex","_useState201","_useState202","selectedImageIndex","setSelectedImageIndex","_useState203","_useState204","isPreviewVisible","setIsPreviewVisible","handleImageMessageMouseLeave","_useState205","_useState206","handleReadByListModalOpen","setReadByListModalVisible","animatedValue","Animated","Value","loop","sequence","timing","toValue","duration","useNativeDriver","start","interpolate","inputRange","outputRange","handleLoadMoreMessages","_ref68","setLoadMoreMessagesLoading","setNoMoreMessagesData","_ref69","handlePreviewInvoiceModalOpen","match","formattedHours","amPm","substr","extractUsernameFromEmail","_email$split","renderItemText","isGlobalCustomerSender","urlPattern","RegExp","segments","segment","segmentWithBreaks","str","n","insertBreaks","isUrlForText","canOpenURL","supported","flexShrink","flexWrap","getFileIcon","iconSize","lowerFileName","endsWith","test","_ref70","isLastMessage","handleImageMessageMouseEnter","openPreview","StyleSheet","absoluteFillObject","inverted","ChatMessages","_useState207","_useState208","setEmail","navigation","useNavigation","chatMessageBoxLoading","chatListSearchText","loginName","_useState209","_useState210","setName","_useState211","_useState212","activeButton","setActiveButton","_useState213","_useState214","setActiveButtonValue","_useState215","_useState216","activeFilterButton","setActiveFilterButton","_useState217","_useState218","setUnreadButtonValue","_useState219","_useState220","readButtonValue","setReadButtonValue","_useState221","_useState222","_useState223","_useState224","unreadCount","setUnreadCount","fetchIpAndCountry","_ref71","fetchedIp","fetchedIpCountry","country_name","unrepliedQuery","handlePress","buttonTitle","buttonTitleValue","queryRef","buildQuery","onAuthStateChanged","handleDocumentChange","active","signOut","_projectControlAuth$c","userId","userRef","subscribeToFieldChange","currentUserEmail","getFieldValueByEmail","listenForNameChange","documentId","_ref72","accountDocRef","fieldName","setLoginName","_x10","styles","useBreakpointValue","create","container","image","NativeBaseProvider","h","Box","px","SideDrawer","_ref73","handleSignOut","_useState225","_useState226","showNamePopover","setShowNamePopover","showPopover","Flex","trapFocus","_hover","leftIcon","borderTopLeftRadius","borderTopRightRadius","scrollEnabled","horizontal","minWidth","minHeight","prevState","borderBottomRightRadius"],"sourceRoot":""}