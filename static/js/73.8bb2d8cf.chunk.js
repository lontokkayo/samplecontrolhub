(self.webpackChunkweb=self.webpackChunkweb||[]).push([[73],{66516:(e,t,n)=>{var r={"./chat_step_1_off.png":29413,"./chat_step_2_off.png":35290,"./chat_step_3_off.png":38715,"./chat_step_4_off.png":65256,"./chat_step_5_off.png":58038,"./chat_step_6_off.png":49232,"./chat_step_7_off.png":88618};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=66516},82049:(e,t,n)=>{var r={"./chat_step_1_on.png":40027,"./chat_step_2_on.png":22558,"./chat_step_3_on.png":80851,"./chat_step_4_on.png":14740,"./chat_step_5_on.png":80904,"./chat_step_6_on.png":81151,"./chat_step_7_on.png":30443};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=82049},57702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ht});var r=n(36459),o=n(42982),i=n(15861),a=n(4942),l=n(70885),s=n(3559),c=n(71592),d=n(32535),u=n(24770),f=n(40013),h=n(74905),g=n(16886),m=n(48174),y=n(67942),p=n(20538),x=n(80410),j=n(24286),b=n(68873),D=n(67221),C=n(93020),v=n(89526),S=n(46337),w=n(74333),F=n(81133),A=n(88521),I=n(99566),W=n(68576),M=n(43497),B=n(24637),k=n(97301),P=n(7132),z=(n(87026),n(32450)),E=n(65738),R=n(33034),T=n(55202),L=n(51223),N=n(51055),H=n(92727),O=n(38615),U=n(47673),V=n(31402),Y=n(36105),_=n.n(Y),J=(n(51909),n(95634),n(48859)),q=n(69248),G=n(61620),Z=n(26555),X=(n(96500),n(95212)),$=n(30083),K=(n(76805),n(79552)),Q=(n(86308),n(37050)),ee=(n(53059),n(58775),n(19761),n(84419)),te=n(72776),ne=n(42656),re=n(7484),oe=n(900),ie=n.n(oe),ae=n(34285),le=n(67557);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}S.default.get("window").width;var de,ue,fe="CHAT MESSAGES",he="",ge="",me="",ye="",pe="",xe=[],je="",be=(J.projectControlAuth.currentUser.email,""),De="",Ce="",ve=0,Se="",we="",Fe={carData:{},cfs:"",placeOfDelivery:"",departureCountry:"",departurePort:"",salesPerson:"",discharge:{port:"",country:""},consignee:{sameAsBuyer:null,name:"",address:"",contactNumber:"",fax:"",email:""},notifyParty:{sameAsConsignee:null,name:"",address:"",contactNumber:"",fax:"",email:""},paymentDetails:{incoterms:"",inspectionIsChecked:null,inspectionName:"",warrantyIsCheck:null,warrantyAmount:0,fobPrice:0,freightPrice:0,insurancePrice:0,inspectionPrice:0,totalAmount:0,additionalName:[],additionalPrice:[]},bankInformations:{dueDate:"",issuingDate:"",bankAccount:{},paymentTerms:"",salesAgreement:""}},Ae="",Ie="",We=(0,V.getFirestore)(),Me=function(){var e=J.projectControlAuth.currentUser;return e?e.email:null},Be=function(e){var t=e.data,r=(0,$.useSelector)((function(e){return e.selectedChatData}));t.findIndex((function(e){return r.stepIndicator.value<e.value}));return(0,le.jsx)(F.default,{style:{flexDirection:"row",alignItems:"center",paddingTop:3},children:t.map((function(e,o){return(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,le.jsx)(s.Tooltip,{label:e.title,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{width:20,height:20,borderRadius:10,backgroundColor:r.stepIndicator.value<e.value?"#C1C1C1":"#abf7c7",justifyContent:"center"},children:r.stepIndicator.value<e.value?(0,le.jsx)(Z.default,{source:{uri:n(66516)("./chat_step_"+e.value+"_off.png"),priority:Z.default.priority.normal},style:{tintColor:"rgba(128, 128, 128, 1)",width:15,height:15,alignSelf:"center"},resizeMode:Z.default.resizeMode.stretch}):(0,le.jsx)(Z.default,{source:{uri:n(82049)("./chat_step_"+e.value+"_on.png"),priority:Z.default.priority.normal},style:{tintColor:"rgba(128, 128, 128, 1)",width:15,height:15,alignSelf:"center"},resizeMode:Z.default.resizeMode.stretch})})}),o<t.length-1&&(0,le.jsx)(F.default,{style:{height:3,width:20,backgroundColor:r.stepIndicator.value<=e.value?"#C1C1C1":"#abf7c7"}})]},o)}))})},ke=[{title:"Negotiation",value:1},{title:"Issued Proforma Invoice",value:2},{title:"Order Item",value:3},{title:"Payment Confirmed",value:4},{title:"Shipping Schedule",value:5},{title:"Documents",value:6},{title:"Vehicle Received",value:7}],Pe=function(){var e=(0,$.useSelector)((function(e){return e.loadingModalVisible}));return(0,le.jsx)(F.default,{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.5)",flex:1,display:e?"flex":"none",justifyContent:"center",alignItems:"center"},children:(0,le.jsxs)(F.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:[(0,le.jsx)(c.default,{size:"lg",color:"white"}),(0,le.jsx)(d.default,{style:{color:"white"},children:"Loading, please wait!"})]})})},ze=function(e){var t=e.title,n=e.onPress,r=e.isActive,o=e.headerCount,i=r?{backgroundColor:"#E1EDF7"}:{},a=S.default.get("window").width,s=(0,v.useState)(!1),c=(0,l.default)(s,2),u=c[0],f=c[1];return(0,le.jsxs)(B.default,{onHoverIn:function(){return f(!0)},onHoverOut:function(){return f(!1)},focusable:!1,onPress:n,style:ce({backgroundColor:u?"#f2f2f2":"transparent",padding:12,marginVertical:a>1818?10:2,borderWidth:5,borderColor:"transparent",marginLeft:8,width:195,flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:5},i),children:[(0,le.jsx)(d.default,{color:r?"#0A78BE":"#1C2B33",fontSize:14,style:{fontWeight:r?700:400,alignSelf:"center",textAlign:"center"},children:t}),o]})},Ee=function(e){var t=e.title,n=e.onPress,r=e.isActive,o=e.iconActive,i=e.iconNotActive,a=(0,v.useState)(!1),s=(0,l.default)(a,2),c=s[0],u=s[1];return(0,le.jsxs)(B.default,{focusable:!1,variant:"ghost",onPress:n,onHoverIn:function(){return u(!0)},onHoverOut:function(){return u(!1)},style:{padding:5,width:100,margin:5,flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:r?"#E1EDF7":c?"#d7d7d9":"#ECEDF0"},children:[r?o:i,(0,le.jsx)(d.default,{color:r?"#0A78BE":"#1C2B33",fontSize:14,style:{fontWeight:r?700:400,marginLeft:5},children:t})]})},Re=function(){return(0,le.jsx)(le.Fragment,{children:(0,le.jsxs)(F.default,{style:{padding:12,alignItems:"flex-start",flexDirection:"row",backgroundColor:"white"},children:[(0,le.jsx)(F.default,{style:{width:60,height:60,borderRadius:30,backgroundColor:"#e0e0e0",marginRight:12}}),(0,le.jsxs)(F.default,{style:{flex:1},children:[Array.from({length:3}).map((function(e,t){return(0,le.jsx)(F.default,{style:{height:10,backgroundColor:"#e0e0e0",marginBottom:6,width:"80%",borderRadius:4}},"text-"+t)})),(0,le.jsx)(F.default,{style:{position:"absolute",right:10,height:10,backgroundColor:"#e0e0e0",marginBottom:6,width:"5%",borderRadius:4}})]})]})})},Te=function(e){var t=e.handleDeleteMessageTemplateClose,n=(0,$.useSelector)((function(e){return e.deleteMessageTemplateVisible})),r=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"",o=je,a=(0,v.useState)(!1),s=(0,l.default)(a,2),c=s[0],h=s[1],g=function(){t()},m=function(){var e=(0,i.default)((function*(e){var t=(0,V.doc)(J.projectControlFirestore,"MessageTemplate",r);h(!0);try{var n=yield(0,V.getDoc)(t);if(n.exists()){var o=(n.data().messageTemplate||[]).filter((function(t){return t.title!==e}));yield(0,V.updateDoc)(t,{messageTemplate:o}),console.log("Item successfully deleted"),h(!1),g()}else console.log("Document does not exist"),h(!1)}catch(i){console.error("Error deleting item: ",i),h(!1)}}));return function(t){return e.apply(this,arguments)}}();return(0,le.jsx)(u.Modal,{isOpen:n,onClose:g,children:(0,le.jsxs)(u.Modal.Content,{children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Header,{children:"Delete Message Template?"}),(0,le.jsx)(u.Modal.Body,{children:(0,le.jsx)(F.default,{style:{flex:1},children:(0,le.jsx)(d.default,{style:{fontWeight:400},children:"Are you sure you want to delete the selected message template?"})})}),(0,le.jsx)(u.Modal.Footer,{children:(0,le.jsxs)(f.Button.Group,{variant:"ghost",space:"2",children:[(0,le.jsx)(f.Button,{style:{width:80,height:36},onPress:g,variant:"solid",colorScheme:"warmGray",children:"Cancel"}),(0,le.jsx)(f.Button,{isLoading:!!c,onPress:function(){return m(o)},style:{padding:16,height:36},variant:"solid",colorScheme:"error",children:"Delete"})]})})]})})},Le=function(e){var t=e.setOriginalTitle,n=(e.addVisible,e.titleInputRef),r=e.valueInputRef,o=e.setAddVisible,i=e.item,a=e.textInputRef,s=e.setPopoverOpen,c=(0,v.useState)(!1),u=(0,l.default)(c,2),f=u[0],g=u[1],m=(0,v.useState)(!1),y=(0,l.default)(m,2),p=y[0],x=y[1],j=(0,v.useState)(!1),b=(0,l.default)(j,2),D=b[0],C=b[1],S=(0,v.useState)(!1),w=(0,l.default)(S,2),A=w[0],I=w[1],W=(0,v.useState)(!1),M=(0,l.default)(W,2),k=M[0],P=M[1],E=(0,v.useState)(null),R=(0,l.default)(E,2),T=(R[0],R[1],(0,v.useState)(null)),L=(0,l.default)(T,2),N=(L[0],L[1]),H=(0,$.useDispatch)();return(0,le.jsxs)(B.default,{onPress:function(){return function(e){a.current.value=e.value,s(!1)}(i)},onHoverIn:function(){return g(!0)},onHoverOut:function(){return g(!1)},style:{padding:10,backgroundColor:f?"#f2f2f2":"transparent",flex:1,borderRadius:5},children:[(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"700",flex:1},numberOfLines:1,ellipsizeMode:"tail",children:i.title}),(0,le.jsx)(h.Popover,{isOpen:k,onClose:function(){return P(!1)},trigger:function(e){return(0,le.jsx)(B.default,ce(ce({},e),{},{onPress:function(){return P(!0)},onHoverIn:function(){return x(!0)},onHoverOut:function(){return x(!1)},style:{backgroundColor:p?"#dedede":"transparent",padding:5,justifyContent:"center",borderRadius:5},children:(0,le.jsx)(z.default,{size:16,name:"dots-three-horizontal",color:"#171717"})}))},children:(0,le.jsxs)(h.Popover.Content,{children:[(0,le.jsx)(B.default,{onPress:function(){return function(e){o(!0),N(!0),P(!1),n.current.value=e.title,r.current.value=e.value,t(e.title)}(i)},onHoverIn:function(){return C(!0)},onHoverOut:function(){return C(!1)},style:{flex:1,width:50,backgroundColor:D?"#dedede":"white",padding:5},focusable:!1,children:(0,le.jsx)(d.default,{children:"Edit"})}),(0,le.jsx)(B.default,{onPress:function(){return e=i.title,H((0,Q.setDeleteMessageTemplateVisible)(!0)),void(je=e);var e},onHoverIn:function(){return I(!0)},onHoverOut:function(){return I(!1)},style:{flex:1,width:50,backgroundColor:A?"#dedede":"white",padding:5},focusable:!1,children:(0,le.jsx)(d.default,{children:"Delete"})})]})})]}),(0,le.jsx)(d.default,{style:{fontWeight:"400",fontSize:12},numberOfLines:1,ellipsizeMode:"tail",children:i.value})]})},Ne=function(e){var t=e.textInputRef,n=(0,$.useDispatch)(),r=(0,v.useState)(!1),o=(0,l.default)(r,2),a=o[0],s=o[1],u=(0,v.useState)(!1),f=(0,l.default)(u,2),g=f[0],m=f[1],y=(0,v.useState)(!1),p=(0,l.default)(y,2),x=p[0],j=p[1],b=(0,v.useState)(""),D=(0,l.default)(b,2),C=D[0],S=D[1],w=(0,v.useState)([]),A=(0,l.default)(w,2),W=A[0],k=A[1],P=(0,v.useState)(!1),z=(0,l.default)(P,2),R=z[0],T=z[1],L=(0,v.useState)(!1),N=(0,l.default)(L,2),H=N[0],O=N[1],U=(0,v.useState)(!1),Y=(0,l.default)(U,2),_=Y[0],q=Y[1],G=(0,v.useState)(""),Z=(0,l.default)(G,2),X=Z[0],K=Z[1],ee=(0,v.useState)(!1),te=(0,l.default)(ee,2),ne=te[0],re=te[1],oe=(0,v.useState)([]),ie=(0,l.default)(oe,2),ae=ie[0],se=ie[1],de=(0,v.useRef)(null),ue=(0,v.useRef)(null),fe=(0,v.useRef)(null),he=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"",ge=function(){var e=(0,i.default)((function*(){re(!0);var e=(0,V.doc)(J.projectControlFirestore,"MessageTemplate",he);try{var t,n,r=yield(0,V.getDoc)(e),o=[],i=null==(t=ue.current)?void 0:t.value,a=null==(n=fe.current)?void 0:n.value;if(i&&a){if(r.exists()){var l=(o=r.data().messageTemplate||[]).findIndex((function(e){return e.title===X}));-1!==l?o[l]={title:i,value:a}:o.push({title:i,value:a})}else console.log("Creating a new document"),o=[{title:i,value:a}];yield(0,V.setDoc)(e,{messageTemplate:o},{merge:!0}),console.log("Document successfully updated or created")}else console.log("Title or value is empty")}catch(s){console.error("Error updating or creating document: ",s)}finally{re(!1),me()}}));return function(){return e.apply(this,arguments)}}(),me=function(){m(!1),T(!1),O(!1),q(!1),ue.current.clear(),fe.current.clear()};(0,v.useEffect)((function(){var e=(0,V.doc)(J.projectControlFirestore,"MessageTemplate",he),t=(0,V.onSnapshot)(e,(function(e){if(e.exists()){var t=e.data().messageTemplate;t.sort((function(e,t){var n=e.title.toUpperCase(),r=t.title.toUpperCase();return n<r?-1:n>r?1:0})),se(t)}else console.log("No such document!")}),(function(e){console.error("Error fetching document:",e)}));return function(){return t()}}),[x]);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(Te,{handleDeleteMessageTemplateClose:function(){n((0,Q.setDeleteMessageTemplateVisible)(!1))}}),(0,le.jsx)(h.Popover,{isOpen:x,onClose:function(){j(!1),T(!1),m(!1)},initialFocusRef:de,finalFocusRef:t,placement:"top",trigger:function(e){return(0,le.jsx)(B.default,ce(ce({focusable:!1},e),{},{onPress:function(){return j(!0)},onHoverIn:function(){return s(!0)},onHoverOut:function(){return s(!1)},style:function(e){return[{bottom:0,right:100,position:"absolute",borderRadius:20,opacity:e.pressed?.5:1}]},children:(0,le.jsx)(E.default,{name:"chatbox-ellipses-outline",size:24,color:a?"#0A78BE":"#C1C1C1"})}))},children:(0,le.jsxs)(h.Popover.Content,{w:400,marginRight:10,children:[(0,le.jsx)(h.Popover.Arrow,{}),(0,le.jsxs)(F.default,{style:{display:R?"flex":"none"},children:[(0,le.jsx)(h.Popover.Header,{backgroundColor:"white",children:(0,le.jsx)(F.default,{style:{flexDirection:"row",flex:1},children:(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:16,flex:1},children:"Create a message template"})})}),(0,le.jsxs)(h.Popover.Body,{backgroundColor:"white",height:250,children:[(0,le.jsx)(d.default,{style:{fontWeight:700},children:"Title"}),(0,le.jsx)(M.default,{ref:ue,placeholder:"Input Title",placeholderTextColor:"#9B9E9F",underlineColorAndroid:"transparent",style:{height:40,padding:10,outlineStyle:"none",borderWidth:1,borderColor:"#D9D9D9",borderRadius:5}}),(0,le.jsx)("br",{}),(0,le.jsx)(d.default,{style:{fontWeight:700},children:"Message"}),(0,le.jsx)(M.default,{multiline:!0,ref:fe,placeholder:"Input Message",placeholderTextColor:"#9B9E9F",underlineColorAndroid:"transparent",style:{height:100,padding:10,outlineStyle:"none",borderWidth:1,borderColor:"#D9D9D9",borderRadius:5}})]}),(0,le.jsx)(h.Popover.Footer,{backgroundColor:"white",children:(0,le.jsxs)(F.default,{style:{height:30,flexDirection:"row",justifyContent:"center"},children:[(0,le.jsx)(B.default,{onHoverIn:function(){return O(!0)},onHoverOut:function(){return O(!1)},onPress:me,style:{backgroundColor:H?"#DADADA":"white",width:60,borderRadius:5,padding:5,borderWidth:1,borderColor:"#DADDE1",marginHorizontal:5},children:(0,le.jsx)(d.default,{style:{textAlign:"center",fontWeight:500},children:"Cancel"})}),(0,le.jsx)(B.default,{onPress:ge,onHoverIn:function(){return q(!0)},onHoverOut:function(){return q(!1)},style:{backgroundColor:_?"#107a37":"#16A34A",width:60,borderRadius:5,padding:5,borderWidth:1,borderColor:"#DADDE1",marginHorizontal:5},children:ne?(0,le.jsx)(c.default,{animating:!0,size:"sm",color:"white"}):(0,le.jsx)(d.default,{style:{textAlign:"center",color:"white",fontWeight:500},children:"Save"})})]})})]}),(0,le.jsxs)(F.default,{style:{display:R?"none":"flex"},children:[(0,le.jsx)(h.Popover.Header,{backgroundColor:"white",children:(0,le.jsxs)(F.default,{style:{flexDirection:"row",flex:1},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:16,flex:1},children:"Message Template"}),(0,le.jsx)(B.default,{focusable:!1,onPress:function(){return T(!0)},onHoverIn:function(){return m(!0)},onHoverOut:function(){return m(!1)},children:(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:16,color:"#1B81C2",textDecorationLine:g?"underline":"none"},children:"+ ADD"})})]})}),(0,le.jsxs)(h.Popover.Body,{backgroundColor:"white",height:300,children:[(0,le.jsx)(M.default,{ref:de,placeholder:"Search",placeholderTextColor:"#9B9E9F",underlineColorAndroid:"transparent",style:{height:40,padding:10,outlineStyle:"none",borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,marginBottom:5},keyboardType:"search",onChangeText:function(e){S(e);var t=ae.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())||t.value.toLowerCase().includes(e.toLowerCase())}));k(t)},value:C}),ae.length>0||W.length>0?(0,le.jsx)(I.default,{style:{height:100,borderBottomLeftRadius:5},renderItem:function(e){var n=e.item;return(0,le.jsx)(Le,{setOriginalTitle:K,addVisible:R,titleInputRef:ue,valueInputRef:fe,setAddVisible:T,item:n,textInputRef:t,setPopoverOpen:j})},keyExtractor:function(e){return e.title.toString()},data:C?W:ae}):(0,le.jsx)(d.default,{style:{fontWeight:700,alignSelf:"center"},children:"No message template found"})]})]})]})})]})},He=function(e){var t=e.file,r=e.onRemove;if(!t)return null;var o;return(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignItems:"center",margin:5},children:[(o=t.type,o.includes("pdf")?(0,le.jsx)(R.default,{name:"picture-as-pdf",size:24,color:"#FF0000"}):o.includes("msword")||o.includes("wordprocessingml")?(0,le.jsx)(T.default,{name:"microsoft-word",size:24,color:"#2B579A"}):o.includes("vnd.ms-excel")||o.includes("spreadsheetml")||"text/csv"===o?(0,le.jsx)(T.default,{name:"microsoft-excel",size:24,color:"#217346"}):o.includes("rar")||o.includes("x-rar-compressed")||o.includes("x-compressed")?(0,le.jsx)(Z.default,{source:{uri:n(25333),priority:Z.default.priority.high},style:{width:24,height:24},resizeMode:Z.default.resizeMode.cover}):(0,le.jsx)(R.default,{name:"insert-drive-file",size:24,color:"black"})),(0,le.jsx)(d.default,{style:{marginLeft:10},children:t.name}),(0,le.jsx)(B.default,{onPress:r,children:(0,le.jsx)(R.default,{name:"close",size:20,color:"black"})})]})},Oe=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=((0,$.useSelector)((function(e){return e.activeChatId})),(0,v.useState)(!1)),n=(0,l.default)(t,2),r=n[0],o=n[1],a=(0,v.useState)(null),s=(0,l.default)(a,2),d=s[0],u=s[1],f=(0,v.useState)(null),h=(0,l.default)(f,2),g=h[0],m=h[1],y=(0,v.useState)(null),p=(0,l.default)(y,2),x=p[0],j=p[1],b=(0,v.useState)(null),D=(0,l.default)(b,2),C=D[0],w=D[1],A=(0,v.useState)(null),I=(0,l.default)(A,2),W=I[0],k=I[1],z=(0,v.useState)(""),T=(0,l.default)(z,2),L=T[0],N=T[1],H=(0,v.useState)(!1),U=(0,l.default)(H,2),Y=U[0],X=U[1],K=(0,v.useState)(!1),Q=(0,l.default)(K,2),ee=Q[0],te=Q[1],ne=(0,v.useState)(!1),re=(0,l.default)(ne,2),oe=re[0],ie=re[1],ae=(0,v.useRef)(null),se=function(){w(null),j(null),N(null)},ce=function(){u(null),m(null),k(null),N(null)},de=function(){var e=(0,i.default)((function*(){var e=10485760;return"web"===P.default.OS?new Promise((function(t,n){var r=document.createElement("input");r.type="file",r.accept=".pdf, .doc, .docx, .xls, .xlsx, .rar",r.onchange=function(){var o=r.files[0];if(o){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/x-rar-compressed","application/x-compressed","text/csv"].includes(o.type))return alert("File type not allowed"),void n("File type not allowed");if(o.size>e)return alert("File size should be less than 10MB"),void n("File size should be less than 10MB");se();var i=new FileReader;i.onload=function(e){k(e.target.result),t(o),u(o),m({name:o.name,type:o.type}),N(o.name),ae.current.focus()},i.onerror=function(e){n(e)},i.readAsDataURL(o)}},r.click()})):new Promise((function(t,n){(0,q.launchImageLibrary)({mediaType:"photo"},(function(r){if(r.didCancel)n("User cancelled image picker");else if(r.errorCode)n(r.errorMessage);else{var o=r.assets[0];if(!o.type.startsWith("image/"))return n("Only image files are allowed"),void alert("Only image files are allowed");if(o.fileSize>e)return n("File size should be less than 10MB"),void alert("File size should be less than 10MB");var i=o.uri,a=o.fileName||"Unknown name";t({uri:i,name:a}),w(i),console.log("File name: "+a)}}))}))}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,i.default)((function*(){var e=10485760;return"web"===P.default.OS?new Promise((function(t,n){var r=document.createElement("input");r.type="file",r.accept="image/*",r.onchange=function(){var o=r.files[0];if(o){if(!o.type.startsWith("image/"))return n("Only image files are allowed"),void alert("Only image files are allowed");if(o.size>e)return n("File size should be less than 10MB"),void alert("File size should be less than 10MB");ce();var i=new FileReader;i.readAsDataURL(o),i.onload=function(){t({dataUrl:i.result,name:o.name}),w(i.result),N(o.name),console.log("File name: "+o.name)},j(o),i.onerror=function(e){return n(e)}}},r.click()})):new Promise((function(t,n){(0,q.launchImageLibrary)({mediaType:"photo"},(function(r){if(r.didCancel)n("User cancelled image picker");else if(r.errorCode)n(r.errorMessage);else{var o=r.assets[0];if(!o.type.startsWith("image/"))return n("Only image files are allowed"),void alert("Only image files are allowed");if(o.fileSize>e)return n("File size should be less than 10MB"),void alert("Only image files are allowed");var i=o.uri,a=o.fileName||"Unknown name";t({uri:i,name:a}),w(i),console.log("File name: "+a)}}))}))}));return function(){return e.apply(this,arguments)}}(),fe=function(){var t=(0,i.default)((function*(){var t;ie(!0);var n=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,r=_()(n).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),o=_()(n).format("MMDDYYYYHHmmss.SSS"),i=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"",a=null==(t=ae.current)?void 0:t.value;ae.current.clear(),ae.current.focus(),ce();var l=(0,G.getStorage)(J.projectExtensionFirebase);if(W)try{var s=null;if(W){var c=(0,G.ref)(l,"ChatFiles/"+e.id+"/C-HUB_"+o+"/"+L),u=yield(0,G.uploadBytes)(c,d);s=yield(0,G.getDownloadURL)(u.ref)}yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",e.id,"messages"),{text:a.trim(),sender:i,timestamp:r,ip:Se,ipCountry:we,file:{name:L,type:"attachment",url:s}}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{lastMessageSender:i,lastMessage:"Sent an attachment",lastMessageDate:r,customerRead:!1,read:!0,readBy:[i]}),ie(!1)}catch(f){console.error("Error adding document: ",f)}else ie(!1)}));return function(){return t.apply(this,arguments)}}(),he=function(){var t=(0,i.default)((function*(){var t;ie(!0);var n,r=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,o=_()(r).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),i=_()(r).format("MMDDYYYYHHmmss.SSS"),a=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"",l=null==(t=ae.current)?void 0:t.value,s=(0,G.getStorage)(J.projectExtensionFirebase);if(C){ae.current.clear(),ae.current.focus(),se();try{var c=null;if(C){var d=yield(n=x,new Promise((function(e,t){var r=new FileReader;r.readAsDataURL(n),r.onload=function(r){var o=new Image;o.src=r.target.result,o.onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d"),i=o.width,a=o.height;i>a?i>800&&(a*=800/i,i=800):a>800&&(i*=800/a,a=800),t.width=i,t.height=a,r.drawImage(o,0,0,i,a),t.toBlob((function(t){e(new File([t],n.name,{type:"image/jpeg",lastModified:Date.now()}))}),"image/jpeg",.7)},o.onerror=function(e){return t(e)}},r.onerror=function(e){return t(e)}}))),u=(0,G.ref)(s,"ChatFiles/"+e.id+"/C-HUB_"+i+"/"+L),f=yield(0,G.uploadBytes)(u,d);c=yield(0,G.getDownloadURL)(f.ref)}yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",e.id,"messages"),{text:l.trim(),sender:a,timestamp:o,ip:Se,ipCountry:we,file:{name:L,type:"image",url:c}}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{lastMessageSender:a,lastMessage:"Sent an image",lastMessageDate:o,customerRead:!1,read:!0,readBy:[a]}),ie(!1)}catch(h){console.error("Error adding document: ",h)}}else ie(!1)}));return function(){return t.apply(this,arguments)}}(),ge=function(){var t=(0,i.default)((function*(){var t;ie(!0);var n=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,r=_()(n).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),o=(_()(n).format("YYYY"),_()(n).format("MM"),_()(n).format("MM/DD"),_()(n).format("YYYY/MM/DD"),_()(n).format("DD"),_()(n).format("HH:mm"),_()(n).format("HH:mm:ss"),null==(t=ae.current)?void 0:t.value);if(ae.current.clear(),ae.current.focus(),""!==o){var i=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"";try{yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",e.id,"messages"),{text:o.trim(),sender:i,timestamp:r,ip:Se,ipCountry:we}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{lastMessageSender:i,lastMessage:o,lastMessageDate:r,customerRead:!1,read:!0,readBy:[i]}),ie(!1)}catch(a){console.error("Error adding document: ",a)}}else ie(!1)}));return function(){return t.apply(this,arguments)}}(),me=S.default.get("window").width,ye=function(){null!==C&&he(),null!==W?fe():ge()};return(0,le.jsxs)(F.default,{style:{width:"98%",flexDirection:"row",borderWidth:1,borderColor:"#D9D9D9",borderRadius:10},children:[(0,le.jsxs)(F.default,{style:{flexDirection:"column",flex:1},children:[W&&(0,le.jsx)(He,{file:g,onRemove:ce}),C&&(0,le.jsxs)(F.default,{style:{position:"relative",width:70,height:70,borderRadius:5,overflow:"hidden",borderWidth:1,borderColor:"#DADDE1",margin:2},children:[(0,le.jsx)(Z.default,{source:{uri:C},style:{width:"100%",height:"100%",borderRadius:10},resizeMode:Z.default.resizeMode.cover}),(0,le.jsx)(B.default,{onPress:se,style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.6)",borderRadius:12},children:(0,le.jsx)(R.default,{name:"close",size:20,color:"black"})})]}),(0,le.jsxs)(F.default,{style:{flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{marginHorizontal:5,marginTop:5},children:(0,le.jsx)(Z.default,{source:{uri:"https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FRMJ%20Round.jpg?alt=media&token=90d7f2fe-d9cd-4a6f-9a6b-bc39fe2b33b2",priority:Z.default.priority.high},style:{width:30,height:30,borderRadius:15},resizeMode:Z.default.resizeMode.cover})}),(0,le.jsx)(M.default,{ref:ae,multiline:!0,placeholder:"Send a message...",placeholderTextColor:"#9B9E9F",onKeyPress:function(e){me>=768&&("Enter"!==e.nativeEvent.key||e.nativeEvent.shiftKey||(e.preventDefault(),ye()))},style:{outlineStyle:"none",width:"100%",height:80,alignSelf:"center",padding:10}}),(0,le.jsx)(B.default,{focusable:!1,onPress:function(){return oe?null:ye()},onHoverIn:function(){return o(!0)},onHoverOut:function(){return o(!1)},style:function(e){var t=e.pressed;return[{padding:10,top:20,right:10,position:"absolute",borderRadius:20,backgroundColor:r?"#e8f4ff":"transparent",opacity:t?.5:1}]},children:oe?(0,le.jsx)(c.default,{animating:!0,size:"sm",color:"#95BCF9"}):(0,le.jsx)(R.default,{name:"send",size:24,color:"#95BCF9"})})]})]}),(0,le.jsx)(B.default,{onHoverIn:function(){return X(!0)},onHoverOut:function(){return X(!1)},style:function(e){return[{padding:10,bottom:-10,right:125,position:"absolute",borderRadius:20,opacity:e.pressed?.5:1}]},onPress:ue,children:(0,le.jsx)(E.default,{name:"image-outline",size:24,color:Y?"#0A78BE":"#C1C1C1"})}),(0,le.jsx)(B.default,{onHoverIn:function(){return te(!0)},onHoverOut:function(){return te(!1)},style:function(e){return[{padding:10,bottom:-9,right:155,position:"absolute",borderRadius:20,opacity:e.pressed?.5:1}]},onPress:de,children:(0,le.jsx)(R.default,{name:"attach-file",size:24,color:ee?"#0A78BE":"#C1C1C1"})}),(0,le.jsx)(Ne,{textInputRef:ae})]})},Ue=function(e){var t=e.item,r=e.onPress,o=e.isActive,a=e.messageUnread,c=e.formattedDate,u=(e.chatListData,(0,v.useState)(null)),f=(0,l.default)(u,2),h=f[0],g=f[1],m=(0,v.useState)(null),y=(0,l.default)(m,2),p=(y[0],y[1],(0,v.useState)("")),x=(0,l.default)(p,2),j=x[0],b=x[1],D=(0,v.useState)(""),C=(0,l.default)(D,2),S=C[0],w=C[1],A=(0,$.useDispatch)(),I=(0,v.useState)(!1),W=(0,l.default)(I,2),M=W[0],k=W[1],P=(0,v.useState)(!1),z=(0,l.default)(P,2),E=(z[0],z[1],(0,v.useState)(!1)),T=(0,l.default)(E,2),L=T[0],N=T[1],H=(0,v.useState)({}),O=(0,l.default)(H,2),U=O[0],Y=O[1],_=t.carData&&t.carData.carName?t.carData.carName:t.vehicle&&t.vehicle.carName?t.vehicle.carName:"",q=function(){var e=(0,i.default)((function*(){A((0,Q.setActiveChatId)("")),A((0,Q.setChatMessagesData)([])),A((0,Q.setSelectedChatData)([]));var e=(0,V.doc)(J.projectExtensionFirestore,"chats",t.id);try{yield(0,V.updateDoc)(e,{read:!1})}catch(n){console.error("Error updating document: ",n)}}));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){var e=t.carData&&t.carData.stockID?t.carData.stockID:t.vehicle&&t.vehicle.carId?t.vehicle.carId:"",n=(0,G.getStorage)(J.projectExtensionFirebase),r=(0,G.ref)(n,e+"/0");(0,G.getDownloadURL)(r).then((function(e){g(e)})).catch((function(e){e.code,g("https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FNo%20Car%20Image%20Found.png?alt=media&token=de86488c-73a6-4c04-811c-bc508a11123a")}));var o=t.participants.customer,i=(0,V.doc)(J.projectExtensionFirestore,"accounts",o),a=(0,V.onSnapshot)(i,(function(e){if(e.exists()){var t=e.data();Y(t||{}),b(t.textFirst?t.textFirst:""),w(t.textLast?t.textLast:"")}else console.log("Document not found")}),(function(e){console.error("Error fetching document: ",e)}));return function(){return a()}}),[]);var X=!h||null==h||""==h||void 0==h||!t,K=n(82049)("./chat_step_"+t.stepIndicator.value+"_on.png"),ee=n(66516)("./chat_step_"+t.stepIndicator.value+"_off.png");return X?(0,le.jsx)(Re,{}):(0,le.jsxs)(B.default,{onHoverIn:function(){N(!0)},onHoverOut:function(){N(!1)},focusable:!1,style:{padding:12,alignItems:"flex-start",flexDirection:"row",backgroundColor:o||L?"#f2f2f2":"white",borderLeftColor:o?"#0A9FDC":"transparent",borderRightColor:o?"#0A9FDC":"transparent",borderLeftWidth:2,borderRightWidth:2},onPress:function(){r(),A((0,Q.setSelectedCustomerData)(U)),ye=j||"",pe=S||"",me=h||"",_,N(!1),k(!1)},children:[(0,le.jsx)(F.default,{style:{width:"20%",justifyContent:"center"},children:h?(0,le.jsx)(Z.default,{source:{uri:h,priority:Z.default.priority.normal},style:{width:60,height:60,borderRadius:30},resizeMode:Z.default.resizeMode.stretch}):(0,le.jsx)(F.default,{style:{width:60,height:60,borderRadius:30,backgroundColor:"#e0e0e0",marginRight:12}})}),(0,le.jsxs)(F.default,{style:{flex:1},children:[L&&t.read?null:(0,le.jsx)(d.default,{style:{fontSize:12,position:"absolute",right:10,color:a?"#0A78BE":"#90949C",fontWeight:a?700:400},children:c}),(0,le.jsx)(d.default,{numberOfLines:1,ellipsizeMode:"tail",style:{fontSize:14,width:"70%",overflow:"hidden",fontWeight:a?700:400,color:a?"#1C2B33":"#586369"},children:_}),(0,le.jsx)(d.default,{numberOfLines:1,ellipsizeMode:"tail",style:{fontSize:14,width:"80%",overflow:"hidden",flex:1,fontWeight:a?700:400,color:a?"#1C2B33":"#586369"},children:j+" "+S}),(0,le.jsx)(d.default,{numberOfLines:1,ellipsizeMode:"tail",style:{fontSize:12,width:"80%",overflow:"hidden",flex:1,fontWeight:a?700:400,color:a?"#0A78BE":"#90949c"},children:t.lastMessageSender==t.participants.customer?t.lastMessage?t.lastMessage:"No message found":t.lastMessage?"Sales: "+t.lastMessage:"Sales: No message found"}),t.read?(0,le.jsx)(Z.default,{source:{uri:ee,priority:Z.default.priority.normal},style:{tintColor:"rgba(128, 128, 128, 1)",width:22,height:20,position:"absolute",right:10,bottom:0},resizeMode:Z.default.resizeMode.stretch}):(0,le.jsx)(Z.default,{source:{uri:K,priority:Z.default.priority.normal},style:{tintColor:"rgba(128, 128, 128, 1)",width:22,height:20,position:"absolute",right:10,bottom:0},resizeMode:Z.default.resizeMode.stretch}),(0,le.jsx)(d.default,{numberOfLines:1,ellipsizeMode:"tail",style:{position:"absolute",right:0,top:10,padding:10,alignSelf:"center",fontSize:12,overflow:"hidden",flex:1,fontWeight:a?700:400,color:a?"#FF0000":"#90949c"},children:t.invoiceNumber&&t.stepIndicator.value>2?t.invoiceNumber:""}),L&&t.read&&(0,le.jsx)(s.Tooltip,{label:"Mark as unread",placement:"right",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(B.default,{focusable:!1,onHoverIn:function(){N(!0),k(!0)},onHoverOut:function(){k(!1)},onPress:q,style:{position:"absolute",right:0,top:-10,padding:10,alignSelf:"center"},children:(0,le.jsx)(R.default,{name:"mark-as-unread",size:22,color:M?"#1B81C2":"#BABABA"})})})]})]})},Ve=function(e){var t=e.unreadButtonValue,n=e.activeButtonValue,r=(0,$.useSelector)((function(e){return e.chatListData})),a=((0,$.useSelector)((function(e){return e.chatListLastVisible})),(0,$.useSelector)((function(e){return e.activeChatId}))),l=(0,$.useSelector)((function(e){return e.loadMoreLoading})),s=(0,$.useSelector)((function(e){return e.noMoreData})),u=((0,v.useRef)(null),(0,$.useDispatch)()),f=function(){var e=(0,i.default)((function*(){var e=(0,V.doc)(J.projectExtensionFirestore,"chats",a),t=(J.projectControlAuth.currentUser,J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"");if(""!==t)try{yield(0,V.updateDoc)(e,{read:!0,readBy:(0,V.arrayUnion)(t)})}catch(n){console.error("Error updating document: ",n)}}));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){var e=function(){if(a){u((0,Q.setChatMessagesData)([])),u((0,Q.setChatMessageBoxLoading)(!0)),f();try{var e=(0,V.doc)(J.projectExtensionFirestore,"chats",a),t=(0,V.collection)(e,"messages"),n=(0,V.query)(t,(0,V.orderBy)("timestamp","desc"),(0,V.limit)(10)),r=(0,V.onSnapshot)(e,(function(e){if(e.exists()){var t=ce(ce({},e.data()),{},{id:e.id});if(u((0,Q.setSelectedChatData)(t)),t.invoiceNumber||""==t.invoiceNumber){var n=(0,V.doc)(J.projectExtensionFirestore,"IssuedInvoice",t.invoiceNumber),r=(0,V.onSnapshot)(n,(function(e){if(e.exists()){var t=ce(ce({},e.data()),{},{id:e.id});u((0,Q.setInvoiceData)(t||{}))}else console.log("No Invoice Yet"),u((0,Q.setInvoiceData)({}))}));return function(){r()}}u((0,Q.setInvoiceData)({})),console.log("No Invoice Yet")}})),o=(0,V.onSnapshot)(n,(function(e){var t=[];e.forEach((function(e){var n=e.data(),r=n.timestamp?n.timestamp.toString():null;t.push(ce(ce({id:e.id},n),{},{timestamp:r}))})),u((0,Q.setChatMessagesData)(t)),u((0,Q.setChatMessageBoxLoading)(!1)),ue=e.docs[e.docs.length-1]}));return function(){r(),o()}}catch(i){console.error("Error setting up real-time messages: ",i)}}}();return function(){e&&e()}}),[a]);var h=function(){var e=(0,i.default)((function*(e,t){u((0,Q.setActiveChatId)(t)),ge=e,t}));return function(t,n){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){u((0,Q.setActiveChatId)(""))}),[t]);return r.length<1?(0,le.jsx)(F.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:700,alignSelf:"center"},children:t?"No unread messages to show":"No messages to show"})}):(0,le.jsx)(le.Fragment,{children:(0,le.jsx)(I.default,{style:{height:100,borderBottomLeftRadius:5},renderItem:function(e){var t=e.item,n=t.id===a,o=!t.read,i=function(e){var t=new Date,n=e.replace(" at ","T").replace(/\//g,"-"),r=new Date(n),o=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime()===o.getTime())return"This day";var i=new Date;return i.setDate(i.getDate()-i.getDay()+(0===i.getDay()?-6:1)),i.setHours(0,0,0,0),r>=i&&r<o?r.toLocaleDateString("en-US",{weekday:"short"}):r>=new Date((new Date).getFullYear(),0,1)?r.toLocaleDateString("en-US",{month:"short",day:"numeric"}):r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}(t.lastMessageDate);return(0,le.jsx)(Ue,{chatListData:r,item:t,onPress:function(){return h(t.participants.customer,t.id)},isActive:n,messageUnread:o,formattedDate:i})},keyExtractor:function(e){return e.id.toString()},data:r,initialNumToRender:1,maxToRenderPerBatch:10,windowSize:21,onEndReachedThreshold:.05,removeClippedSubviews:!0,ListFooterComponent:function(){return(0,le.jsx)(le.Fragment,{children:!s&&(0,le.jsx)(F.default,{style:{paddingVertical:20,borderTopWidth:1,borderColor:"#DADDE1",height:60},children:l&&(0,le.jsx)(c.default,{animating:!0,size:"sm",color:"#7B9CFF"})})})},onEndReached:function(){var e;if(u((0,Q.setLoadMoreLoading)(!0)),!de)return console.log("No more data to load or globalLastVisible is undefined"),void setTimeout((function(){u((0,Q.setLoadMoreLoading)(!1)),u((0,Q.setNoMoreData)(!0))}),0);if(r.length>=10?1==t?0==n?""===he?(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.where)("keywords","array-contains",he.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):""===he?(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.where)("stepIndicator.value","==",n),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",n),(0,V.where)("read","==",!1),(0,V.where)("keywords","array-contains",he.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):0==n?""===he?(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("keywords","array-contains",he.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):""===he?(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",n),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):(u((0,Q.setLoadMoreLoading)(!0)),u((0,Q.setNoMoreData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",n),(0,V.where)("keywords","array-contains",he.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.startAfter)(de),(0,V.limit)(10))):(u((0,Q.setNoMoreData)(!0)),u((0,Q.setLoadMoreLoading)(!1))),r.length<10)setTimeout((function(){u((0,Q.setLoadMoreLoading)(!1)),u((0,Q.setNoMoreData)(!0))}),0);else try{return(0,V.onSnapshot)(e,(function(e){if(e.empty)return console.log("No more data to load"),void setTimeout((function(){u((0,Q.setLoadMoreLoading)(!1)),u((0,Q.setNoMoreData)(!0)),de=null}),0);var t=[];e.forEach((function(e){t.push(ce({id:e.id},e.data()))})),setTimeout((function(){u((0,Q.setChatListData)([].concat((0,o.default)(r),t))),u((0,Q.setLoadMoreLoading)(!1)),de=e.docs[e.docs.length-1]}),0)}))}catch(i){console.error("Error fetching data from Firebase:",i),setTimeout((function(){return u((0,Q.setLoadMoreLoading)(!1))}),0)}}})})},Ye=function(e){e.lastVisible,e.setLastVisible;var t=e.unreadButtonValue,n=e.activeButtonValue,o=(0,v.useRef)(null),a=(0,v.useState)(""),s=(0,l.default)(a,2),c=s[0],d=s[1],u=(0,v.useState)(""),f=(0,l.default)(u,2),h=f[0],g=f[1],m=(0,$.useDispatch)(),y=function(){var e=(0,i.default)((function*(e){var i,a;(0,r.default)(e);var l=null==(i=o.current)?void 0:i.value;1==t?0==n?""===l?(a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)),m((0,Q.setLoadingModalVisible)(!1))):a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.where)("keywords","array-contains",l.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):""===l?(a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.where)("stepIndicator.value","==",n),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)),m((0,Q.setLoadingModalVisible)(!1))):a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",n),(0,V.where)("read","==",!1),(0,V.where)("keywords","array-contains",l.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):0==n?""===l?(a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)),m((0,Q.setLoadingModalVisible)(!1))):a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("keywords","array-contains",l.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):""===l?(a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",n),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)),m((0,Q.setLoadingModalVisible)(!1))):a=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",n),(0,V.where)("keywords","array-contains",l.toUpperCase()),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10));try{var s=(0,V.onSnapshot)(a,(function(e){var t=[];e.forEach((function(e){t.push(ce({id:e.id},e.data()))})),m((0,Q.setChatListData)(t)),de=e.docs[e.docs.length-1]}));return function(){s&&s()}}catch(c){console.error("Error fetching data from Firebase:",c)}}));return function(t){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){d(""),m((0,Q.setChatListSearchText)("")),he="",o.current.value="",g(!1)}),[n,t]);return(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignItems:"center",width:"100%",alignSelf:"center",borderWidth:1,borderColor:"#D9D9D9",borderRadius:5,margin:10},children:[(0,le.jsx)(M.default,{ref:o,onSubmitEditing:function(){var e;""!==(null==(e=o.current)?void 0:e.value)?(m((0,Q.setChatListSearchText)(o.current.value.trim())),d(o.current.value.trim()),he=o.current.value.trim()):(d(""),he="",""==c&&(m((0,Q.setChatListSearchText)("")),y()))},placeholder:"Search",placeholderTextColor:"#9B9E9F",underlineColorAndroid:"transparent",style:{flex:1,height:40,padding:10,outlineStyle:"none"},onChangeText:function(){return g(!0)},keyboardType:"search"}),h?(0,le.jsx)(B.default,{focusable:!1,onPress:function(){o.current.clear(),g(!1),""!==c&&(d(""),m((0,Q.setChatListSearchText)("")),m((0,Q.setActiveChatId)("")),he="")},style:function(e){return[{borderRadius:10,marginRight:10,opacity:e.pressed?.5:1,backgroundColor:e.hovered?"#ddd":"transparent"}]},children:(0,le.jsx)(R.default,{name:"close",size:20,color:"#000"})}):null]})},_e=function(){var e=(0,v.useState)(!1),t=(0,l.default)(e,2),n=t[0],r=t[1],o=(0,v.useState)(!1),s=(0,l.default)(o,2),c=s[0],f=s[1],h=(0,v.useState)(!1),g=(0,l.default)(h,2),m=g[0],y=g[1],p=function(){r(!1)},x=(0,v.useRef)(null),j=(0,v.useRef)(null),b=(0,v.useRef)(null),D=(0,v.useRef)(null),C=(0,v.useRef)(null),S=(0,v.useRef)(null),w=function(){var e=(0,i.default)((function*(){var e,t,n,r,o,i,l=(0,V.doc)(J.projectExtensionFirestore,"DataForInvoice","BankAccounts"),s=null==(e=x.current)?void 0:e.value,c={bankName:s,branchName:null==(t=j.current)?void 0:t.value,swiftCode:null==(n=b.current)?void 0:n.value,address:null==(r=D.current)?void 0:r.value,accountHolder:null==(o=C.current)?void 0:o.value,accountNumberValue:null==(i=S.current)?void 0:i.value};try{yield(0,V.updateDoc)(l,(0,a.default)({},s,c)),console.log("Element added to the array field"),p()}catch(d){console.error("Error adding element to the array",d)}}));return function(){return e.apply(this,arguments)}}();return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(B.default,{onPress:function(){r(!0)},style:{alignSelf:"center",marginHorizontal:5,marginTop:3},children:(0,le.jsx)(L.default,{name:"plus-circle",size:25,color:"#16A34A"})}),(0,le.jsx)(u.Modal,{isOpen:n,onClose:p,useRNModal:!0,children:(0,le.jsxs)(u.Modal.Content,{children:[(0,le.jsx)(u.Modal.Header,{children:"Add Bank Account"}),(0,le.jsx)(u.Modal.Body,{children:(0,le.jsxs)(F.default,{style:{height:"100%",flex:1},children:[(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{width:"35%",fontWeight:700,margin:3},children:"Bank Name:"}),(0,le.jsx)(M.default,{ref:x,placeholderTextColor:"#9B9E9F",placeholder:"Bank Name",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{width:"35%",fontWeight:700,margin:3},children:"Branch Name:"}),(0,le.jsx)(M.default,{ref:j,placeholderTextColor:"#9B9E9F",placeholder:"Branch Name",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{width:"35%",fontWeight:700,margin:3},children:"SWIFTCODE:"}),(0,le.jsx)(M.default,{ref:b,placeholderTextColor:"#9B9E9F",placeholder:"SWIFTCODE",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{width:"35%",fontWeight:700,margin:3},children:"Address:"}),(0,le.jsx)(M.default,{ref:D,placeholderTextColor:"#9B9E9F",placeholder:"Address",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{width:"35%",fontWeight:700,margin:3},children:"Account Holder:"}),(0,le.jsx)(M.default,{ref:C,placeholderTextColor:"#9B9E9F",placeholder:"Account Holder",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{width:"35%",fontWeight:700,margin:3},children:"Account Number:"}),(0,le.jsx)(M.default,{ref:S,placeholderTextColor:"#9B9E9F",placeholder:"Account Number",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]})]})}),(0,le.jsx)(u.Modal.Footer,{children:(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,le.jsx)(B.default,{style:{width:100,padding:5,borderRadius:3,backgroundColor:c?"#686868":"#525252"},onHoverIn:function(){return f(!0)},onHoverOut:function(){return f(!1)},onPress:p,children:(0,le.jsx)(d.default,{style:{fontWeight:500,textAlign:"center",color:"white"},children:"Cancel"})}),(0,le.jsx)(B.default,{onPress:w,style:{width:100,padding:5,borderRadius:3,backgroundColor:m?"#1B8B5A":"#16A34A"},onHoverIn:function(){return y(!0)},onHoverOut:function(){return y(!1)},children:(0,le.jsx)(d.default,{style:{fontWeight:500,textAlign:"center",color:"white"},children:"Add"})})]})})]})})]})},Je=function(){var e=(0,$.useSelector)((function(e){return e.currentDate})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useState)(""),r=(0,l.default)(n,2),o=r[0],i=r[1],s=(0,v.useState)({}),c=(0,l.default)(s,2),f=c[0],h=c[1],y=(0,v.useState)(t&&Object.keys(t).length>0&&t.bankInformations.bankAccount.bankName?t.bankInformations.bankAccount.bankName:"SUMITOMO MITSUI BANKING CORPORATION"),p=(0,l.default)(y,2),x=p[0],j=p[1],b=(0,v.useRef)(null);(0,v.useRef)(null);(0,v.useEffect)((function(){if(e){var n,r=new Date(e),o=r.getDay();5===o?r.setDate(r.getDate()+3):6===o?r.setDate(r.getDate()+2):r.setDate(r.getDate()+1);var a=r.toISOString().split("T")[0];i(t&&Object.keys(t).length>0&&t.bankInformations.dueDate?t.bankInformations.dueDate:a),Fe.bankInformations.dueDate=t&&Object.keys(t).length>0&&t.bankInformations.dueDate?t.bankInformations.dueDate:a,Fe.bankInformations.paymentTerms=t&&Object.keys(t).length>0&&t.bankInformations.paymentTerms?t.bankInformations.paymentTerms:null==(n=b.current)?void 0:n.value,Fe.bankInformations.issuingDate=t&&Object.keys(t).length>0&&t.bankInformations.issuingDate?t.bankInformations.issuingDate:e}!function(){var e=(0,V.doc)(J.projectExtensionFirestore,"DataForInvoice","BankAccounts");(0,V.onSnapshot)(e,(function(e){if(e.exists()){var t=e.data(),n={};Object.entries(t).forEach((function(e){var t=(0,l.default)(e,2),r=(t[0],t[1]);r.bankName&&(n[r.bankName]=r)})),console.log(n),h(n),Fe.bankInformations.bankAccount=n["SUMITOMO MITSUI BANKING CORPORATION"],console.log(n["SUMITOMO MITSUI BANKING CORPORATION"])}else console.log("No such document!")}),(function(e){console.error("Error fetching document",e)}))}()}),[e]);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"20%",fontWeight:700,margin:3},children:"Due Date:"}),(0,le.jsx)((function(e){var t=e.selectedDate,n=e.setSelectedDate,r=(e.currentDate,(0,v.useState)(!1)),o=(0,l.default)(r,2),i=o[0],s=o[1],c=function(){s(!0)},d=function(){s(!1)};return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(B.default,{style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"},onPress:c,children:(0,le.jsx)(M.default,{value:t,onFocus:c})}),(0,le.jsxs)(u.Modal,{isOpen:i,onClose:d,useRNModal:!0,children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Content,{children:(0,le.jsx)(F.default,{style:{height:"100%",flex:1},children:(0,le.jsx)(K.Calendar,{onDayPress:(0,v.useCallback)((function(e){n(e.dateString),e.dateString,Fe.bankInformations.dueDate=e.dateString,d()}),[]),markedDates:(0,a.default)({},t,{selected:!0,disableTouchEvent:!0,selectedDotColor:"#7b9cff"}),renderArrow:function(e){return"left"===e?(0,le.jsx)(R.default,{name:"arrow-back-ios",color:"#7b9cff"}):(0,le.jsx)(R.default,{name:"arrow-forward-ios",color:"#7b9cff"})},enableSwipeMonths:!0,initialDate:t,showSixWeeks:!0})})})]})]})}),{currentDate:e,selectedDate:o,setSelectedDate:i})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2,marginVertical:10},children:[(0,le.jsx)(d.default,{style:{width:"20%",fontWeight:700,margin:3},children:"Bank Account: "}),(0,le.jsx)(g.default,{selectedValue:x,onValueChange:function(e){var t=f[e];j(e),Fe.bankInformations.bankAccount=t},bgColor:"#FAFAFA",accessibilityLabel:"Choose Country",placeholder:"---",_selectedItem:{bg:"teal.600",endIcon:(0,le.jsx)(m.CheckIcon,{})},height:9,width:300,style:{marginLeft:10,marginRight:10,paddingLeft:1},children:Object.keys(f).map((function(e){return(0,le.jsx)(g.default.Item,{label:e,value:e},e)}))}),(0,le.jsx)(_e,{})]}),(0,le.jsxs)(F.default,{style:{flex:3,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"20%",fontWeight:700,margin:3},children:"Payment Terms:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.bankInformations.paymentTerms=e},ref:b,multiline:!0,defaultValue:t&&Object.keys(t).length>0&&t.bankInformations.paymentTerms?t.bankInformations.paymentTerms:"Full payment via Telegraphic Transfer (T/T) required before the due date.",placeholderTextColor:"#9B9E9F",placeholder:"Email",style:{width:"60%",height:75,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]})]})},qe=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useRef)(null),r=(0,v.useRef)(null),o=(0,v.useRef)(null),i=(0,v.useRef)(null),a=(0,v.useState)("0"),s=(0,l.default)(a,2),c=s[0],u=s[1],f=(0,v.useState)(t&&Object.keys(t).length>0&&t.paymentDetails.incoterms?t.paymentDetails.incoterms:e.insurance?"CIF":"C&F"),h=(0,l.default)(f,2),p=h[0],x=h[1],j=(0,v.useState)(t&&Object.keys(t).length>0&&t.paymentDetails.inspectionIsChecked?t.paymentDetails.inspectionIsChecked:e.inspection),b=(0,l.default)(j,2),D=b[0],C=b[1],S=(0,v.useState)(t&&Object.keys(t).length>0&&t.paymentDetails.inspectionName?t.paymentDetails.inspectionName:e.inspectionName),w=(0,l.default)(S,2),A=w[0],I=(w[1],(0,v.useState)(t&&Object.keys(t).length>0&&t.paymentDetails.warrantyIsCheck?t.paymentDetails.warrantyIsCheck:e.warranty)),W=(0,l.default)(I,2),B=W[0],k=(W[1],t&&Object.keys(t).length>0&&t.paymentDetails.warrantyPrice&&t.paymentDetails.warrantyPrice&&t.paymentDetails.warrantyPrice,(0,v.useRef)(null)),P=(0,v.useRef)(null),z=function(e){var t=Number(e.replace(/,/g,""));return isNaN(t)?0:t},E=function(){var e,t,a,l,s=z(null==(e=n.current)?void 0:e.value),c=z(null==(t=r.current)?void 0:t.value),d=z(null==(a=o.current)?void 0:a.value),f=z(null==(l=i.current)?void 0:l.value),h=xe.reduce((function(e,t){return e+z(t)}),0),g=Math.round(s+c+d+f+h).toLocaleString();u(g),Fe.paymentDetails.totalAmount=g};(0,v.useEffect)((function(){var e,o,a;k.current.value=t&&Object.keys(t).length>0&&t.paymentDetails.additionalName?t.paymentDetails.additionalName.join("\n"):"",P.current.value=t&&Object.keys(t).length>0&&t.paymentDetails.additionalPrice?t.paymentDetails.additionalPrice.join("\n"):"",Fe.paymentDetails.incoterms=t&&Object.keys(t).length>0&&t.paymentDetails.incoterms?t.paymentDetails.incoterms:p,Fe.paymentDetails.inspectionIsChecked=t&&Object.keys(t).length>0&&t.paymentDetails.inspectionIsChecked?t.paymentDetails.inspectionIsChecked:D,Fe.paymentDetails.inspectionName=t&&Object.keys(t).length>0&&t.paymentDetails.inspectionName?t.paymentDetails.inspectionName:A,Fe.paymentDetails.inspectionPrice=t&&Object.keys(t).length>0&&t.paymentDetails.inspectionPrice?t.paymentDetails.inspectionPrice:D?300:0,Fe.paymentDetails.warrantyIsCheck=t&&Object.keys(t).length>0&&t.paymentDetails.warrantyIsCheck?t.paymentDetails.warrantyIsCheck:B,Fe.paymentDetails.fobPrice=t&&Object.keys(t).length>0&&t.paymentDetails.fobPrice?t.paymentDetails.fobPrice:null==(e=n.current)?void 0:e.value,Fe.paymentDetails.freightPrice=t&&Object.keys(t).length>0&&t.paymentDetails.freightPrice?t.paymentDetails.freightPrice:null==(o=r.current)?void 0:o.value,Fe.paymentDetails.insurancePrice=t&&Object.keys(t).length>0&&t.paymentDetails.insurancePrice?t.paymentDetails.insurancePrice:"CIF"==p?null==(a=i.current)?void 0:a.value:0,Fe.paymentDetails.additionalPrice=t&&Object.keys(t).length>0&&t.paymentDetails.additionalPrice?t.paymentDetails.additionalPrice:[],Fe.paymentDetails.additionalName=t&&Object.keys(t).length>0&&t.paymentDetails.additionalName?t.paymentDetails.additionalName:[],xe=t&&Object.keys(t).length>0&&t.paymentDetails.additionalPrice?t.paymentDetails.additionalPrice:[],E()}),[]),(0,v.useEffect)((function(){o.current.value=t&&Object.keys(t).length>0&&t.paymentDetails.inspectionPrice&&1==t.paymentDetails.inspectionPrice?t.paymentDetails.inspectionPrice:D?300:0,E()}),[D]),(0,v.useEffect)((function(){i.current.value=t&&Object.keys(t).length>0&&t.paymentDetails.insurancePrice&&"CIF"==t.paymentDetails.incoterms?t.paymentDetails.insurancePrice:"CIF"==p?50:0,r.current.value=t&&Object.keys(t).length>0&&t.paymentDetails.freightPrice?t.paymentDetails.freightPrice:"FOB"==p?0:R,E()}),[p]),(0,v.useEffect)((function(){E()}),[B]);var R=((e.m3?e.m3:e.carData&&e.carData.dimensionCubicMeters?e.carData.dimensionCubicMeters:0)*Number(e.freightPrice)).toFixed(2),T=(((e.fobPrice?e.fobPrice:(e.carData&&e.carData.fobPrice?e.carData.fobPrice:0)*(e.jpyToUsd?e.jpyToUsd:e.currency&&e.currency.jpyToUsd?e.currency.jpyToUsd:0))+parseFloat(R)).toFixed(2),(e.fobPrice?e.fobPrice:(e.carData&&e.carData.fobPrice?e.carData.fobPrice:0)*(e.jpyToUsd?e.jpyToUsd:e.currency&&e.currency.jpyToUsd?e.currency.jpyToUsd:0)).toFixed(2));return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",margin:2,alignSelf:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:16,margin:3,color:"#16A34A"},children:"Payment Details"})}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Incoterms:"}),(0,le.jsxs)(g.default,{selectedValue:p,onValueChange:function(e){return x(e)},bgColor:"#FAFAFA",accessibilityLabel:"Choose Country",placeholder:"---",_selectedItem:{bg:"teal.600",endIcon:(0,le.jsx)(m.CheckIcon,{})},height:9,style:{marginLeft:10,marginRight:10,paddingLeft:1},children:[(0,le.jsx)(g.default.Item,{label:"C&F",value:"C&F"},"C&F"),(0,le.jsx)(g.default.Item,{label:"CIF",value:"CIF"},"CIF"),(0,le.jsx)(g.default.Item,{label:"FOB",value:"FOB"},"FOB")]}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"Rate: "}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3,color:"#16A34A"},children:e.currency&&e.currency.usdToJpy?Number(e.currency.usdToJpy).toFixed(2):"0.00"})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2,marginTop:10},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Inspection:"}),(0,le.jsx)(y.Checkbox,{isChecked:D,onChange:function(e){C(e),Fe.paymentDetails.inspectionIsChecked=e},style:{margin:2,borderColor:"#0A9FDC"},size:"sm",_text:{fontWeight:700}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"FOB Price:"}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:1,paddingTop:1},children:"$"}),(0,le.jsx)(M.default,{onChangeText:function(e){var t=e.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");n.current.value=t,Fe.paymentDetails.fobPrice=t,E()},ref:n,defaultValue:t&&Object.keys(t).length>0?t.paymentDetails.fobPrice:"FOB"==p?0:T,placeholderTextColor:"#9B9E9F",placeholder:"FOB Price",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Freight:"}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:1,paddingTop:1},children:"$"}),(0,le.jsx)(M.default,{onChangeText:function(e){var t=e.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");r.current.value=t,Fe.paymentDetails.freightPrice=t,E()},ref:r,defaultValue:R,placeholderTextColor:"#9B9E9F",placeholder:"Freight",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2,display:"CIF"==p?"flex":"none"},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Insurance:"}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:1,paddingTop:1},children:"$"}),(0,le.jsx)(M.default,{onChangeText:function(e){var t=e.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");i.current.value=t,Fe.paymentDetails.insurancePrice=t,E()},ref:i,defaultValue:50,placeholderTextColor:"#9B9E9F",placeholder:"Insurance",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2,display:D?"flex":"none"},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Inspection:"}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:1,paddingTop:1},children:"$"}),(0,le.jsx)(M.default,{onChangeText:function(e){var t=e.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");o.current.value=t,Fe.paymentDetails.inspectionPrice=t,E()},ref:o,placeholderTextColor:"#9B9E9F",placeholder:"Inspection ["+e.inspectionName+"]",style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}}),(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3,color:"#16A34A"},children:"["+e.inspectionName+"]"})]}),(0,le.jsxs)(F.default,{style:{flex:3,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Additional:"}),(0,le.jsx)(M.default,{ref:k,onChangeText:function(e){k.current.value=e;var t=e.split("\n");Fe.paymentDetails.additionalName=t},multiline:!0,placeholderTextColor:"#9B9E9F",placeholder:"Name",style:{width:"60%",height:75,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}}),(0,le.jsx)(M.default,{ref:P,onChangeText:function(e){var t=e.split("\n").map((function(e){var t=e.replace(/[^0-9.]/g,""),n=t.split(".");return n.length>2&&(t=n[0]+"."+n[1]),t}));P.current.value=t.join("\n"),xe=t,Fe.paymentDetails.additionalPrice=t,E()},multiline:!0,placeholderTextColor:"#9B9E9F",placeholder:"Price",style:{width:"60%",height:75,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center"}}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2,alignItems:"center"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"Total Amount:"}),(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:18,margin:3,color:"#FF0000"},children:"$"+c})]})]})},Ge=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useState)([]),r=(0,l.default)(n,2),o=r[0],a=(r[1],(0,v.useState)({})),s=(0,l.default)(a,2),c=s[0],d=s[1],u=(0,v.useState)([]),f=(0,l.default)(u,2),h=f[0],y=f[1],p=(0,v.useState)(""),x=(0,l.default)(p,2),j=x[0],b=x[1],D=(0,v.useState)(t&&Object.keys(t).length>0?t.discharge.country:e.country),C=(0,l.default)(D,2),S=C[0],w=(C[1],(0,v.useState)(t&&Object.keys(t).length>0?t.discharge.port:e.port)),F=(0,l.default)(w,2),A=F[0],I=F[1];return(0,v.useEffect)((function(){console.log(t&&Object.keys(t).length>0?t.discharge.port:e.port);var n=function(){var e=(0,i.default)((function*(){var e=(0,V.doc)(J.projectExtensionFirestore,"CustomerCountryPort","PortsDoc");try{var t=yield(0,V.getDoc)(e);if(t.exists()){var n=t.data(),r=Object.keys(n).map((function(e){return ce({name:e.replace(/_/g,".")},n[e])})).sort((function(e,t){return e.sortOrder-t.sortOrder}));y(r)}else console.log("No such document!")}catch(o){console.error("Error fetching document:",o)}}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,i.default)((function*(){var e=(0,V.doc)(J.projectExtensionFirestore,"CustomerCountryPort","PortsDoc");try{var t=yield(0,V.getDoc)(e);if(t.exists()){var n=t.data();d(n)}else console.log("No such document!")}catch(r){console.error("Error fetching document:",r)}}));return function(){return e.apply(this,arguments)}}();n(),r(),Fe.discharge.port=t&&Object.keys(t).length>0&&t.discharge.port?t.discharge.port:A,Fe.discharge.country=t&&Object.keys(t).length>0&&t.discharge.country?t.discharge.country:j}),[]),(0,v.useEffect)((function(){var e=o.find((function(e){return e.name===S}));e&&e.nearestPorts?y(e.nearestPorts):y([])}),[S,o]),(0,v.useEffect)((function(){var e=c[A];e&&e.country?(b(e.country),Fe.discharge.country=e.country):(b(""),console.log("Not found"))}),[A,c]),(0,le.jsx)(le.Fragment,{children:(0,le.jsx)(g.default,{selectedValue:A,onValueChange:function(e){I(e),Fe.discharge.port=e},bgColor:"#FAFAFA",accessibilityLabel:"Choose Port",placeholder:"Select port",_selectedItem:{bg:"teal.600",endIcon:(0,le.jsx)(m.CheckIcon,{})},style:{marginLeft:10,marginRight:10,paddingLeft:1},children:h.map((function(e,t){return(0,le.jsx)(g.default.Item,{label:e.name,value:e.name},t)}))})})},Ze=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useState)(t&&Object.keys(t).length>0?t.salesPerson:e.carData&&e.carData.sales?e.carData.sales:""),r=(0,l.default)(n,2),o=r[0],i=r[1],a=(0,$.useSelector)((function(e){return e.salesData}));return(0,v.useEffect)((function(){Fe.salesPerson=t&&Object.keys(t).length>0&&t.salesPerson?t.salesPerson:e.carData&&e.carData.sales?e.carData.sales:""}),[]),(0,le.jsx)(g.default,{selectedValue:o,onValueChange:function(e){i(e),Fe.salesPerson=e},bgColor:"#FAFAFA",accessibilityLabel:"---",placeholder:"---",_selectedItem:{bg:"teal.600",endIcon:(0,le.jsx)(m.CheckIcon,{})},style:{marginLeft:10,marginRight:10,paddingLeft:1},children:a.map((function(e){return(0,le.jsx)(g.default.Item,{label:e.name,value:e.name},e.id)}))})},Xe=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,$.useSelector)((function(e){return e.portData})),r=((0,$.useSelector)((function(e){return e.salesData})),(0,v.useState)(t&&Object.keys(t).length>0?t.departurePort:e.carData&&e.carData.port?e.carData.port:"")),o=(0,l.default)(r,2),i=o[0],a=o[1];return(0,v.useEffect)((function(){Fe.departurePort=t&&Object.keys(t).length>0&&t.departurePort?t.departurePort:e.carData&&e.carData.port?e.carData.port:"",Fe.departureCountry=t&&Object.keys(t).length>0&&t.departureCountry?t.departureCountry:"Japan"}),[]),(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(g.default,{selectedValue:"Japan",onValueChange:function(e){Fe.departureCountry=e},bgColor:"#FAFAFA",flex:1,accessibilityLabel:"---",placeholder:"---",_selectedItem:{bg:"teal.600",endIcon:(0,le.jsx)(m.CheckIcon,{})},style:{marginLeft:10,marginRight:10,paddingLeft:1},children:(0,le.jsx)(g.default.Item,{label:"Japan",value:"Japan"},"Japan")}),(0,le.jsx)(g.default,{selectedValue:i,onValueChange:function(e){a(e),Fe.departurePort=e},bgColor:"#FAFAFA",flex:1,accessibilityLabel:"---",placeholder:"---",_selectedItem:{bg:"teal.600",endIcon:(0,le.jsx)(m.CheckIcon,{})},style:{marginLeft:10,marginRight:10,paddingLeft:1},children:n.map((function(e){return(0,le.jsx)(g.default.Item,{label:e.name,value:e.name},e.id)}))})]})},$e=function(e){e.accountData,e.setAccountData;var t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useState)(!(t&&Object.keys(t).length>0)||t.notifyParty.sameAsConsignee),r=(0,l.default)(n,2),o=r[0],i=r[1],a=(0,v.useRef)(null),s=(0,v.useRef)(null),c=(0,v.useRef)(null),u=(0,v.useRef)(null),f=(0,v.useRef)(null),h=(0,v.useRef)(null),g=(0,v.useRef)(null);return(0,v.useEffect)((function(){var e,n,r,i,l,d,m;a.current.value=t&&Object.keys(t).length>0&&t.notifyParty.name?t.notifyParty.name:"",s.current.value=t&&Object.keys(t).length>0&&t.notifyParty.address?t.notifyParty.address:"",c.current.value=t&&Object.keys(t).length>0&&t.notifyParty.city?t.notifyParty.city:"",u.current.value=t&&Object.keys(t).length>0&&t.notifyParty.country?t.notifyParty.country:"",f.current.value=t&&Object.keys(t).length>0&&t.notifyParty.contactNumber?t.notifyParty.contactNumber:"",h.current.value=t&&Object.keys(t).length>0&&t.notifyParty.fax?t.notifyParty.fax:"",g.current.value=t&&Object.keys(t).length>0&&t.notifyParty.email?t.notifyParty.email:"",Fe.notifyParty.name=t&&Object.keys(t).length>0&&t.notifyParty.name?t.notifyParty.name:null==(e=a.current)?void 0:e.value,Fe.notifyParty.address=t&&Object.keys(t).length>0&&t.notifyParty.address?t.notifyParty.address:null==(n=s.current)?void 0:n.value,Fe.notifyParty.city=t&&Object.keys(t).length>0&&t.notifyParty.city?t.notifyParty.city:null==(r=c.current)?void 0:r.value,Fe.notifyParty.country=t&&Object.keys(t).length>0&&t.notifyParty.country?t.notifyParty.country:null==(i=u.current)?void 0:i.value,Fe.notifyParty.contactNumber=t&&Object.keys(t).length>0&&t.notifyParty.contactNumber?t.notifyParty.contactNumber:null==(l=f.current)?void 0:l.value,Fe.notifyParty.fax=t&&Object.keys(t).length>0&&t.notifyParty.fax?t.notifyParty.fax:null==(d=h.current)?void 0:d.value,Fe.notifyParty.email=t&&Object.keys(t).length>0&&t.notifyParty.email?t.notifyParty.email:null==(m=g.current)?void 0:m.value,Fe.notifyParty.sameAsConsignee=t&&Object.keys(t).length>0&&t.notifyParty.sameAsConsignee?t.notifyParty.sameAsConsignee:o}),[]),(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center"}}),(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",margin:2,alignSelf:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:16,margin:3,color:"#FF0000"},children:"Notify Party"})}),(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",margin:5},children:(0,le.jsx)(y.Checkbox,{isChecked:o,onChange:function(e){i(e),Fe.consignee.sameAsBuyer=e},style:{margin:2,borderColor:"#0A9FDC"},size:"sm",_text:{fontWeight:700},children:"Same as consignee"})}),(0,le.jsxs)(F.default,{style:{display:o?"none":"flex"},children:[(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Name:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.name=e},ref:a,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Name",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Address:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.address=e},ref:s,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Address",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"City:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.city=e},ref:c,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"City",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Country:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.country=e},ref:u,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Country",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:3,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Contact Number:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.contactNumber=e},ref:f,disabled:o,multiline:!0,placeholderTextColor:"#9B9E9F",placeholder:"Contact Number",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:75,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"FAX:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.fax=e},ref:h,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"FAX",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Email:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.notifyParty.email=e},ref:g,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Email",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]})]}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center"}})]})},Ke=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useState)(!(t&&Object.keys(t).length>0)||t.consignee.sameAsBuyer),r=(0,l.default)(n,2),o=r[0],a=r[1],s=(0,v.useState)({}),c=(0,l.default)(s,2),u=c[0],f=c[1],h=(0,v.useRef)(null),g=(0,v.useRef)(null),m=(0,v.useRef)(null),p=(0,v.useRef)(null),x=(0,v.useRef)(null),j=(0,v.useRef)(null),b=(0,v.useRef)(null);return(0,v.useEffect)((function(){var n=function(){var n=(0,i.default)((function*(){if(e.participants||!e.participants.customer){var n=(0,V.doc)(J.projectExtensionFirestore,"accounts",e.participants.customer);try{var r=yield(0,V.getDoc)(n);if(r.exists()){var i=r.data();f(r.data()),h.current.value=t&&Object.keys(t).length>0&&t.consignee.name?t.consignee.name:(i.textFirst?i.textFirst:"")+" "+(i.textLast?i.textLast:""),g.current.value=t&&Object.keys(t).length>0&&t.consignee.address?t.consignee.address:(i.textStreet?i.textStreet:"")+" "+(i.textZip?i.textZip:""),m.current.value=t&&Object.keys(t).length>0&&t.consignee.city?t.consignee.city:""+(i.city?i.city:""),p.current.value=t&&Object.keys(t).length>0&&t.consignee.country?t.consignee.country:""+(i.country?i.country:""),x.current.value=t&&Object.keys(t).length>0&&t.consignee.contactNumber?t.consignee.contactNumber:""+(i.textPhoneNumber?i.textPhoneNumber:""),j.current.value=t&&Object.keys(t).length>0&&t.consignee.fax?t.consignee.fax:""+(i.fax?i.fax:""),b.current.value=t&&Object.keys(t).length>0&&t.consignee.email?t.consignee.email:""+(i.textEmail?i.textEmail:""),Fe.consignee.name=t&&Object.keys(t).length>0&&t.consignee.name?t.consignee.name:(i.textFirst?i.textFirst:"")+" "+(i.textLast?i.textLast:""),Fe.consignee.address=t&&Object.keys(t).length>0&&t.consignee.address?t.consignee.address:(i.textStreet?i.textStreet:"")+" "+(i.textZip?i.textZip:""),Fe.consignee.city=t&&Object.keys(t).length>0&&t.consignee.city?t.consignee.city:""+(i.city?i.city:""),Fe.consignee.country=t&&Object.keys(t).length>0&&t.consignee.country?t.consignee.country:""+(i.country?i.country:""),Fe.consignee.contactNumber=t&&Object.keys(t).length>0&&t.consignee.contactNumber?t.consignee.contactNumber:""+(i.textPhoneNumber?i.textPhoneNumber:""),Fe.consignee.fax=t&&Object.keys(t).length>0&&t.consignee.fax?t.consignee.fax:""+(i.fax?i.fax:""),Fe.consignee.email=t&&Object.keys(t).length>0&&t.consignee.email?t.consignee.email:""+(i.textEmail?i.textEmail:""),Fe.consignee.sameAsBuyer=t&&Object.keys(t).length>0&&t.consignee.sameAsBuyer?t.consignee.sameAsBuyer:o}else console.log("No such document!"),f(null)}catch(a){console.error("Error fetching document:",a)}}}));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,v.useEffect)((function(){o&&(h.current.value=(u.textFirst?u.textFirst:"")+" "+(u.textLast?u.textLast:""),g.current.value=(u.textStreet?u.textStreet:"")+" "+(u.textZip?u.textZip:""),m.current.value=""+(u.city?u.city:""),p.current.value=""+(u.country?u.country:""),x.current.value=""+(u.textPhoneNumber?u.textPhoneNumber:""),j.current.value=""+(u.fax?u.fax:""),b.current.value=""+(u.textEmail?u.textEmail:""))}),[o]),(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",margin:2,alignSelf:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:16,margin:3,color:"#0A78BE"},children:"Consignee"})}),(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",margin:5},children:(0,le.jsx)(y.Checkbox,{isChecked:o,onChange:function(e){Fe.consignee.sameAsBuyer=e,a(e)},style:{margin:2,borderColor:"#0A9FDC"},size:"sm",_text:{fontWeight:700},children:"Same as buyer"})}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Name:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.name=e},ref:h,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Name",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Address:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.address=e},ref:g,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Address",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"City:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.city=e},ref:m,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"City",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Country:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.country=e},ref:p,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Country",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:3,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Contact Number:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.contactNumber=e},ref:x,disabled:o,multiline:!0,placeholderTextColor:"#9B9E9F",placeholder:"Contact Number",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:75,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"FAX:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.fax=e},ref:j,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"FAX",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"15%",fontWeight:700,margin:3},children:"Email:"}),(0,le.jsx)(M.default,{onChangeText:function(e){Fe.consignee.email=e},ref:b,disabled:o,placeholderTextColor:"#9B9E9F",placeholder:"Email",style:{backgroundColor:o?"#F1F1F1":"default",width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"}})]}),(0,le.jsx)($e,{accountData:u,setAccountData:f})]})},Qe=function(){var e=(0,$.useDispatch)(),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,$.useSelector)((function(e){return e.selectedChatData})),r=(0,$.useSelector)((function(e){return e.selectedCustomerData})),a=(0,v.useState)(!1),s=(0,l.default)(a,2),f=s[0],h=s[1],g=(0,v.useState)(!1),m=(0,l.default)(g,2),y=m[0],x=m[1],j=t.paymentDetails.totalAmount,b=parseFloat(j.replace(/,/g,"")),D=(0,v.useRef)(null),C=function(){var e=(0,i.default)((function*(){var e=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,t=_()(e).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),r=(_()(e).format("YYYY"),_()(e).format("MM"),_()(e).format("MM/DD"),_()(e).format("YYYY/MM/DD"),_()(e).format("DD"),_()(e).format("HH:mm"),_()(e).format("HH:mm:ss"),J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"");try{yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",n.id,"messages"),{text:"Full Payment Received\n\nDear Customer,\n\nI hope this message finds you well. \n\nWe are writing to confirm that we have received your full payment. \n\nThank you for settling your account promptly.\n\nShould you have any further questions or require assistance, please feel free to contact us.\n                \nBest regards,\nReal Motor Japan",sender:r,timestamp:t,messageType:"InputPayment",ip:Se,ipCountry:we}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",n.id),{lastMessageSender:r,lastMessage:"Full Payment Received\n\nDear Customer,\n\nI hope this message finds you well. \n\nWe are writing to confirm that we have received your full payment. \n                \nThank you for settling your account promptly.\n                \nShould you have any further questions or require assistance, please feel free to contact us.\n                                \nBest regards,\nReal Motor Japan",lastMessageDate:t,customerRead:!1,read:!0,readBy:[r]})}catch(o){console.error("Error adding document: ",o)}}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.default)((function*(e){var t=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,r=_()(t).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),o=(_()(t).format("YYYY"),_()(t).format("MM"),_()(t).format("MM/DD"),_()(t).format("YYYY/MM/DD"),_()(t).format("DD"),_()(t).format("HH:mm"),_()(t).format("HH:mm:ss"),J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"");try{yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",n.id,"messages"),{text:"Dear Customer,\n\nGood day! \n\nWe're writing to inform you about your account with us at Real Motor Japan.\n                \nYou have an extra overbalance in your account.\n\nAmount: $"+e+"\n                \nFeel free to contact us if you have any questions. We're here to help.\n                \nBest regards,\nReal Motor Japan",sender:o,timestamp:r,messageType:"InputPayment",ip:Se,ipCountry:we}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",n.id),{lastMessageSender:o,lastMessage:"Dear Customer,\n\nGood day! \n                \nWe're writing to inform you about your account with us at Real Motor Japan.\n                                \nYou have an extra overbalance in your account.\n                \nAmount: $"+e+"\n                                \nFeel free to contact us if you have any questions. We're here to help.\n                                \nBest regards,\nReal Motor Japan",lastMessageDate:r,customerRead:!1,read:!0,readBy:[o]})}catch(i){console.error("Error adding document: ",i)}}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.default)((function*(e,t){var r=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,o=_()(r).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),i=(_()(r).format("YYYY"),_()(r).format("MM"),_()(r).format("MM/DD"),_()(r).format("YYYY/MM/DD"),_()(r).format("DD"),_()(r).format("HH:mm"),_()(r).format("HH:mm:ss"),J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"");try{yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",n.id,"messages"),{text:"\ud83c\udf1f Payment Confirmation Alert \ud83c\udf1f\n\nDear Customer! \ud83d\udc4b\n\nWe're thrilled to inform you that your recent payment has been successfully reflected in our bank account.\n\nYour prompt and efficient transaction is greatly appreciated! \ud83c\udf89\n\n\ud83d\udd0d Payment Details:\n\nAmount: $"+e+"\nTransaction Date: "+t+"\n\nYour account and services are now fully up-to-date. If you have any further questions or require assistance, feel free to reach out.\n\nThank you for your continued trust in us.\nLooking forward to serving you more in the future! \ud83d\ude0a\n\nBest regards,\nReal Motor Japan",sender:i,timestamp:o,messageType:"InputPayment",ip:Se,ipCountry:we}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",n.id),{lastMessageSender:i,lastMessage:"\ud83c\udf1f Payment Confirmation Alert \ud83c\udf1f\n\nDear Customer! \ud83d\udc4b\n\nWe're thrilled to inform you that your recent payment has been successfully reflected in our bank account.\n\nYour prompt and efficient transaction is greatly appreciated! \ud83c\udf89\n\n\ud83d\udd0d Payment Details:\n\nAmount: $"+e+"\nTransaction Date: "+t+"\n\nYour account and services are now fully up-to-date. If you have any further questions or require assistance, feel free to reach out.\n\nThank you for your continued trust in us.\nLooking forward to serving you more in the future! \ud83d\ude0a\n\nBest regards,\nReal Motor Japan",lastMessageDate:o,customerRead:!1,read:!0,readBy:[i]})}catch(a){console.error("Error adding document: ",a)}}));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var o=(0,i.default)((function*(){x(!0);var o=t.paymentDetails.totalAmount?t.paymentDetails.totalAmount.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1")-I:"",i=(0,V.doc)(J.projectExtensionFirestore,"chats",n.id),a=(0,V.doc)(J.projectExtensionFirestore,"accounts",n.participants.customer),l=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,s=_()(l).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),c=[{value:D.current.value,date:s}],d=[{value:D.current.value,date:s,vehicleRef:n.carData.referenceNumber,vehicleName:n.carData.carName}],u=D.current.value,f=Number(u),h=f.toLocaleString(),g=function(e){return new Promise((function(t){return setTimeout(t,e)}))};if(""!==u&&"0"!==u)try{if(u.startsWith("-"))console.error("Negative value entered");else{if(yield w(h,s),yield g(10),f>=o){if(yield C(),yield g(10),f>o){var m=f-o;m>0&&(yield S(r.overBalance?r.overBalance+m:""),yield g(10),yield(0,V.updateDoc)(a,{overBalance:(0,V.increment)(m)}))}yield(0,V.updateDoc)(i,{"stepIndicator.value":4,"stepIndicator.status":"Payment Confirmed"})}else console.log("Partial payment received");yield(0,V.updateDoc)(i,{payments:V.arrayUnion.apply(void 0,c)}),yield(0,V.updateDoc)(a,{paymentsHistory:V.arrayUnion.apply(void 0,d)})}}catch(y){console.error("Error processing payment: ",y)}finally{x(!1),e((0,Q.setTransactionModalVisible)(!1))}else x(!1)}));return function(){return o.apply(this,arguments)}}(),I=n.payments?n.payments.reduce((function(e,t){var n=Number(t.value);return e+(isNaN(n)?0:n)}),0):0,k=Number(I)<Number(t.paymentDetails.totalAmount.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"))?Number(I).toLocaleString():t.paymentDetails.totalAmount;return(0,le.jsxs)(F.default,{style:{flex:1},children:[(0,le.jsxs)(F.default,{style:{marginLeft:5},children:[(0,le.jsx)(d.default,{style:{fontWefight:700,fontSize:14},children:"Total Paid:"}),(0,le.jsx)(p.default,{w:"300",shadow:2,value:Number(I),max:b,_filledTrack:{bg:"lime.500"}}),(0,le.jsxs)(d.default,{style:{fontWeight:700,fontSize:14,color:"#FF0000"},children:["$",k,(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:14,color:"#8D7777"},children:" out of "}),(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:14,color:"#16A34A"},children:"$"+t.paymentDetails.totalAmount})]})]}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center",margin:2}}),(0,le.jsx)(F.default,{style:{marginLeft:5},children:(0,le.jsx)(B.default,{onPress:function(){h(!0)},style:{width:"fit-content"},children:(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:14,color:"#0A78BE"},underline:!0,selectable:!1,children:"Payments History"})})}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center",margin:2}}),(0,le.jsxs)(F.default,{style:{marginLeft:5,marginTop:5},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:14},children:"Input Amount:"}),(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:18},children:"$"}),(0,le.jsx)(M.default,{ref:D,placeholderTextColor:"#9B9E9F",placeholder:"Input Amount",style:{height:35,width:300,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"},onChangeText:function(e){var t=e.replace(/[^0-9.-]/g,"").replace(/(.)\-/g,"$1").replace(/^-(?=\-)/,"").replace(/(\..*)\./g,"$1");D.current.value=t}})]}),(0,le.jsx)(B.default,{onPress:function(){var e=t.paymentDetails.totalAmount.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1")-I;D.current.value=e},style:{width:"fit-content"},children:(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:14,color:"#16A34A"},underline:!0,selectable:!1,children:"Complete Payment"})})]}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center",margin:2}}),(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",margin:5},children:(0,le.jsx)(F.default,{style:{flex:1,backgroundColor:"#16A34A",borderRadius:5,padding:5},children:y?(0,le.jsx)(c.default,{size:"sm",color:"white"}):(0,le.jsx)(B.default,{onPress:function(){return A()},children:(0,le.jsx)(d.default,{style:{alignSelf:"center",color:"white"},children:"Confirm"})})})}),(0,le.jsx)((function(e){var t=e.historyModalVisible,n=e.handleHistoryModalClose,r=e.payments,i=(0,o.default)(r).sort((function(e,t){var n=e.date;return t.date-n}));return(0,le.jsx)(u.Modal,{isOpen:t,onClose:n,useRNModal:!0,children:(0,le.jsxs)(u.Modal.Content,{style:{backgroundColor:"white",borderRadius:10},children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Header,{style:{textAlign:"center",fontSize:18,fontWeight:"bold",color:"#333"},children:"Payment History"}),(0,le.jsx)(u.Modal.Body,{children:(0,le.jsx)(W.default,{style:{flex:1,paddingHorizontal:15,maxHeight:500},children:i.length>0?i.map((function(e,t){return(0,le.jsxs)(F.default,{style:{marginBottom:15,borderBottomWidth:1,borderBottomColor:"#eee",paddingBottom:10},children:[(0,le.jsxs)(d.default,{style:{fontSize:14,fontWeight:"bold",color:"black"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold"},children:"Date: "}),(0,le.jsx)(d.default,{style:{color:"#FF0000"},children:i[i.length-1-t].date})]}),(0,le.jsxs)(d.default,{style:{fontSize:14,fontWeight:"bold",color:"black"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold"},children:"Value: "}),(0,le.jsxs)(d.default,{style:{color:Number(i[i.length-1-t].value).toLocaleString().startsWith("-")?"#FF0000":"#16A34A"},children:["$",Number(i[i.length-1-t].value).toLocaleString()]})]})]},t)})):(0,le.jsx)(d.default,{style:{fontWeight:"bold",alignSelf:"center"},italic:!0,children:"No history to show"})})})]})})}),{historyModalVisible:f,handleHistoryModalClose:function(){h(!1)},payments:n.payments?n.payments:[]})]})},et=function(){var e=(0,$.useDispatch)(),t=(0,$.useSelector)((function(e){return e.selectedChatData})),n=(0,$.useSelector)((function(e){return e.invoiceData})),r=(0,$.useSelector)((function(e){return e.currentDate})),o=(0,v.useState)(!1),a=(0,l.default)(o,2),s=a[0],u=(a[1],(0,v.useState)(!1)),f=(0,l.default)(u,2),h=f[0],g=f[1],m=(0,v.useRef)(null),y=(0,v.useRef)(null),p="@realmotorjapan532288@".toString(),x=function(){var e=(0,i.default)((function*(){var e=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,n=_()(e).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),r=(_()(e).format("YYYY"),_()(e).format("MM"),_()(e).format("MM/DD"),_()(e).format("YYYY/MM/DD"),_()(e).format("DD"),_()(e).format("HH:mm"),_()(e).format("HH:mm:ss"),J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"");try{yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",t.id,"messages"),{text:"Issued Invoice",sender:r,timestamp:n,messageType:"IssuedInvoice",ip:Se,ipCountry:we}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",t.id),{lastMessageSender:r,lastMessage:"Issued Invoice",lastMessageDate:n,customerRead:!1,read:!0,readBy:[r]})}catch(o){console.error("Error adding document: ",o)}}));return function(){return e.apply(this,arguments)}}(),j=function(){var n=(0,i.default)((function*(){g(!0);var n=r.split("-")[0].slice(-2),o=(0,V.collection)(J.projectExtensionFirestore,"IssuedInvoice");try{var i=yield(0,V.getDocs)(o),a=0;i.forEach((function(e){var t=e.id;if(t.startsWith(n)){var r=parseInt(t.substring(2),10);r>a&&(a=r)}}));var l=""+n+(a+1),s=(0,V.doc)(J.projectExtensionFirestore,"IssuedInvoice",l),c=(0,V.doc)(J.projectExtensionFirestore,"chats",t.id),d=function(e,t){var n=(0,te.HmacSHA256)(e,t);return te.enc.Hex.stringify(n)}(l,p);if(t.invoiceNumber){var u=(0,V.doc)(J.projectExtensionFirestore,"IssuedInvoice",t.invoiceNumber);yield(0,V.setDoc)(u,ce(ce({},Fe),{},{carData:t.carData}),{merge:!0}),1==t.stepIndicator.value&&(yield(0,V.updateDoc)(c,{"stepIndicator.status":"Issue Proforma Invoice","stepIndicator.value":2})),x(),g(!1),e((0,Q.setTransactionModalVisible)(!1))}else yield(0,V.setDoc)(s,ce(ce({},Fe),{},{cryptoNumber:d,carData:t.carData})),yield(0,V.updateDoc)(c,{keywords:(0,V.arrayUnion)(l),invoiceNumber:l,"stepIndicator.status":"Issue Proforma Invoice","stepIndicator.value":2}),x(),g(!1),e((0,Q.setTransactionModalVisible)(!1))}catch(f){console.error("Error creating document: ",f)}}));return function(){return n.apply(this,arguments)}}();return(0,v.useEffect)((function(){var e,t;Fe.cfs=n&&Object.keys(n).length>0&&n.cfs?n.cfs:null==(e=m.current)?void 0:e.value,Fe.placeOfDelivery=n&&Object.keys(n).length>0&&n.placeOfDelivery?n.placeOfDelivery:null==(t=y.current)?void 0:t.value}),[]),(0,le.jsxs)(W.default,{style:{flex:1,maxHeight:500},children:[(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"CFS:"}),(0,le.jsx)(M.default,{defaultValue:n&&Object.keys(n).length>0&&n.cfs?n.cfs:"",ref:m,placeholderTextColor:"#9B9E9F",placeholder:"Input CFS (Optional)",style:{height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"},onChangeText:function(e){return Fe.cfs=e}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"Place of Delivery:"}),(0,le.jsx)(M.default,{defaultValue:n&&Object.keys(n).length>0&&n.placeOfDelivery?n.placeOfDelivery:"",ref:y,placeholderTextColor:"#9B9E9F",placeholder:"Place of Delivery (Optional)",style:{height:25,width:200,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"},onChangeText:function(e){return Fe.placeOfDelivery=e}})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:5,alignItems:"center"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"Port of Departure:"}),(0,le.jsx)(Xe,{})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:5},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"Sales Person:"}),(0,le.jsx)(Ze,{})]}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center",margin:5}}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,margin:3},children:"Port of Discharge:"}),(0,le.jsx)(Ge,{})]}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center",margin:5}}),(0,le.jsx)(Ke,{}),(0,le.jsx)(qe,{}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center"}}),(0,le.jsx)(Je,{}),(0,le.jsx)(F.default,{style:{width:"100%",borderBottomWidth:2,borderColor:"#0A9FDC",alignSelf:"center",margin:2}}),(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",margin:5},children:(0,le.jsx)(F.default,{style:{flex:1,backgroundColor:s?"#145A32":"#16A34A",borderRadius:5,padding:5},children:h?(0,le.jsx)(c.default,{size:"sm",color:"white"}):(0,le.jsx)(B.default,{onPress:function(){return j()},children:(0,le.jsx)(d.default,{style:{alignSelf:"center",color:"white"},children:"Confirm"})})})})]})},tt=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(0,v.useState)(0),r=(0,l.default)(n,2),o=r[0],a=r[1],s=(0,v.useState)(0),c=(0,l.default)(s,2),f=c[0],h=c[1],g=(0,v.useState)(!1),m=(0,l.default)(g,2),y=m[0],p=m[1],x=(0,v.useState)(!1),j=(0,l.default)(x,2),b=j[0],D=j[1],C=(0,v.useState)(0),S=(0,l.default)(C,2),w=S[0],A=S[1],I=(0,v.useRef)(null),W=(0,v.useState)({}),k=(0,l.default)(W,2),P=(k[0],k[1],(0,v.useState)(0)),z=(0,l.default)(P,2),R=(z[0],z[1],(0,v.useState)("")),T=(0,l.default)(R,2),L=T[0],N=T[1],H=function(){var n=(0,i.default)((function*(){var n=t.discharge.port,r=e.freightOrigPrice;if(n===L||r)console.log("No need to fetch new data");else{var o=(0,V.doc)(J.projectExtensionFirestore,"CustomerCountryPort","PortsDoc");try{var i=yield(0,V.getDoc)(o);if(i.exists()){var a,l=i.data();void 0!==(null==(a=l[n])?void 0:a.kobePrice)?("Nagoya"==t.departurePort?yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{freightOrigPrice:l[n].nagoyaPrice}):"Yokohama"==t.departurePort?yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{freightOrigPrice:l[n].yokohamaPrice}):"Kyushu"==t.departurePort?yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{freightOrigPrice:l[n].kyushuPrice}):"Kobe"==t.departurePort&&(yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",e.id),{freightOrigPrice:l[n].kobePrice})),N(n)):console.log("Port data not found for the given port")}else console.log("No such document!")}catch(s){console.error("Error fetching document:",s)}}}));return function(){return n.apply(this,arguments)}}(),O=1e4,U=1e4,Y=15e3,_=Number(e.carData&&e.carData.purchasedPrice?e.carData.purchasedPrice:0),q=Number(_).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),G=Number(O),Z=Number(G).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),X=Number(U),K=Number(X).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),Q=Number(Y),ee=Number(Q).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),te=Number(e.carData&&e.carData.dimensionCubicMeters?e.carData.dimensionCubicMeters:0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ne=Number(e&&e.freightOrigPrice?e.freightOrigPrice:0),re=Number(ne).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),oe=Number(ne*te),ie=Number(ne*te).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),ae=Number(oe*e.currency.usdToJpy),se=Number(ae).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),ce=_+G+X+Q+o+ae,de=Number(ce).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),ue=ce*e.currency.jpyToUsd,fe=ue.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),he=(e.m3?e.m3:e.carData&&e.carData.dimensionCubicMeters?e.carData.dimensionCubicMeters:0)*Number(e.freightPrice),ge=(e.fobPrice?e.fobPrice:(e.carData&&e.carData.fobPrice?e.carData.fobPrice:0)*(e.jpyToUsd?e.jpyToUsd:e.currency&&e.currency.jpyToUsd?e.currency.jpyToUsd:0))+he,me=Math.round(t&&t.paymentDetails&&t.paymentDetails.totalAmount?Number(t.paymentDetails.totalAmount.replace(/,/g,"")):ge),ye=function(){var e,t=function(e){var t=Number(e.replace(/,/g,""));return isNaN(t)?0:t}(null==(e=I.current)?void 0:e.value),n=Math.round(t-ue);A(n)};return(0,v.useEffect)((function(){if(e.carData&&e.carData.supplyChainsCostsData){var t=e.carData.supplyChainsCostsData.map((function(e){var t=e[Object.keys(e)[0]];return parseFloat(t.amount.replace(",",""))||0})).reduce((function(e,t){return e+t}),0),n=t.toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0});a(t),h(n)}}),[]),(0,v.useEffect)((function(){var t=e.freightOrigPrice;y&&!t&&H()}),[y]),(0,v.useEffect)((function(){if(0!==o||""!==o){var e=Math.round(me-ue);A(e)}}),[o]),(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(B.default,{onPress:function(){p(!0),I.current.value=me,ye()},focusable:!1,variant:"ghost",onHoverIn:function(){return D(!0)},onHoverOut:function(){return D(!1)},style:{marginTop:3,paddingVertical:3,paddingHorizontal:5,flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:b?"#4c555c":"#6e7a83"},children:[(0,le.jsx)(E.default,{size:15,color:"white",name:"calculator"}),(0,le.jsx)(d.default,{style:{textAlign:"center",color:"white",fontWeight:"bold"},children:"Profit Calculator"})]}),(0,le.jsx)(u.Modal,{isOpen:y,onClose:function(){p(!1)},initialFocusRef:I,size:"lg",children:(0,le.jsxs)(u.Modal.Content,{children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Header,{children:"Profit Calculator"}),(0,le.jsxs)(u.Modal.Body,{style:{flexDirection:"row",backgroundColor:"#fafafa"},children:[(0,le.jsxs)(F.default,{style:{flex:1,borderRightWidth:1,borderRightColor:"#DADDE1"},children:[(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:20,lineHeight:14},children:"Profit (Yen):"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:18,color:Number(w*e.currency.usdToJpy)<0?"#FF0000":"#8D7777"},children:""+Number(w*e.currency.usdToJpy).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0})})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:20,lineHeight:14},children:"Profit (US Dollars):"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:18,color:Number(w)<0?"#FF0000":"#16A34A"},children:""+Number(w).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:20,lineHeight:14},children:"Profit (Percentage):"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:18,color:Number(w*e.currency.usdToJpy/_*100)<=10.5?"#FF0000":"#336699"},children:Number(w*e.currency.usdToJpy/_*100).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"%"})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"#6E7A83"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:20,lineHeight:14,color:"white"},children:"Price to calculate:"}),(0,le.jsx)(M.default,{onChangeText:function(e){var t=e.replace(/[^0-9]/g,"");I.current.value=t,ye()},defaultValue:me,ref:I,placeholderTextColor:"#9B9E9F",placeholder:"Input Price",style:{backgroundColor:"white",height:25,margin:2,padding:1,borderRadius:4,borderWidth:1,borderColor:"white",outlineStyle:"none",fontSize:18,fontWeight:"700"}})]})]}),(0,le.jsxs)(F.default,{style:{flex:1,marginLeft:3},children:[(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Purchased Price:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:""+q})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Auction Fee:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:""+Z})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Transport Fee:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:""+K})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Shipping Agent Fee:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:""+ee})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Supply Chains Costs:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:""+f})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Cubic Meter:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:""+te})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:16,lineHeight:14},children:"Cost per Cubic Meter:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",fontSize:14,lineHeight:14},children:re+" x "+te}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:14,lineHeight:14,color:"#16A34A"},children:""+ie}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:14,lineHeight:14,color:"#8D7777"},children:""+se})]}),(0,le.jsxs)(F.default,{style:{marginBottom:10,borderWidth:1,borderColor:"#DADDE1",borderRadius:5,marginRight:3,padding:3,backgroundColor:"white"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",marginVertical:5,fontSize:20,lineHeight:14},children:"Total:"}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:18,color:"#8D7777"},children:""+de}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"700",fontSize:18,color:"#16A34A"},children:""+fe})]})]})]})]})})]})},nt=function(){var e=(0,$.useDispatch)(),t=(0,$.useSelector)((function(e){return e.selectedChatData})),r=(0,$.useSelector)((function(e){return e.previewInvoiceVisible})),o=(0,$.useSelector)((function(e){return e.invoiceData})),a=(0,v.useState)(!1),s=(0,l.default)(a,2),f=s[0],h=s[1],g=S.default.get("window").width,m=(0,v.useRef)(null),y=(0,v.useState)(""),p=(0,l.default)(y,2),j=(p[0],p[1],(0,v.useState)("")),b=(0,l.default)(j,2),D=b[0],C=b[1],w=(0,v.useState)(me),A=(0,l.default)(w,2),I=A[0],M=A[1],k=(0,v.useState)(0),E=(0,l.default)(k,2),R=(E[0],E[1]),L=(0,v.useState)(0),N=(0,l.default)(L,2),H=N[0],O=N[1];function U(e){var t=0;if(e.carData){["interior","exterior","safetySystem","comfort","sellingPoints"].forEach((function(n){e.carData[n]&&(t+=Object.values(e.carData[n]).filter((function(e){return!0===e})).length)}))}return t}(0,v.useEffect)((function(){r&&O(H+1)}),[r]),(0,v.useEffect)((function(){var e=function(){var e=(0,i.default)((function*(){try{if(m.current){var e=yield(0,ne.captureRef)(m,{format:"jpg",quality:1,result:"base64",width:2108,height:2981.7999999999997});C("data:image/jpeg;base64,"+e);var t=U(o);R(t)}}catch(n){console.error("Error capturing view:",n)}}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(e);if(!t.ok)throw new Error("HTTP error! status: "+t.status);var n=yield t.blob();return new Promise((function(e,t){var r=new FileReader;r.onloadend=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)}))}catch(r){return console.error("Fetch error:",r.message),null}}));return function(t){return e.apply(this,arguments)}}();if(t(me).then((function(e){M(e)})),e(),g<960){var n=function(){var e=(0,i.default)((function*(){try{if(m.current){var e=yield(0,ne.captureRef)(m,{format:"jpg",quality:1,result:"base64",width:2108,height:2981.7999999999997});C("data:image/jpeg;base64,"+e);var t=U(o);R(t)}}catch(n){console.error("Error capturing view:",n)}}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(e);if(!t.ok)throw new Error("HTTP error! status: "+t.status);var n=yield t.blob();return new Promise((function(e,t){var r=new FileReader;r.onloadend=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)}))}catch(r){return console.error("Fetch error:",r.message),null}}));return function(t){return e.apply(this,arguments)}}();r(me).then((function(e){M(e)})),n()}}),[m.current,I]);var V=function(){var e=(0,i.default)((function*(){try{return"data:image/jpeg;base64,"+(yield(0,ne.captureRef)(m,{format:"jpg",quality:1,result:"base64",width:2232,height:3157.2000000000003}))}catch(e){console.error("Error capturing view:",e)}}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,i.default)((function*(){var e=m.current;if(e){var n=(yield ie()(e,{scale:1})).toDataURL("image/jpeg",.9),r=new re.default({orientation:"portrait",unit:"mm",format:"a4"}),i=r.getImageProperties(n),a=210*i.height/i.width;r.addImage(n,"JPEG",0,0,210,a,void 0,"FAST",0,{imageCompression:"JPEG",imageQuality:1}),t.stepIndicator.value<3?r.save("Proforma Invoice ("+o.carData.carName+" ["+o.carData.referenceNumber+"]) (A4 Paper Size).pdf"):r.save("Invoice No. "+o.id+" (A4 Paper Size).pdf")}else console.error("No element to capture")}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.default)((function*(){var e=yield V();e&&(yield Y(e))}));return function(){return e.apply(this,arguments)}}();if(o&&Object.keys(o).length>0){var J=o.bankInformations.issuingDate,q=o.bankInformations.dueDate,G=new Date(J),Z=new Date(q),X={year:"numeric",month:"long",day:"numeric"};be=G.toLocaleDateString(void 0,X),De=Z.toLocaleDateString(void 0,X)}return(0,le.jsxs)(le.Fragment,{children:[" ",o&&Object.keys(o).length>0&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(B.default,{onPress:function(){e((0,Q.setPreviewInvoiceVisible)(!0))},focusable:!1,variant:"ghost",onHoverIn:function(){return h(!0)},onHoverOut:function(){return h(!1)},style:{marginTop:3,paddingVertical:3,paddingHorizontal:5,flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:f?"#0772ad":"#0A8DD5"},children:t.invoiceNumber&&t.stepIndicator.value>2?(0,le.jsx)(d.default,{style:{fontWeight:700,color:"white"},children:"Preview Invoice No. "+t.invoiceNumber}):(0,le.jsx)(d.default,{style:{fontWeight:700,color:"white"},children:"Preview Invoice"})}),(0,le.jsxs)(u.Modal,{isOpen:r,onClose:function(){e((0,Q.setPreviewInvoiceVisible)(!1)),C("")},size:"full",useRNModal:!0,children:[(0,le.jsxs)(F.default,{style:{flexDirection:"row",margin:2},children:[(0,le.jsxs)(B.default,{onPress:function(){D&&I&&_()},style:{justifyContent:"center",flexDirection:"row",padding:5,borderRadius:5,backgroundColor:"#16A34A"},children:[(0,le.jsx)(T.default,{size:20,name:"download",color:"white"}),(0,le.jsx)(d.default,{style:{color:"white"},children:"Download as PDF"})]}),(0,le.jsxs)(B.default,{onPress:function(){D&&I&&("web"===P.default.OS?window.open().document.write('\n                <style>\n                    body {\n                        margin: 0;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        height: 100vh;\n                        overflow: hidden;\n                    }\n                    img {\n                        width: 595px;\n                        height: 842px;\n                        object-fit: contain;\n                        transition: transform 0.25s ease;\n                        cursor: zoom-in; /* Set cursor to magnifying glass */\n                    }\n                    .zoomed {\n                        transform: scale(3);\n                        transform-origin: center;\n                        cursor: zoom-out; /* Change cursor to indicate zooming out */\n                    }\n                </style>\n                <img id="zoomableImage" src="'+D+"\" alt=\"Base64 Image\" draggable=\"false\" />\n                <script>\n                    const image = document.getElementById('zoomableImage');\n    \n                    image.addEventListener('mousedown', function(e) {\n                        const rect = this.getBoundingClientRect();\n                        const x = e.clientX - rect.left;\n                        const y = e.clientY - rect.top;\n    \n                        // Set the transform origin to the mouse position\n                        this.style.transformOrigin = `${x}px ${y}px`;\n                        this.classList.add('zoomed');\n                    });\n    \n                    document.addEventListener('mouseup', function() {\n                        image.classList.remove('zoomed');\n                    });\n                <\/script>\n            "):console.log("This feature is only available in a web environment"))},style:{position:"absolute",top:-2,right:-380,flexDirection:"row",padding:5,borderRadius:5,backgroundColor:"#0A8DD5"},children:[(0,le.jsx)(z.default,{size:20,name:"images",color:"white"}),(0,le.jsx)(d.default,{style:{color:"white"},children:"View Image"})]})]}),(0,le.jsx)(u.Modal.CloseButton,{}),r&&(0,le.jsxs)(W.default,{style:{maxHeight:g<960?480:720,maxWidth:g<960?320:900},children:[(0,le.jsx)(F.default,{style:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"white",zIndex:999,flex:1,alignItems:"center"},children:D&&I?(0,le.jsx)(x.default,{source:{uri:D},style:{marginTop:5,width:g<960?320:595,height:g<960?480:842,resizeMode:"stretch",borderWidth:1,borderColor:"#DADDE1"}}):(0,le.jsx)(c.default,{size:"lg",color:"#0A9FDC",style:{alignSelf:"center",paddingTop:249.9020480854853}})}),""!==I&&(0,le.jsxs)(F.default,{ref:m,style:{width:2480,height:3508,backgroundColor:"white",zIndex:1},children:[(0,le.jsx)(F.default,{style:{position:"absolute",left:118.69017632241814,top:118.70347284060551},children:(0,le.jsx)(x.default,{source:n(77804),style:{width:296.72544080604536,height:265.52092609082814,resizeMode:"stretch"}})}),(0,le.jsx)(F.default,{style:{position:"absolute",alignSelf:"center",top:249.9020480854853},children:t.stepIndicator.value<3?(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:78.08564231738035},children:"PROFORMA INVOICE"}):(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:78.08564231738035},children:"INVOICE"})}),(0,le.jsx)(F.default,{style:{position:"absolute",right:118.69017632241814,top:118.70347284060551},children:t.stepIndicator.value<3?null:(0,le.jsx)(ae.default,{value:o.cryptoNumber,size:249.87405541561714,color:"black",backgroundColor:"white"})}),(0,le.jsx)(F.default,{style:{position:"absolute",right:377.9345088161209,top:106.20837043633125},children:t.stepIndicator.value<3?null:(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733},children:"Invoice No. RMJ-"+o.id})}),t.stepIndicator.value<3?(0,le.jsxs)(F.default,{style:{position:"absolute",right:118.69017632241814,top:106.20837043633125},children:[(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignSelf:"flex-end"},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733},children:"Issuing Date: "}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733},children:""+be})]}),(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignSelf:"flex-end"},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733,color:"#F00A0A"},children:"Valid Until: "}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733},children:""+De})]})]}):(0,le.jsxs)(F.default,{style:{position:"absolute",right:377.9345088161209,top:153.06500445235974,flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733},children:"Issuing Date: "}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733},children:""+be})]}),(0,le.jsxs)(F.default,{style:{position:"absolute",left:124.93702770780857,top:418.5859305431879,maxWidth:937.0277078085643},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:49.97481108312343,borderBottomWidth:3,width:"fit-content",marginBottom:5},children:"Shipper"}),(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733,lineHeight:43.727959697733},children:"Real Motor Japan (YANAGISAWA HD CO.,LTD)"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733,marginTop:20,lineHeight:43.727959697733},children:"26-2 Takara Tsutsumi-cho Toyota City, Aichi Prefecture, Japan, 473-0932"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733,marginTop:20,lineHeight:43.727959697733},children:"FAX: +81565850606"}),(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:43.727959697733,marginTop:20,lineHeight:43.727959697733},children:"Shipped From:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733,lineHeight:43.727959697733},children:o.departurePort+", "+o.departureCountry}),(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:43.727959697733,marginTop:20,lineHeight:43.727959697733},children:"Shipped To:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733,lineHeight:43.727959697733},children:o.discharge.port+", "+o.discharge.country}),o.placeOfDelivery&&""!==o.placeOfDelivery?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:43.727959697733,marginTop:20,lineHeight:43.727959697733},children:"Place of Delivery:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733,lineHeight:43.727959697733},children:""+o.placeOfDelivery})]}):null,o.cfs&&""!==o.cfs?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:43.727959697733,marginTop:20,lineHeight:43.727959697733},children:"CFS:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:43.727959697733,lineHeight:43.727959697733},children:""+o.cfs})]}):null,(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",width:2233.249370277078},children:[(0,le.jsxs)(F.default,{style:{flex:1,width:874.55919395466},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:56.221662468513856,borderBottomWidth:3,borderBottomColor:"#0A78BE",width:"fit-content",marginBottom:5,color:"#0A78BE",marginTop:78.09439002671415},children:"Buyer Information"}),(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:49.97481108312343,lineHeight:43.727959697733},children:""+o.consignee.name}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:""+o.consignee.address}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:""+o.consignee.email}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:""+o.consignee.contactNumber}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:"FAX: "+(""==o.consignee.fax?"N/A":o.consignee.fax)})]}),(0,le.jsxs)(F.default,{style:{flex:1,paddingLeft:62.468513853904284,width:874.55919395466},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:56.221662468513856,borderBottomWidth:3,borderBottomColor:"#FF0000",width:"fit-content",marginBottom:5,color:"#FF0000",marginTop:78.09439002671415},children:"Notify Party"}),1==o.notifyParty.sameAsConsignee?(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343},children:"Same as consignee / buyer"}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:49.97481108312343,lineHeight:43.727959697733},children:""+o.notifyParty.name}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:""+o.notifyParty.address}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:""+o.notifyParty.email}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:""+o.notifyParty.contactNumber}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:49.97481108312343,marginTop:20,lineHeight:43.727959697733},children:"FAX: "+(""==o.notifyParty.fax?"N/A":o.notifyParty.fax)})]})]})]})]}),t.stepIndicator.value<3?(0,le.jsx)(F.default,{style:{position:"absolute",right:118.69017632241814,top:406.0908281389136,borderWidth:3,width:1343.0730478589421,borderColor:"#FF5C00",height:606.0124666073018},children:(0,le.jsxs)(F.default,{style:{flex:1,alignItems:"center",justifyContent:"center",flexDirection:"row"},children:[(0,le.jsx)(z.default,{size:156.1712846347607,name:"warning",color:"#FF0000"}),(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,color:"#FF0000",marginLeft:62.468513853904284},children:"Bank Information will be provided after placing an order."})]})}):(0,le.jsxs)(F.default,{style:{position:"absolute",right:118.69017632241814,top:406.0908281389136,borderWidth:3,width:1343.0730478589421,borderColor:"#1ABA3D"},children:[(0,le.jsx)(F.default,{style:{flex:1,alignItems:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733,color:"#114B33"},children:"Bank Information"})}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",marginHorizontal:15.617128463476071,marginBottom:15.61887800534283},children:[(0,le.jsxs)(F.default,{style:{flex:1,marginRight:156.1712846347607},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733,borderBottomWidth:3,width:"fit-content",marginBottom:2},children:"Bank Account"}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733,marginTop:9.371326803205699},children:["Bank Name: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.bankAccount.bankName})]}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733,marginTop:9.371326803205699},children:["Branch Name: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.bankAccount.branchName})]}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733,marginTop:9.371326803205699},children:["SWIFTCODE: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.bankAccount.swiftCode})]}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733,marginTop:9.371326803205699},children:["Address: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.bankAccount.address})]}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733,marginTop:9.371326803205699},children:["Name of Account Holder: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.bankAccount.accountHolder})]}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733,marginTop:9.371326803205699},children:["Account Number: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.bankAccount.accountNumberValue})]})]}),(0,le.jsxs)(F.default,{style:{flex:1},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733,borderBottomWidth:3,width:"fit-content",marginBottom:2},children:"Payment Terms"}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,lineHeight:43.727959697733},children:["Terms: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733},children:""+o.bankInformations.paymentTerms})]}),(0,le.jsxs)(F.default,{style:{paddingTop:93.71326803205699},children:[(0,le.jsx)(d.default,{style:{fontWeight:750,fontSize:43.727959697733,borderBottomWidth:3,width:"fit-content",marginBottom:2,color:"#F00A0A",borderBottomColor:"#F00A0A"},children:"Payment Due"}),(0,le.jsxs)(d.default,{style:{fontWeight:750,fontSize:37.48110831234257,color:"#F00A0A",lineHeight:43.727959697733},children:["Due Date: ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,color:"black",lineHeight:43.727959697733},children:""+De})]})]})]})]})]}),(0,le.jsxs)(F.default,{style:{position:"absolute",left:118.69017632241814,top:o.placeOfDelivery&&o.cfs||""!==o.placeOfDelivery&&""!==o.cfs?1802.4185218165628:1677.46749777382,width:2242.6196473551636,borderWidth:3.123425692695214,borderColor:"#C2E2F4",alignSelf:"center"},children:[(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{flex:2,justifyContent:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center",color:"#008AC6"},children:"Description"})}),(0,le.jsx)(F.default,{style:{flex:2,justifyContent:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center",color:"#008AC6"},children:"Notes"})}),(0,le.jsx)(F.default,{style:{flex:1,justifyContent:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center",color:"#008AC6"},children:"Quantity"})}),(0,le.jsx)(F.default,{style:{flex:2,justifyContent:"center"},children:(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center",color:"#008AC6"},children:"Amount"})})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:5},children:(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:"FOB"})}),(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2},children:(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:"$"+Math.round(Number(o.paymentDetails.fobPrice)).toLocaleString("en-US",{useGrouping:!0})})})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:5},children:(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:"Freight"})}),(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2},children:(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:"$"+Math.round(Number(o.paymentDetails.freightPrice)).toLocaleString("en-US",{useGrouping:!0})})})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsxs)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:5,flexDirection:"row"},children:[o.paymentDetails.inspectionIsChecked&&("C&F"==o.paymentDetails.incoterms||"FOB"==o.paymentDetails.incoterms)&&(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:o.paymentDetails.inspectionIsChecked?"Inspection ["+o.paymentDetails.inspectionName+"]":" "}),o.paymentDetails.inspectionIsChecked&&"CIF"==o.paymentDetails.incoterms&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:o.paymentDetails.inspectionIsChecked?"Inspection ["+o.paymentDetails.inspectionName+"]":" "}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:"CIF"==o.paymentDetails.incoterms?" + Insurance":" "})]}),!o.paymentDetails.inspectionIsChecked&&"CIF"==o.paymentDetails.incoterms&&(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:"CIF"==o.paymentDetails.incoterms?"Insurance":" "}),!o.paymentDetails.inspectionIsChecked&&("C&F"==o.paymentDetails.incoterms||"FOB"==o.paymentDetails.incoterms)&&(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699},children:" "})]}),(0,le.jsxs)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2},children:[o.paymentDetails.inspectionIsChecked&&("C&F"==o.paymentDetails.incoterms||"FOB"==o.paymentDetails.incoterms)&&(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.paymentDetails.inspectionIsChecked?"$"+Number(o.paymentDetails.inspectionPrice).toLocaleString("en-US",{useGrouping:!0}).split(".")[0]:" "}),o.paymentDetails.inspectionIsChecked&&"CIF"==o.paymentDetails.incoterms&&(0,le.jsxs)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:[o.paymentDetails.inspectionIsChecked?"$"+Number(o.paymentDetails.inspectionPrice).toLocaleString("en-US",{useGrouping:!0}).split(".")[0]:" ",(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699},children:"CIF"===o.paymentDetails.incoterms?" + $"+Number(o.paymentDetails.insurancePrice).toLocaleString("en-US",{useGrouping:!0}).split(".")[0]:" "})]}),!o.paymentDetails.inspectionIsChecked&&"CIF"==o.paymentDetails.incoterms&&(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:"CIF"==o.paymentDetails.incoterms?"$"+Number(o.paymentDetails.insurancePrice).toLocaleString("en-US",{useGrouping:!0}).split(".")[0]:" "})]})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:5,flexDirection:"row"},children:o.paymentDetails.additionalName&&o.paymentDetails.additionalName.length>0&&(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,marginLeft:6.246851385390428},children:o.paymentDetails.additionalName&&o.paymentDetails.additionalName.length>0?""+o.paymentDetails.additionalName.join(" + "):" "})}),(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2},children:(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.paymentDetails.additionalPrice&&o.paymentDetails.additionalPrice.length>0?o.paymentDetails.additionalPrice.map((function(e){return"$"+parseFloat(e).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).slice(1)})).join(" + "):" "})})]}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2,flexDirection:"row",paddingVertical:6.247551202137132},children:o.carData&&o.carData.carName?(0,le.jsxs)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center",marginLeft:6.246851385390428},children:["Used Vehicle\n",(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.carData.carName+"\n"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.carData.chassisNumber+"\n"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.carData.exteriorColor+"\n"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:Number(o.carData.engineDisplacement).toLocaleString("en-US")+" cc\n"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:Number(o.carData.mileage).toLocaleString("en-US")+" km\n"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.carData.fuel+"\n"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.carData.transmission+"\n"})]}):(0,le.jsx)(d.default,{children:" "})}),(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2,flexDirection:"row",justifyContent:"center"},children:o.paymentDetails&&o.paymentDetails.incoterms&&o.discharge.port&&o.discharge?(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:o.paymentDetails.incoterms+" "+o.discharge.port}):(0,le.jsx)(d.default,{children:" "})}),(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:1,flexDirection:"row",justifyContent:"center"},children:o.carData&&o.carData.carName?(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center"},children:"1"}):(0,le.jsx)(d.default,{children:" "})}),(0,le.jsx)(F.default,{style:{borderTopWidth:3.123425692695214,borderColor:"#C2E2F4",flex:2,justifyContent:"center",flexDirection:"row"},children:o.paymentDetails&&o.paymentDetails.totalAmount?(0,le.jsx)(le.Fragment,{children:(0,le.jsxs)(d.default,{style:{fontWeight:700,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,color:"#008AC6",marginRight:31.234256926952142,top:159.3125556544969,left:156.1712846347607,position:"absolute"},children:["Total",(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:37.48110831234257,lineHeight:43.727959697733,marginBottom:9.371326803205699,alignSelf:"center",color:"#00720B",marginLeft:15.617128463476071},children:"$"+o.paymentDetails.totalAmount})]})}):(0,le.jsx)(d.default,{children:" "})})]})]}),(0,le.jsxs)(F.default,{style:{position:"absolute",left:118.69017632241814,top:2577.114870881567,width:1093.1989924433249},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Payment Information:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"The customer is responsible for the bank charges incurred when the T/T (Telegraphic Transfer) is paid."}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993,marginBottom:15.61887800534283},children:"No warranty service is provided on used vehicles."}),(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Conditions for order cancellation:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"(1) Order Cancellation Penalty: If the order is canceled after payment, a penalty of USD 220 will apply."}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993,marginBottom:15.61887800534283},children:"(2) Non-refund: Payment for vehicles purchased through pre-delivery inspection is non-refundable."}),(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Intermediary Banking Information:"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Bank Name: SUMITOMO MITSUI BANKING CORPORATION (NEW YORK BRANCH)."}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Swift code: SMBCUS33"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Address: 277 Park Avenue"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"City: New York, NY"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993},children:"Postal Code: 10172"}),(0,le.jsx)(d.default,{style:{fontWeight:400,fontSize:37.48110831234257,lineHeight:43.73285841495993,marginBottom:15.61887800534283},children:"Country: United States"})]}),t.stepIndicator.value<3?null:(0,le.jsxs)(F.default,{style:{position:"absolute",right:121.81360201511336,top:2608.352626892253,width:937.0277078085643},children:[(0,le.jsxs)(F.default,{style:{width:937.0277078085643,alignItems:"center",paddingBottom:249.9020480854853},children:[(0,le.jsx)(x.default,{source:n(29556),style:{width:862.0654911838791,height:253.02582368655388,resizeMode:"contain",alignSelf:"center",marginBottom:0}}),(0,le.jsx)(F.default,{style:{borderBottomWidth:3.123775601068566,borderColor:"black",width:"100%"}}),(0,le.jsx)(d.default,{italic:!0,style:{fontWeight:700,fontSize:49.97481108312343},children:"Real Motor Japan"})]}),(0,le.jsxs)(F.default,{style:{width:937.0277078085643,alignItems:"center",paddingBottom:15.61887800534283},children:[(0,le.jsx)(F.default,{style:{borderBottomWidth:3.123775601068566,borderColor:"black",width:"100%"}}),(0,le.jsx)(d.default,{italic:!0,style:{fontWeight:700,fontSize:49.97481108312343},children:"Your Signature"})]})]})]})]})]})]})]})},rt=function(){var e=(0,v.useState)(!1),t=(0,l.default)(e,2),n=t[0],r=t[1],o=(0,v.useState)(!1),s=(0,l.default)(o,2),f=s[0],h=s[1],g=(0,v.useState)(!1),m=(0,l.default)(g,2),y=m[0],p=m[1],x=(0,v.useState)(""),j=(0,l.default)(x,2),b=j[0],D=j[1],C=(0,v.useState)(!1),S=(0,l.default)(C,2),w=S[0],A=S[1],I=(0,$.useSelector)((function(e){return e.currentDate})),W=(0,$.useSelector)((function(e){return e.selectedChatData})),M=(0,v.useState)(!1),k=(0,l.default)(M,2),P=k[0],z=k[1],E=((0,$.useSelector)((function(e){return e.invoiceData})),(0,$.useDispatch)(),function(){z(!1)}),T=function(){var e=(0,i.default)((function*(){try{yield H(),E()}catch(e){}}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.default)((function*(){var e=(yield O.default.get("https://worldtimeapi.org/api/timezone/Asia/Tokyo")).data.datetime,t=_()(e).format("YYYY/MM/DD [at] HH:mm:ss.SSS"),n=(_()(e).format("YYYY"),_()(e).format("MM"),_()(e).format("MM/DD"),_()(e).format("YYYY/MM/DD"),_()(e).format("DD"),_()(e).format("HH:mm"),_()(e).format("HH:mm:ss"),J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"");try{yield(0,V.addDoc)((0,V.collection)(J.projectExtensionFirestore,"chats",W.id,"messages"),{text:"The due date has been changed to "+(b?new Date(b).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Invalid Date"),sender:n,timestamp:t,ip:Se,ipCountry:we}),yield(0,V.updateDoc)((0,V.doc)(J.projectExtensionFirestore,"chats",W.id),{lastMessageSender:n,lastMessage:"The due date has been changed to "+(b?new Date(b).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Invalid Date"),lastMessageDate:t,customerRead:!1,read:!0,readBy:[n]})}catch(r){console.error("Error adding document: ",r)}}));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,i.default)((function*(){var e=(0,V.doc)(J.projectExtensionFirestore,"IssuedInvoice",W.invoiceNumber);A(!0);try{yield(0,V.updateDoc)(e,{"bankInformations.dueDate":b}),yield N(),A(!1),console.log("Document successfully updated")}catch(t){console.error("Error updating document: ",t)}}));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){if(I){var e=new Date(I),t=e.getDay();5===t?e.setDate(e.getDate()+3):6===t?e.setDate(e.getDate()+2):e.setDate(e.getDate()+1);var n=e.toISOString().split("T")[0];D(n)}}),[]),(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(B.default,{focusable:!1,variant:"ghost",onPress:function(){z(!0)},onHoverIn:function(){return r(!0)},onHoverOut:function(){return r(!1)},style:{marginTop:3,paddingVertical:3,paddingHorizontal:5,flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:n?"#a8720a":"#D38F0D"},children:[(0,le.jsx)(L.default,{name:"calendar-plus-o",size:15,color:"white"}),(0,le.jsx)(d.default,{color:"white",style:{fontWeight:700,marginLeft:5},children:"Extend Due Date"})]}),(0,le.jsx)(u.Modal,{isOpen:P,onClose:E,useRNModal:!0,children:(0,le.jsxs)(u.Modal.Content,{children:[(0,le.jsx)(u.Modal.Header,{children:"Extend Due Date"}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",margin:2},children:[(0,le.jsx)(d.default,{style:{width:"20%",fontWeight:700,margin:3},children:"Due Date:"}),(0,le.jsx)((function(e){var t=e.selectedDate,n=e.setSelectedDate,r=(e.currentDate,(0,v.useState)(!1)),o=(0,l.default)(r,2),i=o[0],s=o[1],c=function(){s(!1)};return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(B.default,{style:{width:"60%",height:25,margin:2,padding:1,borderRadius:2,borderWidth:1,borderColor:"#D9D9D9",outlineStyle:"none"},onPress:function(){s(!0)},children:(0,le.jsx)(d.default,{style:{flex:1},children:t})}),(0,le.jsxs)(u.Modal,{isOpen:i,onClose:c,useRNModal:!0,children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Content,{children:(0,le.jsx)(F.default,{style:{height:"100%",flex:1},children:(0,le.jsx)(K.Calendar,{onDayPress:(0,v.useCallback)((function(e){n(e.dateString),e.dateString,Fe.bankInformations.dueDate=e.dateString,c()}),[]),markedDates:(0,a.default)({},t,{selected:!0,disableTouchEvent:!0,selectedDotColor:"#7b9cff"}),renderArrow:function(e){return"left"===e?(0,le.jsx)(R.default,{name:"arrow-back-ios",color:"#7b9cff"}):(0,le.jsx)(R.default,{name:"arrow-forward-ios",color:"#7b9cff"})},enableSwipeMonths:!0,initialDate:t,showSixWeeks:!0})})})]})]})}),{currentDate:I,selectedDate:b,setSelectedDate:D})]}),(0,le.jsx)(u.Modal.Footer,{children:(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between"},children:[(0,le.jsx)(B.default,{focusable:!1,variant:"ghost",onPress:E,onHoverIn:function(){return p(!0)},onHoverOut:function(){return p(!1)},style:{marginTop:3,paddingVertical:3,alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:y?"#3F3F46":"#52525B",flex:1},children:(0,le.jsx)(d.default,{color:"white",style:{fontWeight:700},children:"Cancel"})}),(0,le.jsx)(F.default,{style:{flex:1}}),(0,le.jsx)(B.default,{onPress:T,focusable:!1,variant:"ghost",onHoverIn:function(){return h(!0)},onHoverOut:function(){return h(!1)},disabled:w,style:{marginTop:3,paddingVertical:3,alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:f?"#0f7534":"#16A34A",flex:1},children:w?(0,le.jsx)(c.default,{size:"sm",color:"white"}):(0,le.jsx)(d.default,{color:"white",style:{fontWeight:700},children:"Confirm"})})]})})]})})]})},ot=function(){var e=(0,$.useSelector)((function(e){return e.transactionModalVisible})),t=(0,$.useDispatch)();return(0,le.jsx)(u.Modal,{isOpen:e,onClose:function(){t((0,Q.setTransactionModalVisible)(!1))},size:"lg",useRNModal:!0,children:e&&(0,le.jsxs)(u.Modal.Content,{children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Header,{style:{borderBottomWidth:2,borderColor:"#0A9FDC"},children:Ce}),1==ve||2==ve&&(0,le.jsx)(et,{}),3==ve&&(0,le.jsx)(Qe,{})]})})},it=function(e){var t=e.title,r=e.buttonValue,o=e.transactionValue,i=e.colorHoverIn,a=e.colorHoverOut,s=(0,v.useState)(!1),c=(0,l.default)(s,2),u=c[0],f=c[1],h=((0,$.useSelector)((function(e){return e.invoiceData})),(0,$.useDispatch)());return(0,le.jsx)(le.Fragment,{children:(0,le.jsxs)(B.default,{focusable:!1,variant:"ghost",onPress:function(){h((0,Q.setTransactionModalVisible)(!0)),Ce=t,ve=o},onHoverIn:function(){return f(!0)},onHoverOut:function(){return f(!1)},style:{marginTop:3,paddingVertical:3,paddingHorizontal:5,flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:5,backgroundColor:u?i:a},children:[(0,le.jsx)(Z.default,{source:{uri:n(82049)("./chat_step_"+r+"_on.png"),priority:Z.default.priority.normal},style:{tintColor:"rgba(128, 128, 128, 1)",width:15,height:15,alignSelf:"center"},resizeMode:Z.default.resizeMode.stretch}),(0,le.jsx)(d.default,{color:"white",style:{fontWeight:700,marginLeft:5},children:t})]})})},at=function(){var e=(0,v.useState)(!1),t=(0,l.default)(e,2),n=t[0],r=t[1],o=(0,$.useSelector)((function(e){return e.selectedCustomerData}));return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(B.default,{onPress:function(){r(!0)},style:{width:"fit-content"},children:(0,le.jsx)(d.default,{style:{fontWeight:700},underline:!0,children:ye+" "+pe})}),(0,le.jsx)(u.Modal,{isOpen:n,onClose:function(){r(!1)},size:"lg",children:(0,le.jsx)(u.Modal.Content,{background:"white",children:(0,le.jsxs)(u.Modal.Body,{children:[(0,le.jsx)(F.default,{style:{flex:1,alignItems:"center"},children:(0,le.jsxs)(F.default,{style:{borderRadius:10,backgroundColor:"#F8F9FF",width:440,alignItems:"center",paddingBottom:15},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:26,color:"#0A78BE"},selectable:!0,children:ye+" "+pe}),(0,le.jsx)(d.default,{style:{fontSize:14,color:"#6F6F6F",width:"45%",textAlign:"center"},selectable:!0,children:o.textZip+", "+o.textStreet+", "+o.city+", "+o.country}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row",paddingTop:20,justifyContent:"center"},children:[(0,le.jsx)(d.default,{style:{fontSize:14,color:"#6F6F6F",textAlign:"center"},selectable:!0,children:""+o.textPhoneNumber}),(0,le.jsx)(F.default,{style:{height:"100%",width:2,backgroundColor:"#DCDCDC",marginHorizontal:10}}),(0,le.jsx)(ee.default,{linkDefault:!0,linkStyle:{color:"#8A64F6",fontSize:14},children:(0,le.jsx)(d.default,{style:{textAlign:"center"},selectable:!0,children:o.textEmail})})]})]})}),(0,le.jsxs)(F.default,{style:{width:440,justifyContent:"center",alignItems:"center",marginTop:50,flexDirection:"row",alignSelf:"center"},children:[(0,le.jsxs)(F.default,{style:{flex:1,alignItems:"center"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:24,color:"#990000",textAlign:"center"},children:"$"+(o.overBalance?Number(o.overBalance).toLocaleString("en-US"):0)}),(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:16,color:"#5E4343",textAlign:"center"},children:"Overbalance"}),(0,le.jsx)(d.default,{style:{fontSize:14,color:"#0A78BE",textAlign:"center"},underline:!0,children:"View Payments History"})]}),(0,le.jsxs)(F.default,{style:{flex:1,alignItems:"center"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:24,color:"#009922",textAlign:"center"},children:"$155"}),(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:16,color:"#5E4343",textAlign:"center"},children:"Credits"}),(0,le.jsx)(d.default,{style:{fontSize:14,color:"transparent",textAlign:"center"},underline:!0,children:"-------"})]}),(0,le.jsxs)(F.default,{style:{flex:1,alignItems:"center"},children:[(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:24,color:"#0029A3",textAlign:"center"},children:"11"}),(0,le.jsx)(d.default,{style:{fontWeight:"bold",fontSize:16,color:"#5E4343",textAlign:"center"},children:"Transactions"}),(0,le.jsx)(d.default,{style:{fontSize:14,color:"#0A78BE",textAlign:"center"},underline:!0,children:"View Transactions"})]})]})]})})})]})},lt=function(){var e=(0,$.useSelector)((function(e){return e.selectedChatData})),t=(0,$.useSelector)((function(e){return e.invoiceData})),n=(e.fobPrice&&e.jpyToUsd&&e.m3&&e.freightPrice,(e.m3?e.m3:e.carData&&e.carData.dimensionCubicMeters?e.carData.dimensionCubicMeters:0)*Number(e.freightPrice)),r=(e.fobPrice?e.fobPrice:(e.carData&&e.carData.fobPrice?e.carData.fobPrice:0)*(e.jpyToUsd?e.jpyToUsd:e.currency&&e.currency.jpyToUsd?e.currency.jpyToUsd:0))+n,o=e.fobPrice?e.fobPrice:(e.carData&&e.carData.fobPrice?e.carData.fobPrice:0)*(e.jpyToUsd?e.jpyToUsd:e.currency&&e.currency.jpyToUsd?e.currency.jpyToUsd:0),i=e.carData&&e.carData.carName?e.carData.carName:e.vehicle&&e.vehicle.carName?e.vehicle.carName:"",a=n/e.currency.jpyToUsd;return(0,le.jsxs)(F.default,{style:{flex:1,alignSelf:"flex-start",flexDirection:"row"},children:[me?(0,le.jsx)(Z.default,{source:{uri:me,priority:Z.default.priority.normal},style:{width:60,height:60,borderRadius:30,alignSelf:"center",margin:10},resizeMode:Z.default.resizeMode.stretch}):(0,le.jsx)(F.default,{style:{width:60,height:60,borderRadius:30,backgroundColor:"#e0e0e0",marginRight:12}}),(0,le.jsxs)(F.default,{style:{alignSelf:"center",paddingRight:10},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,color:"#0A78BE"},children:i}),(0,le.jsx)(at,{}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:12,paddingTop:0,marginLeft:1,color:"#8D7777"},children:e.carData&&e.carData.referenceNumber?e.carData.referenceNumber:"Chassis N/A"})}),(0,le.jsx)(Be,{data:ke})]}),(0,le.jsxs)(F.default,{style:{alignSelf:"center",justifyContent:"center",paddingLeft:10},children:[(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:12,paddingTop:0,marginLeft:2},children:e.carData&&e.carData.chassisNumber?e.carData.chassisNumber:"Chassis N/A"})}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:12,paddingTop:0,marginLeft:2},children:e.carData&&e.carData.modelCode?e.carData.modelCode:"Model Code N/A"})}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsxs)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:12,paddingTop:0,marginLeft:2},children:[e.carData&&e.carData.mileage?Number(e.carData.mileage).toLocaleString("en-US"):"Mileage N/A"," km"]})}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:12,paddingTop:0,marginLeft:2},children:e.carData&&e.carData.fuel?e.carData.fuel:"Fuel N/A"})}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:12,paddingTop:0,marginLeft:2},children:e.carData&&e.carData.transmission?e.carData.transmission:"Transmission N/A"})})]}),(0,le.jsxs)(F.default,{style:{alignSelf:"center",justifyContent:"center",paddingLeft:15},children:[(0,le.jsxs)(F.default,{style:{flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontSize:18},bold:!0,children:"Total Price: "}),(0,le.jsx)(d.default,{selectable:!0,style:{fontSize:18,color:"#16A34A",textAlign:"right"},bold:!0,children:"$"+Number(r).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}),(0,le.jsxs)(d.default,{selectable:!0,style:{fontWeight:400,fontSize:12,color:"#8D7777",paddingTop:4,marginLeft:2},children:["(","\xa5"+Number(r/(e&&e.jpyToUsd?Number(e.jpyToUsd):e&&e.currency&&e.currency.jpyToUsd?e.currency.jpyToUsd:0)).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),")"]})]}),(0,le.jsxs)(F.default,{style:{flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700},children:"FOB Price: "}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,color:"#8D7777",textAlign:"right"},children:""+Number(o).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})}),(0,le.jsxs)(d.default,{selectable:!0,style:{fontWeight:400,fontSize:12,color:"#8D7777",paddingTop:2,marginLeft:2},children:["(",""+(e.fobPrice?e.fobPrice:Number(e.carData&&e.carData.fobPrice?e.carData.fobPrice:0)).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),")"]})]}),(0,le.jsxs)(F.default,{style:{flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700},children:"Freight Price: "}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,color:"#8D7777",textAlign:"right"},children:""+Number(n).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})}),(0,le.jsxs)(d.default,{selectable:!0,style:{fontWeight:400,fontSize:12,color:"#8D7777",paddingTop:2,marginLeft:2},children:["(",""+(e.freightPrice?a:Number(e.carData&&e.carData.freightPrice?a:0)).toLocaleString("en-US",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}),")"]})]}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,textAlign:"right"},children:e.country&&e.port?e.country+" / "+e.port:"N/A"})}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:(0,le.jsxs)(d.default,{style:{fontWeight:700,color:"#16A34A"},children:[e.insurance?"CIF":"C&F",e.inspection?" + Inpection["+e.inspectionName+"]":""]})})]}),(0,le.jsxs)(F.default,{style:{paddingLeft:10,paddingRight:10,paddingTop:2},children:[(1==e.stepIndicator.value||2==e.stepIndicator.value)&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(tt,{}),(0,le.jsx)(it,{title:1==e.stepIndicator.value?"Issue Proforma Invoice":2==e.stepIndicator.value?"Update Invoice":"",colorHoverIn:"#0f7534",colorHoverOut:"#16A34A",transactionValue:2,buttonValue:2,iconActive:(0,le.jsx)(N.default,{name:"file-invoice-dollar",color:"#1C2B33",size:14})},"Issue Proforma Invoice"),(0,le.jsx)(nt,{}),(0,le.jsxs)(F.default,{style:{flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:18},children:"Final Price: "}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:18,color:"#FF0000",textAlign:"right"},children:"$"+(t&&t.paymentDetails&&t.paymentDetails.totalAmount?Number(t.paymentDetails.totalAmount.replace(/,/g,"")):0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}),(0,le.jsxs)(d.default,{selectable:!0,style:{fontWeight:400,fontSize:12,color:"#8D7777",paddingTop:4,marginLeft:2},children:["(","\xa5"+(t&&t.paymentDetails&&t.paymentDetails.totalAmount&&e&&e.currency&&e.currency.jpyToUsd?Number(t.paymentDetails.totalAmount.replace(/,/g,""))/Number(e.currency.jpyToUsd):0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),")"]})]})]}),3==e.stepIndicator.value&&(0,le.jsxs)(F.default,{style:{flexDirection:"row",paddingRight:10,paddingTop:2},children:[(0,le.jsxs)(F.default,{style:{paddingLeft:10},children:[(0,le.jsx)(tt,{}),(0,le.jsx)(it,{title:"Input Payment",colorHoverOut:"#FF0000",colorHoverIn:"#800101",transactionValue:3,buttonValue:4,iconActive:(0,le.jsx)(N.default,{name:"file-invoice-dollar",color:"#1C2B33",size:14})},"Input Payment"),(0,le.jsx)(nt,{}),(0,le.jsxs)(F.default,{style:{flexDirection:"row"},children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:18},children:"Final Price: "}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:18,color:"#FF0000",textAlign:"right"},children:"$"+(t&&t.paymentDetails&&t.paymentDetails.totalAmount?Number(t.paymentDetails.totalAmount.replace(/,/g,"")):0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}),(0,le.jsxs)(d.default,{selectable:!0,style:{fontWeight:400,fontSize:12,color:"#8D7777",paddingTop:4,marginLeft:2},children:["(","\xa5"+(t&&t.paymentDetails&&t.paymentDetails.totalAmount&&e&&e.currency&&e.currency.jpyToUsd?Number(t.paymentDetails.totalAmount.replace(/,/g,""))/Number(e.currency.jpyToUsd):0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),")"]})]})]}),(0,le.jsxs)(F.default,{style:{paddingLeft:10},children:[(0,le.jsx)(it,{title:1==e.stepIndicator.value?"Issue Proforma Invoice":"Update Invoice",colorHoverIn:"#0f7534",colorHoverOut:"#16A34A",transactionValue:2,buttonValue:2,iconActive:(0,le.jsx)(N.default,{name:"file-invoice-dollar",color:"#1C2B33",size:14})},"Issue Proforma Invoice"),(0,le.jsx)(rt,{}),(0,le.jsx)(F.default,{style:{flexDirection:"row"},children:t&&t.bankInformations&&t.bankInformations.dueDate&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.default,{style:{fontWeight:700,fontSize:14},children:"Due Date: "}),(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:700,fontSize:14,textAlign:"right",color:"#FF0000"},children:t.bankInformations.dueDate?new Date(t.bankInformations.dueDate).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Invalid Date"})]})})]})]})]}),(0,le.jsx)(ot,{})]})},st=function(e){e.userEmail;var t=e.handleReadByListModalClose,n=(0,$.useSelector)((function(e){return e.readByListModalVisible})),r=(0,$.useSelector)((function(e){return e.selectedChatData})),i=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"";return(0,le.jsx)(u.Modal,{isOpen:n,onClose:function(){return t()},useRNModal:!0,size:"xs",children:(0,le.jsxs)(u.Modal.Content,{borderRadius:0,style:{padding:15,backgroundColor:"#f8f8f8",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(u.Modal.Header,{style:{fontSize:22,fontWeight:"600",textAlign:"center",color:"#333"},children:"Read List"}),(0,le.jsx)(u.Modal.Body,{children:r.readBy.length>0?(0,le.jsx)(W.default,{style:{maxHeight:250,borderRadius:10},children:(0,o.default)(r.readBy).sort((function(e,t){return e===i?-1:t===i?1:0})).map((function(e){return(0,le.jsxs)(F.default,{style:{flexDirection:"row",alignItems:"center",marginVertical:8,borderBottomWidth:.5,borderColor:"#ddd",paddingBottom:8},children:[(0,le.jsx)(L.default,{name:"user-circle",size:24,color:"#4A90E2",style:{marginRight:12}}),(0,le.jsx)(d.default,{style:{flex:1,color:"#555"},children:i===e?"You":e})]},e)}))}):(0,le.jsx)(d.default,{style:{textAlign:"center",color:"grey",fontSize:16},children:"No one has read this message yet."})})]})})},ct=function(e){var t=e.isVisible,n=e.onClose,r=e.imageUrl;return(0,le.jsx)(u.Modal,{isOpen:t,onClose:n,size:"full",useRNModal:!0,children:(0,le.jsxs)(u.Modal.Content,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",width:"80%",height:"80%",alignSelf:"center",justifyContent:"center"},children:[(0,le.jsx)(u.Modal.CloseButton,{}),(0,le.jsx)(Z.default,{source:{uri:r,priority:Z.default.priority.normal},style:{width:"100%",height:"100%",borderRadius:10},resizeMode:Z.default.resizeMode.contain})]})})},dt=function(e){var t=e.url,n=(e.printComponent,(0,v.useState)(!1)),r=(0,l.default)(n,2),o=r[0],a=r[1],c=(0,v.useState)(!1),d=(0,l.default)(c,2);d[0],d[1];return(0,le.jsx)(le.Fragment,{children:(0,le.jsx)(s.Tooltip,{label:"Download",openDelay:200,bgColor:"white",_text:{color:"#1C2B33"},children:(0,le.jsx)(B.default,{style:{marginRight:8,borderRadius:16,width:32,height:32,justifyContent:"center",alignItems:"center",backgroundColor:o?"#424649":"transparent"},onPress:(0,i.default)((function*(){yield k.default.openURL(t)})),onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,le.jsx)(T.default,{name:"download",size:20,color:"#F1F1F1"})})})})},ut=function(){var e=(0,$.useDispatch)(),t=(0,$.useSelector)((function(e){return e.selectedFileUrl})),n=(0,$.useSelector)((function(e){return e.pdfViewerModalVisible})),r=(0,v.useState)(0),o=(0,l.default)(r,2),i=o[0],a=o[1],s=(0,v.useState)(!0),d=(0,l.default)(s,2),f=d[0],h=d[1],g=function(){h(!1)};return(0,v.useEffect)((function(){var n=setTimeout((function(){f&&(console.log("Iframe is taking too long to load. Attempting to reload."),console.log("Current URL:",t),console.log("Current Global URL:",Ae),(0,Q.setIsLoading)(!1),a((function(e){return e+1})),e((0,Q.setSelectedFileUrl)(Ae)))}),5e3);return function(){return clearTimeout(n)}}),[f]),(0,le.jsx)(u.Modal,{isOpen:n,onClose:function(){e((0,Q.setPdfViewerModalVisible)(!1)),e((0,Q.setSelectedFileUrl)("")),h(!0),Ie="",Ae=""},size:"xl",children:(0,le.jsx)(u.Modal.Content,{children:"pdf"!==Ie?(0,le.jsxs)(le.Fragment,{children:[f&&(0,le.jsx)(F.default,{style:{top:0,bottom:0,left:0,right:0,position:"absolute",justifyContent:"center",alignItems:"center",height:"700px"},children:(0,le.jsx)(c.default,{animating:!0,size:"lg",color:"#7B9CFF"})}),""!==t&&(0,le.jsxs)(le.Fragment,{children:[!f&&(0,le.jsx)(F.default,{style:{flexDirection:"row",width:"100%",height:57,borderRadius:0,backgroundColor:"#323639",justifyContent:"flex-end",alignItems:"center"},children:(0,le.jsx)(dt,{url:Ae,printComponent:function(){var e=window.open("https://docs.google.com/viewer?url="+encodeURIComponent(t)+"&embedded=true","_blank");e.focus(),e.print()}})}),(0,le.jsx)("iframe",{src:"https://docs.google.com/viewer?url="+encodeURIComponent(t)+"&embedded=true",id:"documentIframe",style:{width:"100%",height:"700px"},title:"Document Viewer",onLoad:function(){g()}},i)]})]}):(0,le.jsxs)(le.Fragment,{children:[f&&(0,le.jsx)(F.default,{style:{top:0,bottom:0,left:0,right:0,position:"absolute",justifyContent:"center",alignItems:"center",height:"700px"},children:(0,le.jsx)(c.default,{animating:!0,size:"lg",color:"#7B9CFF"})}),""!==t&&(0,le.jsx)("iframe",{src:t,style:{width:"100%",height:"700px"},title:"PDF Viewer",onLoad:g})]})})})},ft=function(e){var t=e.activeButtonValue,r=e.userEmail,a=((0,$.useSelector)((function(e){return e.chatListData})),(0,$.useSelector)((function(e){return e.chatMessagesData}))),u=(0,$.useSelector)((function(e){return e.selectedChatData})),f=(0,$.useSelector)((function(e){return e.activeChatId})),h=(0,$.useSelector)((function(e){return e.loadMoreMessagesLoading})),g=(0,$.useSelector)((function(e){return e.noMoreMessagesData})),m=(0,v.useState)(!1),y=(0,l.default)(m,2),p=y[0],x=y[1],j=(0,v.useRef)(),b=(0,v.useState)(null),D=(0,l.default)(b,2),C=D[0],S=D[1],W=(0,v.useState)(null),M=(0,l.default)(W,2),P=M[0],L=M[1],N=(0,v.useState)(!1),H=(0,l.default)(N,2),O=H[0],U=H[1],Y=function(){S(null)},_=(0,$.useDispatch)(),q=(0,v.useState)(u.read),G=(0,l.default)(q,2),X=(G[0],G[1],function(){_((0,Q.setReadByListModalVisible)(!0))}),K=(0,v.useRef)(new A.default.Value(0)).current;(0,v.useEffect)((function(){A.default.loop(A.default.sequence([A.default.timing(K,{toValue:1,duration:2e3,useNativeDriver:!1}),A.default.timing(K,{toValue:0,duration:2e3,useNativeDriver:!1})])).start()}),[K]);var ee=K.interpolate({inputRange:[0,.25,.5,.75,1],outputRange:["rgb(255, 100, 100)","rgb(100, 255, 100)","rgb(100, 100, 255)","rgb(255, 255, 100)","rgb(255, 100, 255)"]}),te=function(){var e=(0,i.default)((function*(){var e;if(_((0,Q.setLoadMoreMessagesLoading)(!0)),_((0,Q.setNoMoreMessagesData)(!1)),ue){_((0,Q.setLoadMoreMessagesLoading)(!0)),_((0,Q.setNoMoreMessagesData)(!1)),e=(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats",u.id,"messages"),(0,V.orderBy)("timestamp","desc"),(0,V.startAfter)(ue),(0,V.limit)(10));try{return(0,V.onSnapshot)(e,(function(e){if(e.empty)return console.log("No more data to load"),void setTimeout((function(){_((0,Q.setLoadMoreMessagesLoading)(!1)),_((0,Q.setNoMoreMessagesData)(!0)),ue=null}),0);var t=[];e.forEach((function(e){t.push(ce({id:e.id},e.data()))})),setTimeout((function(){_((0,Q.setChatMessagesData)([].concat((0,o.default)(a),t))),_((0,Q.setLoadMoreMessagesLoading)(!1)),ue=e.docs[e.docs.length-1]}),0)}))}catch(t){console.error("Error fetching data from Firebase:",t),setTimeout((function(){return _((0,Q.setLoadMoreMessagesLoading)(!1))}),0)}}else _((0,Q.setLoadMoreMessagesLoading)(!1)),_((0,Q.setNoMoreMessagesData)(!0))}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,i.default)((function*(){var e=J.projectControlAuth.currentUser?J.projectControlAuth.currentUser.email:"",t=(0,V.doc)(J.projectExtensionFirestore,"chats",f);if(""!==e)try{yield(0,V.updateDoc)(t,{read:!0,readBy:(0,V.arrayUnion)(e)})}catch(n){console.error("Error updating document: ",n)}}));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){f==u.id&&(u.stepIndicator.value!==t&&0!==t?(_((0,Q.setChatMessagesData)([])),_((0,Q.setActiveChatId)(""))):ne())}),[u]);var re=function(){_((0,Q.setPreviewInvoiceVisible)(!0))},oe=function(e){var t=e.match(/(\d{4})\/(\d{2})\/(\d{2}) at (\d{2}):(\d{2}):(\d{2})/);if(!t)return e;var n=new Date(t[1],t[2]-1,t[3],t[4],t[5],t[6]),r=n.getHours(),o=r%12||12,i=r>=12?"PM":"AM";return n.getFullYear().toString().substr(-2)+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]+" "+n.getDate()+", "+o+":"+n.getMinutes().toString().padStart(2,"0")+" "+i},ie=function(e){var t=e.split("@");return(0,l.default)(t,1)[0]},ae=function(e,t){var n=new RegExp("(https?:\\/\\/[^\\s]+)","g"),r=t.split(n);return r.map((function(t,n){var r=t.length>30&&!t.includes(" ")?function(e,t){for(var n="";e.length>0;)n+=e.substring(0,t)+"\u200b",e=e.substring(t);return n}(t,30):t;return de(t)?(0,le.jsx)(B.default,{onPress:function(){return e=t,void k.default.canOpenURL(e).then((function(t){t?k.default.openURL(e):console.log("Don't know how to open URI: "+e)}));var e},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",color:e?"black":"white",fontSize:16,flexShrink:1,textDecorationLine:"underline",flexWrap:"wrap"},children:r})},n):(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:"400",color:e?"black":"white",fontSize:16,flexShrink:1,flexWrap:"wrap"},children:r},n)}))},se=function(e){var t=24,r=e.toLowerCase();return r.endsWith(".pdf")?(0,le.jsx)(R.default,{name:"picture-as-pdf",size:t,color:"white"}):r.endsWith(".docx")||r.endsWith(".doc")?(0,le.jsx)(T.default,{name:"microsoft-word",size:t,color:"white"}):r.endsWith(".xlsx")||r.endsWith(".xls")||r.endsWith(".csv")?(0,le.jsx)(T.default,{name:"microsoft-excel",size:t,color:"white"}):r.endsWith(".rar")||r.endsWith(".zip")?(0,le.jsx)(Z.default,{source:{uri:n(25333),priority:Z.default.priority.high},style:{width:t,height:t},resizeMode:Z.default.resizeMode.cover}):(0,le.jsx)(R.default,{name:"insert-drive-file",size:t,color:"black"})},de=function(e){return new RegExp("^(http://www\\.|https://www\\.|http://|https://)[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$").test(e)};return a.length>0?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(I.default,{ref:j,data:a,renderItem:function(e){var t=e.item,n=e.index,r=t.sender===ge,o=0===n,i=C===n;return(0,le.jsxs)(F.default,{style:{flexDirection:r?"row":"row-reverse",width:"100%",alignSelf:r?"flex-start":"flex-end",marginVertical:4,maxWidth:"60%"},children:["IssuedInvoice"==t.messageType&&(0,le.jsxs)(F.default,{style:{flexDirection:"column",alignItems:"flex-end",flex:1},children:[(0,le.jsxs)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:[(0,le.jsx)(A.default.View,{style:{padding:7,flex:1,borderRadius:20,backgroundColor:r?"#EFEFEF":"#0A7CFF",marginRight:r?0:10,borderWidth:3,borderColor:ee},children:(0,le.jsx)(B.default,{onPress:re,children:(0,le.jsx)(d.default,{underline:!0,selectable:!0,style:{fontWeight:400,color:r?"black":"white",fontSize:16},children:t.text.trim()})})}),o&&u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Already read by the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail-open",size:20,color:"#1B81C2"})})}),o&&!u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Message sent to the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail",size:20,color:"#1B81C2"})})}),o&&u.readBy.length>0&&(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(B.default,{focusable:!1,onHoverIn:function(){return x(!0)},onHoverOut:function(){return x(!1)},onPress:X,children:(0,le.jsx)(z.default,{name:"eye",size:20,color:p?"#c5d1ce":"#75A99C"})})})]}),(0,le.jsx)(d.default,{style:{fontWeight:"300",color:"gray",fontSize:11,marginTop:4,marginBottom:4,marginLeft:r?15:0,marginRight:r?0:15},selectable:!0,children:r?oe(t.timestamp)+(t.ip?" - "+t.ip+(t.ipCountry?" - "+t.ipCountry:""):""):oe(t.timestamp)+" - "+ie(t.sender)+(t.ip?" - "+t.ip:"")+(t.ipCountry?" - "+t.ipCountry:"")})]}),"InputPayment"==t.messageType&&(0,le.jsxs)(F.default,{style:{flexDirection:"column",alignItems:"flex-end",flex:1},children:[(0,le.jsxs)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:[(0,le.jsx)(A.default.View,{style:{padding:7,flex:1,borderRadius:20,backgroundColor:r?"#EFEFEF":"#0A7CFF",marginRight:r?0:10,borderWidth:3,borderColor:ee},children:(0,le.jsx)(d.default,{selectable:!0,style:{fontWeight:400,color:r?"black":"white",fontSize:16},children:t.text.trim()})}),o&&u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Already read by the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail-open",size:20,color:"#1B81C2"})})}),o&&!u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Message sent to the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail",size:20,color:"#1B81C2"})})}),o&&u.readBy.length>0&&(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(B.default,{focusable:!1,onHoverIn:function(){return x(!0)},onHoverOut:function(){return x(!1)},onPress:X,children:(0,le.jsx)(z.default,{name:"eye",size:20,color:p?"#c5d1ce":"#75A99C"})})})]}),(0,le.jsx)(d.default,{style:{fontWeight:"300",color:"gray",fontSize:11,marginTop:4,marginBottom:4,marginLeft:r?15:0,marginRight:r?0:15},selectable:!0,children:r?oe(t.timestamp)+(t.ip?" - "+t.ip+(t.ipCountry?" - "+t.ipCountry:""):""):oe(t.timestamp)+" - "+ie(t.sender)+(t.ip?" - "+t.ip:"")+(t.ipCountry?" - "+t.ipCountry:"")})]}),!t.messageType&&t.file&&"attachment"==t.file.type&&(0,le.jsxs)(F.default,{style:{flexDirection:"column",alignItems:r?"flex-start":"flex-end",flex:1},children:[t.text&&""!==t.text&&(0,le.jsx)(F.default,{style:{marginBottom:5,padding:10,borderRadius:20,backgroundColor:r?"#EFEFEF":"#0A7CFF",marginLeft:r?10:0,marginRight:r?0:10,flexShrink:1},children:ae(r,t.text.trim())}),(0,le.jsxs)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:[(0,le.jsx)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:(0,le.jsx)(F.default,{style:{marginBottom:5,padding:10,borderRadius:20,backgroundColor:r?"#EFEFEF":"#0A7CFF",marginLeft:r?10:0,marginRight:r?0:10,flexShrink:1},children:(0,le.jsxs)(B.default,{onPress:function(){t.file.name.endsWith(".pdf")?(Ie="pdf",_((0,Q.setPdfViewerModalVisible)(!0)),_((0,Q.setSelectedFileUrl)(t.file.url)),Ae=t.file.url):(Ie="not-pdf",_((0,Q.setPdfViewerModalVisible)(!0)),_((0,Q.setSelectedFileUrl)(t.file.url)),Ae=t.file.url)},style:{flexDirection:"row"},children:[(0,le.jsx)(F.default,{style:{marginRight:5},children:se(t.file.name)}),(0,le.jsx)(d.default,{underline:!0,selectable:!0,style:{fontWeight:400,color:r?"black":"white",fontSize:16},children:t.file.name.trim()})]})})}),o&&u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Already read by the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail-open",size:20,color:"#1B81C2"})})}),o&&!u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Message sent to the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail",size:20,color:"#1B81C2"})})}),o&&u.readBy.length>0&&(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(B.default,{focusable:!1,onHoverIn:function(){return x(!0)},onHoverOut:function(){return x(!1)},onPress:X,children:(0,le.jsx)(z.default,{name:"eye",size:20,color:p?"#c5d1ce":"#75A99C"})})})]}),(0,le.jsx)(d.default,{style:{fontWeight:"300",color:"gray",fontSize:11,marginTop:4,marginBottom:4,marginLeft:r?15:0,marginRight:r?0:15},selectable:!0,children:r?oe(t.timestamp)+(t.ip?" - "+t.ip+(t.ipCountry?" - "+t.ipCountry:""):""):oe(t.timestamp)+" - "+ie(t.sender)+(t.ip?" - "+t.ip:"")+(t.ipCountry?" - "+t.ipCountry:"")})]}),!t.messageType&&t.file&&"image"==t.file.type&&(0,le.jsxs)(F.default,{style:{flexDirection:"column",alignItems:r?"flex-start":"flex-end",flex:1},children:[t.text&&""!==t.text&&(0,le.jsx)(F.default,{style:{marginBottom:5,padding:10,borderRadius:20,backgroundColor:r?"#EFEFEF":"#0A7CFF",marginLeft:r?10:0,marginRight:r?0:10,flexShrink:1},children:ae(r,t.text.trim())}),(0,le.jsxs)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:[(0,le.jsx)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:(0,le.jsx)(F.default,{style:{padding:0,borderRadius:10,marginLeft:r?10:0,marginRight:r?0:10,flexShrink:1},children:(0,le.jsxs)(B.default,{onMouseEnter:function(){return function(e){S(e)}(n)},onMouseLeave:Y,onPress:function(){return function(e){L(e),U(!0)}(n)},style:{position:"relative",width:250,height:250,alignSelf:"center"},children:[(0,le.jsx)(Z.default,{source:{uri:t.file.url,priority:Z.default.priority.normal},style:{width:"100%",height:"100%",borderRadius:10,borderWidth:1,borderColor:"#DADDE1"},resizeMode:Z.default.resizeMode.contain}),i&&(0,le.jsx)(F.default,{style:ce(ce({},w.default.absoluteFillObject),{},{backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:10})})]})})}),o&&u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Already read by the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail-open",size:20,color:"#1B81C2"})})}),o&&!u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Message sent to the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail",size:20,color:"#1B81C2"})})}),o&&u.readBy.length>0&&(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(B.default,{focusable:!1,onHoverIn:function(){return x(!0)},onHoverOut:function(){return x(!1)},onPress:X,children:(0,le.jsx)(z.default,{name:"eye",size:20,color:p?"#c5d1ce":"#75A99C"})})})]}),(0,le.jsx)(d.default,{style:{fontWeight:"300",color:"gray",fontSize:11,marginTop:4,marginBottom:4,marginLeft:r?15:0,marginRight:r?0:15},selectable:!0,children:r?oe(t.timestamp)+(t.ip?" - "+t.ip+(t.ipCountry?" - "+t.ipCountry:""):""):oe(t.timestamp)+" - "+ie(t.sender)+(t.ip?" - "+t.ip:"")+(t.ipCountry?" - "+t.ipCountry:"")})]}),!t.messageType&&!t.file&&(0,le.jsxs)(F.default,{style:{flexDirection:"column",alignItems:r?"flex-start":"flex-end",flex:1},children:[(0,le.jsxs)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:[(0,le.jsx)(F.default,{style:{flexDirection:r?"row":"row-reverse",flex:1},children:(0,le.jsx)(F.default,{style:{padding:10,borderRadius:20,backgroundColor:r?"#EFEFEF":"#0A7CFF",marginLeft:r?10:0,marginRight:r?0:10,flexShrink:1},children:ae(r,t.text.trim())})}),o&&u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Already read by the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail-open",size:20,color:"#1B81C2"})})}),o&&!u.customerRead&&!r&&(0,le.jsx)(s.Tooltip,{label:"Message sent to the customer",openDelay:200,bgColor:"#FAFAFA",_text:{color:"#1C2B33"},children:(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(E.default,{name:"mail",size:20,color:"#1B81C2"})})}),o&&u.readBy.length>0&&(0,le.jsx)(F.default,{style:{alignSelf:"flex-end",marginLeft:r?8:0,marginRight:r?0:8,alignSelf:"center"},children:(0,le.jsx)(B.default,{focusable:!1,onHoverIn:function(){return x(!0)},onHoverOut:function(){return x(!1)},onPress:X,children:(0,le.jsx)(z.default,{name:"eye",size:20,color:p?"#c5d1ce":"#75A99C"})})})]}),(0,le.jsx)(d.default,{style:{fontWeight:"300",color:"gray",fontSize:11,marginTop:4,marginBottom:4,marginLeft:r?15:0,marginRight:r?0:15},selectable:!0,children:r?oe(t.timestamp)+(t.ip?" - "+t.ip+(t.ipCountry?" - "+t.ipCountry:""):""):oe(t.timestamp)+" - "+ie(t.sender)+(t.ip?" - "+t.ip:"")+(t.ipCountry?" - "+t.ipCountry:"")})]})]})},keyExtractor:function(e){return e.id},initialNumToRender:10,maxToRenderPerBatch:10,windowSize:500,onEndReachedThreshold:.05,ListFooterComponent:function(){return(0,le.jsx)(le.Fragment,{children:!g&&(0,le.jsx)(F.default,{style:{paddingVertical:20,height:60},children:h&&(0,le.jsx)(c.default,{animating:!0,size:"sm",color:"#7B9CFF"})})})},onEndReached:te,inverted:!0}),null!==P&&(0,le.jsx)(ct,{isVisible:O,onClose:function(){U(!1),L(null)},imageUrl:a[P].file.url}),(0,le.jsx)(st,{userEmail:r,handleReadByListModalClose:function(){_((0,Q.setReadByListModalVisible)(!1))}})]}):null};function ht(){var e=(0,v.useState)(""),t=(0,l.default)(e,2),n=t[0],r=t[1],o=(0,H.useNavigation)(),a=((0,$.useSelector)((function(e){return e.chatListData})),(0,$.useSelector)((function(e){return e.activeChatId})),(0,$.useSelector)((function(e){return e.chatMessageBoxLoading}))),s=(0,$.useSelector)((function(e){return e.chatListSearchText})),u=(0,$.useSelector)((function(e){return e.chatMessagesData})),g=(0,$.useSelector)((function(e){return e.loginName})),m=(0,v.useState)(g),y=(0,l.default)(m,2),p=y[0],x=y[1],A=S.default.get("window").width,I=(0,v.useState)("All messages"),M=(0,l.default)(I,2),B=M[0],k=M[1],P=(0,v.useState)(0),z=(0,l.default)(P,2),L=z[0],N=z[1],Y=(0,v.useState)(""),_=(0,l.default)(Y,2),q=_[0],G=_[1],K=(0,v.useState)(!1),ee=(0,l.default)(K,2),te=ee[0],ne=ee[1],re=(0,v.useState)(!1),oe=(0,l.default)(re,2),ie=oe[0],ae=oe[1],se=(0,v.useState)(null),ue=(0,l.default)(se,2),he=ue[0],ge=ue[1],me=(0,v.useState)(0),ye=(0,l.default)(me,2),pe=ye[0],xe=ye[1],je=(0,$.useDispatch)();(0,v.useEffect)((function(){var e=function(){var e=(0,i.default)((function*(){try{var e=(yield O.default.get("https://api.ipify.org?format=json")).data.ip;if(Se=e,e){var t=(yield O.default.get("https://ipapi.co/"+e+"/json/")).data.country_name;we=t}}catch(n){console.error("Error fetching IP data:",n)}}));return function(){return e.apply(this,arguments)}}(),t=(0,V.collection)(J.projectExtensionFirestore,"chats"),n=(0,V.query)(t,(0,V.where)("read","==",!1),(0,V.limit)(10)),r=(0,V.onSnapshot)(n,(function(t){xe(t.size),e()}),(function(e){console.error("Error fetching documents: ",e)}));return function(){return r()}}),[]);var be=function(e,t){B==e||(k(e),N(t),G(""),ne(!1),je((0,Q.setActiveChatId)("")),je((0,Q.setLoadMoreLoading)(!1)),je((0,Q.setNoMoreData)(!1)))};(0,v.useEffect)((function(){var e;je((0,Q.setChatMessagesData)([])),je((0,Q.setChatMessageBoxLoading)(!1)),je((0,Q.setActiveChatId)(""));e=function(){var e=s.toUpperCase();return te?0===L?""===e?(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.where)("keywords","array-contains",e),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):""===e?(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!1),(0,V.where)("stepIndicator.value","==",L),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",L),(0,V.where)("read","==",!1),(0,V.where)("keywords","array-contains",e),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):ie?0===L?""===e?(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!0),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!0),(0,V.where)("keywords","array-contains",e),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):""===e?(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("read","==",!0),(0,V.where)("stepIndicator.value","==",L),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",L),(0,V.where)("read","==",!0),(0,V.where)("keywords","array-contains",e),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):0===L?""===e?(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("keywords","array-contains",e),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):""===e?(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",L),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10)):(0,V.query)((0,V.collection)(J.projectExtensionFirestore,"chats"),(0,V.where)("stepIndicator.value","==",L),(0,V.where)("keywords","array-contains",e),(0,V.orderBy)("lastMessageDate","desc"),(0,V.limit)(10))}();var t=(0,V.onSnapshot)(e,(function(e){var t=[];e.forEach((function(e){t.push(ce({id:e.id},e.data()))})),je((0,Q.setChatListData)(t)),de=e.docs[e.docs.length-1],je((0,Q.setNoMoreData)(!1)),je((0,Q.setLoadMoreLoading)(!1)),je((0,Q.setLoadingModalVisible)(!1))}),(function(e){console.error("Error fetching data from Firebase:",e)}));return function(){t&&t()}}),[te,ie,L,s]),(0,v.useEffect)((function(){return J.projectControlAuth.onAuthStateChanged((function(e){e||o.navigate("Login")}))}),[]);var De=function(e){e.exists()?e.data().active||(0,U.signOut)(J.projectControlAuth).then((function(){o.navigate("Login")})).catch((function(e){console.error("Error signing out:",e)})):(0,U.signOut)(J.projectControlAuth).then((function(){o.navigate("Login")})).catch((function(e){console.error("Error signing out:",e)}))};(0,v.useEffect)((function(){var e=function(){var e,t=null==(e=J.projectControlAuth.currentUser)?void 0:e.email;if(t){var n=(0,V.doc)(We,"accounts",t);return(0,V.onSnapshot)(n,De)}}();return function(){e()}}),[]),(0,v.useEffect)((function(){var e=Me();e&&(ve(e),r(e),Ce(e))}),[]);var Ce=function(e){},ve=function(){var e=(0,i.default)((function*(e){try{var t=(0,V.doc)(We,"accounts",e);(yield(0,V.getDoc)(t)).exists()}catch(n){console.error("Error fetching field value:",n)}}));return function(t){return e.apply(this,arguments)}}(),Fe=((0,j.useBreakpointValue)([!0,!0,!0,!1]),w.default.create({container:{flex:1},image:{flex:1}}));return(0,le.jsx)(le.Fragment,{children:(0,le.jsxs)(C.NativeBaseProvider,{children:[(0,le.jsxs)(F.default,{style:{backgroundColor:"#A6BCFE",height:"100%",width:"100%",flexDirection:"column"},bgColor:"#A6BCFE",h:"100vh",w:"full",flexDirection:"column",children:[(0,le.jsxs)(b.default,{px:"3",bgColor:"#7b9cff",height:54,position:"sticky",top:0,zIndex:999,flexDirection:"row",alignItems:"center",borderBottomWidth:2,borderBottomColor:"cyan.500",children:[(0,le.jsx)(X.default,{selectedScreen:fe}),(0,le.jsx)(b.default,{w:A<=960?0:850,h:[10,10,10,10],marginBottom:1.5,marginTop:1.5,paddingLeft:5,children:(0,le.jsx)(Z.default,{source:{uri:"https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FC-HUB%20LOGO%20FULL.png?alt=media&token=79ed34a5-f960-4154-b4e8-897b0f3248d4",priority:Z.default.priority.high},resizeMode:Z.default.resizeMode.stretch,style:Fe.image})}),(0,le.jsx)(b.default,{w:A<=960?120:0,h:A<=960?6:10,marginBottom:1.5,marginTop:1.5,marginLeft:[3,3,3,10],children:(0,le.jsx)(Z.default,{source:{uri:"https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FC-HUB%20LOGO%20HALF.png?alt=media&token=7ce6aef2-0527-40c7-b1ce-e47079e144df",priority:Z.default.priority.high},resizeMode:Z.default.resizeMode.stretch,style:Fe.image})}),(0,le.jsx)((function(e){var t=e.name,n=e.handleSignOut,r=(0,v.useState)(!1),o=(0,l.default)(r,2),i=o[0],a=o[1],s=function(){a(!i)};return(0,le.jsx)(b.default,{w:[100,200,1020],h:[10,10,10],flex:1,children:(0,le.jsx)(D.default,{direction:"row-reverse",children:(0,le.jsx)(h.Popover,{isOpen:i,trigger:function(e){return(0,le.jsxs)(d.default,ce(ce({color:"white",marginTop:[2,2,2],fontSize:[17,18,20],marginRight:[1,3,5]},e),{},{onPress:s,children:[(0,le.jsx)(T.default,{name:"account",size:[20,25,30],color:"white"})," ",t," ",(0,le.jsx)(E.default,{name:"caret-down",size:16,color:"white"})]}))},onClose:function(){return a(!i)},placement:"bottom right",trapFocus:!1,children:(0,le.jsx)(h.Popover.Content,{backgroundColor:"#7B9CFF",children:(0,le.jsx)(h.Popover.Body,{backgroundColor:"#7B9CFF",children:(0,le.jsx)(f.Button,{_hover:{bgColor:"blueGray.500"},onPress:n,leftIcon:(0,le.jsx)(T.default,{name:"logout",size:20,color:"white"}),bgColor:"transparent",children:"Logout"})})})})})})}),{name:p,handleSignOut:function(){J.projectControlAuth.currentUser?(0,U.signOut)(J.projectControlAuth).then((function(){o.navigate("Login"),r(""),x("")})).catch((function(){})):(console.log("No user signed in to sign out"),o.navigate("Login"))}})]}),(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row"},flex:[1],flexDirection:"row",children:(0,le.jsx)(F.default,{style:{flex:1,backgroundColor:"#A6BCFE",height:"100%"},children:(0,le.jsxs)(F.default,{style:{flex:1,margin:10},children:[(0,le.jsx)(F.default,{style:{borderBottomWidth:1,borderColor:"#DADDE1",width:"100%",backgroundColor:"white",height:60,borderTopLeftRadius:5,borderTopRightRadius:5},children:(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row"},children:(0,le.jsx)(F.default,{style:{flex:1,flexDirection:"row"},children:(0,le.jsxs)(W.default,{scrollEnabled:!0,horizontal:!0,children:[(0,le.jsx)(ze,{title:"All messages",onPress:function(){return be("All messages",0)},isActive:"All messages"===B,headerCount:pe>0?(0,le.jsx)(F.default,{style:{backgroundColor:"#FF0000",borderRadius:100,width:20,height:20,marginLeft:10,justifyContent:"center",alignItems:"center"},children:(0,le.jsx)(d.default,{style:{color:"white",fontWeight:700,fontSize:14},children:pe>9?"9+":pe})}):(0,le.jsx)(le.Fragment,{})},"All messages"),(0,le.jsx)(ze,{title:"Negotiation",onPress:function(){return be("Negotiation",1)},isActive:"Negotiation"===B},"Negotiation"),(0,le.jsx)(ze,{title:"Issued Proforma Invoice",onPress:function(){return be("Issued Proforma Invoice",2)},isActive:"Issued Proforma Invoice"===B},"Issued Proforma Invoice"),(0,le.jsx)(ze,{title:"Order Item",onPress:function(){return be("Order Item",3)},isActive:"Order Item"===B},"Order Item"),(0,le.jsx)(ze,{title:"Payment Confirmed",onPress:function(){return be("Payment Confirmed",4)},isActive:"Payment Confirmed"===B},"Payment Confirmed"),(0,le.jsx)(ze,{title:"Shipping Schedule",onPress:function(){return be("Shipping Schedule",5)},isActive:"Shipping Schedule"===B},"Shipping Schedule"),(0,le.jsx)(ze,{title:"Documents",onPress:function(){return be("Documents",6)},isActive:"Documents"===B},"Documents"),(0,le.jsx)(ze,{title:"Vehicle Received",onPress:function(){return be("Vehicle Received",7)},isActive:"Vehicle Received"===B},"Vehicle Received")]})})})}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsxs)(F.default,{children:[(0,le.jsx)(F.default,{style:{flex:1,maxWidth:380,minWidth:380,borderRightWidth:1,borderColor:"#DADDE1",maxHeight:100,minHeight:100,backgroundColor:"white"},children:(0,le.jsxs)(F.default,{style:{flex:1,paddingHorizontal:10},children:[(0,le.jsx)(Ye,{lastVisible:he,setLastVisible:ge,unreadButtonValue:te,activeButtonValue:L}),(0,le.jsxs)(F.default,{style:{flex:1,flexDirection:"row"},children:[(0,le.jsx)(Ee,{title:"Unread ",onPress:function(){return e="Unread",G((function(t){return t===e?"":e})),ne((function(e){return!e})),void ae(!1);var e},isActive:"Unread"===q,iconActive:(0,le.jsx)(R.default,{name:"mark-email-unread",color:"#0A78BE",size:16}),iconNotActive:(0,le.jsx)(R.default,{name:"mark-email-unread",color:"#1C2B33",size:16})},"Unread"),(0,le.jsx)(Ee,{title:"Read ",onPress:function(){return e="Read",G((function(t){return t===e?"":e})),ae((function(e){return!e})),void ne(!1);var e},isActive:"Read"===q,iconActive:(0,le.jsx)(R.default,{name:"mark-email-read",color:"#0A78BE",size:16}),iconNotActive:(0,le.jsx)(R.default,{name:"mark-email-read",color:"#1C2B33",size:16})},"Read")]})]})}),(0,le.jsx)(F.default,{style:{flex:1,maxWidth:380,minWidth:380,borderRightWidth:1,borderColor:"#DADDE1",backgroundColor:"white",borderBottomLeftRadius:5},children:(0,le.jsx)(Ve,{unreadButtonValue:te,activeButtonValue:L})})]}),a?(0,le.jsx)(F.default,{style:{flex:1,backgroundColor:"white",justifyContent:"center",alignItems:"center"},children:(0,le.jsx)(c.default,{animating:!0,size:"lg",color:"#7B9CFF"})}):(0,le.jsxs)(F.default,{style:{flex:1},children:[(0,le.jsx)(F.default,{style:{flex:1,minHeight:90,maxHeight:A<1281?130:125,borderBottomWidth:1,borderColor:"#DADDE1",backgroundColor:"white",justifyContent:"center"},children:(0,le.jsx)(W.default,{scrollEnabled:!0,horizontal:!0,children:u.length<1?null:(0,le.jsx)(lt,{})})}),(0,le.jsxs)(F.default,{style:{flex:1,borderColor:"#DADDE1",backgroundColor:"white",borderBottomRightRadius:5,paddingBottom:5},children:[(0,le.jsxs)(F.default,{style:{flex:1},children:[(0,le.jsx)(ft,{activeButtonValue:L,userEmail:n}),(0,le.jsx)(ut,{})]}),(0,le.jsx)(F.default,{style:{maxHeight:180,justifyContent:"flex-end",alignItems:"center"},children:u.length<1?null:(0,le.jsx)(Oe,{})})]})]})]})]})})})]}),(0,le.jsx)(Pe,{})]})})}},29556:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/RMJ Invoice Signature with Hanko.802b8c4687821e25dd12.png"},77804:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/RMJ logo for invoice.260660476b8ac2af1cf6.png"},29413:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_1_off.f76cc5beb28c26ffc60f.png"},40027:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAoCAYAAAC8cqlMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAvBJREFUeNrsmE9rE0EUwGf/NJC1NKkbCnoI8SJ4iCTgB4i9+QfsxYsIZo/BS3IXSsEPkIvkmBTBi5cK1d60H0BM0IPgxeBFDFlNS92aNMn6JpnKdLub7OzubIvsg8eU6eS9+c289/ImCEUSSSSzRAjb4dNPZhKGNdB7oDnQjM2yNmgL9BXo1pOs0Ds3IACAN7wOWvTw8QboBgC1zxQEIMoEIunDTI/AVM8EBCDqHm/B8XYARgsVhAOEI4zIOZyKnMwXiX2XN1Lr4qryCLRAKoxVcGXZBd1EpVTLUpm++swJNzlz5biiiY4Ate47+KsJWnaAQGS+PFmH10/BEbmJJOf0S9I3LtpAFAlAgdFwgQAVyS2GIf/8yDYQdZ/G6yg8yZ0GqXUzYWziWXMPff89RJcuyOhxPsE0N0vo0FoP4wjx5uiRZc4tyFoYIPiE6ZFlzl2vVeua9D+a9xMop8qopQ9R/uUe0xwOBbcb8CktKL/5mV+IeHP0yDLX/NEPK9k37ULrRKuMT5geWeY+dProz9DkDdEjXfGp0Aq0L1pNK+3VdDzDEaRCd8L0jWwE6eXtN+MmfWIcmsaqfdUqpfCjRQvIkYbtkQ61wQFCm1V+MUwjABiN2JkIcVqx5qDHnKjYQdhXrekm8qSrZZHdyecoCAqmSmx6vZ3Jnpxeh9za+PP/44O1spVSvl+YAGbOi3/WFmW+lFIa50rkOT/Zn7p8YHxB+JNpmAX1A0Uk/524qjrp5z8v90coAX2gQs/LAjLisqC3Hy533Dq8+uKXcjgy1cEILVrt0XZjEjqIS4L+5cGyEQjIrdf710YODo9FAsc7d5Y+z7N1981+ZjBGKstJx0Skb99eas9bN/f1k0tJigt/yo6LRVlVUj1Ejbo9/YL0CaJKhiQIM2FGpunq+rMXJT0mCkwwg7GpB5YjH/WjFYhXVRZPAg3HpgHxrl9XF1znyPvOkQJ5pULILFrt0XYhBA8Oh6Z+Y2XBiEpZJGcofwUYAN7xNEJ5/2aeAAAAAElFTkSuQmCC"},35290:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_2_off.e712bd6632e96dd22c58.png"},22558:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_2_on.d23d7736dceb729424f1.png"},38715:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_3_off.d12293f7ed3f33186f1d.png"},80851:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_3_on.4eb3c77558673517d414.png"},65256:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_4_off.c20b36cce08d498bd949.png"},14740:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_4_on.074876396c26422a5e30.png"},58038:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_5_off.5bf3e9023d7831a5233d.png"},80904:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAoCAYAAAC8cqlMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATBJREFUeNrsWN0NwiAQRtMBXMEN7B7tDjoJMIFxA0cwoe8++Nom3cRuoIe2iSWchrakUO9LCL+B7+O4g5YxAsELVjGRVUoJyHhblXmei65vHdnGc6QcnRAUsQmRSDkKv7jrtDSLEGaFEOKh0xKdnYTQE2VkyLX6BTxJUL5JqDucZVmvXhRFvEdLSvlKf+UjScjkOOcUfulo+Qi32DhbGE6mWFhPbGsbE26xfiwMD7oQG8Z6pDcwj61taot826RBFrkpZc5sbVu8j7hawFmIj7PvizjqI+YZjwWdL9KFGKwQbaIuQfUcOO/mgytuERhwYGH/ALs4XYgQAPaQHd/agkIKhGqnmx3E7CC7BiSmBiKps7O3yrfM2IEZcRo9Q1mWjzmh16fvERNVVTEC4TeeAgwAPLnfJkq2XusAAAAASUVORK5CYII="},49232:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_6_off.0930704cb987ab326d3c.png"},81151:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_6_on.54b7ed599667615cf944.png"},88618:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_7_off.283dc88aea34aeec28a8.png"},30443:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/chat_step_7_on.8f1b989b1afa5104bc42.png"},25333:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/rar_icon.2a959258c5bfc3afaea5.png"},42480:()=>{}}]);
//# sourceMappingURL=73.8bb2d8cf.chunk.js.map