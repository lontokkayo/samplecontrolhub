{"version":3,"file":"static/js/73.586f967a.chunk.js","mappings":"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","sources":["assets/chat_step|sync|/^/chat_step_.*_off/.png$","assets/chat_step|sync|/^/chat_step_.*_on/.png$","components/DevAdminComponents/ChatMessages.js"],"sourcesContent":["var map = {\n\t\"./chat_step_1_off.png\": 29413,\n\t\"./chat_step_2_off.png\": 35290,\n\t\"./chat_step_3_off.png\": 38715,\n\t\"./chat_step_4_off.png\": 65256,\n\t\"./chat_step_5_off.png\": 58038,\n\t\"./chat_step_6_off.png\": 49232,\n\t\"./chat_step_7_off.png\": 88618\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 66516;","var map = {\n\t\"./chat_step_1_on.png\": 40027,\n\t\"./chat_step_2_on.png\": 22558,\n\t\"./chat_step_3_on.png\": 80851,\n\t\"./chat_step_4_on.png\": 14740,\n\t\"./chat_step_5_on.png\": 80904,\n\t\"./chat_step_6_on.png\": 81151,\n\t\"./chat_step_7_on.png\": 30443\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 82049;","import {\r\n    Box,\r\n    Button,\r\n    Center,\r\n    Flex,\r\n    HStack,\r\n    Icon,\r\n    Image as NativeImage,\r\n    Input,\r\n    Modal,\r\n    NativeBaseProvider,\r\n    Popover,\r\n    Spinner,\r\n    Stack,\r\n    Text,\r\n    VStack,\r\n    useBreakpointValue,\r\n    TextArea,\r\n    InputRightAddon,\r\n    InputGroup,\r\n    InputLeftAddon,\r\n    Select,\r\n    CheckIcon,\r\n    PresenceTransition,\r\n    CloseIcon,\r\n    ScrollView as ScrollViewNative,\r\n    Divider,\r\n    useDisclosure,\r\n    useDisclose,\r\n    FormControl,\r\n    Checkbox,\r\n    useToast,\r\n    Tooltip,\r\n    Progress,\r\n    Alert\r\n} from 'native-base';\r\nimport React, { useEffect, useRef, useState, useMemo, useCallback, useReducer } from 'react';\r\nimport {\r\n    Dimensions,\r\n    ImageBackground,\r\n    TouchableOpacity,\r\n    TouchableWithoutFeedback,\r\n    StyleSheet,\r\n    View,\r\n    PanResponder,\r\n    Animated,\r\n    InputAccessoryView,\r\n    FlatList,\r\n    ScrollView,\r\n    TouchableHighlight,\r\n    TextInput,\r\n    Image as RNImage,\r\n    Pressable,\r\n    Linking,\r\n    Modal as RNModal,\r\n    Platform,\r\n} from 'react-native';\r\nimport 'react-native-gesture-handler';\r\nimport {\r\n    AntDesign,\r\n    FontAwesome,\r\n    Ionicons,\r\n    MaterialCommunityIcons,\r\n    MaterialIcons,\r\n    Entypo,\r\n    FontAwesome5,\r\n    EvilIcons\r\n} from 'react-native-vector-icons';\r\n// import { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport axios from 'axios';\r\nimport { createUserWithEmailAndPassword, fetchSignInMethodsForEmail, signOut } from 'firebase/auth';\r\nimport { addDoc, collection, doc, getDoc, getFirestore, onSnapshot, setDoc, arrayUnion, updateDoc, query, getDocs, orderBy, startAfter, limit, where, endBefore, endAt, limitToLast, collectionGroup, increment } from 'firebase/firestore';\r\nimport moment from 'moment';\r\nimport { authForCreateUser } from '../../firebasecontrolCreateUser';\r\nimport './../style.css';\r\nimport { projectControlFirestore, projectControlAuth, projectExtensionFirestore, projectExtensionAuth, projectControlFirebase, projectExtensionFirebase } from \"../../crossFirebase\";\r\nimport { launchImageLibrary } from 'react-native-image-picker';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL, listAll, deleteObject } from 'firebase/storage';\r\nimport FastImage from 'react-native-fast-image-web-support';\r\nimport MobileViewDrawer from './SideDrawer/MobileViewDrawer';\r\nimport SideDrawer from './SideDrawer/SideDrawer';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport DraggableFlatList from \"react-native-draggable-flatlist\";\r\nimport { Calendar, LocaleConfig } from 'react-native-calendars';\r\nimport { DragSortableView } from 'react-native-drag-sort';\r\nimport {\r\n    setVehicleListData,\r\n    setSupplyChainsCostsData,\r\n    setSelectedPaidTo,\r\n    setSelectedExpenseName,\r\n    setSupplyChainsCostsModalVisible,\r\n    setVehicleListSupplyChainsCostsData,\r\n    setDeleteImageVisible,\r\n    setSelectedImages,\r\n    setAddAnotherImages,\r\n    setIsAddPhotoVisible,\r\n    setUploadImagesModalVisible,\r\n    setUploadImagesButtonLoading,\r\n    setViewImagesModalVisible,\r\n    setViewImagesData,\r\n    setLoadingModalVisible,\r\n    setAddVehicleListData,\r\n    setEditVehicleModalVisible,\r\n    setFobPriceHistoryModalVisible,\r\n    setChatListData,\r\n    setChatListImageUrl,\r\n    setChatListLastVisible,\r\n    setLoadMoreLoading,\r\n    setNoMoreData,\r\n    setActiveChatId,\r\n    setChatListSearchText,\r\n    setChatMessagesData,\r\n    setChatMessageBoxLoading,\r\n    setSelectedChatData,\r\n    setReadByListModalVisible,\r\n    setLoadMoreMessagesLoading,\r\n    setNoMoreMessagesData,\r\n    setDeleteMessageTemplateVisible,\r\n    setInvoiceData,\r\n    setTransactionModalVisible,\r\n    setPreviewInvoiceVisible,\r\n    setSelectedCustomerData,\r\n} from './redux/store';\r\n// import { TextInput } from 'react-native-gesture-handler';\r\nimport { nanoid } from 'nanoid';\r\nimport { cloneDeep } from 'lodash';\r\nimport StickyHeader from './Header/StickyHeader';\r\nimport { UsePagination } from './VehicleListComponent/UsePagination';\r\nimport Hyperlink from 'react-native-hyperlink';\r\nimport { HmacSHA256, enc } from 'crypto-js';\r\nimport { CRYPTO_KEY } from '@env';\r\nimport { captureRef } from 'react-native-view-shot';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport QRCode from 'react-native-qrcode-svg';\r\n\r\n// import { CollectionGroup } from 'firebase-admin/firestore';\r\nconst { width } = Dimensions.get('window');\r\nlet selectedScreen = 'CHAT MESSAGES'\r\nlet globalLastVisible;\r\nlet globalMessagesLastVisible;\r\nlet globalSearchText = '';\r\nlet globalCustomerId = '';\r\nlet globalChatId = '';\r\nlet globalImageUrl = '';\r\nlet globalCustomerCarName = '';\r\nlet globalCustomerFirstName = '';\r\nlet globalCustomerLastName = '';\r\n\r\nlet globalAdditionalNameArray = [];\r\n\r\nlet globalAdditionalPriceArray = [];\r\n\r\nlet globalMessageTemplateSelectedTitle = '';\r\n\r\nlet userEmail = projectControlAuth.currentUser.email;\r\n\r\nlet formattedIssuingDate = ''; // Initialize the variable outside the conditional rendering block\r\nlet formattedDueDate = '';\r\n\r\nlet transactionModalTitle = '';\r\n\r\nlet transactionModalContentValue = 0;\r\n\r\nlet ip = '';\r\nlet ipCountry = '';\r\n\r\nlet globalInvoiceVariable = {\r\n    carData: {\r\n\r\n    },\r\n    cfs: '',\r\n    placeOfDelivery: '',\r\n    departureCountry: '',\r\n    departurePort: '',\r\n    salesPerson: '',\r\n\r\n    discharge: {\r\n        port: '',\r\n        country: '',\r\n    },\r\n\r\n    consignee: {\r\n        sameAsBuyer: null,\r\n        name: '',\r\n        address: '',\r\n        contactNumber: '',\r\n        fax: '',\r\n        email: '',\r\n    },\r\n\r\n    notifyParty: {\r\n        sameAsConsignee: null,\r\n        name: '',\r\n        address: '',\r\n        contactNumber: '',\r\n        fax: '',\r\n        email: '',\r\n    },\r\n\r\n    paymentDetails: {\r\n        incoterms: '',\r\n        inspectionIsChecked: null,\r\n        inspectionName: '',\r\n        warrantyIsCheck: null,\r\n        warrantyAmount: 0,\r\n        fobPrice: 0,\r\n        freightPrice: 0,\r\n        insurancePrice: 0,\r\n        inspectionPrice: 0,\r\n        totalAmount: 0,\r\n        additionalName: [],\r\n        additionalPrice: [],\r\n    },\r\n\r\n    bankInformations: {\r\n        dueDate: '',\r\n        issuingDate: '',\r\n        bankAccount: {\r\n\r\n        },\r\n        paymentTerms: '',\r\n        salesAgreement: '',\r\n    },\r\n\r\n}\r\n\r\nconst firestore = getFirestore();\r\n\r\nconst getEmailOfCurrentUser = () => {\r\n\r\n    const user = projectControlAuth.currentUser;\r\n    if (user) {\r\n        const email = user.email;\r\n        return email;\r\n    } else {\r\n        // console.log('No user is currently authenticated');\r\n        return null;\r\n    }\r\n};\r\n\r\n\r\n\r\nconst TimelineStatus = ({ data }) => {\r\n\r\n    const selectedChatData = useSelector(state => state.selectedChatData);\r\n\r\n    const changeIndex = data.findIndex(item => selectedChatData.stepIndicator.value < item.value);\r\n\r\n\r\n    return (\r\n        <View style={{ flexDirection: 'row', alignItems: 'center', paddingTop: 3, }}>\r\n            {/* Dots and individual line segments */}\r\n            {data.map((item, index) => (\r\n                <View key={index} style={{ flexDirection: 'row', alignItems: 'center' }}>\r\n                    {/* Dot */}\r\n                    <Tooltip label={item.title} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33' }}>\r\n                        <View style={{\r\n                            width: 20,\r\n                            height: 20,\r\n                            borderRadius: 10,\r\n                            backgroundColor: selectedChatData.stepIndicator.value < item.value ? '#C1C1C1' : '#abf7c7',\r\n                            justifyContent: 'center',\r\n                        }}>\r\n\r\n                            {selectedChatData.stepIndicator.value < item.value ? (\r\n                                <FastImage\r\n                                    source={{\r\n                                        uri: require(`../../assets/chat_step/chat_step_${item.value}_off.png`),\r\n                                        priority: FastImage.priority.normal,\r\n                                    }}\r\n                                    style={{\r\n                                        tintColor: 'rgba(128, 128, 128, 1)',\r\n                                        width: 15,\r\n                                        height: 15,\r\n                                        alignSelf: 'center',\r\n                                    }}\r\n                                    resizeMode={FastImage.resizeMode.stretch}\r\n                                />\r\n                            ) : (\r\n                                <FastImage\r\n                                    source={{\r\n                                        uri: require(`../../assets/chat_step/chat_step_${item.value}_on.png`),\r\n                                        priority: FastImage.priority.normal\r\n                                    }}\r\n                                    style={{\r\n                                        tintColor: 'rgba(128, 128, 128, 1)',\r\n                                        width: 15,\r\n                                        height: 15,\r\n                                        alignSelf: 'center',\r\n                                    }}\r\n                                    resizeMode={FastImage.resizeMode.stretch}\r\n                                />\r\n                            )}\r\n\r\n                        </View>\r\n                    </Tooltip>\r\n                    {/* Line Segment (except for the last dot) */}\r\n                    {index < data.length - 1 && (\r\n                        <View style={{\r\n                            height: 3,\r\n                            width: 20, // Adjust the width to match the space between the dots\r\n                            backgroundColor: selectedChatData.stepIndicator.value <= item.value ? '#C1C1C1' : '#abf7c7',\r\n                        }} />\r\n                    )}\r\n                </View>\r\n            ))}\r\n        </View>\r\n    );\r\n};\r\n\r\n\r\nconst statusData = [\r\n    { title: 'Negotiation', value: 1 },\r\n    { title: 'Issued Proforma Invoice', value: 2 },\r\n    { title: 'Order Item', value: 3 },\r\n    { title: 'Payment Confirmed', value: 4 },\r\n    { title: 'Shipping Schedule', value: 5 },\r\n    { title: 'Documents', value: 6 },\r\n    { title: 'Vehicle Received', value: 7 },\r\n    // Add more events as needed\r\n];\r\n\r\nconst LoadingModal = () => {\r\n    const loadingModalVisible = useSelector((state) => state.loadingModalVisible);\r\n\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                bottom: 0,\r\n                left: 0,\r\n                right: 0,\r\n                backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n                flex: 1,\r\n                display: loadingModalVisible ? 'flex' : 'none',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n            }}\r\n        >\r\n            {/* Content within the modal */}\r\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n                <Spinner size=\"lg\" color=\"white\" />\r\n                <Text style={{ color: 'white' }}>Loading, please wait!</Text>\r\n            </View>\r\n        </View>\r\n\r\n    );\r\n\r\n}\r\n\r\n// const SkeletonChatListLayout = () => {\r\n//     return (\r\n//         <SkeletonPlaceholder>\r\n//             <SkeletonPlaceholder.Item flexDirection=\"row\" alignItems=\"center\" padding={12}>\r\n//                 {/* Placeholder for Image */}\r\n//                 <SkeletonPlaceholder.Item width={60} height={60} borderRadius={30} />\r\n\r\n//                 {/* Placeholder for Texts */}\r\n//                 <SkeletonPlaceholder.Item flex={1} marginLeft={20}>\r\n//                     {/* Date */}\r\n//                     <SkeletonPlaceholder.Item width={80} height={12} marginBottom={6} />\r\n//                     {/* Car Name */}\r\n//                     <SkeletonPlaceholder.Item width={120} height={14} marginBottom={6} />\r\n//                     {/* Text First and Last */}\r\n//                     <SkeletonPlaceholder.Item width={140} height={14} marginBottom={6} />\r\n//                     {/* Last Message */}\r\n//                     <SkeletonPlaceholder.Item width={160} height={12} marginBottom={6} />\r\n//                 </SkeletonPlaceholder.Item>\r\n//             </SkeletonPlaceholder.Item>\r\n//         </SkeletonPlaceholder>\r\n//     );\r\n// };\r\n\r\nconst HeaderButton = ({ title, onPress, isActive, headerCount }) => {\r\n    const activeStyle = isActive ? { backgroundColor: '#E1EDF7' } : {};\r\n    const screenWidth = Dimensions.get('window').width;\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n    return (\r\n        <Pressable\r\n            onHoverIn={hoverIn}\r\n            onHoverOut={hoverOut}\r\n            focusable={false}\r\n            onPress={onPress}\r\n            style={{ backgroundColor: isHovered ? '#f2f2f2' : 'transparent', padding: 12, marginVertical: screenWidth > 1818 ? 10 : 2, borderWidth: 5, borderColor: 'transparent', marginLeft: 8, width: 195, flexDirection: 'row', alignItems: 'center', justifyContent: 'center', borderRadius: 5, ...activeStyle }}\r\n        >\r\n            <Text color={isActive ? '#0A78BE' : '#1C2B33'} fontSize={14} style={{ fontWeight: isActive ? 700 : 400, alignSelf: 'center', textAlign: 'center', }}>{title}</Text>\r\n            {headerCount}\r\n\r\n        </Pressable>\r\n    );\r\n};\r\n\r\nconst FilterButton = ({ title, onPress, isActive, iconActive, iconNotActive }) => {\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n    return (\r\n        <Pressable\r\n            focusable={false}\r\n            variant='ghost'\r\n            onPress={onPress}\r\n            onHoverIn={hoverIn}\r\n            onHoverOut={hoverOut}\r\n            style={{\r\n                padding: 5,\r\n                width: 100,\r\n                margin: 5,\r\n                flexDirection: 'row', // Align items in a row\r\n                alignItems: 'center', // Center items vertically\r\n                justifyContent: 'center',\r\n                borderRadius: 5,\r\n                backgroundColor: isActive ? '#E1EDF7' : (isHovered ? '#d7d7d9' : '#ECEDF0'),\r\n            }}\r\n        >\r\n            {isActive ? iconActive : iconNotActive}\r\n            <Text color={isActive ? '#0A78BE' : '#1C2B33'} fontSize={14} style={{ fontWeight: isActive ? 700 : 400, marginLeft: 5, }}>{title}</Text>\r\n\r\n\r\n        </Pressable>\r\n    );\r\n};\r\n\r\nconst formatDate = (timestamp) => {\r\n    const currentDate = new Date();\r\n    const formattedTimestamp = timestamp.replace(' at ', 'T').replace(/\\//g, '-');\r\n    const givenDate = new Date(formattedTimestamp);\r\n\r\n    // Resetting the time part to compare dates only\r\n    const currentFormattedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\r\n    const givenFormattedDate = new Date(givenDate.getFullYear(), givenDate.getMonth(), givenDate.getDate());\r\n\r\n    // Check if the dates are the same\r\n    if (givenFormattedDate.getTime() === currentFormattedDate.getTime()) {\r\n        return \"This day\";\r\n    }\r\n\r\n    const oneDay = 24 * 60 * 60 * 1000;\r\n    const startOfWeek = new Date();\r\n    startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay() + (startOfWeek.getDay() === 0 ? -6 : 1));\r\n    startOfWeek.setHours(0, 0, 0, 0);\r\n\r\n    // Check if the date is within this week\r\n    if (givenDate >= startOfWeek && givenDate < currentFormattedDate) {\r\n        return givenDate.toLocaleDateString('en-US', { weekday: 'short' });\r\n    }\r\n\r\n    // Check if the date is within this year\r\n    const startOfYear = new Date(new Date().getFullYear(), 0, 1);\r\n    if (givenDate >= startOfYear) {\r\n        return givenDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    }\r\n\r\n    // If the date is not within this year\r\n    return givenDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\r\n};\r\n\r\nconst SkeletonChatListLayout = () => {\r\n\r\n    return (\r\n        <>\r\n            <View // Add a unique key here\r\n                style={{\r\n                    padding: 12,\r\n                    alignItems: 'flex-start',\r\n                    flexDirection: 'row',\r\n                    backgroundColor: 'white',\r\n                }}\r\n            >\r\n                {/* Skeleton for the image */}\r\n                <View\r\n                    style={{\r\n                        width: 60,\r\n                        height: 60,\r\n                        borderRadius: 30,\r\n                        backgroundColor: '#e0e0e0',\r\n                        marginRight: 12,\r\n                    }}\r\n                />\r\n                {/* Skeleton for the text */}\r\n                <View style={{ flex: 1 }}>\r\n                    {Array.from({ length: 3 }).map((_, subIndex) => (\r\n                        <View\r\n                            key={`text-${subIndex}`}  // Add a unique key here for each text line\r\n                            style={{\r\n                                height: 10,\r\n                                backgroundColor: '#e0e0e0',\r\n                                marginBottom: 6,\r\n                                width: '80%',\r\n                                borderRadius: 4,\r\n                            }}\r\n                        />\r\n                    ))}\r\n                    <View style={{\r\n                        position: 'absolute',\r\n                        right: 10, height: 10,\r\n                        backgroundColor: '#e0e0e0',\r\n                        marginBottom: 6,\r\n                        width: '5%',\r\n                        borderRadius: 4,\r\n                    }} />\r\n                </View>\r\n            </View>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\n\r\n\r\nconst DeleteMessageTemplateYesNo = ({ handleDeleteMessageTemplateClose }) => {\r\n\r\n    const deleteMessageTemplateVisible = useSelector((state) => state.deleteMessageTemplateVisible);\r\n    const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n    const selectedTitle = globalMessageTemplateSelectedTitle;\r\n    const [isDeleteLoading, setIsDeleteLoading] = useState(false);\r\n    const handleClose = () => {\r\n        handleDeleteMessageTemplateClose();\r\n\r\n    }\r\n\r\n\r\n    const deleteMessageTemplate = async (titleToDelete) => {\r\n        const documentRef = doc(projectControlFirestore, 'MessageTemplate', email);\r\n        setIsDeleteLoading(true);\r\n        try {\r\n            // Fetch current data\r\n            const docSnap = await getDoc(documentRef);\r\n\r\n            if (docSnap.exists()) {\r\n                let messageTemplates = docSnap.data().messageTemplate || [];\r\n\r\n                // Filter out the item with the specified title\r\n                const updatedTemplates = messageTemplates.filter(template => template.title !== titleToDelete);\r\n\r\n                // Update the document with the new array\r\n                await updateDoc(documentRef, { messageTemplate: updatedTemplates });\r\n\r\n                console.log('Item successfully deleted');\r\n                setIsDeleteLoading(false);\r\n                handleClose();\r\n            } else {\r\n                console.log('Document does not exist');\r\n                setIsDeleteLoading(false);\r\n\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting item: ', error);\r\n            setIsDeleteLoading(false);\r\n\r\n        }\r\n    };\r\n\r\n    return (\r\n\r\n        <Modal\r\n            isOpen={deleteMessageTemplateVisible}\r\n            onClose={handleClose}\r\n        >\r\n            <Modal.Content>\r\n                <Modal.CloseButton />\r\n                <Modal.Header >Delete Message Template?</Modal.Header>\r\n                <Modal.Body>\r\n                    <View style={{ flex: 1, }}>\r\n                        <Text style={{ fontWeight: 400, }}>Are you sure you want to delete the selected message template?</Text>\r\n                    </View>\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer >\r\n                    <Button.Group variant=\"ghost\" space=\"2\">\r\n                        <Button style={{ width: 80, height: 36, }} onPress={handleClose} variant={'solid'} colorScheme={'warmGray'}>Cancel</Button>\r\n                        <Button isLoading={isDeleteLoading ? true : false} onPress={() => deleteMessageTemplate(selectedTitle)} style={{ padding: 16, height: 36, }} variant={'solid'} colorScheme={'error'}>Delete</Button>\r\n                    </Button.Group>\r\n                </Modal.Footer>\r\n            </Modal.Content>\r\n        </Modal>\r\n\r\n\r\n    );\r\n};\r\n\r\nconst MessageTemplateItem = ({ setOriginalTitle, addVisible, titleInputRef, valueInputRef, setAddVisible, item, textInputRef, setPopoverOpen }) => {\r\n    const [isTemplateItemHovered, setIsTemplateItemHovered] = useState(false);\r\n    const [isTemplateMenuHovered, setIsTemplateMenuHovered] = useState(false);\r\n    const [isTemplateEditHovered, setIsTemplateEditHovered] = useState(false);\r\n    const [isTemplateDeleteHovered, setIsTemplateDeleteHovered] = useState(false);\r\n    const [templateMenuOpen, setTemplateMenuOpen] = useState(false);\r\n    const [currentItem, setCurrentItem] = useState(null);\r\n    const [addIsVisible, setIsAddVisible] = useState(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const onPress = (item) => {\r\n        textInputRef.current.value = item.value;\r\n        setPopoverOpen(false);\r\n    };\r\n\r\n    const onEditPress = (item) => {\r\n\r\n        setAddVisible(true);\r\n        // setCurrentItem(item);\r\n        setIsAddVisible(true);\r\n        setTemplateMenuOpen(false);\r\n        titleInputRef.current.value = item.title;\r\n        valueInputRef.current.value = item.value;\r\n        setOriginalTitle(item.title);\r\n\r\n    };\r\n\r\n    // useEffect(() => {\r\n\r\n\r\n    //     if (addIsVisible == true) {\r\n    //         console.log(addIsVisible);\r\n    //         titleInputRef.current.value = currentItem.title;\r\n    //         valueInputRef.current.value = currentItem.value;\r\n    //     }\r\n    //     if (titleInputRef.current && valueInputRef.current) {\r\n    //         titleInputRef.current.value = currentItem.title;\r\n    //         valueInputRef.current.value = currentItem.value;\r\n    //     }\r\n    // }, [currentItem]);\r\n\r\n    const handleDeletePress = (title) => {\r\n\r\n        dispatch(setDeleteMessageTemplateVisible(true));\r\n        globalMessageTemplateSelectedTitle = title;\r\n    }\r\n\r\n\r\n    return (\r\n        <Pressable\r\n            onPress={() => onPress(item)}\r\n            onHoverIn={() => setIsTemplateItemHovered(true)}\r\n            onHoverOut={() => setIsTemplateItemHovered(false)}\r\n            style={{\r\n                padding: 10,\r\n                backgroundColor: isTemplateItemHovered ? '#f2f2f2' : 'transparent',\r\n                flex: 1,\r\n                borderRadius: 5,\r\n            }}>\r\n            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                <Text style={{ fontWeight: '700', flex: 1, }} numberOfLines={1} ellipsizeMode='tail'>{item.title}</Text>\r\n                <Popover\r\n                    isOpen={templateMenuOpen}\r\n                    onClose={() => setTemplateMenuOpen(false)}\r\n                    trigger={(triggerProps) => {\r\n                        return <Pressable\r\n                            {...triggerProps}\r\n                            onPress={() => setTemplateMenuOpen(true)}\r\n                            onHoverIn={() => setIsTemplateMenuHovered(true)}\r\n                            onHoverOut={() => setIsTemplateMenuHovered(false)}\r\n                            style={{ backgroundColor: isTemplateMenuHovered ? '#dedede' : 'transparent', padding: 5, justifyContent: 'center', borderRadius: 5, }}>\r\n                            <Entypo size={16} name='dots-three-horizontal' color='#171717' />\r\n                        </Pressable>\r\n                    }}\r\n\r\n                >\r\n                    <Popover.Content>\r\n\r\n                        <Pressable\r\n                            onPress={() => onEditPress(item)}\r\n                            onHoverIn={() => setIsTemplateEditHovered(true)}\r\n                            onHoverOut={() => setIsTemplateEditHovered(false)} style={{ flex: 1, width: 50, backgroundColor: isTemplateEditHovered ? '#dedede' : 'white', padding: 5, }} focusable={false}>\r\n                            <Text>Edit</Text>\r\n                        </Pressable>\r\n\r\n                        <Pressable\r\n                            onPress={() => handleDeletePress(item.title)}\r\n                            onHoverIn={() => setIsTemplateDeleteHovered(true)}\r\n                            onHoverOut={() => setIsTemplateDeleteHovered(false)} style={{ flex: 1, width: 50, backgroundColor: isTemplateDeleteHovered ? '#dedede' : 'white', padding: 5, }} focusable={false}>\r\n                            <Text>Delete</Text>\r\n                        </Pressable>\r\n\r\n                    </Popover.Content>\r\n                </Popover>\r\n            </View>\r\n            <Text style={{ fontWeight: '400', fontSize: 12, }} numberOfLines={1} ellipsizeMode='tail'>{item.value}</Text>\r\n        </Pressable>\r\n\r\n\r\n    );\r\n}\r\n\r\nconst MessageTemplate = ({ textInputRef }) => {\r\n    const dispatch = useDispatch();\r\n    const [isTemplateHovered, setIsTemplateHovered] = useState(false);\r\n    const [isAddHovered, setIsAddHovered] = useState(false);\r\n    const [popoverOpen, setPopoverOpen] = useState(false);\r\n    const [searchText, setSearchText] = useState('');\r\n    const [filteredData, setFilteredData] = useState([]);\r\n    const [addVisible, setAddVisible] = useState(false);\r\n\r\n    const [isCancelHovered, setIsCancelHovered] = useState(false);\r\n    const [isSaveHovered, setIsSaveHovered] = useState(false);\r\n    const [originalTitle, setOriginalTitle] = useState('');\r\n\r\n\r\n    const [saveLoading, setSaveLoading] = useState(false);\r\n\r\n    const [templateData, setTemplateData] = useState([]);\r\n\r\n    const searchInputRef = useRef(null);\r\n    const titleInputRef = useRef(null);\r\n    const valueInputRef = useRef(null);\r\n\r\n    const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n    const data = [\r\n        { title: 'Message 1', value: 'Sample Message 1' },\r\n        { title: 'Message 2', value: 'Sample Message 2' },\r\n        { title: 'Message 3', value: 'Sample Message 3' },\r\n    ];\r\n\r\n\r\n\r\n    const saveMessageTemplate = async () => {\r\n        setSaveLoading(true);\r\n        const documentRef = doc(projectControlFirestore, 'MessageTemplate', email);\r\n\r\n        try {\r\n            // Fetch current data\r\n            const docSnap = await getDoc(documentRef);\r\n\r\n            let messageTemplates = [];\r\n            const newTitle = titleInputRef.current?.value;\r\n            const newValue = valueInputRef.current?.value;\r\n\r\n            if (newTitle && newValue) {\r\n                if (docSnap.exists()) {\r\n                    // Document exists, get the current templates\r\n                    messageTemplates = docSnap.data().messageTemplate || [];\r\n\r\n                    // Find index based on the original title\r\n                    const index = messageTemplates.findIndex(template => template.title === originalTitle);\r\n\r\n                    if (index !== -1) {\r\n                        // Update existing template\r\n                        messageTemplates[index] = { title: newTitle, value: newValue };\r\n                    } else {\r\n                        // Add new template if original title does not exist\r\n                        messageTemplates.push({ title: newTitle, value: newValue });\r\n                    }\r\n                } else {\r\n                    // Document does not exist, create a new array with the new template\r\n                    console.log('Creating a new document');\r\n                    messageTemplates = [{ title: newTitle, value: newValue }];\r\n                }\r\n\r\n                // Update or set the document\r\n                await setDoc(documentRef, { messageTemplate: messageTemplates }, { merge: true });\r\n\r\n                console.log('Document successfully updated or created');\r\n            } else {\r\n                console.log('Title or value is empty');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating or creating document: ', error);\r\n        } finally {\r\n            setSaveLoading(false);\r\n            handleCancelPressed();\r\n        }\r\n    };\r\n\r\n\r\n    const handleSearch = (text) => {\r\n        setSearchText(text);\r\n        const filtered = templateData.filter(item =>\r\n            item.title.toLowerCase().includes(text.toLowerCase()) ||\r\n            item.value.toLowerCase().includes(text.toLowerCase())\r\n        );\r\n        setFilteredData(filtered);\r\n    };\r\n\r\n    const handlePopoverClose = () => {\r\n        setPopoverOpen(false);\r\n        setAddVisible(false);\r\n        setIsAddHovered(false);\r\n    };\r\n\r\n    const handleCancelPressed = () => {\r\n        setIsAddHovered(false);\r\n        setAddVisible(false);\r\n        setIsCancelHovered(false)\r\n        setIsSaveHovered(false)\r\n        titleInputRef.current.clear();\r\n        valueInputRef.current.clear();\r\n\r\n    };\r\n\r\n    const renderItem = ({ item }) => {\r\n        return <MessageTemplateItem setOriginalTitle={setOriginalTitle} addVisible={addVisible} titleInputRef={titleInputRef} valueInputRef={valueInputRef} setAddVisible={setAddVisible} item={item} textInputRef={textInputRef} setPopoverOpen={setPopoverOpen} />;\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const docRef = doc(projectControlFirestore, \"MessageTemplate\", email);\r\n\r\n        const unsubscribe = onSnapshot(docRef, (docSnap) => {\r\n            if (docSnap.exists()) {\r\n                let arrayFieldData = docSnap.data().messageTemplate;\r\n\r\n                // Sort the array by title\r\n                arrayFieldData.sort((a, b) => {\r\n                    let titleA = a.title.toUpperCase(); // ignore upper and lowercase\r\n                    let titleB = b.title.toUpperCase(); // ignore upper and lowercase\r\n                    if (titleA < titleB) {\r\n                        return -1;\r\n                    }\r\n                    if (titleA > titleB) {\r\n                        return 1;\r\n                    }\r\n                    // titles must be equal\r\n                    return 0;\r\n                });\r\n\r\n                setTemplateData(arrayFieldData);\r\n            } else {\r\n                console.log(\"No such document!\");\r\n            }\r\n        }, (error) => {\r\n            console.error(\"Error fetching document:\", error);\r\n        });\r\n\r\n        // Cleanup subscription on unmount\r\n        return () => unsubscribe();\r\n    }, [popoverOpen]);\r\n\r\n    const handleDeleteMessageTemplateClose = () => {\r\n\r\n        dispatch(setDeleteMessageTemplateVisible(false));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <DeleteMessageTemplateYesNo handleDeleteMessageTemplateClose={handleDeleteMessageTemplateClose} />\r\n            <Popover\r\n                isOpen={popoverOpen}\r\n                onClose={handlePopoverClose}\r\n                initialFocusRef={searchInputRef}\r\n                finalFocusRef={textInputRef}\r\n                placement={'top'}\r\n                trigger={(triggerProps) => {\r\n                    return <Pressable\r\n                        focusable={false}\r\n                        {...triggerProps}\r\n                        onPress={() => setPopoverOpen(true)}\r\n                        onHoverIn={() => setIsTemplateHovered(true)}\r\n                        onHoverOut={() => setIsTemplateHovered(false)}\r\n                        style={({ pressed }) => [\r\n                            {\r\n                                bottom: 0,\r\n                                right: 100,\r\n                                position: 'absolute',\r\n                                borderRadius: 20,\r\n                                opacity: pressed ? 0.5 : 1\r\n                            }\r\n                        ]}\r\n\r\n                    >\r\n                        <Ionicons name=\"chatbox-ellipses-outline\" size={24} color={isTemplateHovered ? \"#0A78BE\" : \"#C1C1C1\"} />\r\n                    </Pressable>\r\n                }} >\r\n                <Popover.Content w={400} marginRight={10} >\r\n                    <Popover.Arrow />\r\n                    <View style={{ display: addVisible ? 'flex' : 'none', }}><Popover.Header backgroundColor={'white'}>\r\n                        <View style={{ flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={{ fontWeight: 700, fontSize: 16, flex: 1 }}>Create a message template</Text>\r\n                        </View>\r\n                    </Popover.Header>\r\n                        <Popover.Body backgroundColor={'white'} height={250}>\r\n                            <Text style={{ fontWeight: 700, }}>Title</Text>\r\n                            <TextInput\r\n                                ref={titleInputRef}\r\n                                placeholder='Input Title'\r\n                                placeholderTextColor='#9B9E9F'\r\n                                underlineColorAndroid=\"transparent\"\r\n                                style={{ height: 40, padding: 10, outlineStyle: 'none', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5 }} />\r\n                            <br />\r\n                            <Text style={{ fontWeight: 700, }}>Message</Text>\r\n                            <TextInput\r\n                                multiline\r\n                                ref={valueInputRef}\r\n                                placeholder='Input Message'\r\n                                placeholderTextColor='#9B9E9F'\r\n                                underlineColorAndroid=\"transparent\"\r\n                                style={{ height: 100, padding: 10, outlineStyle: 'none', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5 }} />\r\n\r\n                        </Popover.Body>\r\n                        <Popover.Footer backgroundColor={'white'}>\r\n                            <View style={{ height: 30, flexDirection: 'row', justifyContent: 'center', }}>\r\n                                <Pressable\r\n                                    onHoverIn={() => setIsCancelHovered(true)}\r\n                                    onHoverOut={() => setIsCancelHovered(false)}\r\n                                    onPress={handleCancelPressed}\r\n                                    style={{ backgroundColor: isCancelHovered ? '#DADADA' : 'white', width: 60, borderRadius: 5, padding: 5, borderWidth: 1, borderColor: '#DADDE1', marginHorizontal: 5, }}>\r\n                                    <Text style={{ textAlign: 'center', fontWeight: 500, }}>Cancel</Text>\r\n                                </Pressable>\r\n\r\n                                <Pressable\r\n                                    onPress={saveMessageTemplate}\r\n                                    onHoverIn={() => setIsSaveHovered(true)}\r\n                                    onHoverOut={() => setIsSaveHovered(false)}\r\n                                    style={{ backgroundColor: isSaveHovered ? '#107a37' : '#16A34A', width: 60, borderRadius: 5, padding: 5, borderWidth: 1, borderColor: '#DADDE1', marginHorizontal: 5, }}>\r\n                                    {saveLoading ?\r\n                                        (<Spinner\r\n                                            animating\r\n                                            size=\"sm\"\r\n                                            color={'white'}\r\n                                        />) :\r\n                                        (\r\n                                            <Text style={{ textAlign: 'center', color: 'white', fontWeight: 500, }}>Save</Text>\r\n                                        )}\r\n                                </Pressable>\r\n                            </View>\r\n                        </Popover.Footer>\r\n                    </View><View style={{ display: !addVisible ? 'flex' : 'none', }}><Popover.Header backgroundColor={'white'}>\r\n                        <View style={{ flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={{ fontWeight: 700, fontSize: 16, flex: 1 }}>Message Template</Text>\r\n                            <Pressable focusable={false} onPress={() => setAddVisible(true)} onHoverIn={() => setIsAddHovered(true)} onHoverOut={() => setIsAddHovered(false)}>\r\n                                <Text style={{ fontWeight: 400, fontSize: 16, color: '#1B81C2', textDecorationLine: isAddHovered ? 'underline' : 'none' }}>+ ADD</Text>\r\n                            </Pressable>\r\n                        </View>\r\n                    </Popover.Header>\r\n                        <Popover.Body backgroundColor={'white'} height={300}>\r\n                            <TextInput\r\n                                ref={searchInputRef}\r\n                                placeholder='Search'\r\n                                placeholderTextColor='#9B9E9F'\r\n                                underlineColorAndroid=\"transparent\"\r\n                                style={{ height: 40, padding: 10, outlineStyle: 'none', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5, marginBottom: 5, }}\r\n                                keyboardType='search'\r\n                                onChangeText={handleSearch}\r\n                                value={searchText} />\r\n                            {templateData.length > 0 || filteredData.length > 0 ? (\r\n                                <FlatList\r\n                                    style={{ height: 100, borderBottomLeftRadius: 5 }}\r\n                                    renderItem={renderItem}\r\n                                    keyExtractor={item => item.title.toString()}\r\n                                    data={searchText ? filteredData : templateData} />\r\n                            ) : (\r\n                                <Text style={{ fontWeight: 700, alignSelf: 'center', }}>No message template found</Text>\r\n                            )}\r\n\r\n                        </Popover.Body>\r\n                    </View>\r\n                </Popover.Content>\r\n            </Popover>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\nconst FileDisplay = ({ file, onRemove }) => {\r\n    const iconSize = 24;\r\n    if (!file) return null;  // Define the icon size\r\n\r\n\r\n\r\n\r\n    const getFileIcon = (type) => {\r\n        if (type.includes('pdf')) {\r\n            return <MaterialIcons name={'picture-as-pdf'} size={iconSize} color=\"#FF0000\" />; // Red for PDF\r\n        }\r\n        if (type.includes('msword') || type.includes('wordprocessingml')) {\r\n            return <MaterialCommunityIcons name={'microsoft-word'} size={iconSize} color=\"#2B579A\" />; // Blue for Word\r\n        }\r\n        if (type.includes('vnd.ms-excel') || type.includes('spreadsheetml')) {\r\n            return <MaterialCommunityIcons name={'microsoft-excel'} size={iconSize} color=\"#217346\" />; // Green for Excel\r\n        }\r\n        if (type.includes('rar') || type.includes('x-rar-compressed') || type.includes('x-compressed')) {\r\n            return <FastImage\r\n                source={{ uri: require('../../assets/rar_icon.png'), priority: FastImage.priority.high }}\r\n                style={{\r\n                    width: 24,\r\n                    height: 24,\r\n                }}\r\n                resizeMode={FastImage.resizeMode.cover}\r\n            />; // Color of your choice for RAR files\r\n        }\r\n\r\n        return <MaterialIcons name=\"insert-drive-file\" size={iconSize} color=\"black\" />; // Default color for others\r\n    };\r\n\r\n    return (\r\n        <View style={{ flexDirection: 'row', alignItems: 'center', margin: 5 }}>\r\n            {getFileIcon(file.type)}\r\n            <Text style={{ marginLeft: 10 }}>{file.name}</Text>\r\n            <Pressable onPress={onRemove}>\r\n                <MaterialIcons name=\"close\" size={20} color=\"black\" />\r\n            </Pressable>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst ChatInputText = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n\r\n    const [isSendHovered, setIsSendHovered] = useState(false);\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [selectedFilePreview, setSelectedFilePreview] = useState(null);\r\n    const [selectedImage, setSelectedImage] = useState(null);\r\n    const [imageUri, setImageUri] = useState(null);\r\n    const [fileUri, setFileUri] = useState(null);\r\n    const [fileName, setFileName] = useState('');\r\n    const [isSendImageHovered, setIsSendImageHovered] = useState(false);\r\n    const [isSendAttachmentHovered, setIsSendAttachmentHovered] = useState(false);\r\n    const [sendIsLoading, setSendIsLoading] = useState(false);\r\n    const textInputRef = useRef(null);\r\n\r\n    const removeImage = () => {\r\n        setImageUri(null);\r\n        setSelectedImage(null);\r\n        setFileName(null);\r\n\r\n    };\r\n\r\n    const removeFile = () => {\r\n        setSelectedFile(null);\r\n        setSelectedFilePreview(null);\r\n        setFileUri(null);\r\n        setFileName(null);\r\n\r\n\r\n    };\r\n\r\n    const selectFile = async () => {\r\n        const maxFileSize = 10 * 1024 * 1024; // 5MB in bytes\r\n\r\n        if (Platform.OS === 'web') {\r\n            return new Promise((resolve, reject) => {\r\n                const input = document.createElement('input');\r\n                input.type = 'file';\r\n                input.accept = '.pdf, .doc, .docx, .xls, .xlsx, .rar'; // Acceptable file types\r\n                input.onchange = () => {\r\n                    const file = input.files[0];\r\n\r\n                    if (file) {\r\n                        if (![\r\n                            'application/pdf',\r\n                            'application/msword',\r\n                            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n                            'application/vnd.ms-excel',\r\n                            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n                            'application/x-rar-compressed',\r\n                            'application/x-compressed'\r\n                        ].includes(file.type)) {\r\n                            alert('File type not allowed');\r\n                            reject('File type not allowed');\r\n                            return;\r\n                        }\r\n\r\n                        if (file.size > maxFileSize) {\r\n                            alert('File size should be less than 10MB');\r\n                            reject('File size should be less than 10MB');\r\n                            return;\r\n                        }\r\n                        removeImage();\r\n                        // Read the file as a Data URL and set it in the state\r\n                        const reader = new FileReader();\r\n                        reader.onload = (e) => {\r\n                            setFileUri(e.target.result);\r\n                            resolve(file);\r\n                            setSelectedFile(file);\r\n                            setSelectedFilePreview({ name: file.name, type: file.type });\r\n                            setFileName(file.name);\r\n                            textInputRef.current.focus();\r\n                        };\r\n                        reader.onerror = (e) => {\r\n                            reject(e);\r\n                        };\r\n                        reader.readAsDataURL(file);\r\n                    }\r\n                };\r\n                input.click();\r\n            });\r\n        } else {\r\n            return new Promise((resolve, reject) => {\r\n                launchImageLibrary({ mediaType: 'photo' }, (response) => {\r\n                    if (response.didCancel) {\r\n                        reject('User cancelled image picker');\r\n                    } else if (response.errorCode) {\r\n                        reject(response.errorMessage);\r\n                    } else {\r\n                        const asset = response.assets[0];\r\n\r\n                        if (!asset.type.startsWith('image/')) {\r\n                            reject('Only image files are allowed');\r\n                            alert('Only image files are allowed');\r\n\r\n                            return;\r\n                        }\r\n\r\n                        if (asset.fileSize > maxFileSize) {\r\n                            reject('File size should be less than 10MB');\r\n                            alert('File size should be less than 10MB');\r\n                            return;\r\n                        }\r\n\r\n                        const selectedImageUri = asset.uri;\r\n                        const fileName = asset.fileName || 'Unknown name';\r\n                        resolve({ uri: selectedImageUri, name: fileName });\r\n                        setImageUri(selectedImageUri); // Set imageUri here\r\n                        console.log(`File name: ${fileName}`);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    const selectImage = async () => {\r\n        const maxFileSize = 10 * 1024 * 1024; // 5MB in bytes\r\n\r\n        if (Platform.OS === 'web') {\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const input = document.createElement('input');\r\n                input.type = 'file';\r\n                input.accept = 'image/*';\r\n                input.onchange = () => {\r\n                    const file = input.files[0];\r\n                    if (file) {\r\n\r\n                        if (!file.type.startsWith('image/')) {\r\n                            reject('Only image files are allowed');\r\n                            alert('Only image files are allowed');\r\n\r\n                            return;\r\n                        }\r\n\r\n                        if (file.size > maxFileSize) {\r\n                            reject('File size should be less than 10MB');\r\n                            alert('File size should be less than 10MB');\r\n\r\n                            return;\r\n                        }\r\n\r\n                        removeFile();\r\n                        const reader = new FileReader();\r\n                        reader.readAsDataURL(file);\r\n                        reader.onload = () => {\r\n                            resolve({ dataUrl: reader.result, name: file.name });\r\n                            setImageUri(reader.result); // Set imageUri here\r\n                            setFileName(file.name);\r\n                            console.log(`File name: ${file.name}`);\r\n                        };\r\n                        setSelectedImage(file);\r\n                        reader.onerror = error => reject(error);\r\n                    }\r\n                };\r\n                input.click();\r\n            });\r\n        } else {\r\n            return new Promise((resolve, reject) => {\r\n                launchImageLibrary({ mediaType: 'photo' }, (response) => {\r\n                    if (response.didCancel) {\r\n                        reject('User cancelled image picker');\r\n                    } else if (response.errorCode) {\r\n                        reject(response.errorMessage);\r\n                    } else {\r\n                        const asset = response.assets[0];\r\n\r\n                        if (!asset.type.startsWith('image/')) {\r\n                            reject('Only image files are allowed');\r\n                            alert('Only image files are allowed');\r\n                            return;\r\n                        }\r\n\r\n                        if (asset.fileSize > maxFileSize) {\r\n                            reject('File size should be less than 10MB');\r\n                            alert('Only image files are allowed');\r\n                            return;\r\n                        }\r\n\r\n                        const selectedImageUri = asset.uri;\r\n                        const fileName = asset.fileName || 'Unknown name';\r\n                        resolve({ uri: selectedImageUri, name: fileName });\r\n                        setImageUri(selectedImageUri); // Set imageUri here\r\n                        console.log(`File name: ${fileName}`);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    const resizeImage = (file) => {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = (event) => {\r\n                const img = new Image();\r\n                img.src = event.target.result;\r\n                img.onload = () => {\r\n                    const canvas = document.createElement('canvas');\r\n                    const ctx = canvas.getContext('2d');\r\n\r\n                    // Set your desired image size here\r\n                    const maxWidth = 800; // Example value\r\n                    const maxHeight = 800; // Example value\r\n                    let width = img.width;\r\n                    let height = img.height;\r\n\r\n                    if (width > height) {\r\n                        if (width > maxWidth) {\r\n                            height *= maxWidth / width;\r\n                            width = maxWidth;\r\n                        }\r\n                    } else {\r\n                        if (height > maxHeight) {\r\n                            width *= maxHeight / height;\r\n                            height = maxHeight;\r\n                        }\r\n                    }\r\n\r\n                    canvas.width = width;\r\n                    canvas.height = height;\r\n                    ctx.drawImage(img, 0, 0, width, height);\r\n                    canvas.toBlob((blob) => {\r\n                        resolve(new File([blob], file.name, {\r\n                            type: 'image/jpeg',\r\n                            lastModified: Date.now()\r\n                        }));\r\n                    }, 'image/jpeg', 0.7); // Adjust the quality (0.7 is a good balance between quality and file size)\r\n                };\r\n                img.onerror = error => reject(error);\r\n            };\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    };\r\n\r\n    const addFileMessage = async () => {\r\n        setSendIsLoading(true);\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const formattedTimeForFile = moment(datetime).format('MMDDYYYYHHmmss.SSS');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        const inputValue = textInputRef.current?.value;\r\n\r\n        textInputRef.current.clear();\r\n        textInputRef.current.focus();\r\n\r\n        const storage = getStorage(projectExtensionFirebase);\r\n\r\n        if (fileUri) { // Assuming you have a fileUri state for the selected file\r\n\r\n            try {\r\n\r\n                let fileUrl = null;\r\n                if (fileUri) {\r\n                    // Upload file and get URL\r\n                    const fileRef = ref(storage, `ChatFiles/${selectedChatData.id}/C-HUB_${formattedTimeForFile}/${fileName}`);\r\n                    const uploadResult = await uploadBytes(fileRef, selectedFile);\r\n                    fileUrl = await getDownloadURL(uploadResult.ref);\r\n                }\r\n\r\n                // Adding the message to the 'messages' subcollection\r\n                await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                    text: inputValue.trim(),\r\n                    sender: email,\r\n                    timestamp: formattedTime,\r\n                    ip: ip,\r\n                    ipCountry: ipCountry,\r\n                    file: {\r\n                        name: fileName,\r\n                        type: 'attachment', // Set the file type\r\n                        url: fileUrl,\r\n                    } // Include file URL if available\r\n                });\r\n\r\n                // Updating the main chat document with the latest message details\r\n                await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                    lastMessageSender: email,\r\n                    lastMessage: `Sent an attachment`,\r\n                    lastMessageDate: formattedTime,\r\n                    customerRead: false,\r\n                    read: true,\r\n                    readBy: [email],\r\n                });\r\n\r\n                setSendIsLoading(false);\r\n                removeFile();\r\n\r\n            } catch (e) {\r\n                console.error('Error adding document: ', e);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const addImageMessage = async () => {\r\n        setSendIsLoading(true);\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const formattedTimeForFile = moment(datetime).format('MMDDYYYYHHmmss.SSS');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        const inputValue = textInputRef.current?.value;\r\n\r\n        textInputRef.current.clear();\r\n        textInputRef.current.focus();\r\n\r\n        const storage = getStorage(projectExtensionFirebase);\r\n\r\n        if (imageUri) { // Assuming imageFile holds the file to be uploaded\r\n\r\n            try {\r\n                let imageUrl = null;\r\n                if (imageUri) {\r\n                    // Upload image and get URL\r\n                    const resizedImage = await resizeImage(selectedImage);\r\n                    const imageRef = ref(storage, `ChatFiles/${selectedChatData.id}/C-HUB_${formattedTimeForFile}/${fileName}`);\r\n                    const uploadResult = await uploadBytes(imageRef, resizedImage);\r\n                    imageUrl = await getDownloadURL(uploadResult.ref);\r\n                }\r\n\r\n                setImageUri(null);\r\n                setFileName(null);\r\n\r\n                // Adding the message to the 'messages' subcollection\r\n                await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                    text: inputValue.trim(),\r\n                    sender: email,\r\n                    timestamp: formattedTime,\r\n                    ip: ip,\r\n                    ipCountry: ipCountry,\r\n                    file: {\r\n                        name: fileName,\r\n                        type: 'image',\r\n                        url: imageUrl,\r\n                    } // Include image URL if available\r\n                });\r\n\r\n                // Updating the main chat document with the latest message details\r\n                await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                    lastMessageSender: email,\r\n                    lastMessage: 'Sent an image',\r\n                    lastMessageDate: formattedTime,\r\n                    customerRead: false,\r\n                    read: true,\r\n                    readBy: [email],\r\n                });\r\n\r\n                setSendIsLoading(false);\r\n\r\n\r\n            } catch (e) {\r\n                console.error('Error adding document: ', e);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const addMessage = async () => {\r\n        setSendIsLoading(true);\r\n\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const inputValue = textInputRef.current?.value;\r\n\r\n        textInputRef.current.clear();\r\n        textInputRef.current.focus();\r\n\r\n        if (inputValue !== '') {\r\n            const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n            try {\r\n\r\n                // Adding the message to the 'messages' subcollection\r\n                await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                    text: inputValue.trim(),\r\n                    sender: email,\r\n                    timestamp: formattedTime, // Using the fetched timestamp\r\n                    ip: ip, // IP Address\r\n                    ipCountry: ipCountry // Country of the IP Address\r\n                });\r\n\r\n\r\n                // Updating the main chat document with the latest message details\r\n                await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                    lastMessageSender: email,\r\n                    lastMessage: inputValue,\r\n                    lastMessageDate: formattedTime,\r\n                    customerRead: false,\r\n                    read: true,\r\n                    readBy: [email],\r\n                });\r\n                setSendIsLoading(false);\r\n\r\n            } catch (e) {\r\n                console.error('Error adding document: ', e);\r\n            }\r\n        }\r\n        else {\r\n            setSendIsLoading(true);\r\n        }\r\n\r\n    };\r\n\r\n    const screenWidth = Dimensions.get('window').width;\r\n\r\n    const handleKeyPress = (e) => {\r\n        // Define a breakpoint for mobile resolution, e.g., 768 pixels\r\n        const mobileBreakpoint = 768;\r\n\r\n        // Check if the screen width is less than or equal to the mobile breakpoint\r\n        if (screenWidth >= mobileBreakpoint) {\r\n            // Check if 'Enter' key is pressed\r\n            if (e.nativeEvent.key === 'Enter' && !e.nativeEvent.shiftKey) {\r\n                e.preventDefault(); // Prevent the default behavior of adding a new line\r\n                handleSendMessage();\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const handleSendMessage = () => {\r\n\r\n        if (imageUri !== null) {\r\n            addImageMessage();\r\n        }\r\n        if (fileUri !== null) {\r\n            addFileMessage();\r\n        }\r\n        else {\r\n            addMessage();\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n\r\n        <View style={{ width: '98%', flexDirection: 'row', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 10, }}>\r\n\r\n\r\n            <View style={{ flexDirection: 'column', flex: 1, }}>\r\n\r\n                {fileUri &&\r\n                    (\r\n                        <FileDisplay file={selectedFilePreview} onRemove={removeFile} />\r\n\r\n                    )}\r\n\r\n                {imageUri && (\r\n                    <View style={{\r\n                        position: 'relative', // Make sure the parent View is positioned relative\r\n                        width: 70,\r\n                        height: 70,\r\n                        borderRadius: 5,\r\n                        overflow: 'hidden', // This ensures that nothing spills out of the container\r\n                        borderWidth: 1,\r\n                        borderColor: '#DADDE1',\r\n                        margin: 2,\r\n                    }}>\r\n                        <FastImage\r\n                            source={{ uri: imageUri }}\r\n                            style={{ width: '100%', height: '100%', borderRadius: 10 }}\r\n                            resizeMode={FastImage.resizeMode.cover}\r\n                        />\r\n                        <Pressable\r\n                            onPress={removeImage}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                right: 0,\r\n                                backgroundColor: 'rgba(255, 255, 255, 0.6)', // Semi-transparent background for better visibility\r\n                                borderRadius: 12 // Circular shape\r\n                            }}\r\n                        >\r\n                            <MaterialIcons name=\"close\" size={20} color=\"black\" />\r\n                        </Pressable>\r\n                    </View>\r\n\r\n                )}\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <View style={{ marginHorizontal: 5, marginTop: 5, }}>\r\n                        <FastImage\r\n                            source={{ uri: 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FRMJ%20Round.jpg?alt=media&token=90d7f2fe-d9cd-4a6f-9a6b-bc39fe2b33b2', priority: FastImage.priority.high }}\r\n                            style={{\r\n                                width: 30,\r\n                                height: 30,\r\n                                borderRadius: 15,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.cover}\r\n                        />\r\n                    </View>\r\n                    <TextInput\r\n                        ref={textInputRef}\r\n                        multiline\r\n                        placeholder='Send a message...'\r\n                        placeholderTextColor={'#9B9E9F'}\r\n                        onKeyPress={handleKeyPress}\r\n                        style={{ outlineStyle: 'none', width: '100%', height: 80, alignSelf: 'center', padding: 10 }}\r\n                    />\r\n                    <Pressable\r\n                        focusable={false}\r\n                        onPress={() => sendIsLoading ? null : handleSendMessage()}\r\n                        onHoverIn={() => setIsSendHovered(true)}\r\n                        onHoverOut={() => setIsSendHovered(false)}\r\n                        style={({ pressed }) => [\r\n                            {\r\n                                padding: 10,\r\n                                top: 20,\r\n                                right: 10,\r\n                                position: 'absolute',\r\n                                borderRadius: 20,\r\n                                backgroundColor: isSendHovered ? '#e8f4ff' : 'transparent', // Change color on hover\r\n                                opacity: pressed ? 0.5 : 1 // Change opacity when pressed\r\n                            }\r\n                        ]}\r\n                    >\r\n                        {sendIsLoading ? <Spinner\r\n                            animating\r\n                            size=\"sm\"\r\n                            color={\"#95BCF9\"}\r\n                        /> :\r\n                            <MaterialIcons name=\"send\" size={24} color=\"#95BCF9\" />\r\n                        }\r\n                    </Pressable>\r\n\r\n                </View>\r\n\r\n            </View>\r\n\r\n\r\n            <Pressable\r\n                onHoverIn={() => setIsSendImageHovered(true)}\r\n                onHoverOut={() => setIsSendImageHovered(false)}\r\n                style={({ pressed }) => [\r\n                    {\r\n                        padding: 10,\r\n                        bottom: -10,\r\n                        right: 125,\r\n                        position: 'absolute',\r\n                        borderRadius: 20,\r\n                        opacity: pressed ? 0.5 : 1 // Change opacity when pressed\r\n                    }\r\n                ]}\r\n                onPress={selectImage}\r\n            >\r\n                <Ionicons name=\"image-outline\" size={24} color={isSendImageHovered ? \"#0A78BE\" : \"#C1C1C1\"} />\r\n            </Pressable>\r\n\r\n            <Pressable\r\n                onHoverIn={() => setIsSendAttachmentHovered(true)}\r\n                onHoverOut={() => setIsSendAttachmentHovered(false)}\r\n                style={({ pressed }) => [\r\n                    {\r\n                        padding: 10,\r\n                        bottom: -9,\r\n                        right: 155,\r\n                        position: 'absolute',\r\n                        borderRadius: 20,\r\n                        opacity: pressed ? 0.5 : 1 // Change opacity when pressed\r\n                    }\r\n                ]}\r\n                onPress={selectFile}\r\n            >\r\n                <MaterialIcons name=\"attach-file\" size={24} color={isSendAttachmentHovered ? \"#0A78BE\" : \"#C1C1C1\"} />\r\n            </Pressable>\r\n\r\n            <MessageTemplate textInputRef={textInputRef} />\r\n        </View>\r\n\r\n    );\r\n}\r\n\r\nconst ChatListItem = ({ item, onPress, isActive, messageUnread, formattedDate, chatListData }) => {\r\n    const [imageUrl, setImageUrl] = useState(null);\r\n    const [chatListStepImageUrl, setChatListStepImageUrl] = useState(null);\r\n    const [textFirst, setTextFirst] = useState('');\r\n    const [textLast, setTextLast] = useState('');\r\n    const dispatch = useDispatch();\r\n    const [isUnreadHovered, setIsUnreadHovered] = useState(false);\r\n    const [isUnreadVisible, setIsUnreadVisible] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n    const carName = item.carData && item.carData.carName ? item.carData.carName : (item.vehicle && item.vehicle.carName ? item.vehicle.carName : '');\r\n    const updateChatToUnread = async () => {\r\n        dispatch(setActiveChatId(''));\r\n        dispatch(setChatMessagesData([]));\r\n        dispatch(setSelectedChatData([]));\r\n        const docRef = doc(projectExtensionFirestore, \"chats\", item.id);\r\n        try {\r\n            await updateDoc(docRef, {\r\n                read: false,\r\n            });\r\n\r\n        } catch (error) {\r\n            console.error(\"Error updating document: \", error);\r\n        }\r\n    };\r\n\r\n    const hoverIn = () => {\r\n        setIsHovered(true)\r\n    };\r\n\r\n    const hoverOut = () => {\r\n        setIsHovered(false);\r\n    };\r\n\r\n    const hoverUnreadIn = () => {\r\n        setIsHovered(true)\r\n        setIsUnreadHovered(true)\r\n    };\r\n\r\n    const hoverUnreadOut = () => {\r\n        setIsUnreadHovered(false)\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        // getChatListStepImageUrl();\r\n        const folderName = item.carData && item.carData.stockID ? item.carData.stockID : (item.vehicle && item.vehicle.carId ? item.vehicle.carId : '');\r\n        const storage = getStorage(projectExtensionFirebase);\r\n        const imageRef = ref(storage, `${folderName}/0`); // Ensure this path is correct\r\n\r\n        getDownloadURL(imageRef)\r\n            .then((url) => {\r\n                setImageUrl(url);\r\n            })\r\n            .catch((error) => {\r\n                if (error.code === 'storage/object-not-found') {\r\n                    // Handle the 'object not found' error.\r\n                    setImageUrl('https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FNo%20Car%20Image%20Found.png?alt=media&token=de86488c-73a6-4c04-811c-bc508a11123a');\r\n                } else {\r\n                    // Handle other errors differently\r\n\r\n                    setImageUrl('https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FNo%20Car%20Image%20Found.png?alt=media&token=de86488c-73a6-4c04-811c-bc508a11123a');\r\n\r\n                }\r\n            });\r\n\r\n        const collectionPath = 'accounts';\r\n        const docId = item.participants.customer; // Ensure this is a valid document ID\r\n\r\n        const docRef = doc(projectExtensionFirestore, collectionPath, docId);\r\n\r\n        const unsubscribe = onSnapshot(docRef, (doc) => {\r\n            if (doc.exists()) {\r\n                const data = doc.data();\r\n                dispatch(setSelectedCustomerData(data));\r\n                setTextFirst(data.textFirst ? data.textFirst : '');\r\n                setTextLast(data.textLast ? data.textLast : '');\r\n\r\n            } else {\r\n                console.log(\"Document not found\");\r\n            }\r\n        }, (error) => {\r\n            console.error(\"Error fetching document: \", error);\r\n        });\r\n\r\n        // Clean up function to unsubscribe from the listener when the component unmounts\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const loadingCondition = !imageUrl || imageUrl == null || imageUrl == '' || imageUrl == undefined || !item;\r\n\r\n    const chatStepIconOn = require(`../../assets/chat_step/chat_step_${item.stepIndicator.value}_on.png`);\r\n    const chatStepIconOff = require(`../../assets/chat_step/chat_step_${item.stepIndicator.value}_off.png`);\r\n\r\n\r\n    const handlePress = () => {\r\n        onPress()\r\n\r\n        globalCustomerFirstName = textFirst ? textFirst : '';\r\n        globalCustomerLastName = textLast ? textLast : '';\r\n        globalImageUrl = imageUrl ? imageUrl : '';\r\n        globalCustomerCarName = carName;\r\n        setIsHovered(false);\r\n        setIsUnreadHovered(false)\r\n\r\n\r\n    }\r\n\r\n    if (loadingCondition) {\r\n        return <SkeletonChatListLayout />\r\n    }\r\n    else {\r\n        return (\r\n            <Pressable\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                focusable={false}\r\n                style={{\r\n                    padding: 12,\r\n                    alignItems: 'flex-start', // Align items to the start of the button\r\n                    flexDirection: 'row',\r\n                    backgroundColor: isActive ? '#f2f2f2' : (isHovered ? '#f2f2f2' : 'white'),\r\n                    borderLeftColor: isActive ? '#0A9FDC' : 'transparent',\r\n                    borderRightColor: isActive ? '#0A9FDC' : 'transparent',\r\n                    borderLeftWidth: 2,\r\n                    borderRightWidth: 2,\r\n\r\n                }}\r\n                onPress={handlePress}\r\n            >\r\n                <View style={{ width: '20%', justifyContent: 'center', }}>\r\n                    {imageUrl ? (\r\n                        <FastImage\r\n                            source={{ uri: imageUrl, priority: FastImage.priority.normal }}\r\n                            style={{\r\n                                width: 60,\r\n                                height: 60,\r\n                                borderRadius: 30,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.stretch}\r\n                        />\r\n                    ) : (\r\n                        <View\r\n                            style={{\r\n                                width: 60,\r\n                                height: 60,\r\n                                borderRadius: 30,\r\n                                backgroundColor: '#e0e0e0',\r\n                                marginRight: 12,\r\n                            }}\r\n                        />\r\n                    )}\r\n                </View>\r\n                <View style={{ flex: 1 }}>\r\n                    {!isHovered ? (<Text style={{ fontSize: 12, position: 'absolute', right: 10, color: messageUnread ? '#0A78BE' : '#90949C', fontWeight: messageUnread ? 700 : 400, }}>{formattedDate}</Text>) : (!item.read ? (<Text style={{ fontSize: 12, position: 'absolute', right: 10, color: messageUnread ? '#0A78BE' : '#90949C', fontWeight: messageUnread ? 700 : 400, }}>{formattedDate}</Text>) : null)}\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{ fontSize: 14, width: '70%', overflow: 'hidden', fontWeight: messageUnread ? 700 : 400, color: messageUnread ? '#1C2B33' : '#586369', }}>{carName}</Text>\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{ fontSize: 14, width: '80%', overflow: 'hidden', flex: 1, fontWeight: messageUnread ? 700 : 400, color: messageUnread ? '#1C2B33' : '#586369', }}>{`${textFirst} ${textLast}`}</Text>\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{ fontSize: 12, width: '80%', overflow: 'hidden', flex: 1, fontWeight: messageUnread ? 700 : 400, color: messageUnread ? '#0A78BE' : '#90949c', }}>{item.lastMessageSender == item.participants.customer ? (item.lastMessage ? item.lastMessage : 'No message found') : (item.lastMessage ? `Sales: ${item.lastMessage}` : `Sales: No message found`)}</Text>\r\n                    {!item.read ? (\r\n                        <FastImage\r\n                            source={{ uri: chatStepIconOn, priority: FastImage.priority.normal }}\r\n                            style={{\r\n                                tintColor: 'rgba(128, 128, 128, 1)',\r\n                                width: 22,\r\n                                height: 20,\r\n                                position: 'absolute',\r\n                                right: 10,\r\n                                bottom: 0,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.stretch}\r\n                        />\r\n                    ) : (\r\n                        <FastImage\r\n                            source={{ uri: chatStepIconOff, priority: FastImage.priority.normal }}\r\n                            style={{\r\n                                tintColor: 'rgba(128, 128, 128, 1)',\r\n                                width: 22,\r\n                                height: 20,\r\n                                position: 'absolute',\r\n                                right: 10,\r\n                                bottom: 0,\r\n                            }}\r\n                            resizeMode={FastImage.resizeMode.stretch}\r\n                        />\r\n                    )}\r\n\r\n                    <Text numberOfLines={1} ellipsizeMode='tail' style={{\r\n                        position: 'absolute',\r\n                        right: 0,\r\n                        top: 10,\r\n                        padding: 10,\r\n                        alignSelf: 'center',\r\n                        fontSize: 12,\r\n                        overflow: 'hidden',\r\n                        flex: 1,\r\n                        fontWeight: messageUnread ? 700 : 400,\r\n                        color: messageUnread ? '#FF0000' : '#90949c',\r\n                    }}>\r\n                        {item.invoiceNumber && item.stepIndicator.value > 2 ? item.invoiceNumber : ''}\r\n                    </Text>\r\n\r\n                    {isHovered && item.read && (\r\n                        <Tooltip label=\"Mark as unread\" placement='right' openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                            <Pressable\r\n                                focusable={false}\r\n                                onHoverIn={hoverUnreadIn}\r\n                                onHoverOut={hoverUnreadOut}\r\n                                onPress={updateChatToUnread}\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    right: 0,\r\n                                    top: -10,\r\n                                    padding: 10,\r\n                                    alignSelf: 'center',\r\n                                }}\r\n\r\n                            >\r\n                                <MaterialIcons name=\"mark-as-unread\" size={22} color={isUnreadHovered ? \"#1B81C2\" : \"#BABABA\"} />\r\n                            </Pressable>\r\n                        </Tooltip>\r\n                    )}\r\n                </View>\r\n\r\n\r\n\r\n            </Pressable>\r\n        );\r\n    }\r\n\r\n\r\n};\r\n\r\nconst ChatList = ({ unreadButtonValue, activeButtonValue, }) => {\r\n\r\n    const chatListData = useSelector((state) => state.chatListData);\r\n    const chatListLastVisible = useSelector((state) => state.chatListLastVisible);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n    const loadMoreLoading = useSelector((state) => state.loadMoreLoading);\r\n    const noMoreData = useSelector((state) => state.noMoreData);\r\n    const renderFooterRef = useRef(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const updateChatToRead = async () => {\r\n        const docRef = doc(projectExtensionFirestore, \"chats\", activeChatId);\r\n        const user = projectControlAuth.currentUser\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        if (email !== '') {\r\n\r\n            try {\r\n                await updateDoc(docRef, {\r\n                    read: true,\r\n                    readBy: arrayUnion(email),\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error updating document: \", error);\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    const fetchChatMessages = () => {\r\n        if (!activeChatId) {\r\n            // Handle the case where there's no active chat ID\r\n        }\r\n        else {\r\n            dispatch(setChatMessagesData([]));\r\n            dispatch(setChatMessageBoxLoading(true));\r\n            updateChatToRead();\r\n\r\n            try {\r\n                // References to the document and its 'messages' subcollection\r\n                let activeInvoiceNumer;\r\n                const docRef = doc(projectExtensionFirestore, 'chats', activeChatId);\r\n\r\n                const messagesRef = collection(docRef, 'messages');\r\n\r\n                // Query for the 'messages' subcollection\r\n                const messagesQuery = query(messagesRef, orderBy('timestamp', 'desc'), limit(10));\r\n\r\n                // Listen to the document\r\n                const unsubscribeDoc = onSnapshot(docRef, (docSnapshot) => {\r\n                    if (docSnapshot.exists()) {\r\n                        const data = docSnapshot.data();\r\n                        // Add the document ID to the data\r\n                        const dataWithId = {\r\n                            ...data,\r\n                            id: docSnapshot.id\r\n                        };\r\n                        // Dispatch any action you need with the document data\r\n                        dispatch(setSelectedChatData(dataWithId));\r\n\r\n                        // Define and listen to the invoice document only after the chat document is confirmed to exist\r\n                        if (dataWithId.invoiceNumber || dataWithId.invoiceNumber == '') {\r\n                            const invoiceDocRef = doc(projectExtensionFirestore, 'IssuedInvoice', dataWithId.invoiceNumber);\r\n                            const unsubscribeInvoice = onSnapshot(invoiceDocRef, (invoiceDocSnapshot) => {\r\n                                if (invoiceDocSnapshot.exists()) {\r\n                                    const invoiceData = invoiceDocSnapshot.data();\r\n                                    // Add the document ID to the data\r\n                                    const invoiceDataWithId = {\r\n                                        ...invoiceData,\r\n                                        id: invoiceDocSnapshot.id\r\n                                    };\r\n                                    // Dispatch any action you need with the invoice document data\r\n                                    dispatch(setInvoiceData(invoiceDataWithId ? invoiceDataWithId : {}));\r\n\r\n                                } else {\r\n                                    // Handle the case where the invoice document does not exist\r\n                                    console.log('No Invoice Yet');\r\n                                    dispatch(setInvoiceData({}));\r\n                                }\r\n                            });\r\n\r\n                            // Cleanup function for the invoice listener\r\n                            return () => {\r\n                                unsubscribeInvoice();\r\n\r\n                            };\r\n                        } else {\r\n                            dispatch(setInvoiceData({}));\r\n                            console.log('No Invoice Yet');\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n                const unsubscribeMessages = onSnapshot(messagesQuery, (querySnapshot) => {\r\n                    let messages = [];\r\n                    querySnapshot.forEach((doc) => {\r\n                        const data = doc.data();\r\n                        const timestamp = data.timestamp ? data.timestamp.toString() : null;\r\n                        messages.push({ id: doc.id, ...data, timestamp });\r\n                    });\r\n\r\n                    dispatch(setChatMessagesData(messages));\r\n                    dispatch(setChatMessageBoxLoading(false));\r\n                    globalMessagesLastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\r\n                });\r\n\r\n                // Return a cleanup function\r\n                return () => {\r\n                    unsubscribeDoc();\r\n                    unsubscribeMessages();\r\n                    // if (activeInvoiceNumer && activeInvoiceNumer !== '') {\r\n                    //     unsubscribeInvoice();\r\n                    // }\r\n                };\r\n            } catch (error) {\r\n                console.error(\"Error setting up real-time messages: \", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleLoadMore = () => {\r\n        dispatch(setLoadMoreLoading(true));\r\n\r\n        let nextQuery;\r\n        if (!globalLastVisible) {\r\n            // No more data to load or globalLastVisible is undefined\r\n            console.log(\"No more data to load or globalLastVisible is undefined\");\r\n            setTimeout(() => {\r\n                dispatch(setLoadMoreLoading(false));\r\n                dispatch(setNoMoreData(true));\r\n            }, 0);\r\n            return;\r\n        }\r\n        else {\r\n\r\n            if (chatListData.length >= 10) {\r\n                if (unreadButtonValue == true) {\r\n\r\n                    if (activeButtonValue == 0) {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('read', '==', false),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('read', '==', false),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    else {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('read', '==', false),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n\r\n\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                where('read', '==', false),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    if (activeButtonValue == 0) {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n\r\n\r\n\r\n\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    else {\r\n                        if (globalSearchText === '') {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n\r\n\r\n\r\n                        }\r\n\r\n                        else {\r\n                            dispatch(setLoadMoreLoading(true));\r\n                            dispatch(setNoMoreData(false));\r\n                            nextQuery = query(\r\n                                collection(projectExtensionFirestore, 'chats'),\r\n                                where('stepIndicator.value', '==', activeButtonValue),\r\n                                where('keywords', 'array-contains', globalSearchText.toUpperCase()),\r\n                                orderBy('lastMessageDate', 'desc'),\r\n                                startAfter(globalLastVisible),\r\n                                limit(10)\r\n                            );\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            else {\r\n                dispatch(setNoMoreData(true));\r\n                dispatch(setLoadMoreLoading(false));\r\n            }\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n\r\n        if (chatListData.length < 10) {\r\n            setTimeout(() => {\r\n                dispatch(setLoadMoreLoading(false));\r\n                dispatch(setNoMoreData(true));\r\n            }, 0);\r\n        }\r\n\r\n        else {\r\n            try {\r\n                const unsubscribe = onSnapshot(nextQuery, (snapshot) => {\r\n                    if (snapshot.empty) {\r\n                        // Handle the case when there's no more data\r\n                        console.log(\"No more data to load\");\r\n                        setTimeout(() => {\r\n                            dispatch(setLoadMoreLoading(false));\r\n                            dispatch(setNoMoreData(true));\r\n                            globalLastVisible = null;\r\n                        }, 0);  // Delay setting loading and no more data flags\r\n                        return;\r\n                    }\r\n\r\n                    const chatsData = [];\r\n                    snapshot.forEach((doc) => {\r\n                        chatsData.push({\r\n                            id: doc.id,\r\n                            ...doc.data(),\r\n                        });\r\n                    });\r\n\r\n\r\n                    // Append new data to the existing list\r\n\r\n                    setTimeout(() => {\r\n                        dispatch(setChatListData([...chatListData, ...chatsData]));\r\n                        dispatch(setLoadMoreLoading(false));\r\n                        globalLastVisible = snapshot.docs[snapshot.docs.length - 1];\r\n                    }, 0);\r\n\r\n                });\r\n\r\n                return unsubscribe;\r\n            } catch (error) {\r\n                console.error('Error fetching data from Firebase:', error);\r\n                setTimeout(() => dispatch(setLoadMoreLoading(false)), 0);  // Ensure loading is set to false even if there's an error\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        const unsubscribe = fetchChatMessages();\r\n\r\n        return () => {\r\n            if (unsubscribe) {\r\n                unsubscribe(); // Unsubscribe when the component unmounts\r\n            }\r\n        };\r\n\r\n    }, [activeChatId]);\r\n\r\n    const handleChatPress = async (customerId, chatId) => {\r\n        dispatch(setActiveChatId(chatId));\r\n        globalCustomerId = customerId;\r\n        globalChatId = chatId;\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n        dispatch(setActiveChatId(''));\r\n    }, [unreadButtonValue])\r\n\r\n    const renderFooter = () => {\r\n        return (\r\n            <>\r\n                {!noMoreData && (\r\n                    <View style={{ paddingVertical: 20, borderTopWidth: 1, borderColor: \"#DADDE1\", height: 60, }}>\r\n                        {loadMoreLoading && (\r\n                            <Spinner\r\n                                animating\r\n                                size=\"sm\"\r\n                                color={'#7B9CFF'}\r\n                            />\r\n                        )}\r\n                    </View>\r\n                )}\r\n            </>\r\n\r\n\r\n        );\r\n    };\r\n\r\n    const renderItem = ({ item }) => {\r\n\r\n        const isActive = item.id === activeChatId;\r\n        const messageUnread = !item.read;\r\n        const formattedDate = formatDate(item.lastMessageDate);\r\n\r\n        return (\r\n            <ChatListItem\r\n                chatListData={chatListData}\r\n                item={item}\r\n                onPress={() => handleChatPress(item.participants.customer, item.id)}\r\n                isActive={isActive}\r\n                messageUnread={messageUnread}\r\n                formattedDate={formattedDate}\r\n            />\r\n        );\r\n\r\n    };\r\n\r\n    if (chatListData.length < 1) {\r\n        return (\r\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', }}>\r\n                <Text style={{ fontWeight: 700, alignSelf: 'center', }}>{unreadButtonValue ? 'No unread messages to show' : 'No messages to show'}</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    else {\r\n        return (\r\n            <>\r\n                <FlatList\r\n                    style={{ height: 100, borderBottomLeftRadius: 5, }}\r\n                    renderItem={renderItem}\r\n                    keyExtractor={item => item.id.toString()}\r\n                    data={chatListData}\r\n                    initialNumToRender={1}\r\n                    maxToRenderPerBatch={10}\r\n                    windowSize={21}\r\n                    onEndReachedThreshold={0.05}\r\n                    removeClippedSubviews={true}\r\n                    ListFooterComponent={renderFooter}\r\n                    onEndReached={handleLoadMore}  // Implement this function\r\n                />\r\n\r\n            </>\r\n\r\n        );\r\n    }\r\n\r\n};\r\n\r\n\r\nconst SearchChat = ({ lastVisible, setLastVisible, unreadButtonValue, activeButtonValue }) => {\r\n\r\n    const searchInputRef = useRef(null);\r\n    const [searchText, setSearchText] = useState('');\r\n    const [clearVisible, setClearVisible] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n    const searchData = async ({ }) => {\r\n        let q;\r\n\r\n        const searchValue = searchInputRef.current?.value;\r\n        if (unreadButtonValue == true) {\r\n\r\n            if (activeButtonValue == 0) {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('read', '==', false),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('read', '==', false),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n\r\n            else {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('read', '==', false),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        where('read', '==', false),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        else {\r\n\r\n            if (activeButtonValue == 0) {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n\r\n            else {\r\n                if (searchValue === '') {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n\r\n                    dispatch(setLoadingModalVisible(false));\r\n\r\n\r\n                }\r\n\r\n                else {\r\n                    q = query(\r\n                        collection(projectExtensionFirestore, 'chats'),\r\n                        where('stepIndicator.value', '==', activeButtonValue),\r\n                        where('keywords', 'array-contains', searchValue.toUpperCase()),\r\n                        orderBy('lastMessageDate', 'desc'),\r\n                        limit(10)\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n        try {\r\n            const unsubscribe = onSnapshot(q, (snapshot) => {\r\n                const chatsData = [];\r\n                snapshot.forEach((doc) => {\r\n                    chatsData.push({\r\n                        id: doc.id,\r\n                        ...doc.data(),\r\n                    });\r\n                });\r\n                dispatch(setChatListData(chatsData));\r\n                globalLastVisible = snapshot.docs[snapshot.docs.length - 1]\r\n\r\n\r\n            });\r\n\r\n            // Return the unsubscribe function to stop listening when necessary\r\n            return () => {\r\n                if (unsubscribe) {\r\n                    unsubscribe();\r\n                }\r\n            };\r\n        } catch (error) {\r\n            // Handle errors here\r\n            console.error('Error fetching data from Firebase:', error);\r\n        }\r\n\r\n    };\r\n\r\n    // useEffect(() => {\r\n\r\n    //     searchData();\r\n\r\n    // }, [searchText])\r\n\r\n    useEffect(() => {\r\n        setSearchText('');\r\n        dispatch(setChatListSearchText(''));\r\n        globalSearchText = '';\r\n        searchInputRef.current.value = '';\r\n        setClearVisible(false);\r\n\r\n    }, [activeButtonValue, unreadButtonValue])\r\n\r\n    const handleSearchEnter = () => {\r\n        // setSortField('dateAdded');\r\n        // setIsSortActive(false)\r\n        if (searchInputRef.current?.value !== '') {\r\n            dispatch(setChatListSearchText(searchInputRef.current.value.trim()));\r\n            setSearchText(searchInputRef.current.value.trim());\r\n            globalSearchText = searchInputRef.current.value.trim();\r\n        }\r\n        else {\r\n            setSearchText('');\r\n            globalSearchText = '';\r\n            if (searchText == '') {\r\n                dispatch(setChatListSearchText(''));\r\n                searchData();\r\n\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const handleClearText = () => {\r\n        searchInputRef.current.clear();\r\n        setClearVisible(false);\r\n        if (searchText !== '') {\r\n            setSearchText(''); // Clear the text\r\n            dispatch(setChatListSearchText(''));\r\n            dispatch(setActiveChatId(''));\r\n            globalSearchText = '';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <View style={{ flexDirection: 'row', alignItems: 'center', width: '100%', alignSelf: 'center', borderWidth: 1, borderColor: '#D9D9D9', borderRadius: 5, margin: 10 }}>\r\n            <TextInput\r\n                ref={searchInputRef}\r\n                onSubmitEditing={handleSearchEnter}\r\n                placeholder='Search'\r\n                placeholderTextColor='#9B9E9F'\r\n                underlineColorAndroid=\"transparent\"\r\n                style={{ flex: 1, height: 40, padding: 10, outlineStyle: 'none' }}\r\n                onChangeText={() => setClearVisible(true)}\r\n                keyboardType='search'\r\n            />\r\n            {clearVisible ? (\r\n                <Pressable\r\n                    focusable={false}\r\n                    onPress={handleClearText}\r\n                    style={({ pressed, hovered }) => [\r\n                        {\r\n                            borderRadius: 10,\r\n                            marginRight: 10,\r\n                            opacity: pressed ? 0.5 : 1, // Change opacity when pressed\r\n                            // Add hover effect\r\n                            backgroundColor: hovered ? '#ddd' : 'transparent',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <MaterialIcons name=\"close\" size={20} color=\"#000\" />\r\n                </Pressable>\r\n            ) : null}\r\n        </View>);\r\n}\r\n\r\nconst timelineData = [\r\n    { key: '1', title: 'Event 1', description: 'Description 1' },\r\n    { key: '2', title: 'Event 2', description: 'Description 2' },\r\n    // ... more events\r\n];\r\n\r\n// const TimelineItem = ({ title, description }) => (\r\n//     <View style={{ alignItems: 'center', marginRight: 20 }}>\r\n//         <View style={{ width: 10, height: 10, borderRadius: 5, backgroundColor: 'blue', marginBottom: 5 }} />\r\n//         <Text style={{ fontWeight: 'bold' }}>{title}</Text>\r\n//         <Text style={{ textAlign: 'center' }}>{description}</Text>\r\n//     </View>\r\n// );\r\n\r\n// const HorizontalTimeline = () => (\r\n//     <FlatList\r\n//         data={timelineData}\r\n//         renderItem={({ item }) => <TimelineItem title={item.title} description={item.description} />}\r\n//         horizontal\r\n//         showsHorizontalScrollIndicator={false}\r\n//         style={{ flexDirection: 'row', padding: 10 }}\r\n//     />\r\n// );\r\n\r\nconst ModalAddBank = () => {\r\n    const [modalAddBankVisible, setModalAddBankVisible] = useState(false);\r\n    const [isCancelHovered, setCancelHovered] = useState(false);\r\n    const [isAddHovered, setAddHovered] = useState(false);\r\n\r\n\r\n\r\n\r\n    const handleModalAddBankOpen = () => {\r\n        setModalAddBankVisible(true);\r\n    };\r\n\r\n    const handleModalAddBankClose = () => {\r\n        setModalAddBankVisible(false);\r\n    };\r\n\r\n    const bankNameRef = useRef(null);\r\n    const branchNameRef = useRef(null);\r\n    const swiftcodeRef = useRef(null);\r\n    const addressRef = useRef(null);\r\n    const accountHolderRef = useRef(null);\r\n    const accountNumberRef = useRef(null);\r\n\r\n\r\n\r\n    const addBankAccount = async () => {\r\n        const docRef = doc(projectExtensionFirestore, 'DataForInvoice', 'BankAccounts');\r\n\r\n        const bankNameValue = bankNameRef.current?.value;\r\n        const branchNameValue = branchNameRef.current?.value;\r\n        const swiftcodeValue = swiftcodeRef.current?.value;\r\n        const addressValue = addressRef.current?.value;\r\n        const accountHolderValue = accountHolderRef.current?.value;\r\n        const accountNumberValue = accountNumberRef.current?.value;\r\n\r\n        const elementToAdd = {\r\n            bankName: bankNameValue,\r\n            branchName: branchNameValue,\r\n            swiftCode: swiftcodeValue,\r\n            address: addressValue,\r\n            accountHolder: accountHolderValue,\r\n            accountNumberValue: accountNumberValue,\r\n        }\r\n\r\n        try {\r\n            await updateDoc(docRef, {\r\n                [bankNameValue]: elementToAdd,\r\n            });\r\n            console.log(\"Element added to the array field\");\r\n            handleModalAddBankClose();\r\n        } catch (error) {\r\n            console.error(\"Error adding element to the array\", error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Pressable onPress={handleModalAddBankOpen} style={{ alignSelf: 'center', marginHorizontal: 5, marginTop: 3, }}>\r\n                <FontAwesome name={'plus-circle'} size={25} color='#16A34A' />\r\n            </Pressable>\r\n\r\n            <Modal isOpen={modalAddBankVisible} onClose={handleModalAddBankClose} useRNModal>\r\n                <Modal.Content>\r\n                    <Modal.Header>Add Bank Account</Modal.Header>\r\n                    <Modal.Body>\r\n                        <View style={{ height: '100%', flex: 1, }}>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Bank Name:</Text>\r\n                                <TextInput\r\n                                    ref={bankNameRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Bank Name'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Branch Name:</Text>\r\n                                <TextInput\r\n                                    ref={branchNameRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Branch Name'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>SWIFTCODE:</Text>\r\n                                <TextInput\r\n                                    ref={swiftcodeRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='SWIFTCODE'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Address:</Text>\r\n                                <TextInput\r\n                                    ref={addressRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Address'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Account Holder:</Text>\r\n                                <TextInput\r\n                                    ref={accountHolderRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Account Holder'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                            <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                <Text style={{ width: '35%', fontWeight: 700, margin: 3, }}>Account Number:</Text>\r\n                                <TextInput\r\n                                    ref={accountNumberRef}\r\n                                    placeholderTextColor='#9B9E9F'\r\n                                    placeholder='Account Number'\r\n                                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n                    </Modal.Body>\r\n\r\n                    <Modal.Footer>\r\n                        <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', }}>\r\n                            <Pressable\r\n                                style={{ width: 100, padding: 5, borderRadius: 3, backgroundColor: isCancelHovered ? '#686868' : '#525252' }}\r\n                                onHoverIn={() => setCancelHovered(true)}\r\n                                onHoverOut={() => setCancelHovered(false)}\r\n                                onPress={handleModalAddBankClose}\r\n                            >\r\n                                <Text style={{ fontWeight: 500, textAlign: 'center', color: 'white', }}>Cancel</Text>\r\n                            </Pressable>\r\n\r\n                            <Pressable\r\n                                onPress={addBankAccount}\r\n                                style={{ width: 100, padding: 5, borderRadius: 3, backgroundColor: isAddHovered ? '#1B8B5A' : '#16A34A' }}\r\n                                onHoverIn={() => setAddHovered(true)}\r\n                                onHoverOut={() => setAddHovered(false)}\r\n                            >\r\n                                <Text style={{ fontWeight: 500, textAlign: 'center', color: 'white', }}>Add</Text>\r\n                            </Pressable>\r\n                        </View>\r\n                    </Modal.Footer>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n    );\r\n\r\n\r\n}\r\n\r\nconst BankInformation = () => {\r\n\r\n    let invoiceSelectedDueDate = '';\r\n    const currentDate = useSelector((state) => state.currentDate);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [selectedDueDate, setSelectedDueDate] = useState('');\r\n    const [bankAccountsData, setBankAccountsData] = useState({});\r\n    const [selectedBank, setSelectedBank] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.bankAccount.bankName ? invoiceData.bankInformations.bankAccount.bankName : \"SUMITOMO MITSUI BANKING CORPORATION\");\r\n    let selectedBankData = {};\r\n\r\n    const paymentTermsRef = useRef(null);\r\n    const salesAgreementRef = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        const subscribeToBankAccounts = () => {\r\n            const docRef = doc(projectExtensionFirestore, 'DataForInvoice', 'BankAccounts');\r\n\r\n            const unsubscribe = onSnapshot(docRef, (docSnap) => {\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    const bankAccounts = {};\r\n\r\n                    // Assuming each entry in your document is a bank account\r\n                    Object.entries(data).forEach(([key, value]) => {\r\n                        if (value.bankName) {\r\n                            bankAccounts[value.bankName] = value;\r\n                        }\r\n                    });\r\n\r\n                    console.log(bankAccounts);\r\n                    setBankAccountsData(bankAccounts);\r\n                    globalInvoiceVariable.bankInformations.bankAccount = bankAccounts[\"SUMITOMO MITSUI BANKING CORPORATION\"];\r\n                    // Use state or context to store selected bank data if needed\r\n                    // setSelectedBank(bankAccounts[\"SUMITOMO MITSUI BANKING CORPORATION\"]);\r\n                    console.log(bankAccounts[\"SUMITOMO MITSUI BANKING CORPORATION\"]);\r\n                } else {\r\n                    console.log(\"No such document!\");\r\n                }\r\n            }, (error) => {\r\n                console.error(\"Error fetching document\", error);\r\n            });\r\n\r\n            return unsubscribe; // Return the unsubscribe function to call it later to stop listening\r\n        };\r\n\r\n\r\n        if (currentDate) {\r\n            const date = new Date(currentDate);\r\n\r\n            // Check the day of the week\r\n            const dayOfWeek = date.getDay();\r\n\r\n            if (dayOfWeek === 5) { // Friday\r\n                date.setDate(date.getDate() + 3); // Add 3 days to reach Monday\r\n            } else if (dayOfWeek === 6) { // Saturday\r\n                date.setDate(date.getDate() + 2); // Add 2 days to reach Monday\r\n            } else {\r\n                date.setDate(date.getDate() + 1); // Sunday to Thursday, add 1 day\r\n            }\r\n\r\n            // Format the date back to string\r\n            const adjustedDate = date.toISOString().split('T')[0];\r\n            setSelectedDueDate(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.dueDate ? invoiceData.bankInformations.dueDate : adjustedDate);\r\n            globalInvoiceVariable.bankInformations.dueDate = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.dueDate ? invoiceData.bankInformations.dueDate : adjustedDate;\r\n            globalInvoiceVariable.bankInformations.paymentTerms = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.paymentTerms ? invoiceData.bankInformations.paymentTerms : paymentTermsRef.current?.value;\r\n            // globalInvoiceVariable.bankInformations.salesAgreement = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.salesAgreement ? invoiceData.bankInformations.salesAgreement : salesAgreementRef.current?.value;\r\n            globalInvoiceVariable.bankInformations.issuingDate = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.issuingDate ? invoiceData.bankInformations.issuingDate : currentDate;\r\n\r\n\r\n        }\r\n\r\n        const unsubscribe = subscribeToBankAccounts();\r\n    }, [currentDate]);\r\n\r\n\r\n\r\n    const ModalCalendar = ({ selectedDate, setSelectedDate, currentDate }) => {\r\n\r\n        const [modalCalendarVisible, setModalCalendarVisible] = useState(false);\r\n\r\n\r\n        const handleModalCalendarOpen = () => {\r\n            setModalCalendarVisible(true);\r\n        };\r\n\r\n        const handleModalCalendarClose = () => {\r\n            setModalCalendarVisible(false);\r\n        };\r\n\r\n\r\n\r\n        return (\r\n\r\n            <>\r\n                <Pressable style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onPress={handleModalCalendarOpen}>\r\n                    <TextInput value={selectedDate} onFocus={handleModalCalendarOpen} />\r\n                </Pressable>\r\n\r\n                <Modal isOpen={modalCalendarVisible} onClose={handleModalCalendarClose} useRNModal>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Content>\r\n                        <View style={{ height: '100%', flex: 1 }}>\r\n                            <Calendar\r\n                                onDayPress={useCallback(day => {\r\n                                    setSelectedDate(day.dateString);\r\n                                    invoiceSelectedDueDate = day.dateString;\r\n                                    globalInvoiceVariable.bankInformations.dueDate = day.dateString;\r\n                                    handleModalCalendarClose();\r\n                                }, [])}\r\n                                markedDates={{\r\n                                    [selectedDate]: { selected: true, disableTouchEvent: true, selectedDotColor: '#7b9cff' }\r\n                                }}\r\n                                renderArrow={(direction) => (\r\n                                    direction === 'left' ? <MaterialIcons name='arrow-back-ios' color='#7b9cff' /> : <MaterialIcons name='arrow-forward-ios' color='#7b9cff' />\r\n                                )}\r\n                                enableSwipeMonths={true}\r\n                                initialDate={selectedDate}\r\n                                // minDate={currentDate}\r\n                                showSixWeeks />\r\n\r\n                        </View>\r\n\r\n                    </Modal.Content>\r\n\r\n                </Modal>\r\n            </>\r\n\r\n        );\r\n\r\n    }\r\n\r\n\r\n    const handleValueChange = (selectedBankName) => {\r\n        const selectedBankObj = bankAccountsData[selectedBankName];\r\n        setSelectedBank(selectedBankName);\r\n        globalInvoiceVariable.bankInformations.bankAccount = selectedBankObj;\r\n        // console.log(selectedBankObj);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Due Date:</Text>\r\n                <ModalCalendar currentDate={currentDate} selectedDate={selectedDueDate} setSelectedDate={setSelectedDueDate} />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, marginVertical: 10, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Bank Account: </Text>\r\n                <Select\r\n                    selectedValue={selectedBank}\r\n                    onValueChange={handleValueChange}\r\n                    bgColor={'#FAFAFA'}\r\n                    accessibilityLabel=\"Choose Country\"\r\n                    placeholder=\"---\"\r\n                    _selectedItem={{\r\n                        bg: \"teal.600\",\r\n                        endIcon: <CheckIcon />,\r\n                    }}\r\n                    height={9}\r\n                    width={300}\r\n                    style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1, }}\r\n                >\r\n                    {Object.keys(bankAccountsData).map((bankName) => (\r\n                        <Select.Item key={bankName} label={bankName} value={bankName} />\r\n                    ))}\r\n                </Select>\r\n\r\n                <ModalAddBank />\r\n\r\n            </View>\r\n\r\n            <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Payment Terms:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.bankInformations.paymentTerms = value;\r\n                }} ref={paymentTermsRef} multiline defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.paymentTerms ? invoiceData.bankInformations.paymentTerms : \"Full payment via Telegraphic Transfer (T/T) required before the due date.\"} placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                    style={{ width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n\r\n            {/* <View style={{ flex: 4, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Sales Agreement:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.bankInformations.salesAgreement = value;\r\n                }} ref={salesAgreementRef} multiline defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.bankInformations.salesAgreement ? invoiceData.bankInformations.salesAgreement : `Payment Information:\r\nThe customer is responsible for the bank charges incurred when the T/T (Telegraphic Transfer) is paid.\r\nNo warranty service is provided on used vehicles.\r\n\r\nConditions for order cancellation:\r\n(1) Order Cancellation Penalty: If the order is canceled after payment, a penalty of USD 220 will apply.\r\n(2) Non-refund: Payment for vehicles purchased through pre-delivery inspection is non-refundable.\r\n\r\nIntermediary Banking Information:\r\nBank Name: SUMITOMO MITSUI BANKING CORPORATION (THE NEW YORK AUTHORITY).\r\nSwift code: SMBCUS33\r\nAddress: 277 Park Avenue\r\nCity: New York, NY\r\nPostal Code: 10172\r\nCountry: United States\r\n`}\r\n                    placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                    style={{ width: '60%', height: 100, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View> */}\r\n        </>\r\n    );\r\n}\r\n\r\nconst PaymentDetails = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const fobPriceInput = useRef(null);\r\n    const freightInput = useRef(null);\r\n    const inspectionInput = useRef(null);\r\n    const insuranceInput = useRef(null);\r\n\r\n\r\n    const [totalAmountCalculated, setTotalAmountCalculated] = useState('0');\r\n    const [selectedIncoterms, setSelectedIncoterms] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.incoterms ? invoiceData.paymentDetails.incoterms :\r\n        selectedChatData.insurance ? 'CIF' : 'C&F');\r\n\r\n    const [inspectionIsChecked, setInspectionIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionIsChecked ? invoiceData.paymentDetails.inspectionIsChecked : selectedChatData.inspection);\r\n    const [inspectionName, setInspectionName] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionName ? invoiceData.paymentDetails.inspectionName : selectedChatData.inspectionName);\r\n\r\n    const [warrantyIsChecked, setWarrantyIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyIsCheck ? invoiceData.paymentDetails.warrantyIsCheck : selectedChatData.warranty);\r\n\r\n    const warrantyPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyPrice && invoiceData.paymentDetails.warrantyPrice ? invoiceData.paymentDetails.warrantyPrice : 150;\r\n    const insurancePrice = 50;\r\n\r\n\r\n    const additionalNameRef = useRef(null);\r\n    const additionalPriceRef = useRef(null);\r\n\r\n    const safelyParseNumber = (value) => {\r\n        const number = Number(value.replace(/,/g, ''));\r\n        return isNaN(number) ? 0 : number;\r\n    };\r\n\r\n    const calculateTotalAmount = () => {\r\n        const fobPrice = safelyParseNumber(fobPriceInput.current?.value);\r\n        const freight = safelyParseNumber(freightInput.current?.value);\r\n        const inspection = safelyParseNumber(inspectionInput.current?.value);\r\n        const insurance = safelyParseNumber(insuranceInput.current?.value);\r\n\r\n        const additionalPricesTotal = globalAdditionalPriceArray.reduce((sum, value) => sum + safelyParseNumber(value), 0);\r\n\r\n        // const total = Math.round(fobPrice + freight + inspection + (warrantyIsChecked ? warrantyPrice : 0) + insurance + additionalPricesTotal).toLocaleString();\r\n        const total = Math.round(fobPrice + freight + inspection + insurance + additionalPricesTotal).toLocaleString();\r\n        setTotalAmountCalculated(total);\r\n        globalInvoiceVariable.paymentDetails.totalAmount = total;\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        additionalNameRef.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalName ? invoiceData.paymentDetails.additionalName.join('\\n') : '';\r\n        additionalPriceRef.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalPrice ? invoiceData.paymentDetails.additionalPrice.join('\\n') : '';\r\n\r\n        globalInvoiceVariable.paymentDetails.incoterms = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.incoterms ? invoiceData.paymentDetails.incoterms : selectedIncoterms;\r\n        globalInvoiceVariable.paymentDetails.inspectionIsChecked = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionIsChecked ? invoiceData.paymentDetails.inspectionIsChecked : inspectionIsChecked;\r\n        globalInvoiceVariable.paymentDetails.inspectionName = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionName ? invoiceData.paymentDetails.inspectionName : inspectionName;\r\n        globalInvoiceVariable.paymentDetails.inspectionPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionPrice ? invoiceData.paymentDetails.inspectionPrice : inspectionIsChecked ? 300 : 0;\r\n        globalInvoiceVariable.paymentDetails.warrantyIsCheck = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyIsCheck ? invoiceData.paymentDetails.warrantyIsCheck : warrantyIsChecked;\r\n        // globalInvoiceVariable.paymentDetails.warrantyPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.warrantyPrice ? invoiceData.paymentDetails.warrantyPrice : warrantyIsChecked ? warrantyPrice : 0;\r\n        globalInvoiceVariable.paymentDetails.fobPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.fobPrice ? invoiceData.paymentDetails.fobPrice : fobPriceInput.current?.value;\r\n        globalInvoiceVariable.paymentDetails.freightPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.freightPrice ? invoiceData.paymentDetails.freightPrice : freightInput.current?.value;\r\n        globalInvoiceVariable.paymentDetails.insurancePrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.insurancePrice ? invoiceData.paymentDetails.insurancePrice : selectedIncoterms == 'CIF' ? insuranceInput.current?.value : 0;\r\n        globalInvoiceVariable.paymentDetails.additionalPrice = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalPrice ? invoiceData.paymentDetails.additionalPrice : [];\r\n        globalInvoiceVariable.paymentDetails.additionalName = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalName ? invoiceData.paymentDetails.additionalName : [];\r\n        globalAdditionalPriceArray = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.additionalPrice ? invoiceData.paymentDetails.additionalPrice : [];\r\n\r\n        calculateTotalAmount();\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        inspectionInput.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.inspectionPrice && invoiceData.paymentDetails.inspectionPrice == true ? invoiceData.paymentDetails.inspectionPrice : inspectionIsChecked ? 300 : 0;\r\n        calculateTotalAmount();\r\n\r\n    }, [inspectionIsChecked]);\r\n\r\n    useEffect(() => {\r\n\r\n        insuranceInput.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.insurancePrice && invoiceData.paymentDetails.incoterms == 'CIF' ? invoiceData.paymentDetails.insurancePrice : selectedIncoterms == 'CIF' ? 50 : 0;\r\n        freightInput.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.paymentDetails.freightPrice ? invoiceData.paymentDetails.freightPrice : selectedIncoterms == 'FOB' ? 0 : freightCalculation;\r\n\r\n        calculateTotalAmount();\r\n\r\n    }, [selectedIncoterms]);\r\n\r\n    useEffect(() => {\r\n        calculateTotalAmount();\r\n\r\n    }, [warrantyIsChecked]);\r\n\r\n    const freightCalculation = (\r\n        (selectedChatData.m3 ? selectedChatData.m3 :\r\n            (selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ?\r\n                selectedChatData.carData.dimensionCubicMeters : 0)) *\r\n        Number(selectedChatData.freightPrice)\r\n    ).toFixed(2);\r\n\r\n    const totalPriceCalculation = (\r\n        (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n            (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n                selectedChatData.carData.fobPrice : 0) *\r\n            (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n                (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                    selectedChatData.currency.jpyToUsd : 0))) +\r\n        parseFloat(freightCalculation)\r\n    ).toFixed(2);\r\n\r\n    const fobPriceDollars = (\r\n        (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n            (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n                selectedChatData.carData.fobPrice : 0) *\r\n            (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n                (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                    selectedChatData.currency.jpyToUsd : 0))\r\n        ).toFixed(2));\r\n\r\n\r\n    const handleAdditionalPriceTextChange = (text) => {\r\n        // Process and filter each line\r\n        const filteredLines = text.split('\\n').map(line => {\r\n            let filteredLine = line.replace(/[^0-9.]/g, '');\r\n            const parts = filteredLine.split('.');\r\n            if (parts.length > 2) {\r\n                filteredLine = parts[0] + '.' + parts[1];\r\n            }\r\n            return filteredLine;\r\n        });\r\n\r\n        // Update the ref and the state\r\n        additionalPriceRef.current.value = filteredLines.join('\\n');\r\n        // setAdditionalPriceArray(filteredLines);\r\n        globalAdditionalPriceArray = filteredLines;\r\n        globalInvoiceVariable.paymentDetails.additionalPrice = filteredLines;\r\n        calculateTotalAmount();\r\n\r\n    };\r\n\r\n    const handleAdditionalNameTextChange = (text) => {\r\n        // Update the ref\r\n        additionalNameRef.current.value = text;\r\n\r\n        // Split the text into lines and update the state\r\n        const lines = text.split('\\n');\r\n        // setAdditionalNameArray(lines);\r\n        globalInvoiceVariable.paymentDetails.additionalName = lines;\r\n    };\r\n\r\n\r\n    const handleFobPriceInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        fobPriceInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.fobPrice = filteredText;\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    const handleFreightInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        freightInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.freightPrice = filteredText;\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    const handleInspectionInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        inspectionInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.inspectionPrice = filteredText;\r\n\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    const handleInsuranceInputChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        insuranceInput.current.value = filteredText;\r\n        globalInvoiceVariable.paymentDetails.insurancePrice = filteredText;\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignSelf: 'center', }}>\r\n                <Text style={{ fontWeight: 700, fontSize: 16, margin: 3, color: '#16A34A', }}>Payment Details</Text>\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Incoterms:</Text>\r\n                <Select\r\n                    selectedValue={selectedIncoterms}\r\n                    onValueChange={(value) => setSelectedIncoterms(value)}\r\n                    bgColor={'#FAFAFA'}\r\n                    accessibilityLabel=\"Choose Country\"\r\n                    placeholder=\"---\"\r\n                    _selectedItem={{\r\n                        bg: \"teal.600\",\r\n                        endIcon: <CheckIcon />,\r\n                    }}\r\n                    height={9}\r\n                    style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1, }}\r\n                >\r\n                    <Select.Item key={'C&F'} label={'C&F'} value={'C&F'} />\r\n                    <Select.Item key={'CIF'} label={'CIF'} value={'CIF'} />\r\n                    <Select.Item key={'FOB'} label={'FOB'} value={'FOB'} />\r\n                </Select>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Rate: </Text>\r\n                <Text style={{ fontWeight: 700, margin: 3, color: '#16A34A', }}>\r\n                    {selectedChatData.currency && selectedChatData.currency.usdToJpy\r\n                        ? Number(selectedChatData.currency.usdToJpy).toFixed(2) : '0.00'}\r\n                </Text>\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, marginTop: 10, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Inspection:</Text>\r\n                <Checkbox\r\n                    isChecked={inspectionIsChecked}\r\n                    onChange={value => {\r\n                        setInspectionIsChecked(value)\r\n                        globalInvoiceVariable.paymentDetails.inspectionIsChecked = value;\r\n                    }}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                />\r\n            </View>\r\n\r\n            {/* <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Warranty:</Text>\r\n                <Checkbox\r\n                    isChecked={warrantyIsChecked}\r\n                    onChange={value => setWarrantyIsChecked(value)}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                />\r\n                <Text style={{ fontWeight: 700, margin: 3, color: '#16A34A', }}>${warrantyPrice}</Text>\r\n            </View> */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2 }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3 }}>FOB Price:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1 }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleFobPriceInputChangeText}\r\n                    ref={fobPriceInput}\r\n                    defaultValue={invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.paymentDetails.fobPrice : selectedIncoterms == 'FOB' ? 0 : fobPriceDollars}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder='FOB Price'\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2 }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3 }}>Freight:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1 }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleFreightInputChangeText}\r\n                    ref={freightInput}\r\n                    defaultValue={freightCalculation}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder='Freight'\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, display: selectedIncoterms == 'CIF' ? 'flex' : 'none' }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Insurance:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1, }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleInsuranceInputChangeText}\r\n                    ref={insuranceInput}\r\n                    defaultValue={50}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder={`Insurance`}\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, display: inspectionIsChecked ? 'flex' : 'none' }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Inspection:</Text>\r\n                <Text style={{ fontWeight: 700, margin: 1, paddingTop: 1, }}>$</Text>\r\n                <TextInput\r\n                    onChangeText={handleInspectionInputChangeText}\r\n                    ref={inspectionInput}\r\n                    placeholderTextColor='#9B9E9F'\r\n                    placeholder={`Inspection [${selectedChatData.inspectionName}]`}\r\n                    style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                />\r\n                <Text style={{ fontWeight: 700, margin: 3, color: '#16A34A', }}>{`[${selectedChatData.inspectionName}]`}</Text>\r\n            </View>\r\n\r\n\r\n            <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Additional:</Text>\r\n                <TextInput ref={additionalNameRef} onChangeText={handleAdditionalNameTextChange} multiline placeholderTextColor='#9B9E9F' placeholder='Name'\r\n                    style={{ width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                <TextInput ref={additionalPriceRef} onChangeText={handleAdditionalPriceTextChange} multiline placeholderTextColor='#9B9E9F' placeholder='Price'\r\n                    style={{ width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignItems: 'center', }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Total Amount:</Text>\r\n                <Text style={{ fontWeight: 700, fontSize: 18, margin: 3, color: '#FF0000', }}>{`$${totalAmountCalculated}`}</Text>\r\n            </View>\r\n        </>\r\n    );\r\n\r\n\r\n}\r\n\r\nconst SelectPortOfDischarge = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [countriesDischarge, setCountriesDischarge] = useState([]);\r\n    const [portsData, setPortsData] = useState({});\r\n    const [nearestPorts, setNearestPorts] = useState([]);\r\n    const [selectedPortCountry, setSelectedPortCountry] = useState('');\r\n    const [selectedCountry, setSelectedCountry] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.discharge.country : selectedChatData.country);\r\n    const [selectedPort, setSelectedPort] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.discharge.port : selectedChatData.port);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.discharge.port : selectedChatData.port);\r\n\r\n        const fetchPorts = async () => {\r\n            const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    const sortedPorts = Object.keys(data)\r\n                        .map(portName => ({\r\n                            name: portName.replace(/_/g, '.'), // Replace '_' with '.'\r\n                            ...data[portName]\r\n                        }))\r\n                        .sort((a, b) => a.sortOrder - b.sortOrder);\r\n                    setNearestPorts(sortedPorts);\r\n                } else {\r\n                    console.log('No such document!');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        };\r\n\r\n        const fetchPortsData = async () => {\r\n            const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    setPortsData(data);\r\n                } else {\r\n                    console.log('No such document!');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        };\r\n\r\n        fetchPorts();\r\n        fetchPortsData();\r\n        // fetchCountries();\r\n\r\n        globalInvoiceVariable.discharge.port = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.discharge.port ? invoiceData.discharge.port : selectedPort;\r\n        globalInvoiceVariable.discharge.country = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.discharge.country ? invoiceData.discharge.country : selectedPortCountry;\r\n\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        // When selectedCountry changes, update nearestPorts\r\n        const selectedCountryData = countriesDischarge.find(country => country.name === selectedCountry);\r\n        if (selectedCountryData && selectedCountryData.nearestPorts) {\r\n            setNearestPorts(selectedCountryData.nearestPorts);\r\n        } else {\r\n            setNearestPorts([]); // Reset to empty if no ports or country not found\r\n        }\r\n    }, [selectedCountry, countriesDischarge]);\r\n\r\n    useEffect(() => {\r\n        const portData = portsData[selectedPort];\r\n        if (portData && portData.country) {\r\n            setSelectedPortCountry(portData.country);\r\n            // console.log('Nagoya Price ', portData.nagoyaPrice);\r\n            globalInvoiceVariable.discharge.country = portData.country;\r\n        } else {\r\n            setSelectedPortCountry(''); // Reset selected country if port not found or has no country\r\n            console.log('Not found');\r\n        }\r\n    }, [selectedPort, portsData]);\r\n\r\n    return (\r\n        <>\r\n            {/* <Select\r\n                selectedValue={selectedCountry}\r\n                onValueChange={(value) => {\r\n                    setSelectedCountry(value)\r\n                    globalInvoiceVariable.discharge.country = value;\r\n\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                flex={1}\r\n                accessibilityLabel=\"Choose Country\"\r\n                placeholder=\"---\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />,\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}\r\n            >\r\n                {countriesDischarge.map((country) => (\r\n                    <Select.Item key={country.name} label={country.name} value={country.name} />\r\n                ))}\r\n            </Select> */}\r\n            <Select\r\n                selectedValue={selectedPort}\r\n                onValueChange={(value) => {\r\n                    setSelectedPort(value)\r\n                    globalInvoiceVariable.discharge.port = value;\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                accessibilityLabel=\"Choose Port\"\r\n                placeholder=\"Select port\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />,\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}\r\n            >\r\n                {nearestPorts.map((port, index) => (\r\n                    <Select.Item key={index} label={port.name} value={port.name} />\r\n                ))}\r\n            </Select>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nconst SelectSalesPerson = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [selectedSales, setSelectedSales] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.salesPerson : (selectedChatData.carData && selectedChatData.carData.sales ? selectedChatData.carData.sales : ''));\r\n    const salesData = useSelector((state) => state.salesData);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        globalInvoiceVariable.salesPerson = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.salesPerson ? invoiceData.salesPerson : (selectedChatData.carData && selectedChatData.carData.sales ? selectedChatData.carData.sales : '');\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <Select\r\n            selectedValue={selectedSales}\r\n            onValueChange={(value) => {\r\n                setSelectedSales(value);\r\n                globalInvoiceVariable.salesPerson = value;\r\n            }}\r\n            bgColor={'#FAFAFA'}\r\n            accessibilityLabel=\"---\"\r\n            placeholder=\"---\"\r\n            _selectedItem={{\r\n                bg: \"teal.600\",\r\n                endIcon: <CheckIcon />\r\n            }}\r\n            style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}>\r\n            {salesData.map((item) => (\r\n                <Select.Item key={item.id} label={item.name} value={item.name} />\r\n            ))}\r\n        </Select>\r\n    );\r\n}\r\n\r\nconst SelectPortOfDeparture = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const portData = useSelector((state) => state.portData);\r\n    const salesData = useSelector((state) => state.salesData);\r\n    const [selectedPort, setSelectedPort] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.departurePort : (selectedChatData.carData && selectedChatData.carData.port ? selectedChatData.carData.port : ''));\r\n\r\n\r\n    useEffect(() => {\r\n        // console.log(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.departurePort : (selectedChatData.carData && selectedChatData.carData.port ? selectedChatData.carData.port : ''));\r\n\r\n        globalInvoiceVariable.departurePort = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.departurePort ? invoiceData.departurePort : (selectedChatData.carData && selectedChatData.carData.port ? selectedChatData.carData.port : '');\r\n        globalInvoiceVariable.departureCountry = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.departureCountry ? invoiceData.departureCountry : 'Japan';\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Select\r\n                selectedValue='Japan'\r\n                onValueChange={(value) => {\r\n                    globalInvoiceVariable.departureCountry = value;\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                flex={1}\r\n                accessibilityLabel=\"---\"\r\n                placeholder=\"---\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}>\r\n                <Select.Item key={'Japan'} label={'Japan'} value={'Japan'} />\r\n            </Select>\r\n\r\n            <Select\r\n                selectedValue={selectedPort}\r\n                onValueChange={(value) => {\r\n                    setSelectedPort(value);\r\n                    globalInvoiceVariable.departurePort = value;\r\n                }}\r\n                bgColor={'#FAFAFA'}\r\n                flex={1}\r\n                accessibilityLabel=\"---\"\r\n                placeholder=\"---\"\r\n                _selectedItem={{\r\n                    bg: \"teal.600\",\r\n                    endIcon: <CheckIcon />\r\n                }}\r\n                style={{ marginLeft: 10, marginRight: 10, paddingLeft: 1 }}>\r\n                {portData.map((item) => (\r\n                    <Select.Item key={item.id} label={item.name} value={item.name} />\r\n                ))}\r\n            </Select>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nconst NotifyPartyInput = ({ accountData, setAccountData }) => {\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const [isChecked, setIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.notifyParty.sameAsConsignee : true);\r\n\r\n    const notifyPartyName = useRef(null);\r\n    const notifyPartyAddress = useRef(null);\r\n    const notifyPartyCity = useRef(null);\r\n    const notifyPartyCountry = useRef(null);\r\n    const notifyPartyContactNumber = useRef(null);\r\n    const notifyPartyFax = useRef(null);\r\n    const notifyPartyEmail = useRef(null);\r\n\r\n    useEffect(() => {\r\n\r\n        notifyPartyName.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.name ? invoiceData.notifyParty.name : '';\r\n        notifyPartyAddress.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.address ? invoiceData.notifyParty.address : '';\r\n        notifyPartyCity.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.city ? invoiceData.notifyParty.city : '';\r\n        notifyPartyCountry.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.country ? invoiceData.notifyParty.country : '';\r\n        notifyPartyContactNumber.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.contactNumber ? invoiceData.notifyParty.contactNumber : '';\r\n        notifyPartyFax.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.fax ? invoiceData.notifyParty.fax : '';\r\n        notifyPartyEmail.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.email ? invoiceData.notifyParty.email : '';\r\n\r\n        globalInvoiceVariable.notifyParty.name = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.name ? invoiceData.notifyParty.name : notifyPartyName.current?.value;\r\n        globalInvoiceVariable.notifyParty.address = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.address ? invoiceData.notifyParty.address : notifyPartyAddress.current?.value;\r\n        globalInvoiceVariable.notifyParty.city = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.city ? invoiceData.notifyParty.city : notifyPartyCity.current?.value;\r\n        globalInvoiceVariable.notifyParty.country = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.country ? invoiceData.notifyParty.country : notifyPartyCountry.current?.value;\r\n        globalInvoiceVariable.notifyParty.contactNumber = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.contactNumber ? invoiceData.notifyParty.contactNumber : notifyPartyContactNumber.current?.value;\r\n        globalInvoiceVariable.notifyParty.fax = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.fax ? invoiceData.notifyParty.fax : notifyPartyFax.current?.value;\r\n        globalInvoiceVariable.notifyParty.email = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.email ? invoiceData.notifyParty.email : notifyPartyEmail.current?.value;\r\n        globalInvoiceVariable.notifyParty.sameAsConsignee = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.notifyParty.sameAsConsignee ? invoiceData.notifyParty.sameAsConsignee : isChecked;\r\n\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignSelf: 'center', }}>\r\n                <Text style={{ fontWeight: 700, fontSize: 16, margin: 3, color: '#FF0000', }}>Notify Party</Text>\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, }}>\r\n                <Checkbox\r\n                    isChecked={isChecked}\r\n                    onChange={value => {\r\n                        setIsChecked(value)\r\n                        globalInvoiceVariable.consignee.sameAsBuyer = value;\r\n                    }}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                >\r\n                    Same as consignee\r\n                </Checkbox>\r\n            </View>\r\n\r\n            <View style={{ display: isChecked ? 'none' : 'flex', }}>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Name:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.name = value;\r\n                    }}\r\n                        ref={notifyPartyName} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Name'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Address:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.address = value;\r\n                    }} ref={notifyPartyAddress} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Address'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>City:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.city = value;\r\n                    }} ref={notifyPartyCity} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='City'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Country:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.country = value;\r\n                    }} ref={notifyPartyCountry} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Country'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Contact Number:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.contactNumber = value;\r\n                    }} ref={notifyPartyContactNumber} disabled={isChecked} multiline placeholderTextColor='#9B9E9F' placeholder='Contact Number'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>FAX:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.fax = value;\r\n                    }} ref={notifyPartyFax} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='FAX'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n                <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                    <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Email:</Text>\r\n                    <TextInput onChangeText={(value) => {\r\n                        globalInvoiceVariable.notifyParty.email = value;\r\n                    }} ref={notifyPartyEmail} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                        style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n                </View>\r\n            </View>\r\n\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />{/* Horizontal Line */}\r\n        </>\r\n    )\r\n}\r\n\r\nconst ConsigneeInput = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [isChecked, setIsChecked] = useState(invoiceData && Object.keys(invoiceData).length > 0 ? invoiceData.consignee.sameAsBuyer : true);\r\n    const [accountData, setAccountData] = useState({});\r\n\r\n    const consigneeName = useRef(null);\r\n    const consigneeAddress = useRef(null);\r\n    const consigneeCity = useRef(null);\r\n    const consigneeCountry = useRef(null);\r\n    const consigneeContactNumber = useRef(null);\r\n    const consigneeFax = useRef(null);\r\n    const consigneeEmail = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchAccountData = async () => {\r\n            if (!selectedChatData.participants && selectedChatData.participants.customer) return; // Make sure there's a selected email\r\n            const docRef = doc(projectExtensionFirestore, 'accounts', selectedChatData.participants.customer);\r\n\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    setAccountData(docSnap.data());\r\n                    // console.log(docSnap.data());\r\n                    consigneeName.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.name ? invoiceData.consignee.name : `${data.textFirst ? data.textFirst : ''} ${data.textLast ? data.textLast : ''}`;\r\n                    consigneeAddress.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.address ? invoiceData.consignee.address : `${data.textStreet ? data.textStreet : ''} ${data.textZip ? data.textZip : ''}`;\r\n                    consigneeCity.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.city ? invoiceData.consignee.city : `${data.city ? data.city : ''}`;\r\n                    consigneeCountry.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.country ? invoiceData.consignee.country : `${data.country ? data.country : ''}`;\r\n                    consigneeContactNumber.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.contactNumber ? invoiceData.consignee.contactNumber : `${data.textPhoneNumber ? data.textPhoneNumber : ''}`;\r\n                    consigneeFax.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.fax ? invoiceData.consignee.fax : `${data.fax ? data.fax : ''}`;\r\n                    consigneeEmail.current.value = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.email ? invoiceData.consignee.email : `${data.textEmail ? data.textEmail : ''}`;\r\n\r\n\r\n                    globalInvoiceVariable.consignee.name = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.name ? invoiceData.consignee.name : `${data.textFirst ? data.textFirst : ''} ${data.textLast ? data.textLast : ''}`;\r\n                    globalInvoiceVariable.consignee.address = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.address ? invoiceData.consignee.address : `${data.textStreet ? data.textStreet : ''} ${data.textZip ? data.textZip : ''}`;\r\n                    globalInvoiceVariable.consignee.city = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.city ? invoiceData.consignee.city : `${data.city ? data.city : ''}`;\r\n                    globalInvoiceVariable.consignee.country = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.country ? invoiceData.consignee.country : `${data.country ? data.country : ''}`;\r\n                    globalInvoiceVariable.consignee.contactNumber = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.contactNumber ? invoiceData.consignee.contactNumber : `${data.textPhoneNumber ? data.textPhoneNumber : ''}`;\r\n                    globalInvoiceVariable.consignee.fax = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.fax ? invoiceData.consignee.fax : `${data.fax ? data.fax : ''}`;\r\n                    globalInvoiceVariable.consignee.email = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.email ? invoiceData.consignee.email : `${data.textEmail ? data.textEmail : ''}`;\r\n                    globalInvoiceVariable.consignee.sameAsBuyer = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.consignee.sameAsBuyer ? invoiceData.consignee.sameAsBuyer : isChecked;\r\n\r\n                    // console.log(accountData.length);\r\n                } else {\r\n                    console.log('No such document!');\r\n                    setAccountData(null);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        };\r\n        fetchAccountData();\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        if (isChecked) {\r\n            consigneeName.current.value = `${accountData.textFirst ? accountData.textFirst : ''} ${accountData.textLast ? accountData.textLast : ''}`;\r\n            consigneeAddress.current.value = `${accountData.textStreet ? accountData.textStreet : ''} ${accountData.textZip ? accountData.textZip : ''}`;\r\n            consigneeCity.current.value = `${accountData.city ? accountData.city : ''}`;\r\n            consigneeCountry.current.value = `${accountData.country ? accountData.country : ''}`;\r\n            consigneeContactNumber.current.value = `${accountData.textPhoneNumber ? accountData.textPhoneNumber : ''}`;\r\n            consigneeFax.current.value = `${accountData.fax ? accountData.fax : ''}`;\r\n            consigneeEmail.current.value = `${accountData.textEmail ? accountData.textEmail : ''}`;\r\n        }\r\n\r\n        // console.log(globalInvoiceVariable);\r\n\r\n\r\n    }, [isChecked])\r\n\r\n\r\n    return (\r\n        <>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, alignSelf: 'center', }}>\r\n                <Text style={{ fontWeight: 700, fontSize: 16, margin: 3, color: '#0A78BE', }}>Consignee</Text>\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, }}>\r\n                <Checkbox\r\n                    isChecked={isChecked}\r\n                    onChange={value => {\r\n                        globalInvoiceVariable.consignee.sameAsBuyer = value;\r\n                        setIsChecked(value)\r\n                    }}\r\n                    style={{ margin: 2, borderColor: '#0A9FDC' }}\r\n                    size=\"sm\"\r\n                    _text={{ fontWeight: 700 }}\r\n                >\r\n                    Same as buyer\r\n                </Checkbox>\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Name:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.name = value;\r\n                }} ref={consigneeName} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Name'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Address:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.address = value;\r\n                }} ref={consigneeAddress} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Address'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>City:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.city = value;\r\n                }} ref={consigneeCity} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='City'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Country:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.country = value;\r\n                }} ref={consigneeCountry} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Country'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 3, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Contact Number:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.contactNumber = value;\r\n                }} ref={consigneeContactNumber} disabled={isChecked} multiline placeholderTextColor='#9B9E9F' placeholder='Contact Number'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 75, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>FAX:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.fax = value;\r\n                }} ref={consigneeFax} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='FAX'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ width: '15%', fontWeight: 700, margin: 3, }}>Email:</Text>\r\n                <TextInput onChangeText={(value) => {\r\n                    globalInvoiceVariable.consignee.email = value;\r\n                }} ref={consigneeEmail} disabled={isChecked} placeholderTextColor='#9B9E9F' placeholder='Email'\r\n                    style={{ backgroundColor: isChecked ? '#F1F1F1' : 'default', width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }} />\r\n            </View>\r\n\r\n            <NotifyPartyInput accountData={accountData} setAccountData={setAccountData} />\r\n        </>\r\n    );\r\n}\r\n\r\nconst InvoiceFeatures = ({ widthScaleFactor, heightScaleFactor }) => {\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    return (\r\n        <View style={{ flexDirection: 'row', flexWrap: 'wrap', width: 495 * widthScaleFactor, }}>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemAnBrSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Anti-Lock Braking System (ABS)</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemDrAi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Driver Airbag</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemPaAi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Passenger Airbag</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SafetySystemSiAi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Side Airbag</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAiCoFr ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Air Conditioner (Front)</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAiCoRe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Air Conditioner (Rear)</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAMFMRa ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>AM/FM Radio</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortAMFMSt ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>AM/FM Stereo</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortCDPl ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>CD Player</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortCDCh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>CD Changer</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortCrSpCo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Cruis Speed Control</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortDiSp ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}> Digital Speedometer</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortDVDPl ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>DVD Player</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortHDD ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Hard Disk Drive</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortNaSyGPS ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Navigation System (GPS)</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortPoSt ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Steering</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortPrAuSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Premium Audio System</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortReKeSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Remote Keyless System</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ComfortTiStWh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Tilt Steering Wheel</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorLeSe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Leather Seats</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoDoLo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Door Locks</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoMi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Mirrors</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoSe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Seats</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorPoWi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Windows</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorReWiDe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Rear Window Defroster</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorReWiWi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Rear Window Wiper</Text>\r\n            </View>\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorThRoSe ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Third Row Seats</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.InteriorTiGl ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Tinted Glasses</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ExteriorAlWh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Alloy Wheels</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ExteriorPoSlDo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Power Sliding Door</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.ExteriorSuRo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Sunroof</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsCuWh ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Customized Wheels</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsFuLo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Fully Loaded</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsMaHiAv ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Maintenance History Available</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsBrNeTi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Brand New Tires</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsNoAcHi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>No Accident History</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsNoSmPrOw ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Non-Smoking Previous Owner</Text>\r\n            </View>\r\n\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsOnOwHi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>One Owner History</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsPeRaTi ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Performance-rated Tires</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsReBo ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Repainted Body</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsTuEn ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Turbo Engine</Text>\r\n            </View>\r\n\r\n\r\n            <View\r\n                style={{\r\n                    display: invoiceData.carData.SellingPointsUpAuSy ? 'flex' : 'none',\r\n                    borderRadius: 5 * widthScaleFactor,\r\n                    width: 64 * widthScaleFactor,\r\n                    height: 25 * heightScaleFactor,\r\n                    backgroundColor: '#7B9CFF',\r\n                    marginRight: 5 * widthScaleFactor,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    marginTop: 5 * heightScaleFactor,\r\n                }}>\r\n                <Text style={{ color: 'white', textAlign: 'center', fontWeight: 700, fontSize: 7 * widthScaleFactor, }}>Upgraded Audio System</Text>\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst createHmacSha256Hash = (data, secretKey) => {\r\n    const hash = HmacSHA256(data, secretKey);\r\n    return enc.Hex.stringify(hash);\r\n};\r\n\r\n\r\nconst ConfirmPaymentModalContent = () => {\r\n    const dispatch = useDispatch();\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const selectedCustomerData = useSelector((state) => state.selectedCustomerData);\r\n\r\n\r\n    const [historyModalVisible, setHistoryModalVisible] = useState(false);\r\n\r\n    const [isConfirmLoading, setIsConfirmLoading] = useState(false);\r\n\r\n    const totalAmountString = invoiceData.paymentDetails.totalAmount;\r\n    const totalAmountNumber = parseFloat(totalAmountString.replace(/,/g, ''));\r\n\r\n    const inputAmountRef = useRef(null);\r\n\r\n    const handleHistoryModalOpen = () => {\r\n        setHistoryModalVisible(true);\r\n\r\n        // console.log(selectedChatData.payments);\r\n    }\r\n\r\n    const handleHistoryModalClose = () => {\r\n        setHistoryModalVisible(false);\r\n\r\n    }\r\n\r\n    const handleInputAmountChangeText = (text) => {\r\n        // Remove characters that are not digits, dot, or minus, and ensure minus is only at the start\r\n        const filteredText = text\r\n            .replace(/[^0-9.-]/g, '')  // Remove characters that are not digits, dot, or minus\r\n            .replace(/(.)\\-/g, '$1')   // Remove minus if not at the start\r\n            .replace(/^-(?=\\-)/, '')   // Remove extra minus at the start\r\n            .replace(/(\\..*)\\./g, '$1'); // Allow only one dot\r\n\r\n        // Update the input field\r\n        inputAmountRef.current.value = filteredText;\r\n    };\r\n\r\n\r\n\r\n    const handleCompletePaymentPress = () => {\r\n        const filteredText = invoiceData.paymentDetails.totalAmount.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1') - totalValue;\r\n        inputAmountRef.current.value = filteredText;\r\n    }\r\n\r\n\r\n    const fullPaymentMessage = async () => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `Full Payment Received\r\n\r\nDear Customer,\r\n\r\nI hope this message finds you well. \r\n\r\nWe are writing to confirm that we have received your full payment. \r\n\r\nThank you for settling your account promptly.\r\n\r\nShould you have any further questions or require assistance, please feel free to contact us.\r\n                \r\nBest regards,\r\nReal Motor Japan`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'InputPayment',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `Full Payment Received\r\n\r\nDear Customer,\r\n\r\nI hope this message finds you well. \r\n\r\nWe are writing to confirm that we have received your full payment. \r\n                \r\nThank you for settling your account promptly.\r\n                \r\nShould you have any further questions or require assistance, please feel free to contact us.\r\n                                \r\nBest regards,\r\nReal Motor Japan`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n\r\n    const overBalanceMessage = async (amount) => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `Dear Customer,\r\n\r\nGood day! \r\n\r\nWe're writing to inform you about your account with us at Real Motor Japan.\r\n                \r\nYou have an extra overbalance in your account.\r\n\r\nAmount: $${amount}\r\n                \r\nFeel free to contact us if you have any questions. We're here to help.\r\n                \r\nBest regards,\r\nReal Motor Japan`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'InputPayment',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `Dear Customer,\r\n\r\nGood day! \r\n                \r\nWe're writing to inform you about your account with us at Real Motor Japan.\r\n                                \r\nYou have an extra overbalance in your account.\r\n                \r\nAmount: $${amount}\r\n                                \r\nFeel free to contact us if you have any questions. We're here to help.\r\n                                \r\nBest regards,\r\nReal Motor Japan`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n    const paymentMessage = async (amount, transactionDate) => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: ` Payment Confirmation Alert \r\n\r\nDear Customer! \r\n\r\nWe're thrilled to inform you that your recent payment has been successfully reflected in our bank account.\r\n\r\nYour prompt and efficient transaction is greatly appreciated! \r\n\r\n Payment Details:\r\n\r\nAmount: $${amount}\r\nTransaction Date: ${transactionDate}\r\n\r\nYour account and services are now fully up-to-date. If you have any further questions or require assistance, feel free to reach out.\r\n\r\nThank you for your continued trust in us.\r\nLooking forward to serving you more in the future! \r\n\r\nBest regards,\r\nReal Motor Japan`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'InputPayment',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: ` Payment Confirmation Alert \r\n\r\nDear Customer! \r\n\r\nWe're thrilled to inform you that your recent payment has been successfully reflected in our bank account.\r\n\r\nYour prompt and efficient transaction is greatly appreciated! \r\n\r\n Payment Details:\r\n\r\nAmount: $${amount}\r\nTransaction Date: ${transactionDate}\r\n\r\nYour account and services are now fully up-to-date. If you have any further questions or require assistance, feel free to reach out.\r\n\r\nThank you for your continued trust in us.\r\nLooking forward to serving you more in the future! \r\n\r\nBest regards,\r\nReal Motor Japan`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n    const confirmPayment = async () => {\r\n        setIsConfirmLoading(true);\r\n\r\n        const amountNeeded = invoiceData.paymentDetails.totalAmount ? invoiceData.paymentDetails.totalAmount.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1') - totalValue : '';\r\n        const docRef = doc(projectExtensionFirestore, 'chats', selectedChatData.id);\r\n        const docRefCustomer = doc(projectExtensionFirestore, 'accounts', selectedChatData.participants.customer);\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n\r\n        const newPayments = [\r\n            { value: inputAmountRef.current.value, date: formattedTime },\r\n        ];\r\n\r\n        const newPaymentsAccount = [\r\n            { value: inputAmountRef.current.value, date: formattedTime, vehicleRef: selectedChatData.carData.referenceNumber, vehicleName: selectedChatData.carData.carName, },\r\n        ];\r\n\r\n        const inputAmount = inputAmountRef.current.value;\r\n        const numericInputAmount = Number(inputAmount);\r\n        const formattedInputAmount = numericInputAmount.toLocaleString();\r\n        const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n        if (inputAmount === '' || inputAmount === '0') {\r\n            setIsConfirmLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            if (!inputAmount.startsWith('-')) {\r\n                // First, execute paymentMessage\r\n                await paymentMessage(formattedInputAmount, formattedTime);\r\n                await delay(10); //10ms delay\r\n\r\n                if (numericInputAmount >= amountNeeded) {\r\n                    // Once paymentMessage is successful, execute fullPaymentMessage\r\n                    await fullPaymentMessage();\r\n                    await delay(10); //10ms delay\r\n\r\n                    if (numericInputAmount > amountNeeded) {\r\n                        // Calculate overbalance and execute overBalanceMessage\r\n                        const overBalance = numericInputAmount - amountNeeded;\r\n\r\n                        if (overBalance > 0) {\r\n                            await overBalanceMessage(selectedCustomerData.overBalance ? selectedCustomerData.overBalance + overBalance : '');\r\n                            await delay(10); //10ms delay\r\n                            await updateDoc(docRefCustomer, {\r\n                                overBalance: increment(overBalance),\r\n                            });\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    // Update step indicator for successful payment\r\n                    await updateDoc(docRef, {\r\n                        'stepIndicator.value': 4,\r\n                        'stepIndicator.status': 'Payment Confirmed',\r\n                    });\r\n                } else {\r\n                    // Handle the case where the payment is less than the amount needed\r\n                    console.log('Partial payment received');\r\n                }\r\n\r\n                // Update payments and payments history\r\n                await updateDoc(docRef, {\r\n                    payments: arrayUnion(...newPayments)\r\n                });\r\n                await updateDoc(docRefCustomer, {\r\n                    paymentsHistory: arrayUnion(...newPaymentsAccount)\r\n                });\r\n            } else {\r\n                console.error('Negative value entered');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error processing payment: ', error);\r\n        } finally {\r\n            setIsConfirmLoading(false);\r\n            dispatch(setTransactionModalVisible(false));\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    const PaymentHistoryModal = ({ historyModalVisible, handleHistoryModalClose, payments }) => {\r\n        // Create a copy of payments and sort it by date in descending order\r\n        const sortedPayments = [...payments].sort((a, b) => {\r\n            const dateA = a.date;\r\n            const dateB = b.date;\r\n            return dateB - dateA; // Sorts in descending order\r\n        });\r\n\r\n        // console.log(sortedPayments);\r\n\r\n        return (\r\n            <Modal isOpen={historyModalVisible} onClose={handleHistoryModalClose} useRNModal>\r\n                <Modal.Content style={{ backgroundColor: 'white', borderRadius: 10 }}>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Header style={{ textAlign: 'center', fontSize: 18, fontWeight: 'bold', color: '#333' }}>\r\n                        Payment History\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <ScrollView style={{ flex: 1, paddingHorizontal: 15, maxHeight: 500, }}>\r\n                            {\r\n                                sortedPayments.length > 0 ?\r\n                                    sortedPayments.map((payment, index) => (\r\n                                        <View key={index} style={{ marginBottom: 15, borderBottomWidth: 1, borderBottomColor: '#eee', paddingBottom: 10 }}>\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black' }}>\r\n                                                <Text style={{ fontWeight: 'bold' }}>Date: </Text>\r\n                                                {/* Use the reversed index for displaying the date */}\r\n                                                <Text style={{ color: '#FF0000' }}>{sortedPayments[sortedPayments.length - 1 - index].date}</Text>\r\n                                            </Text>\r\n                                            <Text style={{ fontSize: 14, fontWeight: 'bold', color: 'black' }}>\r\n                                                <Text style={{ fontWeight: 'bold' }}>Value: </Text>\r\n                                                {/* Use the reversed index for displaying the value */}\r\n                                                <Text style={{ color: Number(sortedPayments[sortedPayments.length - 1 - index].value).toLocaleString().startsWith('-') ? '#FF0000' : '#16A34A' }}>\r\n                                                    ${Number(sortedPayments[sortedPayments.length - 1 - index].value).toLocaleString()}\r\n                                                </Text>\r\n                                            </Text>\r\n                                        </View>\r\n                                    )) :\r\n                                    <Text style={{ fontWeight: 'bold', alignSelf: 'center', }} italic>No history to show</Text>\r\n                            }\r\n                        </ScrollView>\r\n\r\n                    </Modal.Body>\r\n                </Modal.Content>\r\n            </Modal>\r\n        );\r\n    };\r\n\r\n    const totalValue = selectedChatData.payments\r\n        ? selectedChatData.payments.reduce((sum, payment) => {\r\n            const value = Number(payment.value);\r\n            return sum + (isNaN(value) ? 0 : value);\r\n        }, 0)\r\n        : 0;\r\n\r\n    const isTotalValueGreater = Number(totalValue) < Number(invoiceData.paymentDetails.totalAmount.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1'));\r\n    const displayedAmount = isTotalValueGreater ? Number(totalValue).toLocaleString() : invoiceData.paymentDetails.totalAmount;\r\n\r\n    return (\r\n\r\n        <View style={{ flex: 1, }}>\r\n\r\n            <View style={{ marginLeft: 5, }}>\r\n\r\n                <Text style={{ fontWefight: 700, fontSize: 14, }}>Total Paid:</Text>\r\n\r\n                <Progress w=\"300\" shadow={2} value={Number(totalValue)} max={totalAmountNumber} _filledTrack={{\r\n                    bg: \"lime.500\"\r\n                }} />\r\n\r\n                <Text style={{ fontWeight: 700, fontSize: 14, color: '#FF0000', }}>${displayedAmount}\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#8D7777', }}> out of </Text>\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#16A34A', }}>{`$${invoiceData.paymentDetails.totalAmount}`}</Text>\r\n                </Text>\r\n\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ marginLeft: 5, }}>\r\n\r\n                <Pressable\r\n                    onPress={handleHistoryModalOpen}\r\n                    style={{ width: 'fit-content', }}>\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#0A78BE', }} underline selectable={false}>Payments History</Text>\r\n                </Pressable>\r\n\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ marginLeft: 5, marginTop: 5, }}>\r\n\r\n                <Text style={{ fontWeight: 700, fontSize: 14, }}>Input Amount:</Text>\r\n\r\n                <View style={{ flexDirection: 'row', alignItems: 'center', }}>\r\n\r\n                    <Text style={{ fontWeight: 700, fontSize: 18, }}>$</Text>\r\n\r\n                    <TextInput\r\n                        ref={inputAmountRef}\r\n                        placeholderTextColor='#9B9E9F' placeholder='Input Amount'\r\n                        style={{ height: 35, width: 300, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                        onChangeText={handleInputAmountChangeText}\r\n                    />\r\n\r\n                </View>\r\n\r\n                <Pressable\r\n                    onPress={handleCompletePaymentPress}\r\n                    style={{ width: 'fit-content', }}>\r\n                    <Text style={{ fontWeight: 700, fontSize: 14, color: '#16A34A', }} underline selectable={false}>Complete Payment</Text>\r\n                </Pressable>\r\n\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', margin: 5, }}>\r\n                <View\r\n                    style={{\r\n                        flex: 1,\r\n                        backgroundColor: '#16A34A', // Change color on hover\r\n                        borderRadius: 5,\r\n                        padding: 5,\r\n                    }}\r\n                >\r\n                    {!isConfirmLoading ? (\r\n                        <Pressable\r\n                            onPress={() => confirmPayment()}\r\n                        >\r\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>\r\n                                Confirm\r\n                            </Text>\r\n                        </Pressable>\r\n                    ) : (\r\n                        <Spinner size={'sm'} color={'white'} />)}\r\n\r\n                </View>\r\n            </View>\r\n\r\n            <PaymentHistoryModal\r\n                historyModalVisible={historyModalVisible}\r\n                handleHistoryModalClose={handleHistoryModalClose}\r\n                payments={selectedChatData.payments ? selectedChatData.payments : []} />\r\n\r\n        </View>\r\n\r\n    );\r\n\r\n}\r\n\r\nconst IssueProformaInvoiceModalContent = () => {\r\n    const dispatch = useDispatch();\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const currentDate = useSelector((state) => state.currentDate);\r\n    const [isConfirmHovered, setIsConfirmHovered] = useState(false);\r\n    const [isConfirmLoading, setIsConfirmLoading] = useState(false);\r\n\r\n    const cfsInputRef = useRef(null);\r\n    const placeOfDeliveryInputRef = useRef(null);\r\n    const secretKey = CRYPTO_KEY.toString();\r\n\r\n\r\n\r\n    const invoiceMessage = async () => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: 'Issued Invoice',\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                messageType: 'IssuedInvoice',\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: 'Issued Invoice',\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const confirmInvoice = async () => {\r\n        setIsConfirmLoading(true);\r\n        const year = currentDate.split('-')[0]; // Split the date and get the year\r\n        const yearSuffix = year.slice(-2); // Get last 2 digits of the year\r\n        const collectionRef = collection(projectExtensionFirestore, \"IssuedInvoice\");\r\n\r\n        try {\r\n            // Retrieve all documents for the current yearF\r\n            const querySnapshot = await getDocs(collectionRef);\r\n            let maxNumber = 0;\r\n\r\n            querySnapshot.forEach((doc) => {\r\n                const docName = doc.id;\r\n                if (docName.startsWith(yearSuffix)) {\r\n                    const number = parseInt(docName.substring(2), 10);\r\n                    if (number > maxNumber) {\r\n                        maxNumber = number;\r\n                    }\r\n                }\r\n            });\r\n\r\n            const nextNumber = maxNumber + 1;\r\n            const docName = `${yearSuffix}${nextNumber}`;\r\n            const docRef = doc(projectExtensionFirestore, \"IssuedInvoice\", docName);\r\n            const docRefChatId = doc(projectExtensionFirestore, \"chats\", selectedChatData.id);\r\n\r\n            const hashedData = createHmacSha256Hash(docName, secretKey);\r\n\r\n            // Create a new document with the globalInvoiceVariable object\r\n            if (selectedChatData.invoiceNumber) {\r\n                const updateDocRef = doc(projectExtensionFirestore, \"IssuedInvoice\", selectedChatData.invoiceNumber);\r\n\r\n                await setDoc(updateDocRef, {\r\n                    ...globalInvoiceVariable,\r\n                    carData: selectedChatData.carData,\r\n                }, { merge: true });\r\n\r\n                if (selectedChatData.stepIndicator.value == 1) {\r\n                    await updateDoc(docRefChatId, {\r\n                        'stepIndicator.status': 'Issue Proforma Invoice',\r\n                        'stepIndicator.value': 2,\r\n                        // finalPrice: globalInvoiceVariable.paymentDetails.totalAmount.replace(/,/g, ''),\r\n                    });\r\n                }\r\n\r\n                invoiceMessage();\r\n                setIsConfirmLoading(false);\r\n                dispatch(setTransactionModalVisible(false));\r\n            }\r\n\r\n            else {\r\n\r\n                await setDoc(docRef, {\r\n                    ...globalInvoiceVariable,\r\n                    cryptoNumber: hashedData,\r\n                    carData: selectedChatData.carData,\r\n                });\r\n\r\n                await updateDoc(docRefChatId, {\r\n                    keywords: arrayUnion(docName),\r\n                    invoiceNumber: docName,\r\n                    'stepIndicator.status': 'Issue Proforma Invoice',\r\n                    'stepIndicator.value': 2,\r\n                    // finalPrice: globalInvoiceVariable.paymentDetails.totalAmount.replace(/,/g, ''),\r\n                });\r\n\r\n                invoiceMessage();\r\n                setIsConfirmLoading(false);\r\n                dispatch(setTransactionModalVisible(false));\r\n\r\n\r\n            }\r\n\r\n\r\n        } catch (error) {\r\n            console.error(\"Error creating document: \", error);\r\n        }\r\n    };\r\n\r\n    // useEffect(() => {\r\n    //     calculateTotalAmount();\r\n    // }, [additionalPriceArray]);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        globalInvoiceVariable.cfs = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.cfs ? invoiceData.cfs : cfsInputRef.current?.value;\r\n        globalInvoiceVariable.placeOfDelivery = invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.placeOfDelivery ? invoiceData.placeOfDelivery : placeOfDeliveryInputRef.current?.value;\r\n\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <ScrollView style={{ flex: 1, maxHeight: 500, }}>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>CFS:</Text>\r\n                <TextInput\r\n                    defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.cfs ? invoiceData.cfs : ''}\r\n                    ref={cfsInputRef} placeholderTextColor='#9B9E9F' placeholder='Input CFS (Optional)'\r\n                    style={{ height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onChangeText={(value) => globalInvoiceVariable.cfs = value} />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Place of Delivery:</Text>\r\n                <TextInput\r\n                    defaultValue={invoiceData && Object.keys(invoiceData).length > 0 && invoiceData.placeOfDelivery ? invoiceData.placeOfDelivery : ''}\r\n                    ref={placeOfDeliveryInputRef} placeholderTextColor='#9B9E9F' placeholder='Place of Delivery (Optional)'\r\n                    style={{ height: 25, width: 200, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onChangeText={(value) => globalInvoiceVariable.placeOfDelivery = value} />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, alignItems: 'center' }}>\r\n                <Text style={{ fontWeight: 700, margin: 3 }}>Port of Departure:</Text>\r\n                <SelectPortOfDeparture />\r\n            </View>\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 5, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Sales Person:</Text>\r\n                <SelectSalesPerson />\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 5, }} />\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                <Text style={{ fontWeight: 700, margin: 3, }}>Port of Discharge:</Text>\r\n                {/*Select Discharge*/}\r\n                <SelectPortOfDischarge />\r\n            </View>\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 5, }} />\r\n\r\n            <ConsigneeInput />\r\n\r\n            <PaymentDetails />\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', }} />\r\n\r\n            <BankInformation />\r\n\r\n            <View style={{ width: '100%', borderBottomWidth: 2, borderColor: '#0A9FDC', alignSelf: 'center', margin: 2, }} />{/* Horizontal Line */}\r\n\r\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', margin: 5, }}>\r\n                <View\r\n\r\n                    // onTouchEnd={() => confirmInvoice()}\r\n                    style={{\r\n                        flex: 1,\r\n                        backgroundColor: isConfirmHovered ? '#145A32' : '#16A34A', // Change color on hover\r\n                        borderRadius: 5,\r\n                        padding: 5,\r\n                    }}\r\n\r\n                // onMouseEnter={() => setIsConfirmHovered(true)}\r\n                // onMouseLeave={() => setIsConfirmHovered(false)}\r\n                >\r\n                    {!isConfirmLoading ? (\r\n                        <Pressable onPress={() => confirmInvoice()}>\r\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>\r\n                                Confirm\r\n                            </Text>\r\n                        </Pressable>\r\n\r\n                    ) : (\r\n                        <Spinner size={'sm'} color={'white'} />)}\r\n\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\n\r\nconst ProfitCalculator = () => {\r\n\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n    const [totalSCCAmount, setTotalSCCAmount] = useState(0);\r\n    const [formattedTotalSCCAmount, setFormattedTotalSCCAmount] = useState(0);\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [totalProfitAmountDollars, setTotalProfitAmountDollars] = useState(0);\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n\r\n    const inputPriceRef = useRef(null);\r\n\r\n\r\n    const [portsData, setPortsData] = useState({});\r\n    const [origFreight, setOrigFreight] = useState(0);\r\n    const [lastFetchedPort, setLastFetchedPort] = useState('');\r\n\r\n\r\n    // Function to fetch ports data from Firestore\r\n    const fetchPortsData = async () => {\r\n        const currentPort = invoiceData.discharge.port;\r\n        const freightOrigPrice = selectedChatData.freightOrigPrice;\r\n\r\n        // Fetch data if the current port is different from the last fetched port\r\n        // and if freightOrigPrice is valid (exists, not an empty string, and not 0)\r\n        if (currentPort !== lastFetchedPort && !freightOrigPrice) {\r\n\r\n            const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n            try {\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const data = docSnap.data();\r\n                    if (data[currentPort]?.kobePrice !== undefined) {\r\n\r\n                        if (invoiceData.departurePort == \"Nagoya\") {\r\n\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].nagoyaPrice,\r\n                            });\r\n                            // console.log(\"Nagoya Price \", data[currentPort].nagoyaPrice);\r\n\r\n                        }\r\n                        else if (invoiceData.departurePort == \"Yokohama\") {\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].yokohamaPrice,\r\n                            });\r\n                            // console.log(\"Yokohama Price \", data[currentPort].yokohamaPrice);\r\n\r\n                        }\r\n                        else if (invoiceData.departurePort == \"Kyushu\") {\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].kyushuPrice,\r\n                            });\r\n                            // console.log(\"Kyushu Price \", data[currentPort].kyushuPrice);\r\n\r\n                        }\r\n                        else if (invoiceData.departurePort == \"Kobe\") {\r\n                            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                                freightOrigPrice: data[currentPort].kobePrice,\r\n                            });\r\n                            // console.log(\"Kobe Price \", data[currentPort].kobePrice);\r\n\r\n                        }\r\n\r\n                        setLastFetchedPort(currentPort); // Update last fetched port\r\n                    } else {\r\n                        console.log('Port data not found for the given port');\r\n                    }\r\n                } else {\r\n                    console.log('No such document!');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching document:', error);\r\n            }\r\n        } else {\r\n            console.log('No need to fetch new data');\r\n        }\r\n    };\r\n\r\n\r\n    // useEffect for fetching ports data\r\n    // useEffect(() => {\r\n    //     // Fetch ports data\r\n    //     const fetchPortsData = async () => {\r\n    //         const docRef = doc(projectExtensionFirestore, 'CustomerCountryPort', 'PortsDoc');\r\n\r\n    //         try {\r\n    //             const docSnap = await getDoc(docRef);\r\n\r\n    //             if (docSnap.exists()) {\r\n    //                 const data = docSnap.data();\r\n    //                 setPortsData(data[invoiceData.discharge.port].kobePrice);\r\n    //                 console.log(data[invoiceData.discharge.port].kobePrice);\r\n    //             } else {\r\n    //                 console.log('No such document!');\r\n    //             }\r\n    //         } catch (error) {\r\n    //             console.error('Error fetching document:', error);\r\n    //         }\r\n    //     };\r\n\r\n    //     fetchPortsData();\r\n\r\n    // }, [invoiceData]);\r\n\r\n\r\n    const handleModalOpen = () => {\r\n        setModalVisible(true);\r\n        inputPriceRef.current.value = defaultInputPrice;\r\n        calculateTotalAmount();\r\n\r\n    };\r\n\r\n    const handleModalClose = () => {\r\n        setModalVisible(false);\r\n\r\n    };\r\n\r\n\r\n    const fee = {\r\n        auction: 10000,\r\n        transport: 10000,\r\n        shippingAgent: 15000,\r\n    };\r\n\r\n    const purchasedPrice = Number(selectedChatData.carData && selectedChatData.carData.purchasedPrice ? selectedChatData.carData.purchasedPrice : 0);\r\n    const formattedPurchasedPrice = Number(purchasedPrice).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const auctionFee = Number(fee.auction);\r\n    const formattedAuctionFee = Number(auctionFee).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const transportFee = Number(fee.transport);\r\n    const formattedTransportFee = Number(transportFee).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const shippingAgentFee = Number(fee.shippingAgent);\r\n    const formattedShippingAgentFee = Number(shippingAgentFee).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const cubicMeter = Number(selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ? selectedChatData.carData.dimensionCubicMeters : 0).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n\r\n    const costPerCubicMeter = Number(selectedChatData && selectedChatData.freightOrigPrice ? selectedChatData.freightOrigPrice : 0);\r\n    const formattedCostPerCubicMeter = Number(costPerCubicMeter).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const totalCubicMeterCostDollars = Number(costPerCubicMeter * cubicMeter);\r\n    const formattedTotalCubicMeterCostDollars = Number(costPerCubicMeter * cubicMeter).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const totalCubicMeterCostYen = Number(totalCubicMeterCostDollars * selectedChatData.currency.usdToJpy);\r\n    const formattedTotalCubicMeterCostYen = Number(totalCubicMeterCostYen).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const realTotalPriceYen = (purchasedPrice + auctionFee + transportFee + shippingAgentFee + totalSCCAmount + totalCubicMeterCostYen)\r\n    const formattedRealTotalPriceYen = Number(realTotalPriceYen).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n    const realTotalPriceDollars = realTotalPriceYen * selectedChatData.currency.jpyToUsd;\r\n    const formattedRealTotalPriceDollars = realTotalPriceDollars.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n\r\n    const freightCalculation = ((selectedChatData.m3 ? selectedChatData.m3 :\r\n        (selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ?\r\n            selectedChatData.carData.dimensionCubicMeters : 0)) *\r\n        Number(selectedChatData.freightPrice));\r\n\r\n\r\n    const totalPriceCalculation = (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n        (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n            selectedChatData.carData.fobPrice : 0) *\r\n        (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n            (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                selectedChatData.currency.jpyToUsd : 0))) + freightCalculation;\r\n\r\n    const defaultInputPrice = Math.round(\r\n        invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount\r\n            ? Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, ''))\r\n            : totalPriceCalculation\r\n    );\r\n\r\n\r\n\r\n\r\n    const safelyParseNumber = (value) => {\r\n        const number = Number(value.replace(/,/g, ''));\r\n        return isNaN(number) ? 0 : number;\r\n    };\r\n\r\n    const calculateTotalAmount = () => {\r\n\r\n        const inputPrice = safelyParseNumber(inputPriceRef.current?.value);\r\n\r\n        const totalAmountDollars = Math.round(inputPrice - realTotalPriceDollars);\r\n        setTotalProfitAmountDollars(totalAmountDollars);\r\n        // const total = Math.round(fobPrice + freight + inspection + insurance + additionalPricesTotal).toLocaleString();\r\n        // setTotalAmountCalculated(total);\r\n        // globalInvoiceVariable.paymentDetails.totalAmount = total;\r\n    };\r\n\r\n    const handleInputPriceChangeText = (text) => {\r\n        const filteredText = text.replace(/[^0-9]/g, '');\r\n        inputPriceRef.current.value = filteredText;\r\n\r\n        calculateTotalAmount();\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        if (selectedChatData.carData && selectedChatData.carData.supplyChainsCostsData) {\r\n\r\n            const amounts = selectedChatData.carData.supplyChainsCostsData.map((item) => {\r\n                const expenseName = Object.keys(item)[0];\r\n                const expenseData = item[expenseName];\r\n                return parseFloat(expenseData.amount.replace(',', '')) || 0;\r\n            });\r\n\r\n            // Use reduce to add up all the amounts\r\n            const totalAmount = amounts.reduce((accumulator, currentValue) => accumulator + currentValue, 0);\r\n            const formattedTotalAmount = totalAmount.toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 });\r\n\r\n            setTotalSCCAmount(totalAmount);\r\n            setFormattedTotalSCCAmount(formattedTotalAmount);\r\n\r\n\r\n            // console.log(defaultInputPrice);\r\n            // console.log(realTotalPriceDollars);\r\n            // console.log(formattedRealTotalPriceDollars);\r\n            // console.log(realTotalPriceYen);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const freightOrigPrice = selectedChatData.freightOrigPrice;\r\n\r\n        if (modalVisible && !freightOrigPrice) {\r\n            fetchPortsData();\r\n        }\r\n\r\n\r\n    }, [modalVisible]);\r\n\r\n    useEffect(() => {\r\n\r\n        if (totalSCCAmount !== 0 || totalSCCAmount !== '') {\r\n            const totalAmountDollars = Math.round(defaultInputPrice - realTotalPriceDollars);\r\n            setTotalProfitAmountDollars(totalAmountDollars);\r\n        }\r\n\r\n\r\n    }, [totalSCCAmount]);\r\n\r\n    return (\r\n\r\n        <>\r\n            <Pressable\r\n                onPress={handleModalOpen}\r\n                focusable={false}\r\n                variant='ghost'\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                style={{\r\n                    marginTop: 3,\r\n                    paddingVertical: 3,\r\n                    paddingHorizontal: 5,\r\n                    flexDirection: 'row', // Align items in a row\r\n                    alignItems: 'center', // Center items vertically\r\n                    justifyContent: 'center',\r\n                    borderRadius: 5,\r\n                    backgroundColor: isHovered ? '#4c555c' : '#6e7a83',\r\n                }}>\r\n                <Ionicons size={15} color={'white'} name='calculator' />\r\n                <Text style={{ textAlign: 'center', color: 'white', fontWeight: 'bold', }} >Profit Calculator</Text>\r\n            </Pressable>\r\n\r\n            <Modal\r\n                isOpen={modalVisible}\r\n                onClose={() => {\r\n                    handleModalClose()\r\n                }}\r\n                initialFocusRef={inputPriceRef}\r\n                size={'lg'}\r\n            >\r\n                <Modal.Content>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Header>Profit Calculator</Modal.Header>\r\n                    <Modal.Body style={{ flexDirection: 'row', backgroundColor: '#fafafa', }}>\r\n\r\n                        <View style={{ flex: 1, borderRightWidth: 1, borderRightColor: '#DADDE1', }}>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Profit (Yen):</Text>\r\n                                <Text selectable style={{\r\n                                    fontWeight: '700', fontSize: 18,\r\n                                    color: Number(totalProfitAmountDollars * selectedChatData.currency.usdToJpy) < 0 ? '#FF0000' : '#8D7777',\r\n                                }}>\r\n                                    {`${Number(totalProfitAmountDollars * selectedChatData.currency.usdToJpy).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Profit (US Dollars):</Text>\r\n                                <Text selectable style={{\r\n                                    fontWeight: '700', fontSize: 18,\r\n                                    color: Number(totalProfitAmountDollars) < 0 ? '#FF0000' : '#16A34A',\r\n                                }}>\r\n                                    {`${Number(totalProfitAmountDollars).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Profit (Percentage):</Text>\r\n                                <Text selectable style={{\r\n                                    fontWeight: '700', fontSize: 18,\r\n                                    color: Number(((totalProfitAmountDollars * selectedChatData.currency.usdToJpy) / purchasedPrice) * 100) <= 10.5 ? '#FF0000' : '#336699',\r\n                                }}>\r\n                                    {`${Number(((totalProfitAmountDollars * selectedChatData.currency.usdToJpy) / purchasedPrice) * 100).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}%`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: '#6E7A83', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, color: 'white', }}>Price to calculate:</Text>\r\n                                <TextInput\r\n                                    onChangeText={handleInputPriceChangeText}\r\n                                    defaultValue={defaultInputPrice}\r\n                                    ref={inputPriceRef}\r\n                                    placeholderTextColor='#9B9E9F' placeholder='Input Price'\r\n                                    style={{\r\n                                        backgroundColor: 'white',\r\n                                        height: 25,\r\n                                        margin: 2,\r\n                                        padding: 1,\r\n                                        borderRadius: 4,\r\n                                        borderWidth: 1,\r\n                                        borderColor: 'white',\r\n                                        outlineStyle: 'none',\r\n                                        fontSize: 18,\r\n                                        fontWeight: '700',\r\n                                    }}\r\n                                />\r\n                            </View>\r\n\r\n                        </View>\r\n\r\n\r\n                        <View style={{ flex: 1, marginLeft: 3 }}>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Purchased Price:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedPurchasedPrice}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Auction Fee:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedAuctionFee}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Transport Fee:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedTransportFee}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Shipping Agent Fee:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedShippingAgentFee}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Supply Chains Costs:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedTotalSCCAmount}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Cubic Meter:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${cubicMeter}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 16, lineHeight: 14, }}>Cost per Cubic Meter:</Text>\r\n                                <Text selectable style={{ fontWeight: '400', fontSize: 14, lineHeight: 14, }}>\r\n                                    {`${formattedCostPerCubicMeter} x ${cubicMeter}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 14, lineHeight: 14, color: '#16A34A', }}>\r\n                                    {`${formattedTotalCubicMeterCostDollars}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 14, lineHeight: 14, color: '#8D7777', }}>\r\n                                    {`${formattedTotalCubicMeterCostYen}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                            <View style={{ marginBottom: 10, borderWidth: 1, borderColor: '#DADDE1', borderRadius: 5, marginRight: 3, padding: 3, backgroundColor: 'white', }}>\r\n                                <Text style={{ fontWeight: 'bold', marginVertical: 5, fontSize: 20, lineHeight: 14, }}>Total:</Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 18, color: '#8D7777', }}>\r\n                                    {`${formattedRealTotalPriceYen}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: '700', fontSize: 18, color: '#16A34A', }}>\r\n                                    {`${formattedRealTotalPriceDollars}`}\r\n                                </Text>\r\n                            </View>\r\n\r\n                        </View>\r\n\r\n\r\n\r\n                    </Modal.Body>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nconst PreviewInvoice = () => {\r\n\r\n    // npm install html2canvas jspdf\r\n    // import jsPDF from 'jspdf';\r\n    // import html2canvas from 'html2canvas';\r\n    const dispatch = useDispatch();\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const previewInvoiceVisible = useSelector((state) => state.previewInvoiceVisible);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const [isPreviewHovered, setIsPreviewHovered] = useState(false);\r\n    const screenWidth = Dimensions.get('window').width;\r\n    const invoiceRef = useRef(null);\r\n    const [invoiceImageUri, setInvoiceImageUri] = useState('');\r\n    const hoverPreviewIn = () => setIsPreviewHovered(true);\r\n    const hoverPreviewOut = () => setIsPreviewHovered(false);\r\n    const [capturedImageUri, setCapturedImageUri] = useState('');\r\n    const [vehicleImageUri, setVehicleImageUri] = useState(globalImageUrl);\r\n    const [featuresTrueCount, setFeaturesTrueCount] = useState(0);\r\n    const [rerenderState, setRerenderState] = useState(0);\r\n\r\n    const handlePreviewInvoiceModalOpen = () => {\r\n        dispatch(setPreviewInvoiceVisible(true));\r\n    };\r\n\r\n    const handlePreviewInvoiceModalClose = () => {\r\n        dispatch(setPreviewInvoiceVisible(false));\r\n        setCapturedImageUri('');\r\n    }\r\n\r\n    function countTrueValuesInCarData(invoiceData) {\r\n        let count = 0;\r\n\r\n        // Check if carData exists in invoiceData\r\n        if (invoiceData.carData) {\r\n            // List of fields to check within carData\r\n            const fields = ['interior', 'exterior', 'safetySystem', 'comfort', 'sellingPoints'];\r\n\r\n            fields.forEach(field => {\r\n                if (invoiceData.carData[field]) {\r\n                    // Count true values in each field of carData\r\n                    count += Object.values(invoiceData.carData[field]).filter(value => value === true).length;\r\n                }\r\n            });\r\n        }\r\n\r\n        return count;\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        if (previewInvoiceVisible) {\r\n            setRerenderState(rerenderState + 1);\r\n        }\r\n    }, [previewInvoiceVisible])\r\n\r\n\r\n    useEffect(() => {\r\n        const captureImageAsync = async () => {\r\n            try {\r\n                if (invoiceRef.current) {\r\n                    // Adjust the scale to control the captured image resolution\r\n                    const scale = 0.85; // Experiment with different scale values\r\n                    const width = 2480 * scale;\r\n                    const height = 3508 * scale;\r\n\r\n                    const imageUri = await captureRef(invoiceRef, {\r\n                        format: 'jpg',\r\n                        quality: 1, // Adjust quality if needed\r\n                        result: 'base64',\r\n                        width: width,\r\n                        height: height,\r\n                    });\r\n                    setCapturedImageUri(`data:image/jpeg;base64,${imageUri}`);\r\n                    const trueCount = countTrueValuesInCarData(invoiceData);\r\n                    setFeaturesTrueCount(trueCount);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error capturing view:\", error);\r\n            }\r\n        };\r\n\r\n        const convertImageToBase64 = async (url) => {\r\n            try {\r\n                const response = await fetch(url);\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const blob = await response.blob();\r\n                return new Promise((resolve, reject) => {\r\n                    const reader = new FileReader();\r\n                    reader.onloadend = () => resolve(reader.result);\r\n                    reader.onerror = reject;\r\n                    reader.readAsDataURL(blob);\r\n                });\r\n            } catch (error) {\r\n                console.error('Fetch error:', error.message);\r\n                return null;\r\n            }\r\n        };\r\n        convertImageToBase64(globalImageUrl)\r\n            .then(base64String => {\r\n                setVehicleImageUri(base64String);\r\n            });\r\n        // Trigger image capture when invoiceRef changes\r\n        captureImageAsync();\r\n\r\n        if (screenWidth < 960) {\r\n            const captureImageAsync = async () => {\r\n                try {\r\n                    if (invoiceRef.current) {\r\n                        // Adjust the scale to control the captured image resolution\r\n                        const scale = 0.85; // Experiment with different scale values\r\n                        const width = 2480 * scale;\r\n                        const height = 3508 * scale;\r\n\r\n                        const imageUri = await captureRef(invoiceRef, {\r\n                            format: 'jpg',\r\n                            quality: 1, // Adjust quality if needed\r\n                            result: 'base64',\r\n                            width: width,\r\n                            height: height,\r\n                        });\r\n                        setCapturedImageUri(`data:image/jpeg;base64,${imageUri}`);\r\n                        const trueCount = countTrueValuesInCarData(invoiceData);\r\n                        setFeaturesTrueCount(trueCount);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Error capturing view:\", error);\r\n                }\r\n            };\r\n\r\n            const convertImageToBase64 = async (url) => {\r\n                try {\r\n                    const response = await fetch(url);\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP error! status: ${response.status}`);\r\n                    }\r\n                    const blob = await response.blob();\r\n                    return new Promise((resolve, reject) => {\r\n                        const reader = new FileReader();\r\n                        reader.onloadend = () => resolve(reader.result);\r\n                        reader.onerror = reject;\r\n                        reader.readAsDataURL(blob);\r\n                    });\r\n                } catch (error) {\r\n                    console.error('Fetch error:', error.message);\r\n                    return null;\r\n                }\r\n            };\r\n            convertImageToBase64(globalImageUrl)\r\n                .then(base64String => {\r\n                    setVehicleImageUri(base64String);\r\n                });\r\n            // Trigger image capture when invoiceRef changes\r\n            captureImageAsync();\r\n        }\r\n\r\n    }, [invoiceRef.current, vehicleImageUri]);\r\n\r\n    const captureImage = async () => {\r\n        try {\r\n            // Adjust the scale to control the captured image resolution\r\n            const scale = 0.9; // Experiment with different scale values\r\n            const width = 2480 * scale;\r\n            const height = 3508 * scale;\r\n\r\n            const imageUri = await captureRef(invoiceRef, {\r\n                format: 'jpg',\r\n                quality: 1, // Adjust quality if needed\r\n                result: 'base64',\r\n                width: width,\r\n                height: height,\r\n            });\r\n            return `data:image/jpeg;base64,${imageUri}`;\r\n        } catch (error) {\r\n            console.error(\"Error capturing view:\", error);\r\n        }\r\n    };\r\n\r\n    const createPDF = async () => {\r\n        const element = invoiceRef.current;\r\n        if (element) {\r\n            // Reduce the scale slightly for smaller file size\r\n            const scale = 1; // Fine-tune this value for balance\r\n\r\n            const canvas = await html2canvas(element, {\r\n                scale: scale,\r\n            });\r\n\r\n            // Experiment with JPEG quality for a balance between quality and file size\r\n            const imageData = canvas.toDataURL('image/jpeg', 0.9);\r\n\r\n            // A4 size dimensions in mm\r\n            const pdfWidth = 210;\r\n            const pdfHeight = 297;\r\n\r\n            const pdf = new jsPDF({\r\n                orientation: 'portrait',\r\n                unit: 'mm',\r\n                format: 'a4'\r\n            });\r\n\r\n            // Adjust PDF compression settings\r\n            const options = {\r\n                imageCompression: 'JPEG',\r\n                imageQuality: 1, // Fine-tune this value as well\r\n            };\r\n\r\n            const imgProps = pdf.getImageProperties(imageData);\r\n            const pdfWidthFit = pdfWidth;\r\n            const pdfHeightFit = (imgProps.height * pdfWidthFit) / imgProps.width;\r\n\r\n            pdf.addImage(imageData, 'JPEG', 0, 0, pdfWidthFit, pdfHeightFit, undefined, 'FAST', 0, options);\r\n\r\n            // Filename logic\r\n            selectedChatData.stepIndicator.value < 3 ?\r\n                pdf.save(`Proforma Invoice (${invoiceData.carData.carName} [${invoiceData.carData.referenceNumber}]) (A4 Paper Size).pdf`) :\r\n                pdf.save(`Invoice No. ${invoiceData.id} (A4 Paper Size).pdf`);\r\n        } else {\r\n            console.error(\"No element to capture\");\r\n        }\r\n    };\r\n\r\n\r\n    const handleCaptureAndCreatePDF = async () => {\r\n        const capturedImageUri = await captureImage();\r\n        if (capturedImageUri) {\r\n            await createPDF(capturedImageUri);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    if (invoiceData && Object.keys(invoiceData).length > 0) {\r\n        const issuingDateString = invoiceData.bankInformations.issuingDate;\r\n        const dueDateString = invoiceData.bankInformations.dueDate;\r\n        const issuingDateObject = new Date(issuingDateString);\r\n        const dueDateObject = new Date(dueDateString);\r\n\r\n\r\n        const options = {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n        };\r\n\r\n        formattedIssuingDate = issuingDateObject.toLocaleDateString(undefined, options);\r\n        formattedDueDate = dueDateObject.toLocaleDateString(undefined, options);\r\n\r\n    }\r\n\r\n    const originalWidth = 794;\r\n    const originalHeight = 1123;\r\n\r\n    const newWidth = 2480;\r\n    const newHeight = 3508;\r\n\r\n    const widthScaleFactor = newWidth / originalWidth;\r\n    const heightScaleFactor = newHeight / originalHeight;\r\n\r\n    const openImage = () => {\r\n        if (Platform.OS === 'web') {\r\n            const imageWindow = window.open();\r\n            imageWindow.document.write(`\r\n                <style>\r\n                    body {\r\n                        margin: 0;\r\n                        display: flex;\r\n                        justify-content: center;\r\n                        align-items: center;\r\n                        height: 100vh;\r\n                        overflow: hidden;\r\n                    }\r\n                    img {\r\n                        width: 595px;\r\n                        height: 842px;\r\n                        object-fit: contain;\r\n                        transition: transform 0.25s ease;\r\n                        cursor: zoom-in; /* Set cursor to magnifying glass */\r\n                    }\r\n                    .zoomed {\r\n                        transform: scale(3);\r\n                        transform-origin: center;\r\n                        cursor: zoom-out; /* Change cursor to indicate zooming out */\r\n                    }\r\n                </style>\r\n                <img id=\"zoomableImage\" src=\"${capturedImageUri}\" alt=\"Base64 Image\" draggable=\"false\" />\r\n                <script>\r\n                    const image = document.getElementById('zoomableImage');\r\n    \r\n                    image.addEventListener('mousedown', function(e) {\r\n                        const rect = this.getBoundingClientRect();\r\n                        const x = e.clientX - rect.left;\r\n                        const y = e.clientY - rect.top;\r\n    \r\n                        // Set the transform origin to the mouse position\r\n                        this.style.transformOrigin = \\`\\${x}px \\${y}px\\`;\r\n                        this.classList.add('zoomed');\r\n                    });\r\n    \r\n                    document.addEventListener('mouseup', function() {\r\n                        image.classList.remove('zoomed');\r\n                    });\r\n                </script>\r\n            `);\r\n        } else {\r\n            console.log('This feature is only available in a web environment');\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <> {invoiceData && Object.keys(invoiceData).length > 0 &&\r\n\r\n            <>\r\n                <Pressable\r\n                    onPress={handlePreviewInvoiceModalOpen}\r\n                    focusable={false}\r\n                    variant='ghost'\r\n                    onHoverIn={hoverPreviewIn}\r\n                    onHoverOut={hoverPreviewOut}\r\n                    style={{\r\n                        marginTop: 3,\r\n                        paddingVertical: 3,\r\n                        paddingHorizontal: 5,\r\n                        flexDirection: 'row', // Align items in a row\r\n                        alignItems: 'center', // Center items vertically\r\n                        justifyContent: 'center',\r\n                        borderRadius: 5,\r\n                        backgroundColor: isPreviewHovered ? '#0772ad' : '#0A8DD5',\r\n                    }}>\r\n\r\n                    {selectedChatData.invoiceNumber && selectedChatData.stepIndicator.value > 2 ?\r\n                        <Text style={{ fontWeight: 700, color: 'white', }}>\r\n                            {`Preview Invoice No. ${selectedChatData.invoiceNumber}`}\r\n                        </Text>\r\n                        :\r\n                        <Text style={{ fontWeight: 700, color: 'white', }}>\r\n                            {`Preview Invoice`}\r\n                        </Text>}\r\n\r\n                </Pressable>\r\n\r\n                <Modal\r\n                    isOpen={previewInvoiceVisible}\r\n                    onClose={() => {\r\n                        handlePreviewInvoiceModalClose();\r\n                    }}\r\n                    size={'full'}\r\n                    useRNModal\r\n                >\r\n                    <View style={{ flexDirection: 'row', margin: 2, }}>\r\n                        <Pressable onPress={() => {\r\n                            capturedImageUri && vehicleImageUri ? handleCaptureAndCreatePDF() : null;\r\n                        }}\r\n                            style={{ justifyContent: 'center', flexDirection: 'row', padding: 5, borderRadius: 5, backgroundColor: '#16A34A', }}>\r\n                            <MaterialCommunityIcons size={20} name='download' color='white' />\r\n                            <Text style={{ color: 'white', }}>Download as PDF</Text>\r\n                        </Pressable>\r\n\r\n                        <Pressable\r\n                            onPress={() => {\r\n                                capturedImageUri && vehicleImageUri ? openImage() : null;\r\n                            }}\r\n                            style={{ position: 'absolute', top: -2, right: -380, flexDirection: 'row', padding: 5, borderRadius: 5, backgroundColor: '#0A8DD5', }}>\r\n                            <Entypo size={20} name='images' color='white' />\r\n                            <Text style={{ color: 'white', }}>View Image</Text>\r\n                        </Pressable>\r\n                    </View>\r\n                    <Modal.CloseButton />\r\n                    {previewInvoiceVisible &&\r\n                        <ScrollView\r\n                            style={{ maxHeight: screenWidth < 960 ? 480 : 720, maxWidth: screenWidth < 960 ? 320 : 900 }}\r\n                        >\r\n                            <View style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                bottom: 0,\r\n                                right: 0,\r\n                                left: 0,\r\n                                backgroundColor: 'white',\r\n                                zIndex: 999,\r\n                                flex: 1,\r\n                                alignItems: 'center', // Center horizontally\r\n                            }}>\r\n                                {capturedImageUri && vehicleImageUri ? (\r\n                                    <NativeImage\r\n                                        source={{ uri: capturedImageUri }}\r\n                                        style={{\r\n                                            marginTop: 5,\r\n                                            width: screenWidth < 960 ? 320 : 595,\r\n                                            height: screenWidth < 960 ? 480 : 842,\r\n                                            resizeMode: 'stretch',\r\n                                            borderWidth: 1,\r\n                                            borderColor: '#DADDE1',\r\n                                        }}\r\n                                    />\r\n                                ) : (<Spinner size={'lg'} color={'#0A9FDC'} style={{ alignSelf: 'center', paddingTop: 80 * heightScaleFactor, }} />)}\r\n                            </View>\r\n\r\n                            {/* Main content with invoice details */}\r\n                            {vehicleImageUri !== '' &&\r\n                                <View ref={invoiceRef} style={{ width: 2480, height: 3508, backgroundColor: 'white', zIndex: 1 }}>\r\n\r\n                                    <View style={{ position: 'absolute', left: 38 * widthScaleFactor, top: 38 * heightScaleFactor }}>\r\n                                        <NativeImage\r\n                                            source={require('../../assets/RMJ logo for invoice.png')}\r\n                                            style={{\r\n                                                width: 95 * widthScaleFactor,\r\n                                                height: 85 * heightScaleFactor,\r\n                                                resizeMode: 'stretch',\r\n                                            }}\r\n                                        />\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', alignSelf: 'center', top: 80 * heightScaleFactor }}>\r\n                                        {/* Title */}\r\n                                        {selectedChatData.stepIndicator.value < 3 ?\r\n                                            <Text style={{ fontWeight: 700, fontSize: 25 * widthScaleFactor }}>{`PROFORMA INVOICE`}</Text> :\r\n                                            <Text style={{ fontWeight: 700, fontSize: 25 * widthScaleFactor }}>{`INVOICE`}</Text>\r\n                                        }\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 38 * heightScaleFactor }}>\r\n                                        {/* QR CODE */}\r\n                                        {selectedChatData.stepIndicator.value < 3 ?\r\n                                            null :\r\n                                            <QRCode\r\n                                                value={invoiceData.cryptoNumber}\r\n                                                size={80 * widthScaleFactor}\r\n                                                color=\"black\"\r\n                                                backgroundColor=\"white\"\r\n                                            />\r\n                                        }\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', right: 121 * widthScaleFactor, top: 34 * heightScaleFactor }}>\r\n                                        {/* Invoice Number */}\r\n                                        {selectedChatData.stepIndicator.value < 3 ?\r\n                                            null :\r\n                                            <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor }}>{`Invoice No. RMJ-${invoiceData.id}`}</Text>\r\n                                        }\r\n                                    </View>\r\n\r\n                                    {selectedChatData.stepIndicator.value < 3 ?\r\n                                        <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 34 * heightScaleFactor, }}>\r\n                                            {/* Issuing Date */}\r\n                                            <View style={{ flexDirection: 'row', alignSelf: 'flex-end', }}>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor }}>{`Issuing Date: `}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor }}>{`${formattedIssuingDate}`}</Text>\r\n                                            </View>\r\n                                            <View style={{ flexDirection: 'row', alignSelf: 'flex-end', }}>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor, color: '#F00A0A', }}>{`Valid Until: `}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor }}>{`${formattedDueDate}`}</Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n                                        :\r\n                                        <View style={{ position: 'absolute', right: 121 * widthScaleFactor, top: 49 * heightScaleFactor, flexDirection: 'row' }}>\r\n                                            {/* Issuing Date */}\r\n                                            <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor }}>{`Issuing Date: `}</Text>\r\n                                            <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor }}>{`${formattedIssuingDate}`}</Text>\r\n                                        </View>\r\n                                    }\r\n\r\n                                    <View style={{\r\n                                        position: 'absolute',\r\n                                        left: 40 * widthScaleFactor,\r\n                                        top: 134 * heightScaleFactor,\r\n                                        maxWidth: 300 * widthScaleFactor,\r\n                                    }}>\r\n                                        {/* Shipper */}\r\n                                        <Text style={{\r\n                                            fontWeight: 750,\r\n                                            fontSize: 16 * widthScaleFactor,\r\n                                            borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                            width: 'fit-content', // Make the underline cover the text width\r\n                                            marginBottom: 5, // Add some space between text and underline\r\n                                        }}>\r\n                                            {`Shipper`}\r\n                                        </Text>\r\n                                        <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`Real Motor Japan (YANAGISAWA HD CO.,LTD)`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`26-2 Takara Tsutsumi-cho Toyota City, Aichi Prefecture, Japan, 473-0932`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`FAX: +81565850606`}</Text>\r\n\r\n                                        <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`Shipped From:`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.departurePort}, ${invoiceData.departureCountry}`}</Text>\r\n\r\n                                        <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`Shipped To:`}</Text>\r\n                                        <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.discharge.port}, ${invoiceData.discharge.country}`}</Text>\r\n                                        {invoiceData.placeOfDelivery && invoiceData.placeOfDelivery !== '' ?\r\n                                            <>\r\n                                                <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`Place of Delivery:`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.placeOfDelivery}`}</Text>\r\n                                            </>\r\n                                            : null}\r\n                                        {invoiceData.cfs && invoiceData.cfs !== '' ?\r\n                                            <>\r\n                                                <Text style={{ fontWeight: 700, fontSize: 14 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`CFS:`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 14 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.cfs}`}</Text>\r\n                                            </>\r\n                                            : null}\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', width: 715 * widthScaleFactor, }}>\r\n\r\n                                            <View style={{\r\n                                                flex: 1, width: 280 * widthScaleFactor,\r\n                                            }}>\r\n                                                {/* Buyer Information */}\r\n                                                <Text style={{\r\n                                                    fontWeight: 750,\r\n                                                    fontSize: 18 * widthScaleFactor,\r\n                                                    borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                    borderBottomColor: '#0A78BE',\r\n                                                    width: 'fit-content', // Make the underline cover the text width\r\n                                                    marginBottom: 5, // Add some space between text and underline\r\n                                                    color: '#0A78BE',\r\n                                                    marginTop: 25 * heightScaleFactor,\r\n\r\n                                                }}>\r\n                                                    {`Buyer Information`}\r\n                                                </Text>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 16 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.name}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.address}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.email}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.consignee.contactNumber}`}</Text>\r\n                                                <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`FAX: ${invoiceData.consignee.fax == '' ? 'N/A' : invoiceData.consignee.fax}`}</Text>\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, paddingLeft: 20 * widthScaleFactor, width: 280 * widthScaleFactor, }}>\r\n                                                {/* Notify Party */}\r\n                                                <Text style={{\r\n                                                    fontWeight: 750,\r\n                                                    fontSize: 18 * widthScaleFactor,\r\n                                                    borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                    borderBottomColor: '#FF0000',\r\n                                                    width: 'fit-content', // Make the underline cover the text width\r\n                                                    marginBottom: 5, // Add some space between text and underline\r\n                                                    color: '#FF0000',\r\n                                                    marginTop: 25 * heightScaleFactor,\r\n                                                }}>\r\n                                                    {`Notify Party`}\r\n                                                </Text>\r\n                                                {invoiceData.notifyParty.sameAsConsignee == true ? (\r\n                                                    <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, }}>{`Same as consignee / buyer`}</Text>) :\r\n                                                    (<>\r\n                                                        <Text style={{ fontWeight: 750, fontSize: 16 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.name}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.address}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.email}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.notifyParty.contactNumber}`}</Text>\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 16 * widthScaleFactor, marginTop: 20, lineHeight: 14 * widthScaleFactor }}>{`FAX: ${invoiceData.notifyParty.fax == '' ? 'N/A' : invoiceData.notifyParty.fax}`}</Text>\r\n                                                    </>)}\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n\r\n                                    </View>\r\n                                    {selectedChatData.stepIndicator.value < 3 ?\r\n\r\n                                        <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 130 * heightScaleFactor, borderWidth: 3, width: 430 * widthScaleFactor, borderColor: '#FF5C00', height: 194 * heightScaleFactor, }}>\r\n                                            <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center', flexDirection: 'row', }}>\r\n                                                <Entypo size={50 * widthScaleFactor} name='warning' color={'#FF0000'} />\r\n                                                <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, color: '#FF0000', marginLeft: 20 * widthScaleFactor, }}>{`Bank Information will be provided after placing an order.`}</Text>\r\n                                            </View>\r\n                                        </View>\r\n                                        :\r\n                                        <View style={{ position: 'absolute', right: 38 * widthScaleFactor, top: 130 * heightScaleFactor, borderWidth: 3, width: 430 * widthScaleFactor, borderColor: '#1ABA3D', }}>\r\n\r\n                                            <View style={{ flex: 1, alignItems: 'center', }}>\r\n                                                <Text style={{ fontWeight: 750, fontSize: 14 * widthScaleFactor, color: '#114B33', }}>{`Bank Information`}</Text>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, flexDirection: 'row', marginHorizontal: 5 * widthScaleFactor, marginBottom: 5 * heightScaleFactor, }}>\r\n                                                <View style={{ flex: 1, marginRight: 50 * widthScaleFactor, }}>\r\n                                                    <Text style={{\r\n                                                        fontWeight: 750,\r\n                                                        fontSize: 14 * widthScaleFactor,\r\n                                                        borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                        width: 'fit-content', // Make the underline cover the text width\r\n                                                        marginBottom: 2, // Add some space between text and underline\r\n                                                    }}>\r\n                                                        {`Bank Account`}\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Bank Name: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.bankName}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Branch Name: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.branchName}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`SWIFTCODE: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.swiftCode}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Address: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.address}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Name of Account Holder: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.accountHolder}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginTop: 3 * heightScaleFactor, }}>{`Account Number: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.bankAccount.accountNumberValue}`}</Text>\r\n                                                    </Text>\r\n                                                </View>\r\n\r\n                                                <View style={{ flex: 1 }}>\r\n\r\n                                                    <Text style={{\r\n                                                        fontWeight: 750,\r\n                                                        fontSize: 14 * widthScaleFactor,\r\n                                                        borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                        width: 'fit-content', // Make the underline cover the text width\r\n                                                        marginBottom: 2, // Add some space between text and underline\r\n                                                    }}>\r\n                                                        {`Payment Terms`}\r\n                                                    </Text>\r\n\r\n                                                    <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`Terms: `}\r\n                                                        <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>{`${invoiceData.bankInformations.paymentTerms}`}</Text>\r\n                                                    </Text>\r\n\r\n                                                    <View style={{ paddingTop: 30 * heightScaleFactor, }}>\r\n\r\n                                                        <Text style={{\r\n                                                            fontWeight: 750,\r\n                                                            fontSize: 14 * widthScaleFactor,\r\n                                                            borderBottomWidth: 3, // Adjust the thickness of the underline\r\n                                                            width: 'fit-content', // Make the underline cover the text width\r\n                                                            marginBottom: 2, // Add some space between text and underline\r\n                                                            color: '#F00A0A',\r\n                                                            borderBottomColor: '#F00A0A',\r\n                                                        }}>\r\n                                                            {`Payment Due`}\r\n                                                        </Text>\r\n\r\n                                                        <Text style={{ fontWeight: 750, fontSize: 12 * widthScaleFactor, color: '#F00A0A', lineHeight: 14 * widthScaleFactor }}>{`Due Date: `}\r\n                                                            <Text style={{ fontWeight: 400, fontSize: 12 * widthScaleFactor, color: 'black', lineHeight: 14 * widthScaleFactor }}>{`${formattedDueDate}`}</Text>\r\n                                                        </Text>\r\n\r\n                                                    </View>\r\n\r\n                                                </View>\r\n\r\n                                            </View>\r\n\r\n                                        </View>}\r\n\r\n\r\n\r\n                                    {/* <View style={{ position: 'absolute', left: 260 * widthScaleFactor, top: 335 * heightScaleFactor }}>\r\n\r\n                                        <View style={{ flexDirection: 'row' }}>\r\n                                            {vehicleImageUri ? (\r\n                                                <NativeImage\r\n                                                    source={{ uri: vehicleImageUri }}\r\n                                                    style={{\r\n                                                        width: 99 * widthScaleFactor,\r\n                                                        height: 70 * heightScaleFactor,\r\n                                                        resizeMode: 'stretch',\r\n                                                    }}\r\n                                                />\r\n                                            ) : (\r\n                                                <View\r\n                                                    style={{\r\n                                                        width: 99 * widthScaleFactor,\r\n                                                        height: 70 * heightScaleFactor,\r\n                                                        backgroundColor: '#e0e0e0',\r\n                                                        marginRight: 12,\r\n                                                    }}\r\n                                                />\r\n                                            )}\r\n                                            <View style={{ flex: 1, top: -2 * heightScaleFactor, marginLeft: 5 * widthScaleFactor, height: 59 * heightScaleFactor }}>\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 14 * widthScaleFactor, lineHeight: 16 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.carName}`}\r\n                                                </Text>\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Reference No.: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${invoiceData.carData.referenceNumber}`}\r\n                                                    </Text>\r\n                                                </Text>\r\n\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Year/Month: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${invoiceData.carData.regYear}/${invoiceData.carData.regMonth}`}\r\n                                                    </Text>\r\n                                                </Text>\r\n\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Mileage: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${Number(invoiceData.carData.mileage).toLocaleString('en-US')} km`}\r\n                                                    </Text>\r\n                                                </Text>\r\n\r\n                                                <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                    {`Chassis No.: `}\r\n                                                    <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                        {`${invoiceData.carData.chassisNumber}`}\r\n                                                    </Text>\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', left: 260 * widthScaleFactor, top: 410 * heightScaleFactor, flexDirection: 'row', width: 495 * widthScaleFactor, }}>\r\n                                        <View style={{ flex: 1 }}>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Model Code: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.modelCode}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Fuel: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.fuel}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Transmission: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.transmission}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Steering: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.steering}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Displacement: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${Number(invoiceData.carData.engineDisplacement).toLocaleString('en-US')} cc`}\r\n                                                </Text>\r\n                                            </Text>\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1 }}>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Doors: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.doors ? invoiceData.carData.doors : 'N/A'}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Drive Type: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.driveType ? invoiceData.carData.driveType : 'N/A'}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Exterior Color: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.exteriorColor}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Number of Seats: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.numberOfSeats ? invoiceData.carData.numberOfSeats : 'N/A'}`}\r\n                                                </Text>\r\n                                            </Text>\r\n\r\n                                            <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor }}>\r\n                                                {`Body Type: `}\r\n                                                <Text style={{ fontWeight: 'normal', fontSize: 12 * widthScaleFactor }}>\r\n                                                    {`${invoiceData.carData.bodyType}`}\r\n                                                </Text>\r\n                                            </Text>\r\n                                        </View>\r\n\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', left: 260 * widthScaleFactor, top: 484 * heightScaleFactor, width: 495 * widthScaleFactor, }}>\r\n                                        <Text style={{ fontWeight: 'bold', fontSize: 12 * widthScaleFactor, lineHeight: 14 * widthScaleFactor, marginBottom: 3 * heightScaleFactor, }}>\r\n                                            {`Features: `}\r\n                                        </Text>\r\n\r\n                                        <InvoiceFeatures widthScaleFactor={widthScaleFactor} heightScaleFactor={heightScaleFactor} />\r\n\r\n                                    </View> */}\r\n\r\n                                    <View style={{\r\n                                        position: 'absolute',\r\n                                        left: 38 * widthScaleFactor,\r\n                                        top: (invoiceData.placeOfDelivery && invoiceData.cfs) || (invoiceData.placeOfDelivery !== '' && invoiceData.cfs !== '') ? 577 * heightScaleFactor : 537 * heightScaleFactor,\r\n                                        width: 718 * widthScaleFactor,\r\n                                        borderWidth: 1 * widthScaleFactor,\r\n                                        borderColor: '#C2E2F4',\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{ flex: 2, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Description`}\r\n                                                </Text>\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 2, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Notes`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Quantity`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 2, justifyContent: 'center', }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 'bold',\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        color: '#008AC6',\r\n                                                    }}>\r\n                                                    {`Amount`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {`FOB`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {`$${Math.round(Number(invoiceData.paymentDetails.fobPrice)).toLocaleString('en-US', { useGrouping: true })}`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {`Freight`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {`$${Math.round(Number(invoiceData.paymentDetails.freightPrice)).toLocaleString('en-US', { useGrouping: true })}`}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                                flexDirection: 'row',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && (invoiceData.paymentDetails.incoterms == \"C&F\" || invoiceData.paymentDetails.incoterms == \"FOB\") && <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.inspectionIsChecked ? `Inspection [${invoiceData.paymentDetails.inspectionName}]` : ' '}\r\n                                                </Text>}\r\n\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <>\r\n                                                        <Text\r\n                                                            style={{\r\n                                                                fontWeight: 400,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                                marginLeft: 2 * widthScaleFactor,\r\n                                                            }}>\r\n                                                            {invoiceData.paymentDetails.inspectionIsChecked ? `Inspection [${invoiceData.paymentDetails.inspectionName}]` : ' '}\r\n                                                        </Text>\r\n                                                        <Text\r\n                                                            style={{\r\n                                                                fontWeight: 400,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                                marginLeft: 2 * widthScaleFactor,\r\n                                                            }}>\r\n                                                            {invoiceData.paymentDetails.incoterms == \"CIF\" ? ` + Insurance` : ' '}\r\n                                                        </Text>\r\n                                                    </>\r\n                                                }\r\n\r\n                                                {!invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            marginLeft: 2 * widthScaleFactor,\r\n                                                        }}>\r\n                                                        {invoiceData.paymentDetails.incoterms == \"CIF\" ? `Insurance` : ' '}\r\n                                                    </Text>\r\n                                                }\r\n\r\n                                                {!invoiceData.paymentDetails.inspectionIsChecked && (invoiceData.paymentDetails.incoterms == \"C&F\" || invoiceData.paymentDetails.incoterms == \"FOB\") &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                        }}>\r\n                                                        {' '}\r\n                                                    </Text>\r\n                                                }\r\n\r\n\r\n                                            </View>\r\n\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && (invoiceData.paymentDetails.incoterms == \"C&F\" || invoiceData.paymentDetails.incoterms == \"FOB\") && <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.inspectionIsChecked ? `$${Number(invoiceData.paymentDetails.inspectionPrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                </Text>}\r\n\r\n                                                {invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                        {invoiceData.paymentDetails.inspectionIsChecked ? `$${Number(invoiceData.paymentDetails.inspectionPrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                        <Text\r\n                                                            style={{\r\n                                                                fontWeight: 400,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                            }}>\r\n                                                            {invoiceData.paymentDetails.incoterms === \"CIF\" ? ` + $${Number(invoiceData.paymentDetails.insurancePrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                        </Text>\r\n                                                    </Text>\r\n\r\n                                                }\r\n\r\n                                                {!invoiceData.paymentDetails.inspectionIsChecked && invoiceData.paymentDetails.incoterms == \"CIF\" &&\r\n                                                    <Text\r\n                                                        style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n\r\n                                                        }}>\r\n                                                        {invoiceData.paymentDetails.incoterms == \"CIF\" ? `$${Number(invoiceData.paymentDetails.insurancePrice).toLocaleString('en-US', { useGrouping: true }).split('.')[0]}` : ' '}\r\n                                                    </Text>\r\n                                                }\r\n\r\n                                            </View>\r\n\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 5,\r\n                                                flexDirection: 'row',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails.additionalName && (invoiceData.paymentDetails.additionalName).length > 0 && <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.additionalName && (invoiceData.paymentDetails.additionalName).length > 0 ? `${invoiceData.paymentDetails.additionalName.join(' + ')}` : ' '}\r\n                                                </Text>}\r\n\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                            }}>\r\n                                                <Text\r\n                                                    style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                    {invoiceData.paymentDetails.additionalPrice && invoiceData.paymentDetails.additionalPrice.length > 0\r\n                                                        ? invoiceData.paymentDetails.additionalPrice.map(price =>\r\n                                                            `$${parseFloat(price).toLocaleString('en-US', {\r\n                                                                style: 'currency',\r\n                                                                currency: 'USD',\r\n                                                                minimumFractionDigits: 0,\r\n                                                                maximumFractionDigits: 0\r\n                                                            }).slice(1)}`\r\n                                                        ).join(' + ')\r\n                                                        : ' '}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, flexDirection: 'row', }}>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                                flexDirection: 'row',\r\n                                                paddingVertical: 2 * heightScaleFactor,\r\n\r\n                                            }}>\r\n                                                {invoiceData.carData && invoiceData.carData.carName ? (\r\n                                                    <Text style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                        marginLeft: 2 * widthScaleFactor,\r\n                                                    }}>\r\n                                                        {\"Used Vehicle\\n\"}\r\n                                                        <Text style={{\r\n                                                            fontWeight: 700,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.carName}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.chassisNumber}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.exteriorColor}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${Number(invoiceData.carData.engineDisplacement).toLocaleString('en-US')} cc\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${Number(invoiceData.carData.mileage).toLocaleString('en-US')} km\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.fuel}\\n`}\r\n                                                        </Text>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 400,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            alignSelf: 'center',\r\n                                                        }}>\r\n                                                            {`${invoiceData.carData.transmission}\\n`}\r\n                                                        </Text>\r\n                                                    </Text>\r\n\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                                flexDirection: 'row',\r\n                                                justifyContent: 'center',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails && invoiceData.paymentDetails.incoterms && invoiceData.discharge.port && invoiceData.discharge ? (\r\n                                                    <Text style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                        {`${invoiceData.paymentDetails.incoterms} ${invoiceData.discharge.port}`}\r\n                                                    </Text>\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 1,\r\n                                                flexDirection: 'row',\r\n                                                justifyContent: 'center',\r\n                                            }}>\r\n                                                {invoiceData.carData && invoiceData.carData.carName ? (\r\n                                                    <Text style={{\r\n                                                        fontWeight: 400,\r\n                                                        fontSize: 12 * widthScaleFactor,\r\n                                                        lineHeight: 14 * widthScaleFactor,\r\n                                                        marginBottom: 3 * heightScaleFactor,\r\n                                                        alignSelf: 'center',\r\n                                                    }}>\r\n                                                        {'1'}\r\n                                                    </Text>\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n\r\n\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                borderTopWidth: 1 * widthScaleFactor,\r\n                                                borderColor: '#C2E2F4',\r\n                                                flex: 2,\r\n                                                justifyContent: 'center',\r\n                                                flexDirection: 'row',\r\n                                            }}>\r\n                                                {invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount ? (\r\n                                                    <>\r\n                                                        <Text style={{\r\n                                                            fontWeight: 700,\r\n                                                            fontSize: 12 * widthScaleFactor,\r\n                                                            lineHeight: 14 * widthScaleFactor,\r\n                                                            marginBottom: 3 * heightScaleFactor,\r\n                                                            color: '#008AC6',\r\n                                                            marginRight: 10 * widthScaleFactor,\r\n                                                            top: 51 * heightScaleFactor,\r\n                                                            left: 50 * widthScaleFactor,\r\n                                                            position: 'absolute',\r\n                                                        }}>\r\n                                                            {\"Total\"}\r\n                                                            <Text style={{\r\n                                                                fontWeight: 700,\r\n                                                                fontSize: 12 * widthScaleFactor,\r\n                                                                lineHeight: 14 * widthScaleFactor,\r\n                                                                marginBottom: 3 * heightScaleFactor,\r\n                                                                alignSelf: 'center',\r\n                                                                color: '#00720B',\r\n                                                                marginLeft: 5 * widthScaleFactor,\r\n                                                            }}>\r\n                                                                {`$${invoiceData.paymentDetails.totalAmount}`}\r\n                                                            </Text>\r\n                                                        </Text>\r\n\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <Text>{' '}</Text>\r\n                                                )}\r\n                                            </View>\r\n\r\n                                        </View>\r\n\r\n                                    </View>\r\n\r\n                                    <View style={{ position: 'absolute', left: 38 * widthScaleFactor, top: 825 * heightScaleFactor, width: 350 * widthScaleFactor, }}>\r\n                                        <Text style={{\r\n                                            fontWeight: 700,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Payment Information:'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'The customer is responsible for the bank charges incurred when the T/T (Telegraphic Transfer) is paid.'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                            marginBottom: 5 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'No warranty service is provided on used vehicles.'}\r\n                                        </Text>\r\n\r\n                                        <Text style={{\r\n                                            fontWeight: 700,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Conditions for order cancellation:'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'(1) Order Cancellation Penalty: If the order is canceled after payment, a penalty of USD 220 will apply.'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                            marginBottom: 5 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'(2) Non-refund: Payment for vehicles purchased through pre-delivery inspection is non-refundable.'}\r\n                                        </Text>\r\n\r\n                                        <Text style={{\r\n                                            fontWeight: 700,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Intermediary Banking Information:'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Bank Name: SUMITOMO MITSUI BANKING CORPORATION (NEW YORK BRANCH).'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'Swift code: SMBCUS33'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                        }}>\r\n                                            {'Address: 277 Park Avenue'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'City: New York, NY'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'Postal Code: 10172'}\r\n                                        </Text>\r\n                                        <Text style={{\r\n                                            fontWeight: 400,\r\n                                            fontSize: 12 * widthScaleFactor,\r\n                                            lineHeight: 14 * heightScaleFactor,\r\n                                            marginBottom: 5 * heightScaleFactor,\r\n\r\n                                        }}>\r\n                                            {'Country: United States'}\r\n                                        </Text>\r\n                                    </View>\r\n\r\n                                    {selectedChatData.stepIndicator.value < 3 ? null :\r\n                                        <View style={{ position: 'absolute', right: 39 * widthScaleFactor, top: 835 * heightScaleFactor, width: 300 * widthScaleFactor, }}>\r\n                                            <View style={{\r\n                                                width: 300 * widthScaleFactor,\r\n                                                alignItems: 'center',\r\n                                                paddingBottom: 80 * heightScaleFactor, // Adjust this value to control space between image and line\r\n                                            }}>\r\n                                                <NativeImage\r\n                                                    source={require('../../assets/RMJ Invoice Signature with Hanko.png')}\r\n                                                    style={{\r\n                                                        width: 276 * widthScaleFactor,\r\n                                                        height: 81 * heightScaleFactor,\r\n                                                        resizeMode: 'contain',\r\n                                                        alignSelf: 'center',\r\n                                                        marginBottom: 0, // Minimize margin to keep the line close\r\n                                                    }}\r\n                                                />\r\n                                                <View style={{\r\n                                                    borderBottomWidth: 1 * heightScaleFactor,\r\n                                                    borderColor: 'black', // Change the color as needed\r\n                                                    width: '100%', // Line width as per your requirement\r\n                                                }} />\r\n                                                <Text italic style={{\r\n                                                    fontWeight: 700,\r\n                                                    fontSize: 16 * widthScaleFactor,\r\n                                                }}>\r\n                                                    {'Real Motor Japan'}\r\n                                                </Text>\r\n                                            </View>\r\n\r\n                                            <View style={{\r\n                                                width: 300 * widthScaleFactor,\r\n                                                alignItems: 'center',\r\n                                                paddingBottom: 5 * heightScaleFactor, // Adjust this value to control space between image and line\r\n                                            }}>\r\n\r\n                                                <View style={{\r\n                                                    borderBottomWidth: 1 * heightScaleFactor,\r\n                                                    borderColor: 'black', // Change the color as needed\r\n                                                    width: '100%', // Line width as per your requirement\r\n                                                }} />\r\n                                                <Text italic style={{\r\n                                                    fontWeight: 700,\r\n                                                    fontSize: 16 * widthScaleFactor,\r\n                                                }}>\r\n                                                    {'Your Signature'}\r\n                                                </Text>\r\n                                            </View>\r\n                                        </View>}\r\n\r\n\r\n                                </View>}\r\n\r\n\r\n                        </ScrollView>\r\n\r\n                    }\r\n\r\n                </Modal>\r\n            </>\r\n        }\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nconst ExtendDueDateButton = () => {\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [isConfirmHovered, setIsConfirmHovered] = useState(false);\r\n    const [isCancelHovered, setIsCancelHovered] = useState(false);\r\n    const [selectedDueDate, setSelectedDueDate] = useState('');\r\n    const [isConfirmLoading, setIsConfirmLoading] = useState(false);\r\n\r\n    let invoiceSelectedDueDate = '';\r\n\r\n    const currentDate = useSelector((state) => state.currentDate);\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n\r\n\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n\r\n\r\n    const confirmHoverIn = () => setIsConfirmHovered(true);\r\n    const confirmHoverOut = () => setIsConfirmHovered(false);\r\n\r\n    const cancelHoverIn = () => setIsCancelHovered(true);\r\n    const cancelHoverOut = () => setIsCancelHovered(false);\r\n\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleModalOpen = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const handleModalClose = () => {\r\n        setModalVisible(false);\r\n    }\r\n\r\n    const handleConfirm = async () => {\r\n\r\n        try {\r\n            await confirmExtendDueDate();\r\n            handleModalClose();\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    const extendDueDateMessage = async () => {\r\n        const response = await axios.get('https://worldtimeapi.org/api/timezone/Asia/Tokyo');\r\n        const { datetime } = response.data;\r\n        const formattedTime = moment(datetime).format('YYYY/MM/DD [at] HH:mm:ss.SSS');\r\n        const year = moment(datetime).format('YYYY');\r\n        const month = moment(datetime).format('MM');\r\n        const monthWithDay = moment(datetime).format('MM/DD');\r\n        const date = moment(datetime).format('YYYY/MM/DD');\r\n        const day = moment(datetime).format('DD');\r\n        const time = moment(datetime).format('HH:mm');\r\n        const timeWithMinutesSeconds = moment(datetime).format('HH:mm:ss');\r\n\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n        try {\r\n\r\n            // Adding the message to the 'messages' subcollection\r\n            await addDoc(collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'), {\r\n                text: `The due date has been changed to ${selectedDueDate\r\n                    ? new Date(selectedDueDate).toLocaleDateString(undefined, {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: 'numeric',\r\n                    })\r\n                    : 'Invalid Date'\r\n                    }`,\r\n                sender: email,\r\n                timestamp: formattedTime, // Using the fetched timestamp\r\n                ip: ip, // IP Address\r\n                ipCountry: ipCountry // Country of the IP Address\r\n            });\r\n\r\n\r\n            // Updating the main chat document with the latest message details\r\n            await updateDoc(doc(projectExtensionFirestore, 'chats', selectedChatData.id), {\r\n                lastMessageSender: email,\r\n                lastMessage: `The due date has been changed to ${selectedDueDate\r\n                    ? new Date(selectedDueDate).toLocaleDateString(undefined, {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: 'numeric',\r\n                    })\r\n                    : 'Invalid Date'\r\n                    }`,\r\n                lastMessageDate: formattedTime,\r\n                customerRead: false,\r\n                read: true,\r\n                readBy: [email],\r\n            });\r\n\r\n        } catch (e) {\r\n            console.error('Error adding document: ', e);\r\n        }\r\n    }\r\n\r\n    const confirmExtendDueDate = async () => {\r\n        const docRef = doc(projectExtensionFirestore, \"IssuedInvoice\", selectedChatData.invoiceNumber);\r\n        setIsConfirmLoading(true);\r\n        try {\r\n            await updateDoc(docRef, {\r\n                'bankInformations.dueDate': selectedDueDate // Update the specific field\r\n            });\r\n            await extendDueDateMessage();\r\n            setIsConfirmLoading(false);\r\n            console.log(\"Document successfully updated\");\r\n        } catch (error) {\r\n            console.error(\"Error updating document: \", error);\r\n        }\r\n    };\r\n\r\n    const ModalCalendar = ({ selectedDate, setSelectedDate, currentDate }) => {\r\n\r\n        const [modalCalendarVisible, setModalCalendarVisible] = useState(false);\r\n\r\n        const handleModalCalendarOpen = () => {\r\n            setModalCalendarVisible(true);\r\n        };\r\n\r\n        const handleModalCalendarClose = () => {\r\n            setModalCalendarVisible(false);\r\n        };\r\n\r\n\r\n        return (\r\n\r\n            <>\r\n                <Pressable style={{ width: '60%', height: 25, margin: 2, padding: 1, borderRadius: 2, borderWidth: 1, borderColor: '#D9D9D9', outlineStyle: 'none', }}\r\n                    onPress={handleModalCalendarOpen}>\r\n                    <Text style={{ flex: 1, }} >{selectedDate}</Text>\r\n                </Pressable>\r\n\r\n                <Modal isOpen={modalCalendarVisible} onClose={handleModalCalendarClose} useRNModal>\r\n                    <Modal.CloseButton />\r\n                    <Modal.Content>\r\n                        <View style={{ height: '100%', flex: 1 }}>\r\n                            <Calendar\r\n                                onDayPress={useCallback(day => {\r\n                                    setSelectedDate(day.dateString);\r\n                                    invoiceSelectedDueDate = day.dateString;\r\n                                    globalInvoiceVariable.bankInformations.dueDate = day.dateString;\r\n                                    handleModalCalendarClose();\r\n                                }, [])}\r\n                                markedDates={{\r\n                                    [selectedDate]: { selected: true, disableTouchEvent: true, selectedDotColor: '#7b9cff' }\r\n                                }}\r\n                                renderArrow={(direction) => (\r\n                                    direction === 'left' ? <MaterialIcons name='arrow-back-ios' color='#7b9cff' /> : <MaterialIcons name='arrow-forward-ios' color='#7b9cff' />\r\n                                )}\r\n                                enableSwipeMonths={true}\r\n                                initialDate={selectedDate}\r\n                                // minDate={currentDate}\r\n                                showSixWeeks />\r\n\r\n                        </View>\r\n\r\n                    </Modal.Content>\r\n\r\n                </Modal>\r\n            </>\r\n\r\n        );\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        if (currentDate) {\r\n            const date = new Date(currentDate);\r\n\r\n            // Check the day of the week\r\n            const dayOfWeek = date.getDay();\r\n\r\n            if (dayOfWeek === 5) { // Friday\r\n                date.setDate(date.getDate() + 3); // Add 3 days to reach Monday\r\n            } else if (dayOfWeek === 6) { // Saturday\r\n                date.setDate(date.getDate() + 2); // Add 2 days to reach Monday\r\n            } else {\r\n                date.setDate(date.getDate() + 1); // Sunday to Thursday, add 1 day\r\n            }\r\n\r\n            // Format the date back to string\r\n            const adjustedDate = date.toISOString().split('T')[0];\r\n            setSelectedDueDate(adjustedDate);\r\n        }\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Pressable\r\n                focusable={false}\r\n                variant='ghost'\r\n                onPress={handleModalOpen}\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                style={{\r\n                    marginTop: 3,\r\n                    paddingVertical: 3,\r\n                    paddingHorizontal: 5,\r\n                    flexDirection: 'row', // Align items in a row\r\n                    alignItems: 'center', // Center items vertically\r\n                    justifyContent: 'center',\r\n                    borderRadius: 5,\r\n                    backgroundColor: isHovered ? '#a8720a' : '#D38F0D',\r\n                }}\r\n            >\r\n                <FontAwesome name='calendar-plus-o' size={15} color={'white'} />\r\n                <Text color={'white'} style={{ fontWeight: 700, marginLeft: 5, }}>{`Extend Due Date`}</Text>\r\n            </Pressable>\r\n\r\n            <Modal\r\n                isOpen={modalVisible}\r\n                onClose={handleModalClose}\r\n                useRNModal\r\n            >\r\n                <Modal.Content>\r\n                    <Modal.Header >Extend Due Date</Modal.Header>\r\n                    <View style={{ flex: 1, flexDirection: 'row', margin: 2, }}>\r\n                        <Text style={{ width: '20%', fontWeight: 700, margin: 3, }}>Due Date:</Text>\r\n                        <ModalCalendar currentDate={currentDate} selectedDate={selectedDueDate} setSelectedDate={setSelectedDueDate} />\r\n                    </View>\r\n                    <Modal.Footer>\r\n                        <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', }}>\r\n                            <Pressable\r\n                                focusable={false}\r\n                                variant='ghost'\r\n                                onPress={handleModalClose}\r\n                                onHoverIn={cancelHoverIn}\r\n                                onHoverOut={cancelHoverOut}\r\n                                style={{\r\n                                    marginTop: 3,\r\n                                    paddingVertical: 3,\r\n                                    alignItems: 'center', // Center items vertically\r\n                                    justifyContent: 'center',\r\n                                    borderRadius: 5,\r\n                                    backgroundColor: isCancelHovered ? '#3F3F46' : '#52525B',\r\n                                    flex: 1,\r\n                                }}\r\n                            >\r\n                                <Text color={'white'} style={{ fontWeight: 700, }}>Cancel</Text>\r\n                            </Pressable>\r\n\r\n                            <View style={{ flex: 1 }} />\r\n\r\n                            <Pressable\r\n                                onPress={handleConfirm}\r\n                                focusable={false}\r\n                                variant='ghost'\r\n                                onHoverIn={confirmHoverIn}\r\n                                onHoverOut={confirmHoverOut}\r\n                                disabled={isConfirmLoading}\r\n                                style={{\r\n                                    marginTop: 3,\r\n                                    paddingVertical: 3,\r\n                                    alignItems: 'center', // Center items vertically\r\n                                    justifyContent: 'center',\r\n                                    borderRadius: 5,\r\n                                    backgroundColor: isConfirmHovered ? '#0f7534' : '#16A34A',\r\n                                    flex: 1,\r\n                                }}\r\n                            >\r\n                                {!isConfirmLoading ? <Text color={'white'} style={{ fontWeight: 700, }}>Confirm</Text> : <Spinner size={'sm'} color={'white'} />}\r\n                            </Pressable>\r\n                        </View>\r\n\r\n\r\n                    </Modal.Footer>\r\n                </Modal.Content>\r\n            </Modal>\r\n        </>\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nconst TransactionModal = () => {\r\n    const transactionModalVisible = useSelector((state) => state.transactionModalVisible);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const handleTransactionModalClose = () => {\r\n        dispatch(setTransactionModalVisible(false));\r\n    }\r\n    return (\r\n\r\n        <Modal\r\n            isOpen={transactionModalVisible}\r\n            onClose={() => {\r\n                handleTransactionModalClose()\r\n            }}\r\n            size={'lg'}\r\n            useRNModal\r\n        >\r\n            {transactionModalVisible &&\r\n                <Modal.Content>\r\n                    <Modal.CloseButton />\r\n\r\n                    <Modal.Header style={{ borderBottomWidth: 2, borderColor: '#0A9FDC', }} >{transactionModalTitle}</Modal.Header>\r\n\r\n                    {transactionModalContentValue == 1 || transactionModalContentValue == 2 &&\r\n                        <IssueProformaInvoiceModalContent />\r\n                    }\r\n\r\n                    {transactionModalContentValue == 3 &&\r\n                        <ConfirmPaymentModalContent />\r\n                    }\r\n                </Modal.Content>\r\n            }\r\n        </Modal>\r\n    )\r\n}\r\n\r\nconst TransactionButton = ({ title, buttonValue, transactionValue, colorHoverIn, colorHoverOut }) => {\r\n\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n\r\n    const hoverIn = () => setIsHovered(true);\r\n    const hoverOut = () => setIsHovered(false);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const handleTransactionModalOpen = () => {\r\n        dispatch(setTransactionModalVisible(true));\r\n        transactionModalTitle = title;\r\n        transactionModalContentValue = transactionValue;\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Pressable\r\n                focusable={false}\r\n                variant='ghost'\r\n                onPress={handleTransactionModalOpen}\r\n                onHoverIn={hoverIn}\r\n                onHoverOut={hoverOut}\r\n                style={{\r\n                    marginTop: 3,\r\n                    paddingVertical: 3,\r\n                    paddingHorizontal: 5,\r\n                    flexDirection: 'row', // Align items in a row\r\n                    alignItems: 'center', // Center items vertically\r\n                    justifyContent: 'center',\r\n                    borderRadius: 5,\r\n                    backgroundColor: isHovered ? colorHoverIn : colorHoverOut,\r\n                }}\r\n            >\r\n                <FastImage\r\n                    source={{\r\n                        uri: require(`../../assets/chat_step/chat_step_${buttonValue}_on.png`),\r\n                        priority: FastImage.priority.normal\r\n                    }}\r\n                    style={{\r\n                        tintColor: 'rgba(128, 128, 128, 1)',\r\n                        width: 15,\r\n                        height: 15,\r\n                        alignSelf: 'center',\r\n                    }}\r\n                    resizeMode={FastImage.resizeMode.stretch}\r\n                />\r\n                <Text color={'white'} style={{ fontWeight: 700, marginLeft: 5, }}>{title}</Text>\r\n            </Pressable>\r\n\r\n\r\n\r\n\r\n\r\n        </>\r\n\r\n    );\r\n};\r\n\r\nconst ChatMessageHeader = () => {\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const invoiceData = useSelector((state) => state.invoiceData);\r\n\r\n\r\n\r\n    const totalPriceCondition = selectedChatData.fobPrice && selectedChatData.jpyToUsd && selectedChatData.m3 && selectedChatData.freightPrice;\r\n\r\n    const freightCalculation = ((selectedChatData.m3 ? selectedChatData.m3 :\r\n        (selectedChatData.carData && selectedChatData.carData.dimensionCubicMeters ?\r\n            selectedChatData.carData.dimensionCubicMeters : 0)) *\r\n        Number(selectedChatData.freightPrice));\r\n\r\n    const totalPriceCalculation = (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n        (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n            selectedChatData.carData.fobPrice : 0) *\r\n        (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n            (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                selectedChatData.currency.jpyToUsd : 0))) + freightCalculation;\r\n\r\n    const fobPriceDollars = (selectedChatData.fobPrice ? selectedChatData.fobPrice :\r\n        (selectedChatData.carData && selectedChatData.carData.fobPrice ?\r\n            selectedChatData.carData.fobPrice : 0) *\r\n        (selectedChatData.jpyToUsd ? selectedChatData.jpyToUsd :\r\n            (selectedChatData.currency && selectedChatData.currency.jpyToUsd ?\r\n                selectedChatData.currency.jpyToUsd : 0)));\r\n\r\n    const carName = selectedChatData.carData && selectedChatData.carData.carName ? selectedChatData.carData.carName : (selectedChatData.vehicle && selectedChatData.vehicle.carName ? selectedChatData.vehicle.carName : '');\r\n\r\n\r\n    const freightPriceYen = freightCalculation / selectedChatData.currency.jpyToUsd;\r\n\r\n\r\n\r\n    return (\r\n        <View style={{\r\n            flex: 1,\r\n            alignSelf: 'flex-start',\r\n            flexDirection: 'row',\r\n        }}>\r\n\r\n            {globalImageUrl ? (\r\n                <FastImage\r\n                    source={{ uri: globalImageUrl, priority: FastImage.priority.normal }}\r\n                    style={{\r\n                        width: 60,\r\n                        height: 60,\r\n                        borderRadius: 30,\r\n                        alignSelf: 'center',\r\n                        margin: 10,\r\n                    }}\r\n                    resizeMode={FastImage.resizeMode.stretch}\r\n                />\r\n            ) : (\r\n                <View\r\n                    style={{\r\n                        width: 60,\r\n                        height: 60,\r\n                        borderRadius: 30,\r\n                        backgroundColor: '#e0e0e0',\r\n                        marginRight: 12,\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            <View style={{ alignSelf: 'center', paddingRight: 10, }}>\r\n                <Text style={{ fontWeight: 700, color: '#0A78BE', }}>{carName}</Text>\r\n                <Text style={{ fontWeight: 700, }}>{`${globalCustomerFirstName} ${globalCustomerLastName}`}</Text>\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 1, color: '#8D7777', }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.referenceNumber ? selectedChatData.carData.referenceNumber : 'Chassis N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                {/* <Text style={{ fontWeight: 700, color: \"#16A34A\", }}>{`$${selectedChatData.offerPrice ? selectedChatData.offerPrice : 0}`}</Text> */}\r\n                <TimelineStatus data={statusData} />\r\n            </View>\r\n\r\n            {/* <HorizontalTimeline /> */}\r\n\r\n            <View style={{ alignSelf: 'center', justifyContent: 'center', paddingLeft: 10, }}>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.chassisNumber ? selectedChatData.carData.chassisNumber : 'Chassis N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.modelCode ? selectedChatData.carData.modelCode : 'Model Code N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.mileage\r\n                            ? Number(selectedChatData.carData.mileage).toLocaleString('en-US')\r\n                            : 'Mileage N/A'} km\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.fuel ? selectedChatData.carData.fuel : 'Fuel N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, fontSize: 12, paddingTop: 0, marginLeft: 2, }}>\r\n                        {selectedChatData.carData && selectedChatData.carData.transmission ? selectedChatData.carData.transmission : 'Transmission N/A'}\r\n                    </Text>\r\n                </View>\r\n\r\n            </View>\r\n\r\n            <View style={{ alignSelf: 'center', justifyContent: 'center', paddingLeft: 15, }}>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontSize: 18, }} bold>Total Price: </Text>\r\n                    <Text selectable style={{ fontSize: 18, color: \"#16A34A\", textAlign: 'right', }} bold>\r\n                        {`$${Number(totalPriceCalculation).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                    </Text>\r\n                    <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 4, marginLeft: 2, }}>\r\n                        ({`${Number(\r\n                            totalPriceCalculation /\r\n                            ((selectedChatData && selectedChatData.jpyToUsd) ? Number(selectedChatData.jpyToUsd) :\r\n                                (selectedChatData && selectedChatData.currency && selectedChatData.currency.jpyToUsd) ? selectedChatData.currency.jpyToUsd :\r\n                                    0)\r\n                        ).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontWeight: 700, }}>FOB Price: </Text>\r\n                    <Text selectable style={{ fontWeight: 700, color: \"#8D7777\", textAlign: 'right', }}>\r\n                        {`${Number(fobPriceDollars).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                    </Text>\r\n                    <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 2, marginLeft: 2, }}>\r\n                        ({`${(selectedChatData.fobPrice ? selectedChatData.fobPrice : Number(selectedChatData.carData && selectedChatData.carData.fobPrice ? selectedChatData.carData.fobPrice : 0)).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontWeight: 700, }}>Freight Price: </Text>\r\n                    <Text selectable style={{ fontWeight: 700, color: \"#8D7777\", textAlign: 'right', }}>\r\n                        {`${Number(freightCalculation).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                    </Text>\r\n                    <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 2, marginLeft: 2, }}>\r\n                        ({`${(selectedChatData.freightPrice ? freightPriceYen : Number(selectedChatData.carData && selectedChatData.carData.freightPrice ? freightPriceYen : 0)).toLocaleString('en-US', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text selectable style={{ fontWeight: 700, textAlign: 'right', }}>\r\n                        {`${selectedChatData.country && selectedChatData.port ? `${selectedChatData.country} / ${selectedChatData.port}` : 'N/A'}`}\r\n                    </Text>\r\n                </View>\r\n\r\n                <View style={{ flexDirection: 'row', }}>\r\n                    <Text style={{ fontWeight: 700, color: \"#16A34A\", }}>{selectedChatData.insurance ? 'CIF' : 'C&F'}\r\n                        {selectedChatData.inspection ? ` + Inpection[${selectedChatData.inspectionName}]` : ''}</Text>\r\n                </View>\r\n            </View>\r\n\r\n            <View style={{ paddingLeft: 10, paddingRight: 10, paddingTop: 2, }}>\r\n                {(selectedChatData.stepIndicator.value == 1 || selectedChatData.stepIndicator.value == 2) &&\r\n                    <>\r\n                        <ProfitCalculator />\r\n\r\n                        <TransactionButton\r\n                            key={'Issue Proforma Invoice'}\r\n                            title={selectedChatData.stepIndicator.value == 1 ? 'Issue Proforma Invoice' : selectedChatData.stepIndicator.value == 2 ? 'Update Invoice' : ''}\r\n                            colorHoverIn={'#0f7534'}\r\n                            colorHoverOut={'#16A34A'}\r\n                            transactionValue={2}\r\n                            buttonValue={2}\r\n                            iconActive={<FontAwesome5 name=\"file-invoice-dollar\" color=\"#1C2B33\" size={14} />} />\r\n\r\n                        <PreviewInvoice />\r\n\r\n                        <View style={{ flexDirection: 'row' }}>\r\n                            <Text style={{ fontWeight: 700, fontSize: 18 }}>Final Price: </Text>\r\n                            <Text selectable style={{ fontWeight: 700, fontSize: 18, color: \"#FF0000\", textAlign: 'right' }}>\r\n                                {`$${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount ? Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                            </Text>\r\n                            <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 4, marginLeft: 2 }}>\r\n                                ({`${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount && selectedChatData && selectedChatData.currency && selectedChatData.currency.jpyToUsd ? (Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) / Number(selectedChatData.currency.jpyToUsd)) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                            </Text>\r\n                        </View>\r\n                    </>\r\n                }\r\n\r\n                {(selectedChatData.stepIndicator.value == 3) &&\r\n\r\n                    <View style={{ flexDirection: 'row', paddingRight: 10, paddingTop: 2, }}>\r\n\r\n                        <View style={{ paddingLeft: 10, }}>\r\n                            <ProfitCalculator />\r\n\r\n                            <TransactionButton\r\n                                key={'Input Payment'}\r\n                                title={'Input Payment'}\r\n                                colorHoverOut={'#FF0000'}\r\n                                colorHoverIn={'#800101'}\r\n                                transactionValue={3}\r\n                                buttonValue={4}\r\n                                iconActive={<FontAwesome5 name=\"file-invoice-dollar\" color=\"#1C2B33\" size={14} />} />\r\n\r\n\r\n                            <PreviewInvoice />\r\n\r\n                            <View style={{ flexDirection: 'row' }}>\r\n                                <Text style={{ fontWeight: 700, fontSize: 18 }}>Final Price: </Text>\r\n                                <Text selectable style={{ fontWeight: 700, fontSize: 18, color: \"#FF0000\", textAlign: 'right' }}>\r\n                                    {`$${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount ? Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`}\r\n                                </Text>\r\n                                <Text selectable style={{ fontWeight: 400, fontSize: 12, color: \"#8D7777\", paddingTop: 4, marginLeft: 2 }}>\r\n                                    ({`${(invoiceData && invoiceData.paymentDetails && invoiceData.paymentDetails.totalAmount && selectedChatData && selectedChatData.currency && selectedChatData.currency.jpyToUsd ? (Number(invoiceData.paymentDetails.totalAmount.replace(/,/g, '')) / Number(selectedChatData.currency.jpyToUsd)) : 0).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`})\r\n                                </Text>\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View style={{ paddingLeft: 10, }}>\r\n\r\n                            <TransactionButton\r\n                                key={'Issue Proforma Invoice'}\r\n                                title={selectedChatData.stepIndicator.value == 1 ? 'Issue Proforma Invoice' : 'Update Invoice'}\r\n                                colorHoverIn={'#0f7534'}\r\n                                colorHoverOut={'#16A34A'}\r\n                                transactionValue={2}\r\n                                buttonValue={2}\r\n                                iconActive={<FontAwesome5 name=\"file-invoice-dollar\" color=\"#1C2B33\" size={14} />} />\r\n\r\n                            <ExtendDueDateButton />\r\n\r\n                            <View style={{ flexDirection: 'row', }}>\r\n                                {invoiceData && invoiceData.bankInformations && invoiceData.bankInformations.dueDate &&\r\n                                    <>\r\n                                        <Text style={{ fontWeight: 700, fontSize: 14, }}>Due Date: </Text>\r\n                                        <Text selectable style={{ fontWeight: 700, fontSize: 14, textAlign: 'right', color: '#FF0000', }}>\r\n                                            {\r\n                                                invoiceData.bankInformations.dueDate\r\n                                                    ? new Date(invoiceData.bankInformations.dueDate).toLocaleDateString(undefined, {\r\n                                                        year: 'numeric',\r\n                                                        month: 'long',\r\n                                                        day: 'numeric',\r\n                                                    })\r\n                                                    : 'Invalid Date'\r\n                                            }\r\n                                        </Text>\r\n                                    </>}\r\n                            </View>\r\n\r\n                        </View>\r\n                    </View>\r\n\r\n                }\r\n\r\n            </View>\r\n            <TransactionModal />\r\n        </View>\r\n    );\r\n};\r\n\r\n\r\nconst ReadByListModal = ({ userEmail, handleReadByListModalClose }) => {\r\n\r\n    const readByListModalVisible = useSelector((state) => state.readByListModalVisible)\r\n    const selectedChatData = useSelector((state) => state.selectedChatData)\r\n    // const [email, setEmail] = useState(projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '');\r\n\r\n    const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={readByListModalVisible}\r\n            onClose={() => handleReadByListModalClose()}\r\n            useRNModal\r\n            size={'xs'}\r\n        >\r\n            <Modal.Content borderRadius={0} style={{ padding: 15, backgroundColor: '#f8f8f8', shadowColor: '#000', shadowOffset: { width: 0, height: 2 }, shadowOpacity: 0.25, shadowRadius: 3.84, elevation: 5 }}>\r\n                <Modal.CloseButton />\r\n                <Modal.Header style={{ fontSize: 22, fontWeight: '600', textAlign: 'center', color: '#333', }}>Read List</Modal.Header>\r\n\r\n                <Modal.Body>\r\n                    {\r\n                        selectedChatData.readBy.length > 0 ? (\r\n                            <ScrollView style={{ maxHeight: 250, borderRadius: 10 }}>\r\n                                {/* Sort and map over the readBy list */}\r\n                                {\r\n                                    [...selectedChatData.readBy]\r\n                                        .sort((a, b) => a === email ? -1 : b === email ? 1 : 0)\r\n                                        .map(item => (\r\n                                            <View key={item} style={{ flexDirection: 'row', alignItems: 'center', marginVertical: 8, borderBottomWidth: 0.5, borderColor: '#ddd', paddingBottom: 8 }}>\r\n                                                <FontAwesome name=\"user-circle\" size={24} color=\"#4A90E2\" style={{ marginRight: 12 }} />\r\n                                                <Text style={{ flex: 1, color: '#555' }}>{email === item ? 'You' : item}</Text>\r\n                                            </View>\r\n                                        ))\r\n                                }\r\n                            </ScrollView>\r\n                        ) : (\r\n                            <Text style={{ textAlign: 'center', color: 'grey', fontSize: 16 }}>No one has read this message yet.</Text>\r\n                        )\r\n                    }\r\n                </Modal.Body>\r\n            </Modal.Content>\r\n        </Modal>\r\n\r\n    );\r\n}\r\n\r\nconst ImagePreviewModal = ({ isVisible, onClose, imageUrl }) => {\r\n    return (\r\n        <Modal isOpen={isVisible} onClose={onClose} size=\"full\" useRNModal>\r\n            <Modal.Content\r\n                style={{\r\n                    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n                    width: '80%',\r\n                    height: '80%',\r\n                    alignSelf: 'center',\r\n                    justifyContent: 'center',\r\n                }}>\r\n                <Modal.CloseButton />\r\n                <FastImage\r\n                    source={{ uri: imageUrl, priority: FastImage.priority.normal }}\r\n                    style={{ width: '100%', height: '100%', borderRadius: 10 }}\r\n                    resizeMode={FastImage.resizeMode.contain}\r\n                />\r\n            </Modal.Content>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nconst ChatMessageBox = ({ activeButtonValue, userEmail }) => {\r\n    const chatListData = useSelector((state) => state.chatListData);\r\n    const chatMessagesData = useSelector((state) => state.chatMessagesData);\r\n    const selectedChatData = useSelector((state) => state.selectedChatData);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n    const loadMoreMessagesLoading = useSelector((state) => state.loadMoreMessagesLoading);\r\n    const noMoreMessagesData = useSelector((state) => state.noMoreMessagesData);\r\n    const [isEyeHovered, setIsEyeHovered] = useState(false);\r\n    const flatListRef = useRef();\r\n    const [hoveredImageIndex, setHoveredImageIndex] = useState(null);\r\n\r\n    const [selectedImageIndex, setSelectedImageIndex] = useState(null);\r\n    const [isPreviewVisible, setIsPreviewVisible] = useState(false);\r\n\r\n    const openPreview = (index) => {\r\n        setSelectedImageIndex(index);\r\n        setIsPreviewVisible(true);\r\n    };\r\n\r\n    const closePreview = () => {\r\n        setIsPreviewVisible(false);\r\n        setSelectedImageIndex(null);\r\n    };\r\n\r\n\r\n    const handleImageMessageMouseEnter = (index) => {\r\n        setHoveredImageIndex(index);\r\n    };\r\n\r\n    const handleImageMessageMouseLeave = () => {\r\n        setHoveredImageIndex(null);\r\n    };\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [read, setRead] = useState(selectedChatData.read);\r\n\r\n    const handleReadByListModalOpen = () => {\r\n        dispatch(setReadByListModalVisible(true));\r\n    };\r\n\r\n    const handleReadByListModalClose = () => {\r\n        dispatch(setReadByListModalVisible(false));\r\n    };\r\n\r\n    const animatedValue = useRef(new Animated.Value(0)).current;\r\n\r\n    useEffect(() => {\r\n        Animated.loop(\r\n            Animated.sequence([\r\n                Animated.timing(animatedValue, {\r\n                    toValue: 1,\r\n                    duration: 2000,\r\n                    useNativeDriver: false\r\n                }),\r\n                Animated.timing(animatedValue, {\r\n                    toValue: 0,\r\n                    duration: 2000,\r\n                    useNativeDriver: false\r\n                })\r\n            ])\r\n        ).start();\r\n    }, [animatedValue]);\r\n\r\n    const borderColor = animatedValue.interpolate({\r\n        inputRange: [0, 0.25, 0.5, 0.75, 1],\r\n        outputRange: [\r\n            'rgb(255, 100, 100)', // Red\r\n            'rgb(100, 255, 100)', // Green\r\n            'rgb(100, 100, 255)', // Blue\r\n            'rgb(255, 255, 100)', // Yellow\r\n            'rgb(255, 100, 255)'  // Magenta\r\n        ]\r\n    });\r\n\r\n    const renderFooter = () => {\r\n        return (\r\n            <>\r\n                {!noMoreMessagesData && (\r\n                    <View style={{ paddingVertical: 20, height: 60, }}>\r\n                        {loadMoreMessagesLoading && (\r\n                            <Spinner\r\n                                animating\r\n                                size=\"sm\"\r\n                                color={'#7B9CFF'}\r\n                            />\r\n                        )}\r\n                    </View>\r\n                )}\r\n            </>\r\n\r\n\r\n        );\r\n    };\r\n\r\n    const handleLoadMoreMessages = async () => {\r\n        dispatch(setLoadMoreMessagesLoading(true));\r\n        dispatch(setNoMoreMessagesData(false));\r\n\r\n        let nextQuery;\r\n        if (!globalMessagesLastVisible) {\r\n            // No more data to load or globalLastVisible is undefined\r\n            dispatch(setLoadMoreMessagesLoading(false));\r\n            dispatch(setNoMoreMessagesData(true));\r\n        }\r\n\r\n        else {\r\n            dispatch(setLoadMoreMessagesLoading(true));\r\n            dispatch(setNoMoreMessagesData(false));\r\n\r\n            nextQuery = query(\r\n                collection(projectExtensionFirestore, 'chats', selectedChatData.id, 'messages'),\r\n                orderBy('timestamp', 'desc'),\r\n                startAfter(globalMessagesLastVisible),\r\n                limit(10)\r\n            );\r\n            try {\r\n                const unsubscribe = onSnapshot(nextQuery, (snapshot) => {\r\n                    if (snapshot.empty) {\r\n                        // Handle the case when there's no more data\r\n                        console.log(\"No more data to load\");\r\n                        setTimeout(() => {\r\n                            dispatch(setLoadMoreMessagesLoading(false));\r\n                            dispatch(setNoMoreMessagesData(true));\r\n                            globalMessagesLastVisible = null;\r\n                        }, 0);  // Delay setting loading and no more data flags\r\n                        return;\r\n                    }\r\n\r\n                    const chatsData = [];\r\n                    snapshot.forEach((doc) => {\r\n                        chatsData.push({\r\n                            id: doc.id,\r\n                            ...doc.data(),\r\n                        });\r\n                    });\r\n\r\n\r\n                    // Append new data to the existing list\r\n\r\n                    setTimeout(() => {\r\n                        dispatch(setChatMessagesData([...chatMessagesData, ...chatsData]));\r\n                        dispatch(setLoadMoreMessagesLoading(false));\r\n                        globalMessagesLastVisible = snapshot.docs[snapshot.docs.length - 1];\r\n                    }, 0);\r\n\r\n                });\r\n\r\n                return unsubscribe;\r\n            } catch (error) {\r\n                console.error('Error fetching data from Firebase:', error);\r\n                setTimeout(() => dispatch(setLoadMoreMessagesLoading(false)), 0);  // Ensure loading is set to false even if there's an error\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    const updateChatToRead = async () => {\r\n        const email = projectControlAuth.currentUser ? projectControlAuth.currentUser.email : '';\r\n        const docRef = doc(projectExtensionFirestore, \"chats\", activeChatId);\r\n        if (email !== '') {\r\n            try {\r\n\r\n                await updateDoc(docRef, {\r\n                    read: true,\r\n                    readBy: arrayUnion(email),\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error updating document: \", error);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (activeChatId == selectedChatData.id) {\r\n            if (selectedChatData.stepIndicator.value !== activeButtonValue && activeButtonValue !== 0) {\r\n                dispatch(setChatMessagesData([]));\r\n                dispatch(setActiveChatId(''));\r\n            }\r\n            else {\r\n                updateChatToRead();\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }, [selectedChatData]);\r\n\r\n    const handlePreviewInvoiceModalOpen = () => {\r\n        dispatch(setPreviewInvoiceVisible(true));\r\n    };\r\n\r\n    const formatDate = (timestamp) => {\r\n        // Parse the original timestamp\r\n        // Expected format: \"2024/01/15 at 12:17:50\"\r\n        const parts = timestamp.match(/(\\d{4})\\/(\\d{2})\\/(\\d{2}) at (\\d{2}):(\\d{2}):(\\d{2})/);\r\n        if (!parts) return timestamp; // Return original if parsing fails\r\n\r\n        // Create a new Date object\r\n        const date = new Date(parts[1], parts[2] - 1, parts[3], parts[4], parts[5], parts[6]);\r\n\r\n        // Format month names\r\n        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\n        // Convert to 12-hour format and determine AM or PM\r\n        const hours = date.getHours();\r\n        const isPM = hours >= 12;\r\n        const formattedHours = hours % 12 || 12; // Convert 0 to 12 for 12 AM\r\n        const amPm = isPM ? 'PM' : 'AM';\r\n\r\n        // Construct the new format with year at the beginning\r\n        return `${date.getFullYear().toString().substr(-2)} ${months[date.getMonth()]} ${date.getDate()}, ${formattedHours}:${date.getMinutes().toString().padStart(2, '0')} ${amPm}`;\r\n    };\r\n\r\n    const extractUsernameFromEmail = (email) => {\r\n        const [username] = email.split('@');\r\n        return username;\r\n    };\r\n\r\n\r\n    const breakUrl = (url, maxUrlLength = 30) => {\r\n        let brokenUrl = '';\r\n        while (url.length > 0) {\r\n            brokenUrl += url.substring(0, maxUrlLength);\r\n            if (url.length > maxUrlLength) {\r\n                brokenUrl += '\\u200B'; // Zero-width space\r\n            }\r\n            url = url.substring(maxUrlLength);\r\n        }\r\n        return brokenUrl;\r\n    };\r\n\r\n    const isUrl = (text) => {\r\n        // Simple URL check\r\n        const urlPattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\r\n            '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\r\n            '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\r\n            '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\r\n            '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\r\n            '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\r\n        return !!urlPattern.test(text);\r\n    };\r\n\r\n    const handleLinkPress = (url) => {\r\n        Linking.canOpenURL(url).then(supported => {\r\n            if (supported) {\r\n                Linking.openURL(url);\r\n            } else {\r\n                console.log(\"Don't know how to open URI: \" + url);\r\n            }\r\n        });\r\n    };\r\n\r\n    const cleanUrl = (url) => {\r\n        // Removing Zero Width Space and other potential invisible characters\r\n        return url.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\r\n    };\r\n\r\n\r\n    const renderItemText = (isGlobalCustomerSender, text) => {\r\n        const urlPattern = new RegExp('(https?:\\\\/\\\\/[^\\\\s]+)', 'g');\r\n        let segments = text.split(urlPattern);\r\n\r\n        const insertBreaks = (str, n) => {\r\n            // Inserts a zero-width space every 'n' characters in 'str'\r\n            let result = '';\r\n            while (str.length > 0) {\r\n                result += str.substring(0, n) + '\\u200B';\r\n                str = str.substring(n);\r\n            }\r\n            return result;\r\n        };\r\n\r\n        return segments.map((segment, index) => {\r\n            const segmentWithBreaks = segment.length > 30 && !segment.includes(' ') ? insertBreaks(segment, 30) : segment;\r\n\r\n            if (isUrlForText(segment)) {\r\n                // Apply breaks for long URLs\r\n                return (\r\n                    <Pressable key={index} onPress={() => handleLinkPress(segment)}>\r\n                        <Text\r\n                            selectable\r\n                            style={{\r\n                                fontWeight: '400',\r\n                                color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                fontSize: 16,\r\n                                flexShrink: 1,\r\n                                textDecorationLine: 'underline',\r\n                                flexWrap: 'wrap',\r\n                            }}\r\n                        >\r\n                            {segmentWithBreaks}\r\n                        </Text>\r\n                    </Pressable>\r\n                );\r\n            } else {\r\n                return (\r\n                    <Text\r\n                        selectable\r\n                        key={index}\r\n                        style={{\r\n                            fontWeight: '400',\r\n                            color: isGlobalCustomerSender ? 'black' : 'white',\r\n                            fontSize: 16,\r\n                            flexShrink: 1,\r\n                            flexWrap: 'wrap',\r\n                        }}\r\n                    >\r\n                        {segmentWithBreaks}\r\n                    </Text>\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n\r\n    const getFileIcon = (fileName) => {\r\n        const iconSize = 24;\r\n        const lowerFileName = fileName.toLowerCase();\r\n\r\n        if (lowerFileName.endsWith('.pdf')) {\r\n            return <MaterialIcons name={'picture-as-pdf'} size={iconSize} color=\"white\" />;\r\n        }\r\n        // Add more conditions for other file types as needed\r\n        // Example for .docx files\r\n        if (lowerFileName.endsWith('.docx') || lowerFileName.endsWith('.doc')) {\r\n            return <MaterialCommunityIcons name={'microsoft-word'} size={iconSize} color=\"white\" />;\r\n        }\r\n        if (lowerFileName.endsWith('.xlsx') || lowerFileName.endsWith('.xls')) {\r\n            return <MaterialCommunityIcons name={'microsoft-excel'} size={iconSize} color=\"white\" />;\r\n        }\r\n\r\n        if (lowerFileName.endsWith('.rar') || lowerFileName.endsWith('.zip')) {\r\n            return <FastImage\r\n                source={{ uri: require('../../assets/rar_icon.png'), priority: FastImage.priority.high }}\r\n                style={{\r\n                    width: iconSize,\r\n                    height: iconSize,\r\n                }}\r\n                resizeMode={FastImage.resizeMode.cover}\r\n            />;;\r\n        }\r\n        // Default icon if no specific type is matched\r\n        return <MaterialIcons name=\"insert-drive-file\" size={iconSize} color=\"black\" />;\r\n    };\r\n\r\n    const isUrlForText = (text) => {\r\n        const urlPattern = new RegExp('^(http://www\\\\.|https://www\\\\.|http://|https://)[a-z0-9]+([\\\\-\\\\.]{1}[a-z0-9]+)*\\\\.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$');\r\n        return urlPattern.test(text);\r\n    }\r\n\r\n    const renderItem = ({ item, index }) => {\r\n        const isGlobalCustomerSender = item.sender === globalCustomerId;\r\n        const isLastMessage = index === 0; // Since the list is inverted, the first item is actually the last message\r\n        const isHovered = hoveredImageIndex === index;\r\n\r\n\r\n        return (\r\n            <View style={{\r\n                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                width: '100%',\r\n                alignSelf: isGlobalCustomerSender ? 'flex-start' : 'flex-end',\r\n                marginVertical: 4,\r\n                maxWidth: '60%', // Max width for long messages\r\n                // borderWidth: 1,\r\n                // borderColor: 'red',\r\n            }}>\r\n                {item.messageType == 'IssuedInvoice' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: 'flex-end', flex: 1 }}>\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <Animated.View style={{\r\n                                padding: 7,\r\n                                flex: 1,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                borderWidth: 3,\r\n                                borderColor: borderColor,\r\n                            }}>\r\n                                <Pressable onPress={handlePreviewInvoiceModalOpen}>\r\n                                    <Text underline selectable style={{\r\n                                        fontWeight: 400,\r\n                                        color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                        fontSize: 16,\r\n                                    }}>\r\n                                        {item.text.trim()}\r\n                                    </Text>\r\n                                </Pressable>\r\n                            </Animated.View>\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp, sender email, IP, and country */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n                    </View>\r\n                }\r\n\r\n\r\n                {item.messageType == 'InputPayment' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: 'flex-end', flex: 1 }}>\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <Animated.View style={{\r\n                                padding: 7,\r\n                                flex: 1,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                borderWidth: 3,\r\n                                borderColor: borderColor,\r\n                            }}>\r\n                                <Text selectable style={{\r\n                                    fontWeight: 400,\r\n                                    color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                    fontSize: 16,\r\n                                }}>\r\n                                    {item.text.trim()}\r\n                                </Text>\r\n                            </Animated.View>\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp, sender email, IP, and country */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n                    </View>\r\n                }\r\n\r\n\r\n                {!item.messageType && item.file && item.file.type == 'attachment' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: isGlobalCustomerSender ? 'flex-start' : 'flex-end', flex: 1 }}>\r\n                        {item.text && item.text !== '' &&\r\n                            <View style={{\r\n                                marginBottom: 5,\r\n                                padding: 10,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                flexShrink: 1,\r\n                            }}>\r\n                                {renderItemText(isGlobalCustomerSender, item.text.trim())}\r\n                            </View>\r\n                        }<View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n\r\n                            <View style={{\r\n                                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                                flex: 1,\r\n                            }}>\r\n\r\n                                <View style={{\r\n                                    marginBottom: 5,\r\n                                    padding: 10,\r\n                                    borderRadius: 20,\r\n                                    backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                    marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                    flexShrink: 1,\r\n                                }}>\r\n                                    <Pressable\r\n                                        onPress={() => {\r\n                                            Linking.openURL(item.file.url).catch((err) => console.error(\"Couldn't load page\", err));\r\n                                        }}\r\n                                        style={{ flexDirection: 'row', }}\r\n                                    >\r\n                                        <View style={{ marginRight: 5, }}>\r\n                                            {getFileIcon(item.file.name)}\r\n                                        </View>\r\n\r\n                                        <Text underline selectable style={{\r\n                                            fontWeight: 400,\r\n                                            color: isGlobalCustomerSender ? 'black' : 'white',\r\n                                            fontSize: 16,\r\n                                        }}>\r\n                                            {item.file.name.trim()}\r\n                                        </Text>\r\n                                    </Pressable>\r\n                                </View>\r\n                            </View>\r\n\r\n\r\n                            {/* Display read status text outside of the message bubble */}\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp and sender */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n\r\n                    </View>}\r\n\r\n\r\n\r\n\r\n                {!item.messageType && item.file && item.file.type == 'image' &&\r\n                    <View style={{ flexDirection: 'column', alignItems: isGlobalCustomerSender ? 'flex-start' : 'flex-end', flex: 1 }}>\r\n                        {item.text && item.text !== '' &&\r\n                            <View style={{\r\n                                marginBottom: 5,\r\n                                padding: 10,\r\n                                borderRadius: 20,\r\n                                backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                flexShrink: 1,\r\n                            }}>\r\n                                {renderItemText(isGlobalCustomerSender, item.text.trim())}\r\n                            </View>\r\n                        }<View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n\r\n                            <View style={{\r\n                                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                                flex: 1,\r\n                            }}>\r\n\r\n                                <View style={{\r\n                                    padding: 0,\r\n                                    borderRadius: 10,\r\n                                    marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                    flexShrink: 1,\r\n                                }}>\r\n\r\n                                    <Pressable\r\n                                        onMouseEnter={() => handleImageMessageMouseEnter(index)}\r\n                                        onMouseLeave={handleImageMessageMouseLeave}\r\n                                        onPress={() => openPreview(index)}\r\n                                        style={{\r\n                                            position: 'relative', // Ensure relative positioning for the overlay\r\n                                            width: 250,\r\n                                            height: 250,\r\n                                            alignSelf: 'center',\r\n                                        }}\r\n                                    >\r\n                                        <FastImage\r\n                                            source={{ uri: item.file.url, priority: FastImage.priority.normal }}\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                height: '100%',\r\n                                                borderRadius: 10,\r\n                                                borderWidth: 1,\r\n                                                borderColor: '#DADDE1',\r\n                                            }}\r\n                                            resizeMode={FastImage.resizeMode.contain}\r\n                                        />\r\n                                        {isHovered && (\r\n                                            <View style={{\r\n                                                ...StyleSheet.absoluteFillObject, // Make overlay cover the entire image\r\n                                                backgroundColor: 'rgba(0, 0, 0, 0.1)', // Semi-transparent black\r\n                                                borderRadius: 10, // Match the border radius of the image\r\n                                            }} />\r\n                                        )}\r\n                                    </Pressable>\r\n                                </View>\r\n                            </View>\r\n\r\n\r\n                            {/* Display read status text outside of the message bubble */}\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp and sender */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n\r\n                    </View>}\r\n\r\n                {!item.messageType && !item.file &&\r\n                    <View style={{ flexDirection: 'column', alignItems: isGlobalCustomerSender ? 'flex-start' : 'flex-end', flex: 1 }}>\r\n                        <View style={{ flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse', flex: 1, }}>\r\n                            <View style={{\r\n                                flexDirection: isGlobalCustomerSender ? 'row' : 'row-reverse',\r\n                                flex: 1,\r\n                            }}>\r\n                                <View style={{\r\n                                    padding: 10,\r\n                                    borderRadius: 20,\r\n                                    backgroundColor: isGlobalCustomerSender ? '#EFEFEF' : '#0A7CFF',\r\n                                    marginLeft: isGlobalCustomerSender ? 10 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 10,\r\n                                    flexShrink: 1,\r\n                                }}>\r\n                                    {renderItemText(isGlobalCustomerSender, item.text.trim())}\r\n                                </View>\r\n                            </View>\r\n\r\n                            {/* Display read status text outside of the message bubble */}\r\n                            {isLastMessage && selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Already read by the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail-open\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n\r\n                            {isLastMessage && !selectedChatData.customerRead && !isGlobalCustomerSender && (\r\n                                <Tooltip label=\"Message sent to the customer\" openDelay={200} bgColor={'#FAFAFA'} _text={{ color: '#1C2B33', }}>\r\n                                    <View style={{\r\n                                        alignSelf: 'flex-end',\r\n                                        marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                        marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                        alignSelf: 'center',\r\n                                    }}>\r\n                                        <Ionicons name=\"mail\" size={20} color={'#1B81C2'} />\r\n                                    </View>\r\n                                </Tooltip>\r\n                            )}\r\n                            {isLastMessage && selectedChatData.readBy.length > 0 && (\r\n                                <View style={{\r\n                                    alignSelf: 'flex-end',\r\n                                    marginLeft: isGlobalCustomerSender ? 8 : 0,\r\n                                    marginRight: isGlobalCustomerSender ? 0 : 8,\r\n                                    alignSelf: 'center',\r\n                                }}>\r\n                                    <Pressable\r\n                                        focusable={false}\r\n                                        onHoverIn={() => setIsEyeHovered(true)}\r\n                                        onHoverOut={() => setIsEyeHovered(false)}\r\n                                        onPress={handleReadByListModalOpen}\r\n\r\n                                    >\r\n                                        <Entypo name=\"eye\" size={20} color={isEyeHovered ? '#c5d1ce' : '#75A99C'} />\r\n                                    </Pressable>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n\r\n                        {/* Additional message properties like timestamp and sender */}\r\n                        <Text style={{\r\n                            fontWeight: '300',\r\n                            color: 'gray',\r\n                            fontSize: 11,\r\n                            marginTop: 4,\r\n                            marginBottom: 4,\r\n                            marginLeft: isGlobalCustomerSender ? 15 : 0,\r\n                            marginRight: isGlobalCustomerSender ? 0 : 15,\r\n                        }}\r\n                            selectable>\r\n                            {!isGlobalCustomerSender ?\r\n                                (`${formatDate(item.timestamp)} - ${extractUsernameFromEmail(item.sender)}${item.ip ? ` - ${item.ip}` : ''}${item.ipCountry ? ` - ${item.ipCountry}` : ''}`)\r\n                                : (`${formatDate(item.timestamp)}${item.ip ? ` - ${item.ip}${item.ipCountry ? ` - ${item.ipCountry}` : ''}` : ''}`)\r\n                            }\r\n                        </Text>\r\n\r\n                    </View>}\r\n\r\n            </View>\r\n        );\r\n    };\r\n\r\n\r\n    return (\r\n        chatMessagesData.length > 0 ? (\r\n            <>\r\n                <FlatList\r\n                    ref={flatListRef}\r\n                    data={chatMessagesData}\r\n                    renderItem={renderItem}\r\n                    keyExtractor={item => item.id}\r\n                    initialNumToRender={10} // Adjust based on your average message size and performance\r\n                    maxToRenderPerBatch={10}\r\n                    windowSize={500}\r\n                    onEndReachedThreshold={0.05}\r\n                    ListFooterComponent={renderFooter}\r\n                    onEndReached={handleLoadMoreMessages}\r\n                    inverted\r\n                />\r\n                {selectedImageIndex !== null && (\r\n                    <ImagePreviewModal\r\n                        isVisible={isPreviewVisible}\r\n                        onClose={closePreview}\r\n                        imageUrl={chatMessagesData[selectedImageIndex].file.url}\r\n                    />\r\n                )}\r\n                <ReadByListModal userEmail={userEmail} handleReadByListModalClose={handleReadByListModalClose} />\r\n            </>\r\n        ) : null\r\n    );\r\n};\r\n\r\n\r\n\r\nexport default function ChatMessages() {\r\n\r\n    const [email, setEmail] = useState('');\r\n    const navigation = useNavigation();\r\n    const chatListData = useSelector((state) => state.chatListData);\r\n    const activeChatId = useSelector((state) => state.activeChatId);\r\n    const chatMessageBoxLoading = useSelector((state) => state.chatMessageBoxLoading);\r\n    const chatListSearchText = useSelector((state) => state.chatListSearchText);\r\n    const chatMessagesData = useSelector((state) => state.chatMessagesData);\r\n    const loginName = useSelector((state) => state.loginName);\r\n\r\n    const [name, setName] = useState(loginName);\r\n\r\n    const screenWidth = Dimensions.get('window').width;\r\n\r\n    const [activeButton, setActiveButton] = useState('All messages');\r\n    const [activeButtonValue, setActiveButtonValue] = useState(0);\r\n\r\n    const [activeFilterButton, setActiveFilterButton] = useState('');\r\n    const [unreadButtonValue, setUnreadButtonValue] = useState(false);\r\n    const [readButtonValue, setReadButtonValue] = useState(false);\r\n    const [lastVisible, setLastVisible] = useState(null);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchIpAndCountry = async () => {\r\n            try {\r\n                dispatch(setChatMessageBoxLoading(true));\r\n                // Fetch IP Address\r\n                const ipResponse = await axios.get('https://api.ipify.org?format=json');\r\n                const fetchedIp = ipResponse.data.ip;\r\n                ip = fetchedIp;\r\n\r\n                // Fetch IP Country\r\n                if (fetchedIp) {\r\n                    const countryResponse = await axios.get(`https://ipapi.co/${fetchedIp}/json/`);\r\n                    const fetchedIpCountry = countryResponse.data.country_name;\r\n                    ipCountry = fetchedIpCountry;\r\n                    dispatch(setChatMessageBoxLoading(false));\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching IP data:', error);\r\n            }\r\n        };\r\n        const collectionRef = collection(projectExtensionFirestore, 'chats'); // Replace with your collection name\r\n        const unrepliedQuery = query(\r\n            collectionRef,\r\n            where('read', '==', false),\r\n            limit(10) // Limit the query to 10 documents\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(unrepliedQuery, (querySnapshot) => {\r\n            setUnreadCount(querySnapshot.size); // Update state with the new count\r\n            fetchIpAndCountry();\r\n\r\n        }, (error) => {\r\n            console.error(\"Error fetching documents: \", error);\r\n        });\r\n\r\n\r\n\r\n        // Clean up function to unsubscribe from the listener when the component unmounts\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const handlePress = (buttonTitle, buttonTitleValue) => {\r\n        if (activeButton == buttonTitle) {\r\n        }\r\n        else {\r\n            setActiveButton(buttonTitle);\r\n            setActiveButtonValue(buttonTitleValue);\r\n            setActiveFilterButton('');\r\n            setUnreadButtonValue(false);\r\n\r\n            dispatch(setActiveChatId(''));\r\n\r\n            dispatch(setLoadMoreLoading(false));\r\n            dispatch(setNoMoreData(false));\r\n        }\r\n    };\r\n\r\n\r\n    const handleUnreadPress = (buttonTitle) => {\r\n\r\n        setActiveFilterButton(prevState => prevState === buttonTitle ? '' : buttonTitle);\r\n        setUnreadButtonValue(prevState => !prevState);\r\n        setReadButtonValue(false);\r\n    };\r\n\r\n    const handleReadPress = (buttonTitle) => {\r\n\r\n        setActiveFilterButton(prevState => prevState === buttonTitle ? '' : buttonTitle);\r\n        setReadButtonValue(prevState => !prevState);\r\n        setUnreadButtonValue(false);\r\n\r\n    };\r\n\r\n\r\n    //Main fetch\r\n    useEffect(() => {\r\n        let queryRef;\r\n\r\n        dispatch(setChatMessagesData([]));\r\n        dispatch(setChatMessageBoxLoading(false));\r\n        dispatch(setActiveChatId(''));\r\n\r\n        // Helper function to build the query\r\n        const buildQuery = () => {\r\n            const searchValue = chatListSearchText.toUpperCase();\r\n\r\n            if (unreadButtonValue) {\r\n                if (activeButtonValue === 0) {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', false), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', false), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                } else {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', false), where('stepIndicator.value', '==', activeButtonValue), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), where('read', '==', false), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                }\r\n            }\r\n            else if (readButtonValue) {\r\n                if (activeButtonValue === 0) {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', true), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', true), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                } else {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('read', '==', true), where('stepIndicator.value', '==', activeButtonValue), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), where('read', '==', true), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                }\r\n            }\r\n            else {\r\n                if (activeButtonValue === 0) {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                } else {\r\n                    return searchValue === '' ?\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), orderBy('lastMessageDate', 'desc'), limit(10)) :\r\n                        query(collection(projectExtensionFirestore, 'chats'), where('stepIndicator.value', '==', activeButtonValue), where('keywords', 'array-contains', searchValue), orderBy('lastMessageDate', 'desc'), limit(10));\r\n                }\r\n            }\r\n        };\r\n\r\n        // Build and execute the query\r\n        queryRef = buildQuery();\r\n\r\n        const unsubscribe = onSnapshot(queryRef, (snapshot) => {\r\n            const chatsData = [];\r\n            snapshot.forEach((doc) => {\r\n                chatsData.push({\r\n                    id: doc.id,\r\n                    ...doc.data(),\r\n                });\r\n            });\r\n\r\n            dispatch(setChatListData(chatsData));\r\n            globalLastVisible = snapshot.docs[snapshot.docs.length - 1];\r\n            dispatch(setNoMoreData(false));\r\n            dispatch(setLoadMoreLoading(false));\r\n            dispatch(setLoadingModalVisible(false));\r\n\r\n        }, (error) => {\r\n            console.error('Error fetching data from Firebase:', error);\r\n        });\r\n\r\n        // Cleanup function\r\n        return () => {\r\n            if (unsubscribe) {\r\n                unsubscribe();\r\n            }\r\n        };\r\n    }, [unreadButtonValue, readButtonValue, activeButtonValue, chatListSearchText]);\r\n\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = projectControlAuth.onAuthStateChanged(user => {\r\n            if (!user) {\r\n                navigation.navigate(\"Login\")\r\n            }\r\n\r\n        })\r\n\r\n        return unsubscribe\r\n    }, [])\r\n\r\n\r\n    const handleDocumentChange = (snapshot) => {\r\n        if (snapshot.exists()) {\r\n            const data = snapshot.data();\r\n            const isActive = data.active;\r\n\r\n            if (!isActive) {\r\n                signOut(projectControlAuth)\r\n                    .then(() => {\r\n                        navigation.navigate('Login');\r\n                    })\r\n                    .catch((error) => {\r\n                        console.error('Error signing out:', error);\r\n                    });\r\n            }\r\n        } else {\r\n            signOut(projectControlAuth)\r\n                .then(() => {\r\n                    navigation.navigate('Login');\r\n                })\r\n                .catch((error) => {\r\n                    console.error('Error signing out:', error);\r\n                });\r\n        }\r\n    };\r\n\r\n    const subscribeToFieldChange = () => {\r\n        const userId = projectControlAuth.currentUser?.email;\r\n        if (userId) {\r\n            const userRef = doc(firestore, 'accounts', userId);\r\n            const unsubscribe = onSnapshot(userRef, handleDocumentChange);\r\n            return unsubscribe;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = subscribeToFieldChange();\r\n\r\n        return () => {\r\n            unsubscribe();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const currentUserEmail = getEmailOfCurrentUser();\r\n        if (currentUserEmail) {\r\n            getFieldValueByEmail(currentUserEmail);\r\n            setEmail(currentUserEmail)\r\n            const documentId = currentUserEmail;\r\n            listenForNameChange(documentId);\r\n        }\r\n    }, []);\r\n\r\n\r\n    const listenForNameChange = (documentId) => {\r\n\r\n\r\n        // To stop listening for updates, you can call unsubscribe()\r\n        // unsubscribe();\r\n    };\r\n\r\n    const getFieldValueByEmail = async (email) => {\r\n        try {\r\n            const accountDocRef = doc(firestore, 'accounts', email);\r\n            const accountDocSnapshot = await getDoc(accountDocRef);\r\n\r\n            if (accountDocSnapshot.exists()) {\r\n\r\n            } else {\r\n                // console.log('Document does not exist');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching field value:', error);\r\n        }\r\n    };\r\n\r\n\r\n    const handleSignOut = () => {\r\n        // Check if currentUser exists before signing out\r\n        if (projectControlAuth.currentUser) {\r\n            signOut(projectControlAuth).then(() => {\r\n                navigation.navigate('Login');\r\n                setEmail('');\r\n                setName('');\r\n            }).catch(() => {\r\n                // Handle any sign out errors here\r\n            });\r\n        } else {\r\n            // Handle the case where there is no user currently signed in\r\n            console.log('No user signed in to sign out');\r\n            // Optionally navigate to the login screen or show a message\r\n            navigation.navigate('Login');\r\n        }\r\n    }\r\n\r\n    // useEffect(() => {\r\n    //   const handleScreenResize = () => {\r\n    //     const screenWidth = Dimensions.get('window').width;\r\n    //     setIsMobileView(screenWidth < 1200);\r\n    //   };\r\n\r\n    //   // Initial check on component mount\r\n    //   handleScreenResize();\r\n\r\n    //   // Listen for screen dimension changes\r\n    //   Dimensions.addEventListener('change', handleScreenResize);\r\n\r\n    //   // Cleanup event listener on component unmount\r\n    //   return () => {\r\n    //     Dimensions.removeEventListener('change', handleScreenResize);\r\n    //   };\r\n    // }, []);\r\n\r\n    const showDrawerIcon = useBreakpointValue([true, true, true, false]);\r\n\r\n\r\n    const NamePopover = ({ name, handleSignOut }) => {\r\n        const [showNamePopover, setShowNamePopover] = useState(false);\r\n\r\n        const showPopover = () => {\r\n            setShowNamePopover(!showNamePopover);\r\n        };\r\n\r\n        return (\r\n            <Box w={[100, 200, 1020]} h={[10, 10, 10]} flex={1}>\r\n                <Flex direction=\"row-reverse\">\r\n                    <Popover\r\n                        isOpen={showNamePopover}\r\n                        trigger={(triggerProps) => (\r\n                            <Text color=\"white\" marginTop={[2, 2, 2]} fontSize={[17, 18, 20]} marginRight={[1, 3, 5]} {...triggerProps} onPress={showPopover}>\r\n                                <MaterialCommunityIcons name=\"account\" size={[20, 25, 30]} color=\"white\" /> {name} <Ionicons name=\"caret-down\" size={16} color=\"white\" />\r\n                            </Text>\r\n                        )}\r\n                        onClose={() => setShowNamePopover(!showNamePopover)}\r\n                        placement='bottom right'\r\n                        trapFocus={false}\r\n                    >\r\n                        <Popover.Content backgroundColor={'#7B9CFF'}>\r\n                            {/* <Popover.Arrow bgColor={'#7B9CFF'} /> */}\r\n                            <Popover.Body backgroundColor={'#7B9CFF'}>\r\n                                <Button _hover={{ bgColor: 'blueGray.500' }} onPress={handleSignOut} leftIcon={<MaterialCommunityIcons name=\"logout\" size={20} color=\"white\" />} bgColor={'transparent'}>\r\n                                    Logout\r\n                                </Button>\r\n                            </Popover.Body>\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                </Flex>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const styles = StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n        },\r\n        image: {\r\n            flex: 1,\r\n        },\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <NativeBaseProvider>\r\n                <View style={{ backgroundColor: \"#A6BCFE\", height: '100%', width: '100%', flexDirection: 'column', }} bgColor=\"#A6BCFE\" h=\"100vh\" w=\"full\" flexDirection=\"column\">\r\n                    {/* Header */}\r\n                    <Box\r\n                        px=\"3\"\r\n                        bgColor='#7b9cff'\r\n                        height={54}\r\n                        position=\"sticky\"\r\n                        top={0}\r\n                        zIndex={999}\r\n                        flexDirection=\"row\"\r\n                        alignItems=\"center\"\r\n                        borderBottomWidth={2}\r\n                        borderBottomColor={'cyan.500'}\r\n                    >\r\n\r\n                        <SideDrawer\r\n                            selectedScreen={selectedScreen} />\r\n\r\n                        <Box w={screenWidth <= 960 ? 0 : 850} h={[10, 10, 10, 10]} marginBottom={1.5} marginTop={1.5} paddingLeft={5}>\r\n\r\n                            <FastImage\r\n                                source={{\r\n                                    uri: 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FC-HUB%20LOGO%20FULL.png?alt=media&token=79ed34a5-f960-4154-b4e8-897b0f3248d4',\r\n                                    priority: FastImage.priority.high,\r\n                                }}\r\n                                resizeMode={FastImage.resizeMode.stretch}\r\n                                style={styles.image} />\r\n                        </Box>\r\n\r\n                        {/* {screenWidth <= 960 && <MobileViewDrawer\r\n                            selectedScreen={selectedScreen} />} */}\r\n\r\n\r\n                        <Box w={screenWidth <= 960 ? 120 : 0} h={screenWidth <= 960 ? 6 : 10} marginBottom={1.5} marginTop={1.5} marginLeft={[3, 3, 3, 10]}>\r\n\r\n                            <FastImage\r\n                                source={{\r\n                                    uri: 'https://firebasestorage.googleapis.com/v0/b/samplermj.appspot.com/o/C-HUB%20Logos%2FC-HUB%20LOGO%20HALF.png?alt=media&token=7ce6aef2-0527-40c7-b1ce-e47079e144df',\r\n                                    priority: FastImage.priority.high,\r\n                                }}\r\n                                resizeMode={FastImage.resizeMode.stretch}\r\n                                style={styles.image} />\r\n                        </Box>\r\n                        <NamePopover name={name} handleSignOut={handleSignOut} />\r\n\r\n\r\n                    </Box>\r\n\r\n                    {/* Content */}\r\n                    <View style={{ flex: 1, flexDirection: 'row' }} flex={[1]} flexDirection=\"row\">\r\n                        {/* Sidebar */}\r\n                        {/* <SideDrawer\r\n                            selectedScreen={selectedScreen} /> */}\r\n\r\n                        {/* Main Content */}\r\n                        {/* <Box flex={1} flexGrow={1} minHeight={0}> */}\r\n                        {/* Main Content Content */}\r\n\r\n\r\n                        {/* <Box px=\"3\" bgColor=\"#A6BCFE\" height=\"full\" > */}\r\n                        <View style={{ flex: 1, backgroundColor: \"#A6BCFE\", height: '100%' }}>\r\n                            <View style={{ flex: 1, margin: 10, }}>\r\n\r\n                                <View style={{\r\n                                    borderBottomWidth: 1,\r\n                                    borderColor: '#DADDE1',\r\n                                    width: '100%',\r\n                                    backgroundColor: 'white',\r\n                                    height: 60,\r\n                                    borderTopLeftRadius: 5,\r\n                                    borderTopRightRadius: 5,\r\n                                }}>\r\n                                    {/* Chat Header */}\r\n                                    <View style={{\r\n                                        flex: 1,\r\n                                        flexDirection: 'row',\r\n                                    }}>\r\n                                        <View style={{\r\n                                            flex: 1,\r\n                                            flexDirection: 'row',\r\n                                        }}>\r\n                                            <ScrollView scrollEnabled horizontal>\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'All messages'}\r\n                                                    title={'All messages'}\r\n                                                    onPress={() => handlePress('All messages', 0)}\r\n                                                    isActive={activeButton === 'All messages'}\r\n                                                    headerCount={\r\n                                                        unreadCount > 0 ?\r\n                                                            (<View style={{\r\n                                                                backgroundColor: '#FF0000',\r\n                                                                borderRadius: 100, // Half of width and height\r\n                                                                width: 20,\r\n                                                                height: 20, // Same as width for a perfect circle\r\n                                                                marginLeft: 10,\r\n                                                                justifyContent: 'center', // Center children vertically\r\n                                                                alignItems: 'center', // Center children horizontally\r\n                                                            }}>\r\n                                                                <Text style={{\r\n                                                                    color: 'white',\r\n                                                                    fontWeight: 700,\r\n                                                                    fontSize: 14,\r\n                                                                }}>{unreadCount > 9 ? `9+` : unreadCount}</Text>\r\n                                                            </View>) : (<></>)}\r\n                                                />\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Negotiation'}\r\n                                                    title={'Negotiation'}\r\n                                                    onPress={() => handlePress('Negotiation', 1)}\r\n                                                    isActive={activeButton === 'Negotiation'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Issued Proforma Invoice'}\r\n                                                    title={'Issued Proforma Invoice'}\r\n                                                    onPress={() => handlePress('Issued Proforma Invoice', 2)}\r\n                                                    isActive={activeButton === 'Issued Proforma Invoice'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Order Item'}\r\n                                                    title={'Order Item'}\r\n                                                    onPress={() => handlePress('Order Item', 3)}\r\n                                                    isActive={activeButton === 'Order Item'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Payment Confirmed'}\r\n                                                    title={'Payment Confirmed'}\r\n                                                    onPress={() => handlePress('Payment Confirmed', 4)}\r\n                                                    isActive={activeButton === 'Payment Confirmed'}\r\n                                                />\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Shipping Schedule'}\r\n                                                    title={'Shipping Schedule'}\r\n                                                    onPress={() => handlePress('Shipping Schedule', 5)}\r\n                                                    isActive={activeButton === 'Shipping Schedule'}\r\n                                                />\r\n\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Documents'}\r\n                                                    title={'Documents'}\r\n                                                    onPress={() => handlePress('Documents', 6)}\r\n                                                    isActive={activeButton === 'Documents'}\r\n                                                />\r\n\r\n                                                <HeaderButton\r\n                                                    key={'Vehicle Received'}\r\n                                                    title={'Vehicle Received'}\r\n                                                    onPress={() => handlePress('Vehicle Received', 7)}\r\n                                                    isActive={activeButton === 'Vehicle Received'}\r\n                                                />\r\n                                            </ScrollView>\r\n                                        </View>\r\n\r\n                                    </View>\r\n                                </View>\r\n\r\n                                <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                    {/* Chat Body */}\r\n\r\n                                    <View>\r\n\r\n                                        <View style={{ flex: 1, maxWidth: 380, minWidth: 380, borderRightWidth: 1, borderColor: '#DADDE1', maxHeight: 100, minHeight: 100, backgroundColor: 'white', }}>\r\n                                            {/* Chat Search */}\r\n                                            <View style={{ flex: 1, paddingHorizontal: 10 }}>\r\n                                                <SearchChat lastVisible={lastVisible} setLastVisible={setLastVisible} unreadButtonValue={unreadButtonValue} activeButtonValue={activeButtonValue} />\r\n                                                {/* <Pressable\r\n                                                variant=\"ghost\"\r\n                                                style={{\r\n                                                    padding: 3,\r\n                                                    width: 100,\r\n                                                    flexDirection: 'row', // Align items in a row\r\n                                                    alignItems: 'center', // Center items vertically\r\n                                                    borderRadius: 5,\r\n                                                }}\r\n                                                backgroundColor='#ECEDF0'\r\n                                                _hover={{ backgroundColor: '#d7d7d9' }}\r\n                                            >\r\n                                                <MaterialIcons name=\"mark-email-unread\" color=\"#1C2B33\" size={20} />\r\n                                                <Text style={{ color: '#1C2B33', marginLeft: 5 }}>Unreplied</Text>\r\n                                            </Pressable> */}\r\n                                                <View style={{ flex: 1, flexDirection: 'row', }}>\r\n                                                    <FilterButton\r\n                                                        key={'Unread'}\r\n                                                        title={'Unread '}\r\n                                                        onPress={() => handleUnreadPress('Unread')}\r\n                                                        isActive={activeFilterButton === 'Unread'}\r\n                                                        iconActive={<MaterialIcons name=\"mark-email-unread\" color=\"#0A78BE\" size={16} />}\r\n                                                        iconNotActive={<MaterialIcons name=\"mark-email-unread\" color=\"#1C2B33\" size={16} />}\r\n                                                    />\r\n\r\n                                                    <FilterButton\r\n                                                        key={'Read'}\r\n                                                        title={'Read '}\r\n                                                        onPress={() => handleReadPress('Read')}\r\n                                                        isActive={activeFilterButton === 'Read'}\r\n                                                        iconActive={<MaterialIcons name=\"mark-email-read\" color=\"#0A78BE\" size={16} />}\r\n                                                        iconNotActive={<MaterialIcons name=\"mark-email-read\" color=\"#1C2B33\" size={16} />}\r\n                                                    />\r\n\r\n                                                </View>\r\n\r\n                                            </View>\r\n                                        </View>\r\n\r\n                                        <View style={{ flex: 1, maxWidth: 380, minWidth: 380, borderRightWidth: 1, borderColor: '#DADDE1', backgroundColor: 'white', borderBottomLeftRadius: 5, }}>\r\n                                            {/* Chat List */}\r\n                                            <ChatList unreadButtonValue={unreadButtonValue} activeButtonValue={activeButtonValue} />\r\n                                        </View>\r\n\r\n                                    </View>\r\n\r\n                                    {chatMessageBoxLoading ? (\r\n                                        <View style={{ flex: 1, backgroundColor: 'white', justifyContent: 'center', alignItems: 'center', }}>\r\n                                            <Spinner\r\n                                                animating\r\n                                                size=\"lg\"\r\n                                                color={'#7B9CFF'}\r\n                                            />\r\n                                        </View>) : (\r\n                                        <View style={{ flex: 1, }}>\r\n\r\n                                            <View style={{ flex: 1, minHeight: 90, maxHeight: screenWidth < 1281 ? 130 : 125, borderBottomWidth: 1, borderColor: '#DADDE1', backgroundColor: 'white', justifyContent: 'center', }}>\r\n                                                {/* Chat Message Header */}\r\n                                                <ScrollView scrollEnabled horizontal>\r\n                                                    {chatMessagesData.length < 1 ? null : (<ChatMessageHeader />)}\r\n                                                </ScrollView>\r\n                                            </View>\r\n\r\n                                            <View style={{ flex: 1, borderColor: '#DADDE1', backgroundColor: 'white', borderBottomRightRadius: 5, paddingBottom: 5, }}>\r\n\r\n                                                <View style={{ flex: 1 }}>\r\n                                                    {/* Chat Message Box */}\r\n                                                    <ChatMessageBox activeButtonValue={activeButtonValue} userEmail={email} />\r\n                                                </View>\r\n\r\n                                                <View style={{ maxHeight: 180, justifyContent: 'flex-end', alignItems: 'center' }}>\r\n                                                    {/* Chat Input Text */}\r\n                                                    {chatMessagesData.length < 1 ? null : (<ChatInputText />)}\r\n                                                </View>\r\n\r\n                                            </View>\r\n\r\n                                        </View>)}\r\n\r\n\r\n\r\n\r\n                                </View>\r\n\r\n\r\n                            </View>\r\n                            {/* <SuccessModal /> */}\r\n\r\n                        </View>\r\n\r\n\r\n                        {/* </Box> */}\r\n\r\n                        {/* </Box> */}\r\n                    </View>\r\n\r\n                </View>\r\n                <LoadingModal />\r\n            </NativeBaseProvider>\r\n\r\n\r\n        </>\r\n    );\r\n}"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Dimensions","get","width","globalLastVisible","globalMessagesLastVisible","selectedScreen","globalSearchText","globalCustomerId","globalImageUrl","globalCustomerFirstName","globalCustomerLastName","globalAdditionalPriceArray","globalMessageTemplateSelectedTitle","formattedIssuingDate","projectControlAuth","currentUser","email","formattedDueDate","transactionModalTitle","transactionModalContentValue","ip","ipCountry","globalInvoiceVariable","carData","cfs","placeOfDelivery","departureCountry","departurePort","salesPerson","discharge","port","country","consignee","sameAsBuyer","name","address","contactNumber","fax","notifyParty","sameAsConsignee","paymentDetails","incoterms","inspectionIsChecked","inspectionName","warrantyIsCheck","warrantyAmount","fobPrice","freightPrice","insurancePrice","inspectionPrice","totalAmount","additionalName","additionalPrice","bankInformations","dueDate","issuingDate","bankAccount","paymentTerms","salesAgreement","firestore","getFirestore","getEmailOfCurrentUser","user","TimelineStatus","_ref","data","selectedChatData","useSelector","state","findIndex","item","stepIndicator","value","_jsx","View","style","flexDirection","alignItems","paddingTop","children","index","_jsxs","Tooltip","label","title","bgColor","_text","color","height","borderRadius","backgroundColor","justifyContent","FastImage","source","uri","require","priority","normal","tintColor","alignSelf","resizeMode","stretch","length","statusData","LoadingModal","loadingModalVisible","position","top","bottom","left","right","flex","display","Spinner","size","Text","HeaderButton","_ref2","onPress","isActive","headerCount","activeStyle","screenWidth","_useState","useState","_useState2","_slicedToArray","isHovered","setIsHovered","Pressable","onHoverIn","onHoverOut","focusable","_objectSpread","padding","marginVertical","borderWidth","borderColor","marginLeft","fontSize","fontWeight","textAlign","FilterButton","_ref3","iconActive","iconNotActive","_useState3","_useState4","variant","margin","SkeletonChatListLayout","_Fragment","marginRight","Array","from","_","subIndex","marginBottom","DeleteMessageTemplateYesNo","_ref4","handleDeleteMessageTemplateClose","deleteMessageTemplateVisible","selectedTitle","_useState5","_useState6","isDeleteLoading","setIsDeleteLoading","handleClose","deleteMessageTemplate","_ref5","_asyncToGenerator","titleToDelete","documentRef","doc","projectControlFirestore","docSnap","getDoc","exists","updatedTemplates","messageTemplate","filter","template","updateDoc","console","log","error","_x","apply","arguments","Modal","isOpen","onClose","Content","CloseButton","Header","Body","Footer","Button","Group","space","colorScheme","isLoading","MessageTemplateItem","_ref6","setOriginalTitle","titleInputRef","addVisible","valueInputRef","setAddVisible","textInputRef","setPopoverOpen","_useState7","_useState8","isTemplateItemHovered","setIsTemplateItemHovered","_useState9","_useState10","isTemplateMenuHovered","setIsTemplateMenuHovered","_useState11","_useState12","isTemplateEditHovered","setIsTemplateEditHovered","_useState13","_useState14","isTemplateDeleteHovered","setIsTemplateDeleteHovered","_useState15","_useState16","templateMenuOpen","setTemplateMenuOpen","_useState17","_useState18","_useState19","_useState20","setIsAddVisible","dispatch","useDispatch","current","numberOfLines","ellipsizeMode","Popover","trigger","triggerProps","Entypo","onEditPress","setDeleteMessageTemplateVisible","MessageTemplate","_ref7","_useState21","_useState22","isTemplateHovered","setIsTemplateHovered","_useState23","_useState24","isAddHovered","setIsAddHovered","_useState25","_useState26","popoverOpen","_useState27","_useState28","searchText","setSearchText","_useState29","_useState30","filteredData","setFilteredData","_useState31","_useState32","_useState33","_useState34","isCancelHovered","setIsCancelHovered","_useState35","_useState36","isSaveHovered","setIsSaveHovered","_useState37","_useState38","originalTitle","_useState39","_useState40","saveLoading","setSaveLoading","_useState41","_useState42","templateData","setTemplateData","searchInputRef","useRef","saveMessageTemplate","_ref8","_titleInputRef$curren","_valueInputRef$curren","messageTemplates","newTitle","newValue","push","setDoc","merge","handleCancelPressed","clear","useEffect","docRef","unsubscribe","onSnapshot","arrayFieldData","sort","a","b","titleA","toUpperCase","titleB","initialFocusRef","finalFocusRef","placement","_ref10","opacity","pressed","Ionicons","w","Arrow","TextInput","ref","placeholder","placeholderTextColor","underlineColorAndroid","outlineStyle","multiline","marginHorizontal","animating","textDecorationLine","keyboardType","onChangeText","text","filtered","toLowerCase","includes","FlatList","borderBottomLeftRadius","renderItem","_ref9","keyExtractor","toString","FileDisplay","_ref11","file","onRemove","type","MaterialIcons","MaterialCommunityIcons","high","cover","ChatInputText","_useState43","activeChatId","_useState44","isSendHovered","setIsSendHovered","_useState45","_useState46","selectedFile","setSelectedFile","_useState47","_useState48","selectedFilePreview","setSelectedFilePreview","_useState49","_useState50","selectedImage","setSelectedImage","_useState51","_useState52","imageUri","setImageUri","_useState53","_useState54","fileUri","setFileUri","_useState55","_useState56","fileName","setFileName","_useState57","_useState58","isSendImageHovered","setIsSendImageHovered","_useState59","_useState60","isSendAttachmentHovered","setIsSendAttachmentHovered","_useState61","_useState62","sendIsLoading","setSendIsLoading","removeImage","removeFile","selectFile","_ref12","maxFileSize","Platform","OS","Promise","reject","input","document","createElement","accept","onchange","files","alert","reader","FileReader","onload","target","result","focus","onerror","readAsDataURL","click","launchImageLibrary","mediaType","response","didCancel","errorCode","errorMessage","asset","assets","startsWith","fileSize","selectedImageUri","selectImage","_ref13","dataUrl","addFileMessage","_ref14","_textInputRef$current","datetime","axios","formattedTime","moment","format","formattedTimeForFile","inputValue","storage","getStorage","projectExtensionFirebase","fileUrl","fileRef","uploadResult","uploadBytes","getDownloadURL","addDoc","collection","projectExtensionFirestore","trim","sender","timestamp","url","lastMessageSender","lastMessage","lastMessageDate","customerRead","read","readBy","addImageMessage","_ref15","_textInputRef$current2","imageUrl","resizedImage","event","img","Image","src","canvas","ctx","getContext","drawImage","toBlob","blob","File","lastModified","Date","now","imageRef","addMessage","_ref16","_textInputRef$current3","handleSendMessage","overflow","marginTop","onKeyPress","nativeEvent","key","shiftKey","preventDefault","_ref17","_ref18","_ref19","ChatListItem","_ref20","messageUnread","formattedDate","_useState63","chatListData","_useState64","setImageUrl","_useState65","_useState66","_useState67","_useState68","textFirst","setTextFirst","_useState69","_useState70","textLast","setTextLast","_useState71","_useState72","isUnreadHovered","setIsUnreadHovered","_useState73","_useState74","_useState75","_useState76","carName","vehicle","updateChatToUnread","_ref21","setActiveChatId","setChatMessagesData","setSelectedChatData","folderName","stockID","carId","then","catch","docId","participants","customer","setSelectedCustomerData","loadingCondition","undefined","chatStepIconOn","chatStepIconOff","borderLeftColor","borderRightColor","borderLeftWidth","borderRightWidth","invoiceNumber","openDelay","ChatList","_ref22","unreadButtonValue","activeButtonValue","chatListLastVisible","loadMoreLoading","noMoreData","updateChatToRead","_ref23","arrayUnion","setChatMessageBoxLoading","messagesRef","messagesQuery","query","orderBy","limit","unsubscribeDoc","docSnapshot","dataWithId","invoiceDocRef","unsubscribeInvoice","invoiceDocSnapshot","invoiceDataWithId","setInvoiceData","unsubscribeMessages","querySnapshot","messages","forEach","docs","fetchChatMessages","handleChatPress","_ref24","customerId","chatId","_x2","_x3","_ref25","currentDate","formattedTimestamp","replace","givenDate","currentFormattedDate","getFullYear","getMonth","getDate","getTime","startOfWeek","setDate","getDay","setHours","toLocaleDateString","weekday","month","day","year","formatDate","initialNumToRender","maxToRenderPerBatch","windowSize","onEndReachedThreshold","removeClippedSubviews","ListFooterComponent","paddingVertical","borderTopWidth","onEndReached","nextQuery","setLoadMoreLoading","setTimeout","setNoMoreData","where","startAfter","snapshot","empty","chatsData","setChatListData","concat","_toConsumableArray","SearchChat","_ref26","lastVisible","setLastVisible","_useState77","_useState78","_useState79","_useState80","clearVisible","setClearVisible","searchData","_ref28","_ref27","_searchInputRef$curre","q","_objectDestructuringEmpty","searchValue","setLoadingModalVisible","_x4","setChatListSearchText","onSubmitEditing","_searchInputRef$curre2","_ref29","hovered","ModalAddBank","_useState81","_useState82","modalAddBankVisible","setModalAddBankVisible","_useState83","_useState84","setCancelHovered","_useState85","_useState86","setAddHovered","handleModalAddBankClose","bankNameRef","branchNameRef","swiftcodeRef","addressRef","accountHolderRef","accountNumberRef","addBankAccount","_ref30","_bankNameRef$current","_branchNameRef$curren","_swiftcodeRef$current","_addressRef$current","_accountHolderRef$cur","_accountNumberRef$cur","bankNameValue","elementToAdd","bankName","branchName","swiftCode","accountHolder","accountNumberValue","_defineProperty","FontAwesome","useRNModal","BankInformation","invoiceData","_useState87","_useState88","selectedDueDate","setSelectedDueDate","_useState89","_useState90","bankAccountsData","setBankAccountsData","_useState91","_useState92","selectedBank","setSelectedBank","paymentTermsRef","_paymentTermsRef$curr","date","dayOfWeek","adjustedDate","toISOString","split","bankAccounts","entries","_ref31","_ref32","subscribeToBankAccounts","_ref33","selectedDate","setSelectedDate","_useState93","_useState94","modalCalendarVisible","setModalCalendarVisible","handleModalCalendarOpen","handleModalCalendarClose","onFocus","Calendar","onDayPress","useCallback","dateString","markedDates","selected","disableTouchEvent","selectedDotColor","renderArrow","direction","enableSwipeMonths","initialDate","showSixWeeks","Select","selectedValue","onValueChange","selectedBankName","selectedBankObj","accessibilityLabel","_selectedItem","bg","endIcon","CheckIcon","paddingLeft","Item","defaultValue","PaymentDetails","fobPriceInput","freightInput","inspectionInput","insuranceInput","_useState95","_useState96","totalAmountCalculated","setTotalAmountCalculated","_useState97","insurance","_useState98","selectedIncoterms","setSelectedIncoterms","_useState99","inspection","_useState100","setInspectionIsChecked","_useState101","_useState102","_useState103","warranty","_useState104","warrantyIsChecked","additionalNameRef","warrantyPrice","additionalPriceRef","safelyParseNumber","number","Number","isNaN","calculateTotalAmount","_fobPriceInput$curren","_freightInput$current","_inspectionInput$curr","_insuranceInput$curre","freight","additionalPricesTotal","reduce","sum","total","Math","round","toLocaleString","_fobPriceInput$curren2","_freightInput$current2","_insuranceInput$curre2","join","freightCalculation","m3","dimensionCubicMeters","toFixed","fobPriceDollars","jpyToUsd","currency","parseFloat","usdToJpy","Checkbox","isChecked","onChange","filteredText","lines","filteredLines","line","filteredLine","parts","borderBottomWidth","SelectPortOfDischarge","_useState105","_useState106","countriesDischarge","_useState107","_useState108","portsData","setPortsData","_useState109","_useState110","nearestPorts","setNearestPorts","_useState111","_useState112","selectedPortCountry","setSelectedPortCountry","_useState113","_useState114","selectedCountry","_useState115","_useState116","selectedPort","setSelectedPort","fetchPorts","_ref35","sortedPorts","portName","sortOrder","fetchPortsData","_ref36","selectedCountryData","find","portData","SelectSalesPerson","_useState117","sales","_useState118","selectedSales","setSelectedSales","salesData","SelectPortOfDeparture","_useState119","_useState120","NotifyPartyInput","_ref37","accountData","setAccountData","_useState121","_useState122","setIsChecked","notifyPartyName","notifyPartyAddress","notifyPartyCity","notifyPartyCountry","notifyPartyContactNumber","notifyPartyFax","notifyPartyEmail","_notifyPartyName$curr","_notifyPartyAddress$c","_notifyPartyCity$curr","_notifyPartyCountry$c","_notifyPartyContactNu","_notifyPartyFax$curre","_notifyPartyEmail$cur","city","disabled","ConsigneeInput","_useState123","_useState124","_useState125","_useState126","consigneeName","consigneeAddress","consigneeCity","consigneeCountry","consigneeContactNumber","consigneeFax","consigneeEmail","fetchAccountData","_ref38","textStreet","textZip","textPhoneNumber","textEmail","ConfirmPaymentModalContent","selectedCustomerData","_useState127","_useState128","historyModalVisible","setHistoryModalVisible","_useState129","_useState130","isConfirmLoading","setIsConfirmLoading","totalAmountString","totalAmountNumber","inputAmountRef","fullPaymentMessage","_ref40","messageType","overBalanceMessage","_ref41","amount","_x5","paymentMessage","_ref42","transactionDate","_x6","_x7","confirmPayment","_ref43","amountNeeded","totalValue","docRefCustomer","newPayments","newPaymentsAccount","vehicleRef","referenceNumber","vehicleName","inputAmount","numericInputAmount","formattedInputAmount","delay","ms","overBalance","increment","payments","paymentsHistory","setTransactionModalVisible","payment","displayedAmount","fontWefight","Progress","shadow","max","_filledTrack","underline","selectable","_ref44","handleHistoryModalClose","sortedPayments","dateA","ScrollView","paddingHorizontal","maxHeight","borderBottomColor","paddingBottom","italic","IssueProformaInvoiceModalContent","_useState131","_useState132","isConfirmHovered","_useState133","_useState134","cfsInputRef","placeOfDeliveryInputRef","secretKey","invoiceMessage","_ref45","confirmInvoice","_ref46","yearSuffix","slice","collectionRef","getDocs","maxNumber","docName","parseInt","substring","docRefChatId","hashedData","hash","HmacSHA256","enc","Hex","stringify","createHmacSha256Hash","updateDocRef","cryptoNumber","keywords","_cfsInputRef$current","_placeOfDeliveryInput","ProfitCalculator","_useState135","_useState136","totalSCCAmount","setTotalSCCAmount","_useState137","_useState138","formattedTotalSCCAmount","setFormattedTotalSCCAmount","_useState139","_useState140","modalVisible","setModalVisible","_useState141","_useState142","_useState143","_useState144","totalProfitAmountDollars","setTotalProfitAmountDollars","inputPriceRef","_useState145","_useState146","_useState147","_useState148","_useState149","_useState150","lastFetchedPort","setLastFetchedPort","_ref47","currentPort","freightOrigPrice","_data$currentPort","kobePrice","nagoyaPrice","yokohamaPrice","kyushuPrice","fee","purchasedPrice","formattedPurchasedPrice","minimumFractionDigits","maximumFractionDigits","auctionFee","formattedAuctionFee","transportFee","formattedTransportFee","shippingAgentFee","formattedShippingAgentFee","cubicMeter","costPerCubicMeter","formattedCostPerCubicMeter","totalCubicMeterCostDollars","formattedTotalCubicMeterCostDollars","totalCubicMeterCostYen","formattedTotalCubicMeterCostYen","realTotalPriceYen","formattedRealTotalPriceYen","realTotalPriceDollars","formattedRealTotalPriceDollars","totalPriceCalculation","defaultInputPrice","_inputPriceRef$curren","inputPrice","totalAmountDollars","supplyChainsCostsData","expenseData","accumulator","currentValue","formattedTotalAmount","lineHeight","PreviewInvoice","previewInvoiceVisible","_useState151","_useState152","isPreviewHovered","setIsPreviewHovered","invoiceRef","_useState153","_useState154","_useState155","_useState156","capturedImageUri","setCapturedImageUri","_useState157","_useState158","vehicleImageUri","setVehicleImageUri","_useState159","_useState160","setFeaturesTrueCount","_useState161","_useState162","rerenderState","setRerenderState","countTrueValuesInCarData","count","field","values","captureImageAsync","_ref48","captureRef","quality","trueCount","convertImageToBase64","_ref49","fetch","ok","status","onloadend","message","_x8","base64String","_ref50","_ref51","_x9","captureImage","_ref52","createPDF","_ref53","element","imageData","html2canvas","scale","toDataURL","pdf","jsPDF","orientation","unit","imgProps","getImageProperties","pdfHeightFit","addImage","imageCompression","imageQuality","save","handleCaptureAndCreatePDF","_ref54","issuingDateString","dueDateString","issuingDateObject","dueDateObject","options","setPreviewInvoiceVisible","window","open","write","maxWidth","zIndex","NativeImage","QRCode","useGrouping","price","chassisNumber","exteriorColor","engineDisplacement","mileage","fuel","transmission","ExtendDueDateButton","_useState163","_useState164","_useState165","_useState166","setIsConfirmHovered","_useState167","_useState168","_useState169","_useState170","_useState171","_useState172","_useState173","_useState174","handleModalClose","handleConfirm","_ref55","confirmExtendDueDate","extendDueDateMessage","_ref56","_ref57","_ref58","_useState175","_useState176","TransactionModal","transactionModalVisible","TransactionButton","_ref60","buttonValue","transactionValue","colorHoverIn","colorHoverOut","_useState177","_useState178","ChatMessageHeader","freightPriceYen","paddingRight","modelCode","bold","FontAwesome5","ReadByListModal","_ref61","userEmail","handleReadByListModalClose","readByListModalVisible","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","ImagePreviewModal","_ref62","isVisible","contain","ChatMessageBox","_ref63","chatMessagesData","loadMoreMessagesLoading","noMoreMessagesData","_useState179","_useState180","isEyeHovered","setIsEyeHovered","flatListRef","_useState181","_useState182","hoveredImageIndex","setHoveredImageIndex","_useState183","_useState184","selectedImageIndex","setSelectedImageIndex","_useState185","_useState186","isPreviewVisible","setIsPreviewVisible","handleImageMessageMouseLeave","_useState187","_useState188","handleReadByListModalOpen","setReadByListModalVisible","animatedValue","Animated","Value","loop","sequence","timing","toValue","duration","useNativeDriver","start","interpolate","inputRange","outputRange","handleLoadMoreMessages","_ref64","setLoadMoreMessagesLoading","setNoMoreMessagesData","_ref65","handlePreviewInvoiceModalOpen","match","hours","getHours","formattedHours","amPm","substr","getMinutes","padStart","extractUsernameFromEmail","_email$split","renderItemText","isGlobalCustomerSender","urlPattern","RegExp","segments","segment","segmentWithBreaks","str","n","insertBreaks","isUrlForText","Linking","canOpenURL","supported","openURL","flexShrink","flexWrap","getFileIcon","iconSize","lowerFileName","endsWith","test","_ref66","isLastMessage","err","onMouseEnter","handleImageMessageMouseEnter","onMouseLeave","openPreview","StyleSheet","absoluteFillObject","inverted","ChatMessages","_useState189","_useState190","setEmail","navigation","useNavigation","chatMessageBoxLoading","chatListSearchText","loginName","_useState191","_useState192","setName","_useState193","_useState194","activeButton","setActiveButton","_useState195","_useState196","setActiveButtonValue","_useState197","_useState198","activeFilterButton","setActiveFilterButton","_useState199","_useState200","setUnreadButtonValue","_useState201","_useState202","readButtonValue","setReadButtonValue","_useState203","_useState204","_useState205","_useState206","unreadCount","setUnreadCount","fetchIpAndCountry","_ref67","fetchedIp","fetchedIpCountry","country_name","unrepliedQuery","handlePress","buttonTitle","buttonTitleValue","queryRef","buildQuery","onAuthStateChanged","navigate","handleDocumentChange","active","signOut","_projectControlAuth$c","userId","userRef","subscribeToFieldChange","currentUserEmail","getFieldValueByEmail","listenForNameChange","documentId","_ref68","accountDocRef","_x10","styles","useBreakpointValue","create","container","image","NativeBaseProvider","h","Box","px","SideDrawer","_ref69","handleSignOut","_useState207","_useState208","showNamePopover","setShowNamePopover","showPopover","Flex","trapFocus","_hover","leftIcon","borderTopLeftRadius","borderTopRightRadius","scrollEnabled","horizontal","minWidth","minHeight","prevState","borderBottomRightRadius"],"sourceRoot":""}